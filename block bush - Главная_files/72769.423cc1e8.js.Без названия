try{(self.webpackChunkvk=self.webpackChunkvk||[]).push([[72769],{40822:(e,t,i)=>{i.d(t,{dW:()=>u,pz:()=>d,tp:()=>h});var s=i(424700),r=i(361761),o=i(767211),n=i(326107),a=i(178009),c=i(839351),l=i(127327);function d(e,t){return(0,s.DK)(e,{url:"/al_page.php",params:{act:"verified_tt",type:t.type,oid:t.oid,force_new_tab:t.forceNewTab?1:0,with_action:t.withAction},slide:15,ajxdt:200,showdt:200,hidedt:200,dir:"auto",shift:t.shift&&t.shift.length?t.shift:[95,5,7],className:"verified_tt",forcetodown:t.forceToDown,appendEl:t.appendEl})}function u(e,t,i){if(cur._addRestoreInProgress)return;const c=(0,a.Q3)("_audio_row",e),d=(0,r.q)(c,!0);if(!d)return;const u=(0,a.r0)(e,"action"),h=(0,o.I)(u,d,c);if("snippet"===u){const t=l.P.ensure();if(t.isOpen)return;if(t.canShow())return void t.show(e)}const p={text:()=>h,black:1,shift:t||[7,4,0],needLeft:!0,forcetodown:i,noZIndex:!0};(0,n.__)(["_im_mess_stack","top_notify_wrap","_ape_audio_item","wk_history_audio_content"],(function(t,i){if((0,a.Q3)(i,e))return p.appendParentCls=i,!1})),(0,a.Q3)("_im_mess_stack",e)&&(p.shift=[7,10,0],p.noZIndex=!0);const _=e.closest(".CatalogBlock");_&&(p.appendEl=_),(0,s.DK)(e,p)}function h(e,t={}){(0,c.u)()||(0,s.DK)(e,{url:"al_wall.php",params:{act:"mention_tt",mention:e.getAttribute("mention_id"),from:"wall"},shift:t.shift||[52,7,7],hidedt:t.hidedt||500,showdt:500,needLeft:t.needLeft,slide:15,checkLeft:!0,reverseOffset:t.reverseOffset||112,dir:"auto",appendEl:t.appendEl||(0,a.QK)("im-page-history-w",e)||(0,a.QK)("rb_box_wrap",e)||(0,a.QK)("wk_cont",e)||(0,a.QK)("box_layout",e)||(0,a.QK)("scroll_fix_wrap",e)})}},874394:(e,t,i)=>{i.d(t,{P:()=>B});var s=i(178009),r=i(956905),o=i(424700),n=i(326107),a=i(407721),c=i(719273),l=i(890043),d=i(457735),u=i(917128),h=i(725308),p=i(799835),_=i(833291),v=i(313348),m=i(611579),g=i(2060),y=i(695029),b=i(981485);const f=(e,t,i)=>{if(!("number"==typeof t&&e instanceof HTMLElement&&e.classList.contains("PostBottomAction")))return;const s=(e=>{let t;switch(e){case v.j.comment:t=(0,p.Xo)("likes_comments_N_aria_short","raw");break;case v.j.like:t=(0,p.Xo)("likes_likes_N_aria_short","raw");break;case v.j.share:t=(0,p.Xo)("likes_shares_N_aria_short","raw")}return t})(i);if(!s)return;const r=(0,p.Q1)(t,s,!1);e.setAttribute("aria-label",r)};var k=i(830356),w=i(602882),C=i(878485),S=i(31312),P=i(444930),A=i(860656),T=i(136256);const L=e=>{const t=(0,A.b)("author-onboarding-tooltips",(()=>({isAuthorUserTooltipShown:!1,isAuthorGroupTooltipShown:!1})),{version:1}),i=S.L.AUTHOR_LIKE_ONBOARDING_HINT;(0,P.Y)().canShow(i)&&!t().isAuthorUserTooltipShown&&(t().isAuthorUserTooltipShown=!0,((e,t,i,s)=>{const{tooltip:r}=(0,T.s)(e,{content:t,onHideRequestSent:i,isServerSideHideDisabled:!0},{width:s,forceSide:"top",withCloseButton:!1,appendToParent:!0,autoAdjustToViewport:!1,offset:[2,-6],noAutoHideOnWindowClick:!1,cls:"feature_intro_tt feature_intro_blue_tt"});window.requestAnimationFrame((()=>r.show()))})(e,(0,p.Xo)("intro_hint_description_feed_author_like_onboarding"),(()=>(0,P.Y)().hideHelpHint({hintId:i})),225))};var I=i(232494),O=i(810722),D=i(850013),E=i(377399),Y=i(839351),N=i(9467),x=i(379494),j=i(161933),F=i(702931),R=i(2096),M=i(452200);const B={toggle(e,t,i,o){if((0,r.TL)(t),(0,n.Gv)(window.cur)&&(0,n.Tn)(cur.viewAsBox))return cur.viewAsBox();if(vk.widget&&!vk.id)return window.Widgets.oauth();const a=(0,s.nB)(e,"active");(0,s.iQ)(e,"animate"),this.clientUpdate(i,v.j.like,a?-1:1,!a),this.handleAuthorLikeInReply(i,e,a);const{objectType:c}=(0,_.L1)(i),l=(0,_.HX)(c),d=l?(0,k.CM)():void 0,u={act:a?"a_do_unlike":"a_do_like",object:i,hash:o,list:cur.pvListId,wall:2,from:this._getReference(i),from_widget:vk.widget?1:0,track_code:d,event_subtype:(0,I.N)()},h=()=>(setTimeout((()=>{(0,s.p1)(e,"active",a),this.clientUpdate(i,v.j.like,a?1:-1,a),this.handleAuthorLikeInReply(i,e,!a)}),500),!1);window.ajax.post("like.php",u,{onDone:t=>{if(t.unauth_action_box)return h(),void(0,b.k)(t.unauth_action_box,{onLogin:l?window.VideoShowcase?.login:void 0});this.update(i,t);const s=i.match(/^(wall|market)(.*)/);s&&cur.onLike&&cur.onLike(e,s[1],s[2],a),this.handleAuthorLikeInReply(i,e,a,t)},onFail:h});const p=(0,n.Jk)((0,s.r0)(e,"count")),m=(0,j.hS)()&&["clip","video_comment"].includes(c);p>0?(0,x.P)()||m||B.showLikes(e,i,{fast:!0}):e.tt&&e.tt.destroy&&e.tt.destroy()},_getReference:e=>cur.pvShown?"photo_viewer":e===cur.wallLayer?"wkview":window.mvcur&&window.mvcur.mvShown?"videoview":cur.wallType?"feed"===cur.wallType?"news"===cur.section?`feed_${cur.subsection?cur.subsection:cur.section}`:"recommended"===cur.section?"feed_recommended"+("recent"!==cur.subsection?"_"+cur.subsection:""):(0,n.RV)(cur.section,["friends","groups","videos","photos"])?"feed_"+(cur.subsection?"_"+cur.subsection:""):`feed_${cur.section}`:"top"===cur.wallType?"wall_top":"wall_"+(cur.onepost?"one":(cur.wallType||"").indexOf("full_")?"page":"full"):cur.module,share(e,t={},s=void 0){if(vk.widget&&!vk.id&&!(0,Y.u)())return window.Widgets.oauth();const{objectType:r,objectId:o}=(0,_.L1)(e),a=(0,_.W9)(r);if((0,j.hS)()&&1===t.new_share_modal&&a){const{ownerId:s,id:n}=(0,M.v)(o);return void Promise.all([i.e(71559),i.e(67878),i.e(46559),i.e(99758),i.e(24814),i.e(25901),i.e(25426),i.e(32772),i.e(82960),i.e(92877),i.e(52462),i.e(8076),i.e(51246),i.e(64755),i.e(5992),i.e(97204),i.e(97513),i.e(46874),i.e(99056),i.e("langs/core_spa/VideoShareModal")]).then(i.bind(i,594877)).then((({showVideoShareModal:i})=>{i({itemId:n,ownerId:s,onEmbedClick:()=>{delete t.new_share_modal,this.share(e,t)},onClose:()=>(0,R.kI)()?.hide(),urlPart:"/"+r,videoUrl:(0,N.z2)("video_share_hash_user_id")&&t.share_url||"",accessKey:t.list})}))}if((0,n.Gv)(window.cur)&&(0,n.Tn)(cur.viewAsBox))return cur.viewAsBox();if(window.cur){const e=(0,w.J8)(s);window.cur.shareButtonTrackCode=e}const c=(0,_.HX)(r);if((vk.widget?window.showBox:u.rL)("like.php",{act:"publish_box",object:e,from_widget:vk.widget?1:0,...t},{onDone:(e,t)=>{t.unauth_action_box&&(e.hide(),(0,b.k)(t.unauth_action_box,{onLogin:c?window.VideoShowcase?.login:void 0}))},stat:[window.jsc("web/page.js"),"page.css",window.jsc("web/wide_dd.js"),"wide_dd.css",window.jsc("web/sharebox.js")]}),"wall"===r&&window.Wall&&window.Wall.triggerAdPostStat(o,"share_post"),"clip"===r&&(0,O.VO)(D.LB.SHARE_OUT),t?.trackCode&&(r===E.k.CLIP||r===E.k.VIDEO)){const{ownerId:e,id:s}=(0,M.v)(o),n={track_code:t?.trackCode??"",id:parseInt(s),owner_id:parseInt(e),type:r===E.k.CLIP?E.k.CLIP:E.k.VIDEO};Promise.all([i.e(97126),i.e("langs/core_spa/WebDI")]).then(i.bind(i,520365)).then((({ensureDIRootWebContainer:e})=>{e().resolve(F.m).sendVideoSharingOpen(n,"modal_sharing_embed_open")}))}cur.RpcMethods&&(cur.RpcMethods.likeFullUpdate=t=>B.update(e,window.cleanObj(t)))},clientUpdate(e,t,i,r){const o=this._getButtonsByType(e,t);if(!o.length)return;const a=(0,n.Jk)((0,s.r0)(o[0],"count"))+i;this._updateDom(e,t,a,r),this.updateExternalIndex(e,{type:t,count:a,isActive:r})},update(e,t){if(!isNaN(parseInt(t.like_num))){const i=(0,n.b0)(t.like_my)?void 0:!!(0,n.Jk)(t.like_my);this._updateDom(e,v.j.like,t.like_num,i,t.like_title,t.like_from_group),this.updateExternalIndex(e,{type:v.j.like,count:t.like_num,isActive:i})}if(!isNaN(parseInt(t.share_num))){const i=(0,n.b0)(t.share_my)?void 0:!!(0,n.Jk)(t.share_my);this._updateDom(e,v.j.share,t.share_num,i,t.share_title),this.updateExternalIndex(e,{type:v.j.share,count:t.share_num})}if((0,a.kf)(t.views_num)&&this._updateDom(e,v.j.views,t.views_num,void 0,t.views_title),(0,a.kf)(t.comment_num)&&this._updateDom(e,v.j.comment,t.comment_num),t[m.TJ]){const i=!!t.isQueueUpdate;(0,y.K)(e,t[m.TJ],void 0,{isQueueUpdate:i,isUserAction:!1,previewVisibility:g.Zr})}},updateComments(e,t){this.update(e,{comment_num:t})},_updateDom(e,t,i,r,o,c){const d=this._getButtonsByType(e,t),u=t===v.j.views;if(!d?.length)return;let h="";u?h=i:i>0&&(h=vk.widget?(0,a.B4)(i):(0,p.Q1)(i,"%s",!0)),u||(i=(0,n.Jk)(i));for(let e=0;e<d.length;e++){const a=d[e];if((0,s.nB)(a,"no_counter"))continue;const m=u?d[e]:(0,_.xM)(d[e]);if((0,l.Ti)(m,h,{str:"auto",noWrapWidth:!u,noSpaceIfEmpty:!0}),(0,s.p1)(a,"empty",i<=0),"boolean"==typeof r&&(0,s.p1)(a,"active",r),(0,s.CF)(d[e],"data-count",i),(0,s.CF)(a,"data-combine")){const e=r?(0,p.Xo)("global_dislike"):`${(0,p.Xo)("global_like")}${i?" "+i:""}`;(0,s.CF)(a,"title")!==e&&(0,s.CF)(a,"title",e)}f(a,i,t),u&&a?.closest?.(".like_views")?.setAttribute("title",o||"");const g=d[e].tt;if(g){const e=(0,s.ON)(g.container,"_content"),l=(0,s.ON)(g.container,"_value"),d=(0,s.ON)(g.container,"_title"),u=(0,s.ON)(g.container,"like_tt_group_like"),h=(0,n.Jk)((0,s.q_)(l));if((0,s.q_)(l,i),o&&(0,s.q_)(d,o),(0,n.Gv)(g)&&(g.likeInvalidated=!0),(h!==i&&h<7||!1===o)&&(t===v.j.like?a.needReinitLikesTT=!0:t===v.j.share&&(a.needReinitShareTT=!0)),t===v.j.like&&(0,s.p1)(e,"me_hidden",!r),!1===o&&g.destroy&&g.destroy(),void 0!==c&&u){const e="like_tt_group_like_hidden";c?u.classList.remove(e):u.classList.add(e)}}}},_getButtonsByType:(e,t)=>(0,s.hU)(`._like_${e} ._${t}, ._like_${e} [data-like-button-type="${t}"]`),showLikes(e,t,i={}){if(!e||!(e instanceof HTMLElement)||e.postDontShowLikes)return;if(vk.widget&&vk.show_external_auth_box)return;let r=i.views?{views:1}:i.share?{published:1}:{};i.listId&&(r.list=i.listId),i.like_hash&&(r.like_hash=i.like_hash),i.like_stats_params&&Object.assign(r,i.like_stats_params);const a=!!(0,s.vo)("share",(0,s.Q3)("like_wrap",e));let l=document.body,d=!1;const u=getComputedStyle(e),h=(0,n.Jk)(u.getPropertyValue("padding-left").replace("px","")),p=(0,n.Jk)(u.getPropertyValue("padding-top").replace("px","")),v=(0,_.f8)(e);let m=40;"wpost"===i.from&&(m=24);const g=[m-(0,s.YC)(v)[0]/2-h,10-p];let y=i.cl||"";if(i.share)y+="likes_tt_share";else if(y+="likes_tt_like","widget_community"===i.from)g[0]=6;else if("wcomments"===i.from||"widget_comments"===cur.wallType){const t=16,i=10;g[0]=(0,s.YC)(e)[0]+t-(0,s.YC)(v)[0]/2-i}else"photo_carousel"===i.from&&(g[1]=10);if(!!i?.isFromReactionsPreview){const t=e.querySelector("._ReactionsPreview__itemsContainer");if(t){const e=t.querySelector(".ReactionsPreviewItem"),i=(0,s.RP)(e,!1),r=(i.width||0)/2;let o=r;l=t;i.left+i.width/2>window.innerWidth/2&&(d=!0,o=t.offsetWidth-r),g[0]=-o+m}}let b,f;i.share?(b="needReinitLikesTT",f="resetLikesTTTimer"):(b="needReinitShareTT",f="resetShareTTTimer"),clearTimeout(e[f]),(0,o.DK)(e,{url:"/like.php",params:(0,c.X)({act:"a_get_stats",object:t,has_share:a?1:""},r),appendEl:l,slide:15,shift:g,ajaxdt:i.fast?0:100,showdt:i.fast?0:400,hidedt:200,dir:"auto",checkLeft:!0,needLeft:d,reverseOffset:80,noZIndex:!0,hasover:!0,tip:{over:()=>{B.showLikes(e,t,i)}},typeClass:"like_tt",className:y,onHide:()=>{clearTimeout(e[f]),e[b]&&(e[f]=setTimeout((()=>{delete e[b],e.tt&&e.tt.destroy&&e.tt.destroy()}),200))}})},showShare:function(e,t,i){B.showLikes(e,t,(0,c.X)(i,{share:1}))},updateViews:(e,t)=>{vk.widget&&vk.show_external_auth_box||window.ajax.post("like.php",{act:"a_get_stats",object:e,views:1},{cache:1,onDone(t,i){const r=(0,s.ce)("div",{innerHTML:i});B._updateDom(e,v.j.views,t,void 0,r.innerText||r.textContent)}})},makeTemplate(e,t){if(!e)return"";(t=(0,c.X)({buttons_prepend:"",object_raw:"",likes_count:"",liked:!1,share_count:"",shared:"",views_count:"",share_opts:{},like_opts:{},class_name:"",like_cont_class:"",like_class_name:"",[m.TJ]:"",reactions_class_name:""},t)).like_active=t.liked?"active":"",t.share_active=t.shared?"active":"",t.comment_active="",t.likes_formatted_count=t.likes_count>0?(0,p.Q1)(t.likes_count,"%s",!0):"",t.share_formatted_count=t.share_count>0?(0,p.Q1)(t.share_count,"%s",!0):"",t.share_opts=this._convertOptsToString(t.share_opts),t.like_opts=this._convertOptsToString(t.like_opts),t.like_class_name+=t.likes_count>0?"":" empty",t.share_class_name=t.share_count>0?"":"empty";const i=t[m.TJ],r=!!i&&Object.values(i).some((e=>!!e));return t.reactions_class_name+=r?"":" PostBottomAction--empty",(0,s.rs)(e,t)},_convertOptsToString:e=>JSON.stringify(e).replace(/\"/g,"'"),updateExternalIndex(e,t={}){const{objectType:i,objectId:s}=(0,_.L1)(e);switch(i){case"photo":if(!cur.pvShown||!cur.pvCurPhoto||cur.pvCurPhoto.id!==s)return;const e=cur.pvListId,i=cur.pvIndex,r=cur.pvData[e][i];t.type===v.j.like?(r.likes=t.count,r.liked=t.isActive,cur.pvCommsLikes[r.id][1]=t.count):t.type===v.j.share&&(r.shares=t.count);break;case"video":if(window.mvcur&&window.mvcur.mvShown&&window.mvcur.videoRaw===s&&t.type===v.j.like){const e=window.Videoview.getMvData();e.likes=t.count,void 0!==t.isActive&&(e.liked=t.isActive,window.Videoview.playerOnLiked(t.isActive),window.Videoview.recache())}break;case"clip":t.type===v.j.like&&window.Videoview.playerOnLiked(t.isActive)}},showLikesList(e,t){cur.viewAsBox||(0,s.nB)((0,s.Q3)("like_btn",e),"no_counter")||(0,d.u)({w:"likes/"+(0,n.uH)(t)},!1,!1,{queue:1})},showSharesList(e,t){cur.viewAsBox||(0,s.nB)((0,s.Q3)("like_btn",e),"no_counter")||(0,d.u)({w:"shares/"+(0,n.uH)(t)},!1,!1,{queue:1})},handleAuthorLikeInReply(e,t,i,s){const{objectId:r}=(0,_.L1)(e),o=(0,C.ky)(t),n=Number(o?.dataset?.postAuthorId),a=o?.querySelector(`.reply#post${r}`)?.querySelector(".HighlightingAuthorLike");if(!a||!h.z.isUserId(n)||vk.id!==n)return;const c="HighlightingAuthorLike--hidden";(s?s.like_my:!i)?(a.classList.remove(c),s&&L(a)):a.classList.add(c)}}},881874:(e,t,i)=>{i.d(t,{U:()=>s});var s=function(e){return e.play="play",e.view="view",e.action="action",e.nav="nav",e}({})},220866:(e,t,i)=>{i.d(t,{GR:()=>o,uM:()=>n});var s=i(815287);const r=(0,s.createContext)({}),o=r.Provider;function n(){const{payload:e,...t}=(0,s.useContext)(r);return{...e,...t}}},171854:(e,t,i)=>{i.d(t,{x:()=>s});const s=(0,i(32489).createDomain)()},153119:(e,t,i)=>{i.d(t,{U:()=>o,t:()=>r});var s=i(32489);const r=(0,s.createEvent)(),o=(0,s.createEvent)()},491035:(e,t,i)=>{i.d(t,{D:()=>s});const s=i(171854).x.createEvent()},216626:(e,t,i)=>{i.d(t,{r:()=>o});var s=i(799835),r=i(326107);const o=(e=0,t=!1)=>{if(!e)return"";const i=3600,o=1e3*e,n=new Date(o),a=new Date,c=(Date.now()-n.getTime())/1e3,l=n.getFullYear(),d=n.getMonth();if(c<5)return(0,s.Xo)("mobile_profile_status_just_now");if(c<60)return(0,s.Xo)("mobile_profile_status_secs_ago",Math.ceil(c));if(c<i){const e=Math.ceil(c/60),t=(0,s.Xo)("mobile_profile_status_word_mins_ago","raw");return(0,r.cy)(t)&&e<t.length?t[e]:(0,s.Q1)(e,(0,s.Xo)("mobile_profile_status_mins_ago","raw"))}if(c/i<5){const e=Math.ceil(c/i),t=(0,s.Xo)("mobile_profile_status_word_hours_ago","raw");return(0,r.cy)(t)&&e<t.length?t[e]:(0,s.Q1)(e,(0,s.Xo)("mobile_profile_status_hours_ago","raw"))}const u=a.getFullYear(),h=a.getMonth(),p=t?(0,s.Xo)("months_of","raw"):(0,s.Xo)("months_sm_of","raw");return l<u&&(h>1||d<9||u-l>=2)?(0,s.rF)(o,(0,s.Xo)("global_date","raw"),0,p):(0,s.rF)(o,(0,s.Xo)("global_short_date_time","raw"),0,p)}},533520:(e,t,i)=>{i.d(t,{v:()=>l});var s=i(799835),r=i(956250);const o=1024,n=Math.pow(o,2),a=Math.pow(o,3),c=Math.pow(o,4);function l(e){let t=0,i="";return e>c?(t=Math.round(e/c*1e3)/1e3,i=(0,s.Xo)("global_tb")):e>a?(t=Math.round(e/a*100)/100,i=(0,s.Xo)("global_gb")):e>n?(t=Math.round(e/n*10)/10,i=(0,s.Xo)("global_mb")):(t=Math.round(e/o),i=(0,s.Xo)("global_kb")),`${(0,r.Z)(t)} ${i}`}},127327:(e,t,i)=>{i.d(t,{P:()=>O});var s=i(434518),r=i(763812),o=i(618298),n=i(843165);const a="audio_preview_tooltip_show_date_time";var c=i(881874),l=i(969152),d=i(377399),u=i(740981),h=i(850013),p=i(17697),_=i(220617),v=i(188166);const m=e=>{if(!e.audio)return{event_category:e.eventCategory};const{trackCode:t,id:i,ownerId:s,albumId:r}=e.audio;return{track_code:t,audio_id:i,audio_owner_id:s,playlist_id:r,playlist_owner_id:void 0,audio_id_new:e.audioAddedId||void 0,timeline_position:e.timelinePosition,playback_duration:e.playbackDuration,volume:Math.round(100*e.volume),audio_length:e.snippetLength,event_category:e.eventCategory}};let g=null;class y{static ensure(){return g||(g=new y,g)}start(e){const t=m({...e,eventCategory:c.U.play});this.actionStatCollector.logEvent({type:l.l.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[l.l.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{event_type:d.k.START,event_subtype:u.C.AUDIO_LONGTAP,...t}})}openModal(e){this.audio=e.audio;const t=m(e);this.sendView(d.k.OPEN,u.C.AUDIO_LONGTAP_OPEN,c.U.view,t)}addTrack(e){const t=m({...e,eventCategory:c.U.action});this.actionStatCollector.logEvent({type:l.l.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[l.l.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{event_type:d.k.ADDED,event_subtype:u.C.AUDIO_ADD_AFTER_LONGTAP,...t}})}tipHasShown(){this.sendView(d.k.HINT,u.C.AUDIO_LONGTAP_HINT,c.U.view)}closeBy(e,t){if(!this.audio)return;const i=m({...t,audio:this.audio,eventCategory:c.U.play});this.actionStatCollector.logEvent({type:l.l.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[l.l.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{event_type:d.k.STOP,event_subtype:e,...i}}),this.audio=null}goToTrack(e){this.audio=e.audio;const t=m(e);this.sendView(d.k.LONGTAP_DRILLDOWN,u.C.AUDIO_LONGTAP_GO_TO_TRACK,c.U.nav,t)}goToArtist(e){this.audio=e.audio;const t=m(e);this.sendView(d.k.LONGTAP_DRILLDOWN,u.C.AUDIO_LONGTAP_GO_TO_ARTIST,c.U.nav,t)}sendView(e,t,i,s){const r={type:h.Ij.TYPE_CATALOG_AUDIO_LONGTAP_ITEM,[h.Ij.TYPE_CATALOG_AUDIO_LONGTAP_ITEM]:{...s,event_type:e,event_subtype:t,event_category:i}},o={type:e,track_code:s?.track_code};this.viewCollector.logEvent(r,o)}constructor(){this.audio=null,this.productCollector=new p.H,this.viewCollector=new _.$(this.productCollector),this.actionStatCollector=new v.C(this.productCollector)}}var b=i(444930),f=i(31312),k=i(860656),w=i(855239);var C=(0,r._)("_audioPage"),S=(0,r._)("_hint"),P=(0,r._)("_tooltip"),A=(0,r._)("_isOpen"),T=(0,r._)("_disabled"),L=(0,r._)("_isUserAuthorized"),I=(0,r._)("_getTooltip");class O{getHints(){(0,s._)(this,L)[L]&&(0,s._)(this,C)[C].isInitialized&&(0,b.Y)().getHelpHintsFx()}getHint(){const e=(0,b.Y)().$helpHints.getState()[f.L.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB];return(0,s._)(this,S)[S]=e||null,(0,s._)(this,S)[S]}canShow(){if((0,s._)(this,T)[T])return!1;let e=!1;if(this.getHint()){const t=n.uP.getItem(a),i=t?JSON.parse(t):null,s=i?i.firstShow:null;if(s){const t=new Date(+s).getTime(),r=(new Date).getTime(),o=Math.abs(r-t),c=Math.ceil(o/864e5);if(c<=3&&i?.disabledDay!==c){e=!0;const t={firstShow:s,disabledDay:c};n.uP.setItem(a,JSON.stringify(t))}i?.disabledDay===c&&(e=!1)}else{e=!0;const t={firstShow:(new Date).getTime(),disabledDay:1};n.uP.setItem(a,JSON.stringify(t))}}return e}async show(e){e&&((0,s._)(this,P)[P]=(0,s._)(this,I)[I](e),(0,s._)(this,P)[P]&&((0,s._)(this,P)[P].show(),(0,s._)(this,A)[A]=!0,y.ensure().tipHasShown()))}disable(){this.getHint()&&(0,b.Y)().hideHelpHint({hintId:f.L.ACCOUNT_HINT_AUDIO_LONG_TAP_PREVIEW_WEB}),(0,s._)(this,T)[T]=!0}get isOpen(){return(0,s._)(this,A)[A]}constructor({audioPage:e}){Object.defineProperty(this,L,{get:D,set:void 0}),Object.defineProperty(this,I,{value:E}),Object.defineProperty(this,C,{writable:!0,value:void 0}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,T,{writable:!0,value:void 0}),(0,s._)(this,A)[A]=!1,(0,s._)(this,T)[T]=!1,(0,s._)(this,C)[C]=e}}function D(){return Boolean(window?.vk?.id)}function E(e){const t={autoShow:!1,cls:"feature_intro_tt feature_intro_blue_tt feature_info_tooltip audio_snippet_tooltip",content:(0,s._)(this,S)[S]?.title,align:"right",centerShift:8,appendTo:document.body,autoAdjustToViewport:!0,noAutoHideOnWindowClick:!0,autoHide:!0,onHide:()=>{(0,s._)(this,A)[A]=!1,(0,s._)(this,P)[P]?.destroy()},width:286},i=new o.S(e,t);return window.cur?.destroy?.push((()=>{i?.destroy()})),i}O.ensure=(0,k.b)("AudioLongtapTooltip",(()=>new O({audioPage:w.U.ensure()})),{version:1})},232494:(e,t,i)=>{i.d(t,{N:()=>o,s:()=>n});var s=i(850013),r=i(17990);function o(){return(0,r.b)()?s.Cq.POST_MODAL:""}function n(){return(0,r.b)()?s.Cq.POST_MODAL:s.Cq.WALL_ITEM}},17990:(e,t,i)=>{i.d(t,{b:()=>s});const s=()=>Boolean(window.wkcur?.shown)},2060:(e,t,i)=>{i.d(t,{Bw:()=>d,HN:()=>l,IM:()=>r,LH:()=>u,Vw:()=>c,Zr:()=>n,id:()=>o,zo:()=>a});var s=i(533495);const r=e=>e===s.rx,o=e=>e===s.c7,n={kind:"useCurrent"},a=e=>e.kind===s.rx,c=e=>e.kind===s.c7,l=e=>"useCurrent"===e.kind,d=e=>e?{kind:e}:n,u=e=>s.xk.includes(e)?e:void 0},533495:(e,t,i)=>{i.d(t,{c7:()=>r,rx:()=>s,xk:()=>o});const s="action_status_bar",r="hidden",o=[s,r]},611579:(e,t,i)=>{i.d(t,{Bv:()=>s,TJ:()=>r});const s={wall:"wall",wall_reply:"wall_reply"},r="reactions_counts"},371986:(e,t,i)=>{i.d(t,{f8:()=>o,iT:()=>n,YT:()=>r});const s="counts_with_current_reaction",r=(e,t)=>({kind:s,...e,reactionIdState:{reactionId:t.id}}),o=e=>e.kind===s,n=e=>({kind:"counts_only",...e})},695029:(e,t,i)=>{i.d(t,{K:()=>a});var s=i(833291),r=i(611579),o=i(797272),n=i(371986);const a=(e,t,i,a)=>{const c=(0,s.L1)(e);c&&c.objectType===r.Bv.wall&&c.objectId?(0,o.c)(o.sx.post_reactions_counts_update,function(e,t,i,s){const r={counts:e,isFromWkLayer:t?.isFromWkLayer,isPrimaryLikeButtonClick:t?.isPrimaryLikeButtonClick,isQueueUpdate:t?.isQueueUpdate,isUserAction:t.isUserAction,postFullId:i.objectId,previewVisibility:t.previewVisibility,reactionIdState:s?{reactionId:s.id}:void 0,suggestSubscribe:t.suggestSubscribe,isAfterWkLayerClose:t.isAfterWkLayerClose};return s?(0,n.YT)(r,s):(0,n.iT)(r)}(t,a,c,i)):c&&c.objectType===r.Bv.wall_reply&&c.objectId?(0,o.c)(o.sx.reply_reactions_counts_update,{counts:t,replyFullId:c.objectId,reactionIdState:i?{reactionId:i.id}:void 0}):console.warn("Unsupported reactions object update",e)}},383624:(e,t,i)=>{i.d(t,{X:()=>r,l:()=>d});var s=i(815287),r=(i(718254),function(e){return e.LAYER="layer",e.LAYER_PURCHASE_DETAILS="layer_purchase_details",e.RANDOM_SELECTOR="random_selector",e.RANDOM_SELECTOR_PACKS="RANDOM_SELECTOR_packs",e.RANDOM_SELECTOR_RESULT="RANDOM_SELECTOR_result",e}({}));const o=(0,s.lazy)((()=>Promise.all([i.e(70609),i.e(78410),i.e(26537),i.e(44836),i.e(25701),i.e(52731),i.e("langs/core_spa/stickers-layer-view")]).then(i.bind(i,663204)).then((({Layer:e})=>({default:e}))))),n=(0,s.lazy)((()=>Promise.all([i.e(16846),i.e("langs/core_spa/stickers-layer-purchase-details-view")]).then(i.bind(i,377183)).then((({PurchaseDetails:e})=>({default:e}))))),a=(0,s.lazy)((()=>Promise.all([i.e(70609),i.e(26537),i.e(33557),i.e(64273),i.e("langs/core_spa/stickers-random-selector-view")]).then(i.bind(i,521825)).then((({Main:e})=>({default:e}))))),c=(0,s.lazy)((()=>Promise.all([i.e(33557),i.e(12318),i.e("langs/core_spa/stickers-random-selector-packs-view")]).then(i.bind(i,481981)).then((({Packs:e})=>({default:e}))))),l=(0,s.lazy)((()=>Promise.all([i.e(33557),i.e(71409),i.e("langs/core_spa/stickers-random-selector-result-view")]).then(i.bind(i,164892)).then((({Result:e})=>({default:e}))))),d=new Map([["layer",{Component:o,width:640}],["layer_purchase_details",{Component:n}],["random_selector",{Component:a}],["RANDOM_SELECTOR_packs",{Component:c}],["RANDOM_SELECTOR_result",{Component:l}]])},718254:(e,t,i)=>{var s=i(32489),r=i(181048),o=i(153119);const n=(0,s.createEffect)((({title:e,subtitle:t,action:i,timeout:s,onClose:o})=>{(0,r.td)({text:e,subtitle:t,timeout:s,action:i,onClose:o})}));(0,s.sample)({clock:o.t,target:n});const a=(0,s.createEffect)((e=>{(0,r.Ui)(e)}));(0,s.sample)({clock:o.U,target:a})},362392:(e,t,i)=>{i.d(t,{e:()=>a});var s=i(221020),r=i(383624),o=i(220866),n=i(432317);async function a(e){const{view:t,modalBoxOptions:i}=e,{width:a,Component:c}=r.l.get(t)||{};if(c)return(0,n.tM)((({onClose:t,refreshCoordinates:i})=>(0,s.Y)(o.GR,{value:{payload:{},...e,init:i,destroy:t},children:(0,s.Y)(c,{})})),{width:a,...i})}},863363:(e,t,i)=>{i.d(t,{J:()=>c});var s=i(32489),r=i(383624),o=i(362392);var n=i(171854),a=i(491035);async function c(e){const{modalBoxOptions:t}=e;return(0,o.e)({payload:{...e,onPurchaseDetailsOpen:e=>function(e){return(0,o.e)({payload:e,view:r.X.LAYER_PURCHASE_DETAILS})}({details:e})},modalBoxOptions:t,view:r.X.LAYER})}const l=n.x.createEffect(c);(0,s.sample)({clock:a.D,target:l})},797272:(e,t,i)=>{i.d(t,{T0:()=>c,c:()=>l,sx:()=>o});var s=i(860656),r=i(591332);const o={post_reactions_counts_update:"wall/post_reactions_counts_update",reply_reactions_counts_update:"wall/reply_reactions_counts_update",post_subscribe_update:"wall/post_subscribe_update"},n=(0,s.b)("wall-data",(()=>({emitter:new r.A,keyedListeners:Object.create(null)})),{version:0}),a=(e,t,i)=>{const s=n(),r=s.keyedListeners?.[e]?.[t];return r&&s.emitter.removeListener(e,r),((e,t,i)=>{const s=n();return s.emitter.addListener(e,i),s.keyedListeners[e]={...s.keyedListeners[e],[t]:i},()=>{s.emitter.removeListener(e,i);const r=s.keyedListeners[e]?.[t];r===i&&delete s.keyedListeners[e]?.[t]}})(e,t,i)},c=(e,t,i)=>a(t,e,i),l=(e,t)=>{n().emitter.emit(e,t)}},460096:(e,t,i)=>{i.d(t,{r:()=>R});var s=i(221020),r=i(815287),o=i(634164);const n="vkitClipPlayerContainer__playerContainer--GjPog",a="vkitClipPlayerContainer__playerContainerHidden--XXMq2",c={contain:"vkitClipPlayerContainer__contain--QwdkM",cover:"vkitClipPlayerContainer__cover--sCYgS"},l=({mode:e="contain",setContainer:t,hidden:i})=>(0,s.Y)("div",{className:(0,o.$)(n,c[e],i&&a),ref:t});var d=i(42107),u=i(356035),h=i(99758),p=i(319340),_=i(970343),v=i(331635),m=i(334148),g=i(327813),y=i(916533),b=i(617989),f=i(713152),k=i(571559),w=i(160010);class C{async send(e){if(this.authService.userId)try{return await this.videoApi.viewSegments(e)}catch(e){if(this.isVideoDeletedError(e))return f.r.NOT_LOGGED;throw e}}isVideoDeletedError(e){return(0,w.d)(e)&&e.error.error_code===k.UrK&&e.error.error_msg.includes("video not found")}constructor(e,t){this.authService=e,this.videoApi=t,(0,g.l_)(this)}}C=(0,v.Cg)([d.z8.container(),(0,v.Sn)("design:type",Function),(0,v.Sn)("design:paramtypes",[void 0===y.u?Object:y.u,void 0===b.C?Object:b.C])],C);var S=i(71183),P=i(349785);const A="short_video_auth_token";class T{saveToStorage(e){this.localStorage.setItem(A,e)}getFromStorage(){return this.localStorage.getItem(A)}async getFromApi({refresh:e=!1}={}){const t={force_refresh:e?1:0},i=await this.videoApi.getStatsToken(t);if(i)return this.saveToStorage(i.token),i.token}async getToken(e={}){return e.refresh?await this.getFromApi(e):this.getFromStorage()??await this.getFromApi(e)}async trackOneStatError(e){const t=e instanceof Error?e.name:String(e);this.statlog.send({name:"video_player_insignificant_network_error",value:"onestat",keys:[t]})}constructor(e,t,i){this.videoApi=e,this.localStorage=t,this.statlog=i,(0,g.l_)(this)}}T=(0,v.Cg)([d.z8.container(),(0,v.Sn)("design:type",Function),(0,v.Sn)("design:paramtypes",[void 0===b.C?Object:b.C,void 0===S.D?Object:S.D,void 0===P.R?Object:P.R])],T);var L=i(645189),I=i(849645),O=i(424814),D=i(500965);class E{register(e){const t=++this.nextId;return this.registry.set(t,e),{play:()=>this.play(t),pause:()=>this.pause(t),unregister:()=>this.unregister(t)}}unregister(e){this.registry.delete(e),this.activeId===e&&(this.activeId=null)}play(e){if(e===this.activeId)return;const t=this.activeId?this.registry.get(this.activeId):null,i=this.registry.get(e);t&&(t.pause(),this.activeId=null),i&&(i.play(),this.activeId=e)}pause(e){const t=this.registry.get(e);t&&(t.pause(),this.activeId===e&&(this.activeId=null))}constructor(){this.nextId=0,this.registry=new Map,this.activeId=null,(0,g.l_)(this)}}E=(0,v.Cg)([d.z8.container(),(0,v.Sn)("design:type",Function),(0,v.Sn)("design:paramtypes",[])],E);class Y{async[d.Ts](){this.getConfig()}get isPlayerHidden(){return this._isPlayerHidden}async getConfig(){const e=this.props.current.module??"clips",t=await this.videoPlayerConfigProvider.ensure({module:e,prefetch:!0});(0,g.h5)((()=>{this.playerConfigData={config:t,loadingConfig:!1}}))}get vkPlayer(){return this._vkPlayer}get oneStat(){return this._oneStat}constructor(e,t,i,s,r,o,n,a){this.props=e,this.videoPlayerConfigProvider=t,this.userEnv=i,this.videoViewSegmentsService=s,this.stats=r,this.authService=o,this.metaData=n,this.clipsPlayersController=a,this.playerConfigData={config:null,loadingConfig:!0},this._vkPlayer=null,this._isPlayerHidden=!0,this._oneStat=null,this.subs=new p.yU,this.segment=[],this.shouldAutoplay=!1,this.controller=void 0,this.setPlayerVisible=()=>{this._isPlayerHidden=!1},this.sendViewSegments=e=>{const{id:t,owner_id:i,track_code:s=""}=this.props.current.video;t&&i&&this.videoViewSegmentsService.send({video_id:t,owner_id:i,ranges:e,ref:"clips",muted:this.props.current.muted?1:0,track_code:s})},this.refreshAuthToken=async()=>{if(this.authService.isAuthorized)try{return await this.stats.getToken({refresh:!0})}catch{await this.stats.trackOneStatError("video.getStatsToken")}},this.authorizeToken=async()=>{try{return await this.stats.getToken({refresh:!0})}catch{await this.stats.trackOneStatError("video.getStatsToken")}},this.subscribe=()=>{if(this.vkPlayer&&(this.props.current.onStalledChanged&&this.subs.add(this.vkPlayer.info.isStalled$.subscribe(this.props.current.onStalledChanged)),this.props.current.onVideoEndedChanged&&this.subs.add(this.vkPlayer.info.isEnded$.subscribe(this.props.current.onVideoEndedChanged)),this.props.current.onLooped&&this.subs.add(this.vkPlayer.events.looped$.subscribe(this.props.current.onLooped)),this.props.current.onVideoVolumeChanged&&this.subs.add(this.vkPlayer.info.volume$.subscribe(this.props.current.onVideoVolumeChanged)),this.subs.add(this.vkPlayer.info.currentQuality$.subscribe((e=>e!==p.Xb.INVARIANT&&this.props.current.onVideoCurQualityChanged&&this.props.current.onVideoCurQualityChanged(e)))),this.props.current.onDurationChanged&&this.subs.add(this.vkPlayer.info.duration$.subscribe(this.props.current.onDurationChanged)),this.props.current.onPositionChanged&&this.subs.add(this.vkPlayer.info.position$.subscribe(this.props.current.onPositionChanged)),this.props.current.onPlayingChanged&&(this.subs.add(this.vkPlayer.events.playing$.subscribe((()=>this.props.current.onPlayingChanged&&this.props.current.onPlayingChanged(!0)))),this.subs.add(this.vkPlayer.events.paused$.subscribe((()=>this.props.current.onPlayingChanged&&this.props.current.onPlayingChanged(!1))))),this.props.current.onPlaying&&this.vkPlayer.events.playing$.subscribe(this.props.current.onPlaying),this.props.current.onPaused&&(this.vkPlayer.events.paused$.subscribe(this.props.current.onPaused),this.vkPlayer.events.willDestruct$.subscribe(this.props.current.onPaused)),this.props.current.onMutedChanged&&this.vkPlayer.info.muted$.subscribe(this.props.current.onMutedChanged),this.props.current.onStarted&&this.subs.add(this.vkPlayer.events.started$.subscribe(this.props.current.onStarted)),this.props.current.onFirstBytes&&this.subs.add(this.vkPlayer.events.firstBytes$.subscribe(this.props.current.onFirstBytes)),this.subs.add(this.vkPlayer.events.firstFrame$.subscribe((e=>{this.setPlayerVisible(),this.props.current.onFirstFrame&&this.props.current.onFirstFrame(e)}))),this.props.current.onVideoFormatChanged&&this.subs.add(this.vkPlayer.info.currentFormat$.subscribe(this.props.current.onVideoFormatChanged)),this.props.current.onVideoBitrateChanged&&this.subs.add(this.vkPlayer.info.videoBitrate$.subscribe(this.props.current.onVideoBitrateChanged)),this.props.current.loop?(this.props.current.onStarted||this.props.current.onEnded)&&this.subs.add(this.vkPlayer.events.looped$.subscribe((()=>{this.props.current.onEnded?.(),this.props.current.onStarted?.()}))):this.props.current.onEnded&&this.subs.add(this.vkPlayer.events.ended$.subscribe(this.props.current.onEnded)),this.props.current.onCurrentTimeChanged&&(this.subs.add(this.vkPlayer.events.started$.subscribe((()=>{this.props.current.onCurrentTimeChanged&&this.props.current.onCurrentTimeChanged(0)}))),this.subs.add(this.vkPlayer.info.position$.subscribe((e=>{e&&this.props.current.onCurrentTimeChanged&&this.props.current.onCurrentTimeChanged(e)})))),this.props.current.onError)){const e=e=>{this.props.current.onError?.(e,this.vkPlayer?.info.hostname$.getValue()??"")};this.subs.add(this.vkPlayer.events.fatalError$.subscribe(e)),this.subs.add(this.vkPlayer.events.managedError$.subscribe(e))}},this.unsubscribe=()=>{this.subs&&this.subs.unsubscribe()},this.setVkPlayer=e=>{this._vkPlayer=e,e&&(this.controller=this.clipsPlayersController.register({play:()=>e.play(),pause:()=>e.pause()}),this.togglePlayPause(this.shouldAutoplay))},this.destroyVkPlayer=()=>{this.controller?.pause(),this.controller?.unregister(),this._vkPlayer&&this._vkPlayer.destroy()},this.togglePlayPause=e=>{this.shouldAutoplay=e,this._vkPlayer&&(e?this.controller?.play():this.controller?.pause())},this.setMuted=e=>{this._vkPlayer?.setMuted(e)},this.setVolume=e=>{e&&this._vkPlayer?.setVolume(e)},this.setLooped=e=>{this._vkPlayer?.setLooped(e)},this.setCurrentTime=e=>{this._vkPlayer?.seekTime(e)},this.initOneStat=()=>{const{platformId:e}=this.metaData.get();this._oneStat=new O.rT({movieId:Number(this.props.current.video?.united_video_id),place:this.metaData.get().module??"",mobile:"mvk"===this.props.current.platform,autoplay:!0,trackCode:(0,D.Tw)()||this.props.current.video?.track_code,vkAppId:String(e)},{apiEnv:O.AU.PROD,refreshAuthToken:this.refreshAuthToken,config:{apiEnv:O.AU.PROD,requestRetryCount:1}})},this.authorizeOneStat=async()=>{if(!this._oneStat)return;const e=await this.authorizeToken();this.authService.isAuthorized&&e?(this._oneStat.authorize(e),this._oneStat.resume()):(this._oneStat.authorize(),this._oneStat.resume())},this.addPoint=e=>{if(this.vkPlayer){if(e)this.segment=[];else if(!this.segment.length)return;this.segment.push(Math.trunc(this.vkPlayer.info.position$.getValue())),2===this.segment.length&&(this.sendViewSegments(this.segment.join("-")),this.segment=[])}},this.subscribeViewSegments=()=>{this.vkPlayer&&(this.subs.add(this.vkPlayer.events.playing$.subscribe((()=>this.addPoint(!0)))),this.subs.add(this.vkPlayer.events.paused$.subscribe((()=>this.addPoint(!1)))),this.subs.add(this.vkPlayer.events.willSeek$.subscribe((()=>this.addPoint(!1)))),this.subs.add(this.vkPlayer.events.ended$.subscribe((()=>this.addPoint(!1)))),this.subs.add(this.vkPlayer.events.looped$.subscribe((()=>this.addPoint(!1)))))},(0,g.l_)(this)}}Y=(0,v.Cg)([d.z8.transient(),(0,v.Sn)("design:type",Function),(0,v.Sn)("design:paramtypes",[void 0===d.Ji?Object:d.Ji,void 0===m.i?Object:m.i,void 0===L.J?Object:L.J,void 0===C?Object:C,void 0===T?Object:T,void 0===y.u?Object:y.u,void 0===I.e?Object:I.e,void 0===E?Object:E])],Y);const{useModel:N,Provider:x}=(0,d.Qd)(Y,{initInEffect:!1,isolatedContext:!1,onlyTransient:!0});const j=new class{allocate(){const e=[...this.pool.entries()].find((([,e])=>e)),[t]=e||[this.makeItem()];return this.pool.set(t,!1),t}free(e){this.pool.has(e)&&this.pool.set(e,!0)}size(){return this.pool.size}constructor(e){this.makeItem=e,this.pool=new Map}}((()=>{const e=document.createElement("video");return e.muted=!0,e.playsInline=!0,e.disablePictureInPicture=!0,e})),F=(0,u.P)((function(){const e=N(),{loop:t=!0,muted:i,volume:o,playing:n,mode:a,video:c,onLooped:d,onPlayingChanged:u,onPlaying:v,onPaused:m,onMutedChanged:g,onPositionChanged:y,onStalledChanged:b,onStarted:f,onVideoCurQualityChanged:k,onVideoEndedChanged:w,onVideoVolumeChanged:C,newCurrentTime:S,onDurationChanged:P,onVideoFormatChanged:A,onVideoBitrateChanged:T,onEnded:L,onFirstBytes:I,onFirstFrame:O,onError:D}=e.props.current,[E,Y]=(0,r.useState)(null);(0,r.useEffect)((()=>{if(e.vkPlayer&&(e.initOneStat(),e.oneStat))return e.oneStat.pause(),e.authorizeOneStat(),e.oneStat.attachTo(e.vkPlayer),()=>{e.oneStat?.destroy()}}),[e.vkPlayer,c?.united_video_id]),(0,r.useEffect)((()=>{if(e.sendViewSegments)return e.subscribeViewSegments(),()=>{e.addPoint(!1),e.unsubscribe()}}),[e.vkPlayer,e.addPoint,e.sendViewSegments]),(0,r.useEffect)((()=>{let t=null,i=null;if(c&&E&&!e.playerConfigData?.loadingConfig){t=new h.ai(e.playerConfigData?.config?.core),i=j.allocate(),E.innerHTML="",E.appendChild(i);const s=(0,_.yE)(c);if(e.userEnv.partConfigEnabled("video_clips_mvk_hls_min_quality_from_backend")){const e=s[h.T4.HLS];e&&(e.url+="&lq=480")}t.setMuted(!0).setLooped(!0).setAutoQualityLimits({min:p.Xb.Q_480P}).initVideo({container:E,sources:s,failoverHosts:c.files?.failover_host?[c.files.failover_host]:void 0,meta:{videoId:c.united_video_id}}).prepare()}return e.setVkPlayer(t),()=>{e.destroyVkPlayer(),E&&(E.innerHTML=""),i&&j.free(i)}}),[c,E,e.playerConfigData]),(0,r.useEffect)((()=>(e.subscribe(),()=>{e.unsubscribe()})),[e.vkPlayer,w,u,v,m,g,b,C,f,d,y,k,P,L,I,O,A,T,D]);const x=(0,r.useCallback)((t=>{e.vkPlayer?.setMuted(t)}),[e.vkPlayer]),F=(0,r.useCallback)((t=>{t&&e.vkPlayer?.setVolume(t)}),[e.vkPlayer]),R=(0,r.useCallback)((t=>{e.vkPlayer?.setLooped(t)}),[e.vkPlayer]),M=(0,r.useCallback)((t=>{e.vkPlayer?.seekTime(t)}),[e.vkPlayer]);return(0,r.useEffect)((()=>{e.togglePlayPause(n)}),[n]),(0,r.useEffect)((()=>{F(o??0)}),[o,F]),(0,r.useEffect)((()=>{x(i)}),[i,x]),(0,r.useEffect)((()=>{R(t)}),[t,R]),(0,r.useEffect)((()=>{"number"==typeof S&&M(S)}),[S,M]),(0,s.Y)(l,{mode:a,setContainer:Y,hidden:e.isPlayerHidden})})),R=(0,d.jn)(x,F)},685564:(e,t,i)=>{i.d(t,{p:()=>r});var s=i(815287);function r({stats:e,statsRef:t,video:i,autoplay:r=!0,playerType:o="carousel",feedTrackCode:n}){const a=(0,s.useRef)({onStalledChanged:()=>{},onVideoCurQualityChanged:()=>{},onDurationChanged:()=>{},onPositionChanged:()=>{},onEnded:()=>{},onVideoFormatChanged:()=>{},onVideoBitrateChanged:()=>{},onFirstBytes:()=>{},onFirstFrame:()=>{},onStarted:()=>{},onPlaying:()=>{},onPaused:()=>{},onMutedChanged:()=>{},onMuteInteraction:()=>{},onError:()=>{}}),c=i?.rawId&&e.getPlayerStatsHandlersStore(i.rawId,{video:i,statsRef:t,autoplay:r,playerType:o,feedTrackCode:n});return c&&(a.current=c.playerHandlers),(0,s.useEffect)((()=>()=>{i?.rawId&&e.resetPlayerStatsHandlersStore(i.rawId)}),[i?.rawId,e]),a.current}},908508:(e,t,i)=>{i.d(t,{O:()=>d});var s=i(331635),r=i(327813),o=i(42107),n=i(645189),a=i(71183),c=i(486526);const l="clips_volume";class d{get volume(){return this._volume}constructor(e,t){this.userEnv=e,this.localStorage=t,this._volume=Number(this.localStorage.getItem(l))||1,this.saveVolume=(0,c.s)((e=>{this.localStorage.setItem(l,e.toString())}),100),this.setVolume=e=>{this._volume=e,this.saveVolume(e)},(0,r.l_)(this)}}d=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===n.J?Object:n.J,void 0===a.D?Object:a.D])],d)},674980:(e,t,i)=>{i.d(t,{U:()=>r});var s=i(99265);function r(e){return e&&s.H.includes(e)?e:s.H[0]}},494492:(e,t,i)=>{i.d(t,{D:()=>o});var s=i(724567);function r(e=[],t=[]){return e.length&&t.length?e.map((e=>{const i=(e=>Object.hasOwn(e,"custom")&&Object.hasOwn(e,"original_type")&&"custom"===e.type)(e)?e.original_type:e.type;return"unsupported"===i?e:t.includes(i)?{type:"custom",original_type:"unsupported",custom:{isUnsupported:!0}}:e})):e}const o=(e,t,i)=>{const{attachments:o,...n}=e,a=i?.length;return{...n,attachments:a?r((0,s.w)(o,t),i):(0,s.w)(o,t)}}},167879:(e,t,i)=>{i.d(t,{e:()=>a});var s=i(221020),r=i(938321),o=i(123342),n=i(209553);const a=({attachment:e,popupStore:t,wrapperProps:i={}})=>{if((0,o.T)(e)&&(0,n.mD)()){const o=e.sticker.popup.layers;return{wrapperProps:{icon:(0,s.Y)(r.b,{}),iconPosition:"rightRelative",iconWrapperRef:void 0,contentClassName:"popupStickerIcon",onContentClick:e=>{e.stopPropagation();const i=e.target;t?.prepareWithDestroyEvent({layers:o,stickerElement:i})},...i}}}}},123342:(e,t,i)=>{i.d(t,{T:()=>o});const s=e=>!!e&&(e=>Object.hasOwn(e,"type"))(e)&&"sticker"===e.type;var r=i(299992);const o=e=>!!e&&(s(e)&&e?.sticker&&(0,r.C)(e.sticker))},123339:(e,t,i)=>{i.d(t,{z:()=>v});var s=i(331635),r=i(327813),o=i(916533),n=i(42107),a=i(287932),c=i(71183);class l{getVideoIds(){return JSON.parse(this.storage.getItem(this.idsKey)??"[]")}addVideoId(e){const t=this.getVideoIds();t.includes(e)||(t.push(e),this.storage.setItem(this.idsKey,JSON.stringify(t)))}hasVideo(e){return this.getVideoIds().includes(e)}setTimestamp(e){this.storage.setItem(this.timestampKey,String(e))}getTimestamp(){const e=this.storage.getItem(this.timestampKey);return e?Number(e):void 0}reset(){this.storage.removeItem(this.idsKey),this.storage.removeItem(this.timestampKey)}get idsKey(){return`clips-restrictions-ids-${String(this.authService.userId)}`}get timestampKey(){return`clips-restrictions-timestamp-${String(this.authService.userId)}`}constructor(e,t){this.storage=e,this.authService=t,(0,r.l_)(this)}}l=(0,s.Cg)([n.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===c.D?Object:c.D,void 0===o.u?Object:o.u])],l);var d=i(617989),u=i(452200);class h{async disableRestriction(e){const{id:t,ownerId:i}=(0,u.v)(e);return this.videoApi.agreeDisclaimer({owner_id:i,video_id:t})}constructor(e){this.videoApi=e}}h=(0,s.Cg)([n.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===d.C?Object:d.C])],h);const p=864e5,_=[1,2];class v{isRestrictionDisabled(e){return this.restrictionsDisabledLocally||this.removedRestrictionsList.has(e)}setResetTimer(e){this.timer=setTimeout((()=>{const e=this.restrictionsStorage.getTimestamp();e&&"Invalid Date"!==new Date(e).toString()&&this.reset()}),e)}syncLocalStorage(){const e=this.restrictionsStorage.getTimestamp(),t=this.restrictionsStorage.getVideoIds();if(!e)return 0!==t.length?this.reset():void 0;if("Invalid Date"===new Date(e).toString())return this.reset();const i=e+p-Date.now();if(i<0)return this.reset();this.setResetTimer(i),t.length>=3&&(this.restrictionsDisabledLocally=!0)}reset(){this.restrictionsStorage.reset(),this.removedRestrictionsList.clear(),this.restrictionsDisabledLocally=!1}constructor(e,t,i,s){this.restrictionsStorage=e,this.restrictionsSynchronization=t,this.authService=i,this.shortVideoVideosProvider=s,this.removedRestrictionsList=new Set,this.timer=null,this.restrictionsDisabledLocally=!1,this.disableRestriction=async e=>{const t=this.restrictionsStorage.getVideoIds(),i=this.shortVideoVideosProvider.get(e),s=i?.data.restriction?.disclaimer_type;if(!this.authService.isAuthorized||s&&!_.includes(s))this.removedRestrictionsList.add(e);else{t.length||(this.restrictionsStorage.setTimestamp(Date.now()),this.setResetTimer(p)),t.includes(e)||this.restrictionsStorage.addVideoId(e);this.restrictionsStorage.getVideoIds().length>=3&&!this.restrictionsDisabledLocally&&(await this.restrictionsSynchronization.disableRestriction(e),(0,r.h5)((()=>{this.restrictionsDisabledLocally=!0})));(0,r.h5)((()=>{this.removedRestrictionsList.add(e)}))}},(0,r.l_)(this),this.syncLocalStorage()}}v=(0,s.Cg)([n.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===l?Object:l,void 0===h?Object:h,void 0===o.u?Object:o.u,void 0===a.$?Object:a.$])],v)},833719:(e,t,i)=>{i.d(t,{r:()=>d});var s=i(331635),r=i(327813),o=i(42107),n=i(297841),a=i(915273);class c{createManyFromApi(e){return e.map(this.createOneFromApi)}getById(e){return this.groupsMap.get(e)}getAll(){return Array.from(this.groupsMap.values())}constructor(e){this.videoGroupsSubscribeService=e,this.createOneFromApi=e=>{const t=new a.f(e,this.videoGroupsSubscribeService);return this.groupsMap.set(e.id,t),t},this.groupsMap=new Map,(0,r.l_)(this)}}var l=i(606516);class d{static filterFields(e){const t=n.N;return e.filter((e=>t.includes(e)))}ensureByFields(e){const t=d.getKey(e);return this.ensureByKey(t)}ensureByKey(e){return this.stores.get(e)??this.create(e)}create(e){const t=new c(this.groupsSubscribeService);return this.stores.set(e,t),t}static getKey(e){return[...new Set(e)].sort().join(",")}constructor(e){this.groupsSubscribeService=e,this.stores=new Map,(0,r.l_)(this)}}d=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===l.J?Object:l.J])],d)},606516:(e,t,i)=>{i.d(t,{J:()=>c});var s=i(331635),r=i(327813),o=i(340310),n=i(645189),a=i(42107);class c{getIsMember(e){return this.videoGroupsSubscriptions.get(e)}clearOneFromCache(e){return this.videoGroupsSubscriptions.delete(e)}async join(e){this.abortController?.abort(),this.abortController=new AbortController;const t=this.userEnv.partConfigEnabled("frontend.api_groups_join_disable_grouping")?{grouping:!1,signal:this.abortController.signal}:{signal:this.abortController.signal},i=await this.api.join({group_id:e.groupId,track_code:e.trackCode,source:e.source},t);return this.videoGroupsSubscriptions.set(e.groupId,!0),i}async leave(e){this.abortController?.abort(),this.abortController=new AbortController;const t=await this.api.leave({group_id:e.groupId,track_code:e.trackCode,source:e.source},{signal:this.abortController.signal});return this.videoGroupsSubscriptions.set(e.groupId,!1),t}constructor(e,t){this.api=e,this.userEnv=t,this.videoGroupsSubscriptions=new r.Es,this.abortController=null,(0,r.l_)(this)}}c=(0,s.Cg)([a.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===o.D?Object:o.D,void 0===n.J?Object:n.J])],c)},297841:(e,t,i)=>{i.d(t,{N:()=>s});const s=["activity","addresses","age_limits","ban_info","can_create_topic","can_message","can_post","can_suggest","can_see_all_posts","can_upload_doc","can_upload_story","can_upload_video","city","contacts","counters","country","cover","crop_photo","description","fixed_post","has_photo","is_favorite","is_hidden_from_feed","is_messages_blocked","links","main_album_id","main_section","market","member_status","members_count","place","public_date_label","site","start_date и finish_date","status","trending","verified","wall","wiki_page","video_channel_data","photo_50"]},817076:(e,t,i)=>{i.d(t,{c:()=>u});var s=i(331635),r=i(327813),o=i(42107),n=i(849249),a=i(391087),c=i(297841),l=i(833719),d=i(393244);class u{static filterFields(e){const t=[...c.N,...n.T];return e.filter((e=>t.includes(e)))}ensureByFields(e){const t=u.getKey(e);return this.stores.get(t)??this.save(t,this.createByFields(e))}ensureByKey(e){return this.stores.get(e)??this.save(e,this.createByKey(e))}save(e,t){return this.stores.set(e,t),t}createByKey(e){return new d.G(this.videoGroupsStoreFactory.ensureByKey(e),this.videoUsersStoreFactory.ensureByKey(e))}createByFields(e){return new d.G(this.videoGroupsStoreFactory.ensureByFields(l.r.filterFields(e)),this.videoUsersStoreFactory.ensureByFields(a.r.filterFields(e)))}static getKey(e){return[...new Set(e)].sort().join(",")}constructor(e,t){this.videoGroupsStoreFactory=e,this.videoUsersStoreFactory=t,this.stores=new Map,(0,r.l_)(this)}}u=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===l.r?Object:l.r,void 0===a.r?Object:a.r])],u)},334148:(e,t,i)=>{i.d(t,{i:()=>c});var s=i(331635),r=i(327813),o=i(617989),n=i(651253),a=i(42107);class c{isLoading(e){return Boolean(this.requestMap.get(e))}async request({prefetch:e,...t}){this.abortController=new AbortController;return(e?this.videoApi.getPlayerConfigWithPrefetch:this.videoApi.getPlayerConfig)(t,{signal:this.abortController?.signal})}async fetch(e){this.reset();try{const t=await this.request(e);return this.configMap.set(e.module,t.config),t.config}catch(e){return this.errorLogger.log(new Error("Video player config fetching failed",{cause:e})),{}}finally{this.requestMap.delete(e.module)}}async ensure(e){const t=this.requestMap.get(e.module);if(t)return t;const i=this.configMap.get(e.module);if(i)return i;const s=this.fetch(e);return this.requestMap.set(e.module,s),s}reset(){this.abortController?.abort()}constructor(e,t){this.videoApi=e,this.errorLogger=t,this.abortController=null,this.configMap=new Map,this.requestMap=new Map,(0,r.l_)(this)}}c=(0,s.Cg)([a.z8.global(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===o.C?Object:o.C,void 0===n.v?Object:n.v])],c)},963255:(e,t,i)=>{i.d(t,{S:()=>a});var s=i(331635),r=i(327813),o=i(42107),n=i(877351);class a{getIsSubscribed(e){return this.usersSubscriptionsStatuses.get(e)}clearOneFromCache(e){return this.usersSubscriptionsStatuses.delete(e)}async subscribe(e,t){this.abortController?.abort(),this.abortController=new AbortController;const i=await this.friendsApi.add({user_id:e.userId,...e.trackCode&&{track_code:e.trackCode}},{signal:this.abortController.signal,...t});return this.usersSubscriptionsStatuses.set(e.userId,!0),i}async unsubscribe(e,t){this.abortController?.abort(),this.abortController=new AbortController;const i=await this.friendsApi.delete({user_id:e.userId,track_code:e.trackCode},{signal:this.abortController.signal,...t});return this.usersSubscriptionsStatuses.set(e.userId,!1),i}constructor(e){this.friendsApi=e,this.usersSubscriptionsStatuses=new r.Es,this.abortController=null,(0,r.l_)(this)}}a=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===n._?Object:n._])],a)},391087:(e,t,i)=>{i.d(t,{r:()=>d});var s=i(331635),r=i(327813),o=i(42107),n=i(849249),a=i(887816);class c{createManyFromApi(e){return e.map(this.createOneFromApi)}getById(e){return this.usersMap.get(e)}getAll(){return Array.from(this.usersMap.values())}constructor(e){this.videoUserSubscribeService=e,this.createOneFromApi=e=>{const t=new a.P(e,this.videoUserSubscribeService);return this.usersMap.set(e.id,t),t},this.usersMap=new Map,(0,r.l_)(this)}}var l=i(963255);class d{static filterFields(e){const t=n.T;return e.filter((e=>t.includes(e)))}ensureByFields(e){const t=d.getKey(e);return this.ensureByKey(t)}ensureByKey(e){return this.stores.get(e)??this.create(e)}create(e){const t=new c(this.videoUserSubscribeService);return this.stores.set(e,t),t}static getKey(e){return[...new Set(e)].sort().join(",")}constructor(e){this.videoUserSubscribeService=e,this.stores=new Map,(0,r.l_)(this)}}d=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===l.S?Object:l.S])],d)},849249:(e,t,i)=>{i.d(t,{T:()=>s});const s=["about","activities","bdate","blacklisted","blacklisted_by_me","books","can_post","can_see_all_posts","can_see_audio","can_send_friend_request","can_write_private_message","career","city","common_count","connections","contacts","counters","country","crop_photo","deactivated","domain","education","exports","first_name_nom","first_name_gen","first_name_dat","first_name_acc","first_name_ins","first_name_abl","followers_count","friend_status","games","has_mobile","has_photo","home_town","interests","is_favorite","is_friend","is_hidden_from_feed","is_no_index","is_verified","last_name_nom","last_name_gen","last_name_dat","last_name_acc","last_name_ins","last_name_abl","last_seen","lists","maiden_name","military","movies","music","nickname","occupation","online","personal","photo_50","photo_100","photo_200_orig","photo_200","photo_400_orig","photo_id","photo_max","photo_max_orig","quotes","relatives","relation","schools","screen_name","sex","site","status","timezone","trending","tv","universities","verified","is_esia_verified","is_sber_verified","is_tinkoff_verified","wall_default"]},523056:(e,t,i)=>{i.d(t,{o:()=>o});var s=i(221020),r=i(815287);class o{call(e,t){this.text=e(this.text,((...e)=>{const i=`!link_${this.i}_${this.hash}!`;return this.components[i]=t(`link${this.i}`,...e),this.i++,i}))}getComponent(e=e=>e){const t=this.text.match(this.reHash),i=[];let o=0;if(!t)return(0,s.Y)(r.Fragment,{children:e(this.text,{accented:!0})},0);for(const n of t){const t=this.text.indexOf(n),a=t+n.length,c=this.text.slice(0,t),l=this.text.slice(t,a);c.length&&i.push((0,s.Y)(r.Fragment,{children:e(c,{accented:!0})},o++)),l.length&&i.push(this.components[l]??null),this.text=this.text.slice(a)}return this.text.length&&i.push((0,s.Y)(r.Fragment,{children:e(this.text,{accented:!0})},o++)),(0,s.Y)(r.Fragment,{children:i})}constructor(e){this.text=e,this.i=0,this.hash=Math.round(1e9*Math.random()).toString(16),this.reHash=new RegExp("(!link_[0-9]+_[0-9a-f]+!)","gim"),this.components={}}}},85212:(e,t,i)=>{function s(){return"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}}function r(){return s().vk?.__domain||"vk.com"}i.d(t,{QF:()=>l,VZ:()=>s,yz:()=>r});const o=e=>e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1"),n=(o(r()),["vk.com","vk.ru",r()].filter(((e,t,i)=>i.indexOf(e)===t)).concat(["vkontakte.ru","vk.me","userapi.com"])),a=new RegExp("("+n.map(o).join("|")+")"),c=new RegExp(`([a-zA-Z0-9\\.\\_\\-]+\\.)?${a.source}`),l=new RegExp(`^(https?:\\/\\/)?${c.source}($|\\/(.*))`)},24417:(e,t,i)=>{i.d(t,{g:()=>c});var s=i(221020),r=i(815287),o=i(516427),n=i(808911);const a=(0,r.lazy)((()=>(0,n.p)((async()=>{const{StickerRich:e}=await Promise.all([i.e(26537),i.e(25701),i.e(50756),i.e("langs/core_spa/sticker")]).then(i.bind(i,27125));return{default:e}}))));function c(e){const{size:t}=e.baseStickerProps;return(0,s.Y)(r.Suspense,{fallback:(0,s.Y)("div",{style:{width:t,height:t},children:(0,s.Y)(o.y$y,{})}),children:(0,s.Y)(a,{...e})})}},611891:(e,t,i)=>{i.d(t,{BC:()=>c,FA:()=>O,FU:()=>b,GB:()=>p,Kf:()=>a,RZ:()=>k,Uh:()=>A,WK:()=>d,Xf:()=>w,YB:()=>I,Yf:()=>m,_h:()=>_,eo:()=>L,hq:()=>T,j5:()=>g,jz:()=>S,o3:()=>P,pk:()=>C,qH:()=>l,rj:()=>f});var s=i(860656),r=i(999278),o=i(837405);const n={didInvalidate:!0};function a(){return n.didInvalidate}function c(){n.didInvalidate=!0}function l(){n.didInvalidate=!1}const d=(0,s.b)("stickers-settings-cache",(()=>(0,r.x)({dbName:"stickers",version:1,storeName:"settings"})),{version:1}),u=d(),h=u.createAtom("isAutoplay",o.B.BOOLEAN),p=e=>{h.set(e)},_=()=>h.get(),v=u.createAtom("isPopupAutoplayOnSend",o.B.BOOLEAN),m=e=>{v.set(e)},g=()=>v.get(),y=u.createAtom("isPopupAutoplayOnGet",o.B.BOOLEAN),b=e=>{y.set(e)},f=()=>y.get(),k=u.createAtom("disabledPeerIdsByUser",o.B.OBJECT),w=e=>{k.set(e)},C=()=>k.get()??[],S=()=>!1===_(),P=()=>!1===f(),A=()=>!1===g(),T=e=>C().includes(e),L=e=>!S()&&!T(e),I=e=>{if(!e.popup)return;const{disabled_peer_ids:t,on_send:i,on_get:s}=e.popup.autoplay;w(t),b(s),m(i)},O=({popupDisabledPeerIds:e,popupAutoplayOnSend:t,popupAutoplayOnGet:i,animationAutoplay:s})=>{w(e),b(i),m(t),p(s)}},299992:(e,t,i)=>{i.d(t,{C:()=>r,r:()=>s});const s=e=>Boolean(e&&"inner_type"in e&&"base_sticker_new"===e.inner_type),r=e=>s(e)&&Boolean(e.popup?.layers)},983538:(e,t,i)=>{i.d(t,{B:()=>p});var s=i(221020),r=i(356035),o=i(815287),n=i(874903),a=i(17646),c=i(729736),l=i(317341),d=i(257103),u=i(243256);const h="PopupRoot__wrapper--4Sgj0",p=(0,r.P)((({isVisible:e=!0,allowUseCommon:t=!1,isUseAsFullscreen:i=!1,position:r=d.Hx,HtmlElement:p="div",setElementRef:_,children:v,className:m,popUpStore:g,id:y,...b})=>{const[f,k]=(0,o.useState)(null),w=(0,o.useMemo)((()=>new u.p),[]);return(0,o.useEffect)((()=>{e||g?.destroyByRemove()}),[e]),(0,o.useEffect)((()=>()=>{g?.destroyByRemove()}),[]),(0,s.Y)(p,{id:y,ref:e=>{if((0,l.c)(e,_),!e)return void k(null);const s=(0,c.nz)({popupStickerPosition:r,popupStickerContainerId:e.id,popupStickerUseCommon:t.toString(),popupStickerFullScreenContainer:i?e.id:void 0});for(const[t,i]of Object.entries(s))e.setAttribute(t,i);k(i?e:document.querySelector(`#${e.getAttribute(d.Wn)}`)||document.querySelector(d.GB))},className:m||h,...b,children:(0,s.FD)(a.W,{popupStore:g||w,children:[f&&e&&(0,s.Y)(n.d,{portalElement:f}),v]})})}))},650135:(e,t,i)=>{i.d(t,{w:()=>K});var s=i(221020),r=i(634164),o=i(191601),n=i(380977),a=i(928959),c=i(815287),l=i(772812),d=i(237582),u=i(325159),h=i(56471),p=i(799649),_=i(962644),v=i(223926);const m=(e,t,i)=>t&&i?+(t*e/i).toFixed(2):e,g="vkitDeleteButton__delete--JAICg",y=({getRootRef:e,ariaLabel:t,onClick:i})=>(0,s.Y)(p.K,{"data-testid":"comment-attach-delete-button",getRootRef:e,label:t,className:g,onClick:i,noPadding:!0,children:(0,s.Y)(n.Y,{className:(0,l.I)("color_icon_contrast")})}),b="vkitDocAttachment__thumb--1928o",f="vkitDocAttachment__linkDoc--vgQx3",k="vkitDocAttachment__interactiveOverlay--OZVDv",w="vkitDocAttachment__playGifButton--khXPr",C=new Set(["gif","jpg","jpeg","png"]),S=({ext:e,src:t,href:i,title:o,width:n,deleteAriaLabel:a,onDeleteClick:c,className:l,overlay:p})=>{const v=C.has(e);return(0,s.FD)("div",{"data-testid":"comment-attach-doc-photo",className:(0,r.$)(b,l),style:{height:128,width:n},children:[(0,s.FD)(d.v,{src:t,alt:o,width:"100%",height:"100%",widthSize:"100%",heightSize:"100%",loading:"lazy",draggable:"false",href:i,rel:"noopener noreferrer",target:"_blank",children:[p,v&&(0,s.Y)(_.h,{placement:"bottom-right",offset:4,children:(0,s.Y)(u.R,{appearance:"overlay",children:e.toUpperCase()})})]}),c&&(0,s.Y)(h.f,{text:a,placement:"top",children:(0,s.Y)(_.h,{placement:"top-right",children:(0,s.Y)(y,{ariaLabel:a,onClick:c})})})]})},P=({src:e,href:t,deleteAriaLabel:i,playGifAriaLabel:r,onDeleteClick:n,...a})=>{const[d,u]=(0,c.useState)(!1);return(0,s.Y)(S,{...a,ext:"gif",src:d?t:e,deleteAriaLabel:i,onDeleteClick:n,overlay:(0,s.Y)(_.h,{centered:!0,"data-testid":"comment-attach-doc-gif-play/pause",onClick:()=>{u(!d)},className:k,children:!d&&(0,s.Y)(p.K,{className:w,label:r||"Запустить GIF",children:(0,s.Y)(o.K,{className:(0,l.I)("color_icon_contrast")})})})})},A=({doc:e,formatSize:t,formatDateTime:i,deleteAriaLabel:o,playGifAriaLabel:c,onDeleteClick:l,className:d})=>{const{title:u,ext:h,date:p,size:_,url:g,preview:y}=e,b=y?.photo?.sizes,k=b?.find((({type:e})=>"x"===e))||b?.[0];if(k){const e=m(128,k.width,k.height);return"gif"===h?(0,s.Y)(P,{className:d,src:k.src,href:g,title:u,width:e,playGifAriaLabel:c,deleteAriaLabel:o,onDeleteClick:l}):(0,s.Y)(S,{className:d,ext:h,src:k.src,href:g,title:u,width:e,deleteAriaLabel:o,onDeleteClick:l})}const w=p?i(p)||p.toString():"",C=_?t(_)||_.toString():"";return(0,s.Y)("div",{className:(0,r.$)(f,d),children:(0,s.Y)(v.y,{action:{href:g,isExternal:!0},noPadding:!0,attachment:{content:{description:[C,w].filter(Boolean).join(" · "),title:u},icon:"document_outline"},after:l&&o?{key:"doc_remove",tooltip:o,ariaLabel:o,kind:"icon_button",icon:(0,s.Y)(n.Y,{"data-testid":"doc_remove"}),onClick:e=>{(0,a.T)(e),l(e)}}:void 0})})};var T=i(913423),L=i(300806),I=i(461565);const O="vkitPhotoAttachment__thumb--giNvA",D=({photo:e,deleteActionLabel:t,onDeleteClick:i,photoLinkAriaLabel:r})=>{const{photo_id:o,photo_url:n,sizes:a=[],text:c,restriction:l}=e,p=(0,L.q)(a,90,120);if(!p?.url)return null;const{url:v,width:g,height:b}=p,f=m(120,g,b);return(0,s.FD)("div",{className:O,style:{width:f,height:120,aspectRatio:`${g} / ${b}`},children:[(0,s.FD)(d.v,{"data-id":o,"aria-label":n?r:void 0,alt:c??"",src:l?void 0:v,width:"100%",height:"100%",widthSize:"100%",heightSize:"100%",loading:"lazy",draggable:"false",href:n,rel:"noopener noreferrer",target:"_blank",noBorder:!0,objectFit:"contain",children:[!!l&&(0,s.Y)(I.R,{size:"small",restriction:l}),e.has_tags&&(0,s.Y)(d.v.OverlayItem,{placement:"bottom-right",paddingRight:4,paddingBottom:4,children:(0,s.Y)(u.R,{appearance:"overlay",children:(0,s.Y)(u.R.IconSlot,{children:(0,s.Y)(T.X,{})})})})]}),i&&(0,s.Y)(h.f,{text:t,placement:"top",children:(0,s.Y)(_.h,{placement:"top-right",children:(0,s.Y)(y,{ariaLabel:t,onClick:i})})})]})};var E=i(24417);const Y=({sticker:e,size:t=128,...i})=>{const{baseStickerProps:r={},wrapperProps:o={},...n}=i;return(0,s.Y)(E.g,{baseStickerProps:{...r,sticker:e,size:t},wrapperProps:o,...n})};var N=i(620483),x=i(836382),j=i(284146),F=i(601079),R=i(154767),M=i(165051),B=i(877318);const V="vkitVideoAttachment__thumb--1xlcU",z="vkitVideoAttachment__durationInteractive--wA4s3",U=({video:e,deleteActionLabel:t,onDeleteClick:i})=>{const o=(0,F.A)(),{image:n=[],duration:a,title:c,video_url:l,restriction:p}=e,v=(0,L.q)(n,90*((0,x.Q)()?2:1)),g=m(120,v?.width,v?.height),b="interactive"===e.type,f=[e.label&&g>200?e.label:"","string"==typeof a?a:(0,j.a)(a)];return(0,s.FD)("div",{className:V,style:{height:120,width:g},children:[(0,s.Y)(d.v,{alt:c,src:v?.url,width:"100%",height:"100%",widthSize:"100%",heightSize:"100%",loading:"lazy",draggable:"false",href:l,rel:"noopener noreferrer",target:"_blank",objectFit:"contain",children:(0,s.FD)(R.Q,{value:b?"dark":o,children:[!!p&&(0,s.Y)(B.U,{title:p.title,mode:p.mode,iconType:p.iconType,size:"s",stretched:!0}),(0,s.Y)(_.h,{placement:"bottom-right",offset:4,children:(0,s.FD)(u.R,{className:(0,r.$)(b&&z),appearance:"overlay",children:[b&&(0,s.Y)(u.R.IconSlot,{children:(0,s.Y)(N.l,{})}),(0,s.Y)(M.r,{separator:" · ",children:f})]})})]})}),i&&(0,s.Y)(h.f,{text:t,placement:"top",children:(0,s.Y)(_.h,{placement:"top-right",children:(0,s.Y)(y,{ariaLabel:t,onClick:i})})})]})},$="vkitCommentAttachments__root--vExT9",H="vkitCommentAttachments__hiddenAttach--oRGtB",G={s:"vkitCommentAttachments__rootGapS--M68Ok",xl:"vkitCommentAttachments__rootGapXl--nsPwl"},K=({attachments:e,commentId:t,gap:i="s",formatDateTime:o,formatSize:n,onStickerClick:a,onPhotoClick:c,onVideoClick:l,onCustomAttachmentRender:d=()=>null,onDeletePhotoClick:u,onDeleteVideoClick:h,onDeleteDocClick:p,deleteAriaLabel:_,playGifAriaLabel:v,photoLinkAriaLabel:m,stickerAttachmentProps:g,hiddenAttach:y})=>{const b=(0,r.$)($,G[i]);return y?(0,s.Y)("div",{className:H,children:y}):(0,s.Y)(s.FK,{children:e.map((e=>{switch(e.type){case"sticker":return(0,s.Y)("div",{role:"presentation",className:b,"data-testid":"comment-attach-sticker",onClick:t=>a?.(e.sticker,t),children:(0,s.Y)(Y,{sticker:e.sticker,...g})},`sticker-${t}`);case"photo":return(0,s.Y)("div",{role:"presentation",className:b,"data-testid":"comment-attach-photo",onClick:t=>c?.(e.photo,t),children:(0,s.Y)(D,{photo:e.photo,deleteActionLabel:_,onDeleteClick:u?t=>u(e.photo,t):void 0,photoLinkAriaLabel:m})},`photo-${e.photo.id}`);case"doc":return(0,s.Y)(A,{className:b,doc:e.doc,formatSize:n,formatDateTime:o,playGifAriaLabel:v,deleteAriaLabel:_,onDeleteClick:p?t=>p(e.doc,t):void 0},`doc-${e.doc.id}`);case"video":return(0,s.Y)("div",{role:"presentation",className:b,"data-testid":"comment-attach-video",onClick:t=>l?.(e.video,t),children:(0,s.Y)(U,{video:e.video,deleteActionLabel:_,onDeleteClick:h?t=>h(e.video,t):void 0})},`video-${e.video.id}`);default:return d(e)}}))})}},440779:(e,t,i)=>{i.d(t,{D:()=>d});var s=i(221020),r=i(224173),o=i(772812),n=i(180329),a=i(423654),c=i(799649);const l="vkitCommentReplyTarget__root--h5WXf",d=({before:e,children:t,onClick:i,onClearReply:d,clearLabel:u,disabled:h,...p})=>(0,s.Y)("div",{className:l,...p,children:(0,s.FD)(n.s,{align:"center",gap:4,children:[(0,s.Y)("span",{children:e}),(0,s.Y)(a.N,{onClick:i,disabled:h,noUnderline:h,children:t}),d&&(0,s.Y)(c.K,{className:(0,o.I)("color_icon_secondary"),label:u,onClick:d,noPadding:!0,hasHover:!1,hasActive:!1,children:(0,s.Y)(r.X,{})})]})})},223926:(e,t,i)=>{i.d(t,{y:()=>nt});var s=i(221020),r=i(785631),o=i(634164),n=i(928959),a=i(494090),c=i(674585),l=i(516427),d=i(180329),u=i(638945),h=i(782536),p=i(880414),_=i(455386),v=i(908759),m=i(214760),g=i(579316),y=i(409698),b=i(56471);const f="vkitSecondaryAction__root--5pSef",k="vkitSecondaryAction__iconButton--GyepL",w="vkitSecondaryAction__iconButtonCircle--dDJyc",C="vkitSecondaryAction__chevron--zfWYB",S=({action:e})=>{const t=()=>{switch(e.kind){case"chevron":return(0,s.Y)(g.j,{className:C});case"button":return(0,s.Y)(y.$,{size:"s",mode:"secondary",href:e.href,onClick:e.onClick,...(0,a.e)(e.isExternal),children:e.text});case"icon_button":const t="circle"===e.style;return(0,s.Y)(l.SB4,{className:(0,o.$)(k,t&&w),href:e.href,onClick:e.onClick,"aria-label":e.ariaLabel,...(0,a.e)(e.isExternal),children:e.icon})}};return e.tooltip?(0,s.Y)("div",{className:f,"data-testid":"secondary-action",children:(0,s.Y)(b.f,{enableInteractive:"chevron"!==e.kind,text:e.tooltip,offsetByMainAxis:0,children:t()})}):(0,s.Y)("div",{className:f,children:t()})};var P=i(815287),A=i(690250),T=i(539325),L=i(87256),I=i(447552),O=i(560812),D=i(399668),E=i(546863),Y=i(467471),N=i(283815),x=i(437655),j=i(615749),F=i(421413),R=i(655733),M=i(535629),B=i(227463),V=i(109799),z=i(616433),U=i(116710),$=i(986038),H=i(403913),G=i(984579),K=i(482853),q=i(178544),W=i(915416),X=i(698606),Q=i(348486),J=i(726792),Z=i(222880),ee=i(675151),te=i(787695),ie=i(919162),se=i(537090),re=i(970362),oe=i(343842),ne=i(781326),ae=i(156086),ce=i(356560),le=i(997272),de=i(540184),ue=i(711240),he=i(726756),pe=i(257460),_e=i(782281),ve=i(589745),me=i(679313),ge=i(883113),ye=i(373154),be=i(599513),fe=i(884433),ke=i(764001),we=i(555829),Ce=i(40853),Se=i(904804),Pe=i(223271),Ae=i(973744),Te=i(190944),Le=i(638679),Ie=i(563287);const Oe={picture_outline:[L.i,I.w],archive_outline:[O.K,D.A],video_outline:[E.f,Y.b],song_outline:[N.d,x.r],book_spread_outline:[j.k,F.g],text_outline:[R.L,M.X],document_outline:[B.z,V.F],podcast:[z.Y,U.s],external_link_outline:[$.b,H.p],poll_outline:[G.d,K.y],list_like_outline:[q.z,W.J],location_map_outline:[X.z,Q.D],article_box_outline:[J.I,Z.w],music_mic_outline:[ee.w,te.o],notebook_check_outline:[ie.Z,se.v],calendar_outline:[re.e,oe.K],playlist_outline:[ne.k,ae.K],text_live_outline:[ce.F,le.v],flash_outline:[de.O,ue.u],hide_outline:[he.A,pe.a],delete_outline:[_e.P,ve.p],lock_outline:[me.Z,ge.z],photos_stack_outline:[ye.B,be.i],block_outline:[fe.V,ke.D],recent_outline:[we.Z,Ce.$],video_playlist_outline:[Se.d,Pe.s],market_outline:[Ae.Q,Te.U],message_outline:[Le.X,Ie.P]},De=({name:e,level:t})=>{const i=Oe[e][t-1];return(0,s.Y)(i,{})};var Ee=i(968867),Ye=i(976357);const Ne=({name:e})=>{switch(e){case"donut_circle_fill_yellow":return(0,s.Y)(Ee.R,{});case"prometey_circle_fill_red":return(0,s.Y)(Ye.x,{})}};var xe=i(741509);const je=({mode:e})=>{const t="equalizer_active"===e;return(0,s.Y)(T._.Overlay,{theme:"dark",visibility:"always",children:(0,s.Y)(xe.r,{playing:t})})},Fe={1:40,2:44},Re={1:"l",2:"m"},Me={square:void 0,circle:"circle",squircle:"paper"},Be=({image:e,icon:t,badge:i,level:r,overlay:o,children:n,...a})=>{const c=Fe[r],l=(0,P.useMemo)((()=>{if(!e)return;const t=(0,A.xt)(e.sizes,c);return t?.url}),[e,c]);return(0,s.FD)(T._,{src:l,size:c,noBorder:!l,borderRadius:(e?.style&&Me[e.style])??Re[r],fallbackIcon:t&&(0,s.Y)(De,{name:t,level:r}),...a,children:[i&&(0,s.Y)(T._.Badge,{background:"stroke",children:(0,s.Y)(Ne,{name:i})}),o&&(0,s.Y)(je,{mode:o}),n]})},Ve="vkitSecondaryAttachment__root--fLzRK",ze="vkitSecondaryAttachment__rootNoPadding--fOHb9",Ue="vkitSecondaryAttachment__rootNoHorizontalPadding--BdUDv",$e="vkitSecondaryAttachment__rootVerticalPaddingRedesign--Yn9zT",He="vkitSecondaryAttachment__before--KK4xy",Ge="vkitSecondaryAttachment__content--LwlKa",Ke="vkitSecondaryAttachment__title--d60Dk",qe="vkitSecondaryAttachment__contentWithProgressBars--enGcq",We="vkitSecondaryAttachment__description--358bQ",Xe="vkitSecondaryAttachment__titleText--KKiQ1",Qe="vkitSecondaryAttachment__titleTextDisclaimer--pa5xY",Je="vkitSecondaryAttachment__verified--nxpgR",Ze="vkitSecondaryAttachment__titleIcon--NcUNC",et="vkitSecondaryAttachment__progressTime--v6Fnp",tt="vkitSecondaryAttachment__progressBarContent--KHKdS",it="vkitSecondaryAttachment__progressBar--MCDhH",st="vkitSecondaryAttachment__after--I99pb",rt="vkitSecondaryAttachment__volume--iU8Vc",ot=({children:e,className:t})=>(0,s.Y)("div",{className:t,onClick:n.T,children:e}),nt=({attachment:e,action:t,after:i,overlay:n,imageLevel:g=1,noPadding:y,duration:b,progress:f,onSeek:k,volume:w,showProgressBars:C,onVolumeChange:P,bufferingProgress:A,noHorizontalPadding:T,verticalPaddingRedesign:L,loadingSliderLabel:I,playbackSliderLabel:O,previewPlaybackSliderLabel:D,volumeSliderLabel:E,noticeIcon:Y})=>{const{content:N,image:x,badge:j,restricted:F,multiline:R,icon:M}=e,{isVerified:B,titleAfterIcon:V,title:z,description:U}=N,{onClick:$,href:H,isExternal:G,ariaLabel:K}=t||{},q=Boolean(t&&(0,c.b)(t)),W=R?0:1,X=Y||V;return(0,s.FD)(l.SB4,{"data-testid":"secondaryattachment",className:(0,o.$)(Ve,y&&ze,T&&Ue,L&&$e),hasActive:q,hasHover:q,hoverMode:T?"opacity":void 0,activeMode:T?"opacity":void 0,onClick:$,href:H,"aria-label":K,...(0,a.e)(G),children:[(0,s.Y)("div",{"data-testid":"secondaryattachment-before",className:He,children:(0,s.Y)(Be,{alt:"",image:x,icon:M,badge:j,level:g,overlay:n})}),(0,s.FD)("div",{className:(0,o.$)(Ge,C&&qe),children:[(0,s.FD)(d.s,{align:"center","data-testid":"secondaryattachment-title",className:Ke,children:[F?(0,s.Y)(p.b,{TypographyComponent:u.LE,className:(0,o.$)(Xe,Qe),weight:"2",lines:W,children:z}):(0,s.Y)(p.b,{TypographyComponent:u.$j,level:"1",weight:"2",className:Xe,lines:W,children:z}),B&&(0,s.Y)(r.L,{"data-testid":"secondaryattachment-verified",className:Je}),!!X&&(0,s.Y)("div",{"data-testid":"secondaryattachment-titleaftericon",className:Ze,children:X})]}),U&&(0,s.Y)(p.b,{"data-testid":"secondaryattachment-description",TypographyComponent:u.tW,className:We,lines:1,children:U}),C&&(0,s.Y)(d.s,{align:"center",className:et,children:(0,s.Y)(v.R,{duration:b??0,progress:f??0,mode:"normal",size:"s"})}),(0,s.Y)(ot,{className:tt,children:(0,s.Y)("div",{className:it,children:C&&(0,s.Y)(_.i,{duration:b??0,sliderSize:"m",heightByLine:!0,playbackProgress:f??0,onPlaybackProgressChange:k,loadingProgress:A??0,loadingSliderLabel:I,playbackSliderLabel:O,previewPlaybackSliderLabel:D})})})]}),C&&(0,s.Y)(ot,{className:rt,children:(0,s.Y)(m.P,{size:"xs",volume:w??0,onVolumeChange:P,sliderLabel:E})}),i&&(0,s.Y)(h.e,{"data-testid":"secondaryattachment-after",className:st,mode:"horizontal",gap:"s",children:(Array.isArray(i)?i:[i]).map((e=>(0,s.Y)(S,{action:e},e.key)))})]})}},402816:(e,t,i)=>{i.d(t,{F:()=>m});var s=i(221020),r=i(634164),o=i(516427),n=i(237582),a=i(962644);const c="vkitClipCard__root--JREUo",l="vkitClipCard__rootNoCover--13Nrn",d="vkitClipCard__rootIsBlurred--Vo8ZC",u="vkitClipCard__cover--732Td",h="vkitClipCard__background--Fx5PD",p="vkitClipCard__rootIsDarkened--lfSwe",_="vkitClipCard__coverBlack--lM2fS",v={s:"vkitClipCard__rootRadiusSmall--pSY9P",l:void 0,none:"vkitClipCard__rootRadiusNone--kbGrH"},m=({width:e,ratio:t=9/16,borderRadius:i="l",cover:m,mode:g="contain",blurred:y,darkened:b,className:f,children:k,...w})=>(0,s.Y)("div",{"data-testid":"clipcard",style:{width:e},...w,children:(0,s.FD)(o.glH,{mode:"none",ratio:t,className:(0,r.$)(c,v[i],!m&&l,y&&d,b&&p,f),children:[m&&(0,s.FD)(s.FK,{children:[(0,s.Y)(n.v,{"data-testid":"clipcard-cover",className:(0,r.$)(u,"contain"===g&&_),widthSize:"100%",heightSize:"100%",objectFit:g,alt:"",src:m,noBorder:!0}),(0,s.Y)(a.h,{className:h})]}),k]})})},99265:(e,t,i)=>{i.d(t,{H:()=>w,E:()=>S});var s=i(221020),r=i(257460),o=i(455548),n=i(40853),a=i(842321),c=i(589745),l=i(504117),d=i(764001),u=i(867227),h=i(387204),p=i(347820),_=i(339619),v=i(253937),m=i(772812),g=i(405697),y=i(638945),b=i(962644),f=i(402816);const k="vkitClipRestricted__overlay--4g7aj",w=["lock_outline","hide_outline","recent_outline","delete_outline","do_not_disturb_outline","info_outline","cancel_circle_outline"],C={hide_outline_28:r.a,hide_outline_56:o.V,recent_outline_28:n.$,recent_outline_56:a.E,delete_outline_28:c.p,delete_outline_56:l.Y,lock_outline_28:d.D,lock_outline_56:u.M,do_not_disturb_outline_28:d.D,do_not_disturb_outline_56:u.M,info_outline_28:h.w,info_outline_56:p.L,cancel_circle_outline_28:_.g,cancel_circle_outline_56:v.v},S=({icon:e,title:t,text:i,action:r,cover:o,size:n="s",...a})=>{const c=e?`${e}_${"l"===n?56:28}`:null,l=c?C[c]:"";return(0,s.Y)(f.F,{...a,cover:o,mode:"cover",darkened:!0,children:(0,s.Y)(b.h,{centered:!0,className:k,children:(0,s.Y)(g.O,{stretched:!0,"data-testid":e?`clips_restriction_${e}`:"clips_restriction_empty_icon",icon:l?(0,s.Y)(l,{className:(0,m.I)(o?"color_icon_contrast":"color_icon_secondary")}):void 0,action:r,header:t&&(0,s.Y)(y.hE,{level:"2",weight:"2",className:o?(0,m.I)("color_text_contrast"):void 0,children:t}),children:i&&(0,s.Y)(y.fz,{className:(0,m.I)(o?"color_text_contrast":"color_text_secondary"),children:i})})})})}},272057:(e,t,i)=>{i.d(t,{W:()=>n});var s=i(377776),r=i(364517),o=i(815287);const n=({accept:e,onChange:t,dragZoneElement:i,...n})=>{const c=(0,o.useId)(),l=(0,s.d)(n),d=(0,r.K)(t??(()=>{})),u=(0,o.useRef)(null),[h,p]=(0,o.useState)(!1),[_,v]=(0,o.useState)(!1),m=(0,o.useCallback)((t=>{t.preventDefault(),p(!1),v(!1);const i=t.currentTarget.files||t.dataTransfer?.files;if(!i)return;const{acceptedFiles:s,rejectedFiles:r}=function(e,t){const i="string"==typeof t?t.split(",").map((e=>e.trim())):t??[];if(!i.length)return{acceptedFiles:[...e],rejectedFiles:[]};const s=[],r=[];for(const t of e)a(t,i)?s.push(t):r.push(t);return{acceptedFiles:s,rejectedFiles:r}}(i,e);d(s,r),u.current&&(u.current.value="")}),[e,d]),g=(0,o.useCallback)((e=>{const t=u.current;if(!t)return!1;const i=e.target;return i.id===t.id||null!==i.closest(`[data-for="${t.id}"]`)}),[]);return(0,o.useEffect)((()=>{const t=u.current;t&&Object.assign(t,{...l,id:c,type:"file",accept:Array.isArray(e)?e.join():e??""})}),[c,l,e]),(0,o.useEffect)((()=>{const e=u.current;if(e)return e.addEventListener("change",m),()=>{e.removeEventListener("change",m)}}),[m,l.disabled]),(0,o.useEffect)((()=>{if(l.disabled)return;const e=e=>{e.preventDefault(),e.stopPropagation();const t=e.dataTransfer;if(!t)return;(t.types.includes("Files")||[...t.items].some((({kind:e})=>"file"===e)))&&p(!0);const i=g(e);v(i)},t=e=>{e.preventDefault(),document.body.contains(e.relatedTarget)||(p(!1),v(!1))},s=e=>{t(e);g(e)&&m(e)},r=i??document.body;return r.addEventListener("dragenter",e),r.addEventListener("dragover",e),r.addEventListener("dragleave",t),r.addEventListener("drop",s),()=>{r.removeEventListener("dragenter",e),r.removeEventListener("dragover",e),r.removeEventListener("dragleave",t),r.removeEventListener("drop",s)}}),[l.disabled,g,m,i]),{fileInputId:c,fileInputRef:u,isFilesDragging:h,isDropZoneEntered:_}};function a(e,t){return t.some((t=>{if(!t.startsWith(".")){return t.endsWith("/*")?e.type.startsWith(t.slice(0,-1)):e.type===t}return e.name.endsWith(t)}))}},690250:(e,t,i)=>{i.d(t,{My:()=>o,fA:()=>r,xt:()=>n});var s=i(300806);const r=e=>!e.some((e=>e.width&&e.height)),o=(e,t=200,i)=>{const r=e.find((e=>"x"===e.type||"y"===e.type));if(!r)return null;const o="undefined"!=typeof window?Math.max(window.devicePixelRatio,1):1,n=Math.ceil(t*o),a=i?Math.ceil(i*o):null;return(0,s.q)([r],n,a)},n=(e,t=200,i)=>{if(!e)return null;if("string"==typeof e)return{url:e};if(r(e))return o(e,t,i);const n="undefined"!=typeof window?Math.max(window.devicePixelRatio,1):1,a=(0,s.q)(e,Math.ceil(t*n),i?Math.ceil(i*n):null);return a?.url?a:null}}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/core_spa/chunks/72769.423cc1e8.js")}catch(e){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/core_spa/chunks/72769.423cc1e8.js",e),e}