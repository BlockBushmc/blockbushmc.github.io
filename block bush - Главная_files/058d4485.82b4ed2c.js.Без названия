try{(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[95903],{623868:(_,e,t)=>{function i(){return{icon:'<svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><g id="playlist_24__Page-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="playlist_24__playlist_24"><path id="playlist_24__Shape" d="M0 0h24v24H0z"/><path d="M13 6.88c0-.48-.4-.88-.88-.88H2.88C2.4 6 2 6.4 2 6.88v.24c0 .48.4.88.88.88h9.24c.49 0 .88-.4.88-.88v-.24Zm0 4c0-.48-.4-.88-.88-.88H2.88c-.49 0-.88.4-.88.88v.24c0 .48.4.88.88.88h9.24c.49 0 .88-.4.88-.88v-.24ZM2 15.12v-.24c0-.48.4-.88.88-.88h4.23c.5 0 .89.4.89.88v.24c0 .48-.4.88-.89.88H2.88c-.49 0-.88-.4-.88-.88Zm15 .7c0 3.74-.99 4.64-3.77 5.13-1.48.26-3.23-.48-3.23-2.8 0-1.15.72-2.23 2.2-2.51 1.12-.22-.43.05 2.12-.42.62-.12.69-.34.69-.81L15 12.56V5.98c0-1.1.83-1.5 2.6-1.85 0 0 2.34-.34 3.82-.61.33-.06.58.06.58.44V7.4c0 .37-.15.54-.53.6-1.5.27-3.99.65-3.99.65-.33.08-.48.32-.48.65v6.51Z" id="playlist_24__Mask" fill="currentColor"/></g></g></svg>',name:"playlist_24"}}t.d(e,{getIcon24Playlist:()=>i})},413855:(_,e,t)=>{function i(){return{icon:'<svg width="56" height="56" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg"><g id="playlist_outline_56__Icons-56/playlist_outline_56" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="playlist_outline_56__playlist_outline_28"><path id="playlist_outline_56__playlist_outline_56" d="M0 0h56v56H0z"/><path d="M39 38.93c0 4.55-1.94 7.97-5.07 9.62-2.84 1.5-6.24 1.22-8.22-.76-2.04-2.04-2.3-5.5-.58-8.3C27 36.44 30.77 34.61 36 34.5V16.76a6.88 6.88 0 0 1 5.03-6.68c1.08-.36 3.24-.92 6.5-1.67l1.64-.37A1.5 1.5 0 0 1 51 9.5v4.2a6.7 6.7 0 0 1-4.97 6.48L39 22.05Zm-3-1.42h-.4c-4 .18-6.67 1.53-7.91 3.54-1.02 1.66-.88 3.6.14 4.62.98.98 2.96 1.14 4.7.22 2.12-1.11 3.47-3.5 3.47-6.96V37.5ZM27.5 22a1.5 1.5 0 0 1 0 3h-19a1.5 1.5 0 0 1 0-3h19ZM48 11.38a83.8 83.8 0 0 0-6.03 1.54l-.21.08c-1.93.71-2.8 2.05-2.76 4.33v1.62l6.25-1.67A3.7 3.7 0 0 0 48 13.71ZM30.5 10a1.5 1.5 0 0 1 0 3h-22a1.5 1.5 0 0 1 0-3h22Z" id="playlist_outline_56__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"playlist_outline_56"}}t.d(e,{getIcon56PlaylistOutline:()=>i})},993110:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{AudioPage:()=>AudioPage,currentAudioPage:()=>currentAudioPage});var _vkontakte_internal_domains__WEBPACK_IMPORTED_MODULE_55__=__webpack_require__(460884),_web_di__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(319756),_shared_evbus__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(338329),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(330882),_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__=__webpack_require__(983567),_web_lib_fx__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(939646),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(636576),_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(226220),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(478752),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(246429),_web_lib_scroll_utils__WEBPACK_IMPORTED_MODULE_59__=__webpack_require__(692543),_web_lib_stats__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(568129),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(972332),_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(392358),_shared_audio_AudioStats__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(972623),_web_audio_player_stat_onAdditionalEvent__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(752740),_web_auto_list_auto_list__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(150681),_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(138586),_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(898848),_web_legacy_ui_ui_scroll__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(586573),_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(754866),_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(270959),_web_indexer_indexer__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(542789),_web_lib_utils__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(449299),_web_grid_sorted__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(955377),_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(683234),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(866467),_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(102088),_web_lib_feature_tooltips__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(568775),_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(342879),_web_audio_player_common_toggleAudioHQBodyClass__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(636412),_web_audio_player_playlist_followPlaylist_followPlaylist__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(667147),_shared_audio_utils_isPodcast__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(251458),_web_audio_player_track_drawAudio__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(67609),_web_audio_player_track_onAudioChoose__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(656645),_web_audio_player_playlist_onPlaylistChoose__WEBPACK_IMPORTED_MODULE_61__=__webpack_require__(765840),_shared_audioplayer_AudioPlayerAdapter_audioTuple_audioTupleToAudioObject__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(423015),_web_audio_player_utils_getLayer__WEBPACK_IMPORTED_MODULE_69__=__webpack_require__(876170),_web_audio_player_playlist_showAudioPlaylist__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(936011),_web_audio_player_track_onRowOver__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(17232),_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(867366),_web_audio_catalog_CatalogController__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(855776),_web_audio_components_FullscreenBanner__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(581789),_icons_desktop__WEBPACK_IMPORTED_MODULE_58__=__webpack_require__(413855),_icons_desktop__WEBPACK_IMPORTED_MODULE_62__=__webpack_require__(138431),_icons_desktop__WEBPACK_IMPORTED_MODULE_63__=__webpack_require__(740361),_icons_desktop__WEBPACK_IMPORTED_MODULE_64__=__webpack_require__(493782),_icons_desktop__WEBPACK_IMPORTED_MODULE_65__=__webpack_require__(623868),_icons_desktop__WEBPACK_IMPORTED_MODULE_66__=__webpack_require__(597825),_web_components_ui_gallery__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(335700),_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(351118),_shared_audio_utils_getAudioExtra__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(482310),_shared_ranges__WEBPACK_IMPORTED_MODULE_57__=__webpack_require__(468073),_web_audio_player_playlist_addAudioPlaylistToMyAudioPlaylists__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(793473),_web_audio_services_AudioPage__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(655146),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_60__=__webpack_require__(540462),_AudioCatalogVkMixBlockTq__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(335423),_AudioLegalNoticeIconTq__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(920554),_web_audio_services_AudioLongtap_AudioLongtapTooltip__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(927848),_spa_web_routes_audio_services_AudioSectionEffects__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(161497),_AudioPlayerBlockTq__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(390552),_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(459899),_PlaylistLoadingProvider__WEBPACK_IMPORTED_MODULE_70__=__webpack_require__(331600),_player_radiostation_RadiostationNavigationEventsHandling__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(830632),_vkontakte_internal_plugins__WEBPACK_IMPORTED_MODULE_72__=__webpack_require__(951652),_web_audio_catalog_AudioCatalogStatsCollector__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(530351),_web_audio_player_track_getAudioFromEl__WEBPACK_IMPORTED_MODULE_51__=__webpack_require__(384810),_shared_audio_utils_mergeAudioExtra__WEBPACK_IMPORTED_MODULE_71__=__webpack_require__(137590),_shared_audio_utils_mergeAudioTupleWithoutContext__WEBPACK_IMPORTED_MODULE_52__=__webpack_require__(315621),_vkontakte_internal_vk_utils__WEBPACK_IMPORTED_MODULE_67__=__webpack_require__(70148),_spa_web_widgets_audio_music_MusicPlaylistCoverUploader_constants__WEBPACK_IMPORTED_MODULE_53__=__webpack_require__(283050),_spa_shared_audio_abstract_image_model__WEBPACK_IMPORTED_MODULE_68__=__webpack_require__(186088),_web_audio_EVA_domain_music_MusicService_lazySingleton__WEBPACK_IMPORTED_MODULE_54__=__webpack_require__(68369);const audioNavScreenProvider=new _vkontakte_internal_domains__WEBPACK_IMPORTED_MODULE_55__.AudioNavScreenProvider,SLIDER_TIMEOUT=1e4;let sectionsToUpdate=[];function currentAudioPage(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.gpeByClass)("_audio_page_layout",_);return!!e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.data)(e,"audioPage")}function AudioPage(_,e){const t=_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageProxy.ensure();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.data)(_,"audioPage",this),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)(cur.lang||{},e.langs),(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().langs=e.langs,this._data=e,this._ownerId=e.ownerId,e.playlists&&e.playlists.length&&(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().addWithReplacePlaylists(e.playlists.filter(Boolean)),this.isLayer()||(cur.audioPage=this,_web_audio_services_AudioLongtap_AudioLongtapTooltip__WEBPACK_IMPORTED_MODULE_45__.AudioLongtapTooltip.ensure().getHints()),this.isLayer()&&uiSearch.init("audio_search_layer"),(0,_web_audio_player_common_toggleAudioHQBodyClass__WEBPACK_IMPORTED_MODULE_27__.toggleAudioHQBodyClass)(),this._els={pageContainer:_,sections:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_page_sections",_),playerWrap:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_page_player_wrap",_),player:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_page_player",_),contentBlock:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_page_content_block",_),scrollWrap:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_page_content_block_wrap",_),searchSectionAudios:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_search__local_audios_list",_),searchSectionAudiosHeader:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("audio_section_search__local_audios_header",_),searchSectionPlaylists:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_search__local_playlists_list",_),searchSectionPlaylistsHeader:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_search__local_playlists_header",_),searchNoLocalResults:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_local_no_results",_),searchGlobalBlocks:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_global_search__blocks",_),searchGlobalCommunitiesPlace:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_global_search__communities_place",_),searchGlobalPlaylistsPlace:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_global_search__playlists_place",_),searchGlobalArtistsPlace:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_global_search__artists_place",_),searchGlobalAudiosBlock:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_global_search__audios_block",_),searchGlobalAudiosBlockHeader:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_global_search__audios_header",_),searchGlobalAudiosList:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_global_search__audios_list",_),searchInput:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("ui_search_field",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_search",_)),footer:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_page__footer",_),footerNowPlayingInfo:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_page__footer_now_playing",_),footerClearNowPlayingButton:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_page__footer_clear_playlist",_)},this.isLayer()&&(this._scroll=new _web_legacy_ui_ui_scroll__WEBPACK_IMPORTED_MODULE_16__.default(this._els.scrollWrap,{global:!0,stopScrollPropagation:!0,stopScrollPropagationAlways:!0})),this._readyAudio=this._data.readyAudio;const i=this._data.readyPlaylist;i&&(this._pagePlaylist=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getPlaylist(i.type,i.ownerId,i.id),this._pagePlaylist.mergeWith(i)),!this._readyAudio&&this._pagePlaylist&&(this._readyAudio=this._pagePlaylist.getAudioAt(0)),this._readyAudio&&this._data.preventRestorePlayerAudio&&(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)()?.preventRestoreAudio()?.(),this._data.playlistCoverUploadOptions&&(cur.audioCoverUploadOptions=cur.audioCoverUploadOptions||{},cur.audioCoverUploadOptions[this._ownerId]=this._data.playlistCoverUploadOptions),this.isLayer()||(cur.module=e.module||"audio",cur.oid=this._ownerId,+this._ownerId==+vk.id?cur.submodule="my":_shared_ranges__WEBPACK_IMPORTED_MODULE_57__.Ranges.isGroupId(this._ownerId)?cur.submodule="group_list":cur.submodule="user_list"),vk.id&&this._initPlayer(),this.initNavigation(),t.emitter.emit(_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageEventType.AudioRecomsOnboardingShowRequested,{reason:_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioRecomsOnboardingShowRequestedEventReason.AudioPageInit}),this.catalogController=new _web_audio_catalog_CatalogController__WEBPACK_IMPORTED_MODULE_36__.CatalogController(_),this.showSection(e.initSection,null,this._data.onlySkeleton),e.initSection||this.catalogController.initBlocksManually();const o=new URLSearchParams(location.search);this.defaultSection=!o.get("section")&&e.initSection||"general",this._initSearchParams(),this.promoAlbumSlideInit(),this._els.searchInput&&this._els.searchInput.focus(),this.isLayer()||this.isPodcastPage()||!nav.objLoc.q||"search_playlists"===nav.objLoc.section||this._els.searchInput&&(this._els.searchInput.value=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.winToUtf)(nav.objLoc.q),this._showSearchSection(nav.objLoc)),this.updateCurrentPlayingInfo(),(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().setStatusExportInfo(this._data.export),this.updateStatusExportControls(),this._initEvents(),this._initMusicPlaylistFollowingEvents(),window.onAudioPageLoaded&&(window.onAudioPageLoaded.call(this),delete window.onAudioPageLoaded),this.loadMarketItemsCarousel(),t.emitter.emit(_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageEventType.Updated),_player_radiostation_RadiostationNavigationEventsHandling__WEBPACK_IMPORTED_MODULE_49__.RadiostationNavigationEventsHandling.ensure(),(0,_web_di__WEBPACK_IMPORTED_MODULE_0__.ensureDIRootWebContainer)().resolve(_spa_web_routes_audio_services_AudioSectionEffects__WEBPACK_IMPORTED_MODULE_46__.AudioSectionEffects).activate()}(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setStartupHandler("AudioPlayerBlock/init",_AudioPlayerBlockTq__WEBPACK_IMPORTED_MODULE_47__.AudioPlayerBlockTq),(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setStartupHandler("AudioCatalogVkMixBlock/init",_AudioCatalogVkMixBlockTq__WEBPACK_IMPORTED_MODULE_43__.AudioCatalogVkMixBlockTq),(0,_AudioLegalNoticeIconTq__WEBPACK_IMPORTED_MODULE_44__.registerAudioLegalNoticeIconTq)(),AudioPage.address="audio",AudioPage.initedFromAudioTs=!1,AudioPage.updateSearchHighlight=function(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_playlist",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.gpeByClass)("_audio_layout",this));(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.toggleClass)(e,"audio_search_focused","focus"===_.type)},AudioPage.onSearchFocused=function(_){AudioPage.updateSearchHighlight(_)},AudioPage.prototype.updatePlaylistsCounter=function(_){if(cur.audioPage&&_===cur.audioPage.getOwnerId()){let _;if(_=cur.audioPage._els.pageContainer.querySelector(".CatalogBlock__own_only_playlists_header .CatalogBlock__title"),_){const e=cur.audioPage._data.playlists.length;_.innerHTML=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.langNumeric)(e,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.curLang)("audio_playlists_count_title")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.toggleClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.gpeByClass)("_audio_page_section_layout",_),"audio_section_empty",!e)}}},AudioPage.getCoverImage=function(_,e){let t="";if(_)t=`<img alt="${(0,_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_39__.escape)(e)}" width='143px' height='143px' src="${_}" loading='lazy' />`;else{const{icon:_}=(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_58__.getIcon56PlaylistOutline)();t=`<div class="audio_pl_cover_placeholder">${_}</div>`}return t},AudioPage.setCoverImageElem=function(_,e,t){if(e){const i=_.querySelector(".audio_pl_cover_placeholder"),o=_.querySelector("img");o&&_.removeChild(o),i&&_.removeChild(i);const s=new Image;s.src=e,s.setAttribute("alt",(0,_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_39__.escape)(t)),s.setAttribute("width","143px"),s.setAttribute("height","143px"),s.setAttribute("loading","lazy"),_.appendChild(s)}else{const e=_.querySelector("img");if(e){_.removeChild(e);const{icon:t}=(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_58__.getIcon56PlaylistOutline)(),i=document.createElement("div");i.classList.add("audio_pl_cover_placeholder"),i.innerHTML=t,_.appendChild(i)}}},AudioPage.deletePlaylist=function(_,e,t){const i=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getPlaylist(_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_PLAYLIST,_,e),o='<div style="overflow: hidden; text-overflow: ellipsis;">'+(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.langReplace)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_sure_delete_playlist_box_text"),{name:i.getTitle()})+"</div>";(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_sure_delete_playlist_box_title")},o,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_sure_delete_playlist_box_yes"),function(){ajax.post("al_audio.php?act=delete_playlist",{hash:t,playlist_owner_id:_,playlist_id:e,page_owner_id:cur.audioPage?cur.audioPage.getOwnerId():0},{onDone:AudioPage.onMusicPlaylistDeleted,onFail:()=>!0}),AudioPage.onMusicPlaylistDelete(_,e)}.bind(this),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_cancel"))},AudioPage.onMusicPlaylistToggleFollowing=async(_,e,t)=>{const i=(await(0,_web_audio_EVA_domain_music_MusicService_lazySingleton__WEBPACK_IMPORTED_MODULE_54__.ensureMusicService)()).playlistsFollowing,o=[_,e,Array.from(i.getUnfollowedTargets(_)??[])].flatMap((_=>`._audio_pl_${_.fullId}`)).join(", ");document.querySelectorAll(o).forEach((_=>{const e=_.querySelector(".audio_pl__actions_add");e&&(0,_web_audio_player_playlist_followPlaylist_followPlaylist__WEBPACK_IMPORTED_MODULE_28__.setMusicPlaylistFollowingState)(e,_,t)}))},AudioPage.onMusicPlaylistDelete=(_,e)=>{const t=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.getBoxQueue)();if(t&&t.hideAll(!0),layers&&layers.fullhide&&layers.fullhide(),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass)("_audio_pl_"+_+"_"+e),(function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.re)(this)})),window.location.pathname.includes(`/music/playlist/${window.vk.id}`))return window.history.length>2?void window.history.back():void document.location.replace(`https://${window.vk.apiConfigDomains.domain}/music?section=${cur.audioPage.defaultSection}`);if(cur.audioPage){if(cur.audioPage._data.playlists=cur.audioPage._data.playlists.filter((function(t){return!(t.id==e&&t.owner_id==_)})),!cur.audioPage._data.playlists.length)return void nav.reload();cur.audioPage.updatePlaylistsCounter&&cur.audioPage.updatePlaylistsCounter(_)}},AudioPage.onMusicPlaylistDeleted=_=>{if(cur.audioPage){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section__all",cur.audioPage.getPageContainer()),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_page_block__playlists_items",e);if(e&&t){const e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(t,"max-items"));if(_&&t.children.length<e){const{thumb:e,title:i}=_;_.cover_image=AudioPage.getCoverImage(e,i),t.appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.se)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.getTemplate)("audio_pl_item",_)))}t.children.length||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.addClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.gpeByClass)("_audio_page_section_layout",t),"no_playlists"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.re)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.gpeByClass)("_audio_page_titled_block",t)))}}},AudioPage.setNavScreen=function(_,e){audioNavScreenProvider.setPage(_,e)},AudioPage.prototype.getCurrentSection=function(){return this._currentSection},AudioPage.prototype.getOwnerPlaylists=function(){return this._data.playlists},AudioPage.loadPlaylists=function(ownerId,totalCount,skipFirstChunk,forAttachBox,onDone){const chunkSize=50,chunks=[];(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isFunction)(totalCount)&&(onDone=totalCount,totalCount=void 0,skipFirstChunk=!1),cur.playlistsCache=cur.playlistsCache||{};const cacheKey=ownerId+"_"+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)(skipFirstChunk);if(cur.playlistsCache[cacheKey])return onDone(cur.playlistsCache[cacheKey]);function onAllLoaded(){let _=[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.each)(chunks,(function(e,t){t&&(_=_.concat(t))})),cur.playlistsCache=cur.playlistsCache||{},cur.playlistsCache[cacheKey]=_,onDone&&onDone(_)}function _loadChunk(chunkIndex,_cb){const groupId=cur.group_id||(_shared_ranges__WEBPACK_IMPORTED_MODULE_57__.Ranges.isGroupId(cur.oid)?-cur.oid:0);ajax.post("al_audio.php?act=owner_playlists",{owner_id:ownerId,group_id:groupId,offset:chunkIndex*chunkSize,is_attach:forAttachBox?1:0},{onDone:function(playlists,totalCount,additionalData){additionalData.templates_script&&eval(additionalData.templates_script),additionalData.langs&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)(cur.lang,additionalData.langs),additionalData.audio_playlist_cover_upload_options&&(cur.audioCoverUploadOptions=cur.audioCoverUploadOptions||{},cur.audioCoverUploadOptions[ownerId]=additionalData.audio_playlist_cover_upload_options),chunks[chunkIndex]=playlists,_cb(totalCount)},onFail:function(_){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(boxLoader),_)return(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_error")},_),!0}})}function _loadAllChunks(_,e,t){const i=Math.ceil(_/chunkSize);if(i&&i-e!=0){const _=new callHub(t,i-e);for(let t=e;t<i;t++)_loadChunk(t,(function(){_.done()}))}else t()}(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.isUndefined)(totalCount)?_loadChunk(0,(function(_){_loadAllChunks(_,1,onAllLoaded)})):_loadAllChunks(totalCount,skipFirstChunk?1:0,onAllLoaded)},AudioPage.prototype.getOwnerId=function(){return+this._ownerId},AudioPage.prototype.getPageContainer=function(){return this._els.pageContainer},AudioPage.prototype.getCurrentSectionEl=function(){return this.catalogController.currentSection&&this.catalogController.currentSection.getSectionElement()},AudioPage.prototype.reloadGeneralSectionData=function(_=null){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(boxLoader),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(boxLayerWrap),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.boxRefreshCoords)(boxLoader),this.showSection("general",(()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(boxLoader),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(boxLayerWrap),_?.()}),!1,!0)},AudioPage.prototype.canAddToGroup=function(){return this._data.canAudioAddToGroup},AudioPage.prototype.canEditGroup=function(){return this._data.canEdit},AudioPage.prototype.updateCurrentPlayingInfo=function(){if(!this.isLayer())return;const _=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentPlaylist();let e=_?_.getTitle():"";if(e){let t=_.getOriginalPlaylistRawId();if(_.getBlockId()){e=`<a href="${`/audio?section=recoms_block&type=${_.getBlockId()}`}"\n                  class="audio_page__footer_now_playing_link">\n                  ${e}\n                </a>`}else if(t||_.getType()===_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_PLAYLIST&&0!==_.getAlbumId()){let i,o,s;t?(t=t.split("_"),i=t[0],o=t[1],s=t[2]||""):(i=_.getOwnerId(),o=_.getAlbumId(),s=_.getAccessHash()||"");e=`<a href="${nav.toStr((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)({},nav.objLoc,{z:"audio_playlist"+i+"_"+o+(s?"/"+s:"")}))}"\n                  class="audio_page__footer_now_playing_link"\n                  onclick="if (checkEvent(event)) { return true } else { AudioUtils.showAudioPlaylist(${i}, ${o}, '${s}'); return cancelEvent(event) }">\n                  ${(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.encodeHtml)(e)}\n                </a>`}this._els.footerNowPlayingInfo.innerHTML=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_current_playing_from").replace("{playlist}",e)}else{const _=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentAudio();if((0,_shared_audio_utils_isPodcast__WEBPACK_IMPORTED_MODULE_29__.isPodcast)(_)){const e=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_podcast_playing");this._els.footerNowPlayingInfo.innerHTML=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_current_playing_from").replace("{playlist}",e.replace("{name}",_[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]))}else this._els.footerNowPlayingInfo.innerHTML=""}this._els.footerClearNowPlayingButton.innerHTML=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_clear_current_playlist"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.toggle)(this._els.footer,!!_)},AudioPage.prototype.onSearchFiltersChanged=function(_){const e=window.radioBtns["audio_search_type_"+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)(this.isLayer())],t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)(this._searchSortFilter?.selectedItems()[0][0]),i={performer:e.val?1:null,lyrics:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_fltr_with_lyrics",this._els.pageContainer),"on")?1:null,sort:t?1:null};this.syncParametersUI(i);let o=_&&(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isObject)(_)?_:i;this.isLayer()&&(o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)({},this._prevLoc,o)),nav.change(o,!1,{fromSearch:!0,filtersChanged:!0})},AudioPage.prototype._initSearchParams=function(){window.radioBtns["audio_search_type_"+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)(this.isLayer())]={els:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass)("_audio_search_type",this._els.pageContainer),keep:this.isLayer()};const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_fltr_sort",this._els.pageContainer);_&&(this._searchSortFilter=new window.Dropdown(_,this._data.sortFilters,{big:1,zeroPlaceholder:!0,onChange:this.onSearchFiltersChanged.bind(this)})),this.isLayer()||this.syncParametersUI(nav.objLoc)},AudioPage.prototype.syncParametersUI=function(_){const e="audio_search_type_"+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)(this.isLayer()),t=window.radioBtns[e];t&&(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.radiobtn)(t.els[_.performer?1:0],!!_.performer,e);const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_fltr_with_lyrics",this._els.pageContainer);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.toggleClass)(i,"on",!!_.lyrics);const o={performer:AudioPlayer.getLang("audio_performers_only"),lyrics:AudioPlayer.getLang("audio_search_with_text"),sort:AudioPlayer.getLang("audio_search_by_length")},s=this._els.searchInput;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.each)(["performer","lyrics","sort"],(function(e,t){uiSearch.toggleFilter(s,t,o[t],!!_[t])}))},AudioPage.onFilterRemoved=function(_,e,t){const i=currentAudioPage(e);(function(){switch(_){case"performer":const _="audio_search_type_"+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)(this.isLayer()),e=window.radioBtns[_];(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.radiobtn)(e.els[0],0,_);break;case"sort":const t=this._searchSortFilter.options.defaultItems[0][0];this._searchSortFilter.selectItem(t,!1);break;case"lyrics":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_fltr_with_lyrics",this._els.pageContainer),"on")}t||this.onSearchFiltersChanged()}).apply(i)},AudioPage.prototype._showSearchSection=function(_){this._toggleSearchProgress(!0);const e=_.globalQuery||_.q;this._sectionData={q:e,performer:_.performer};const t=void 0!==_.fromSuggestsAcceptId;t||(this._cur_qid=(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_8__.generateQID)()),this.showSection("search",function(){if(e){const i=this._data.sectionData.search?this._data.sectionData.search.qid:0;(0,_web_lib_stats__WEBPACK_IMPORTED_MODULE_8__.saveSearchAttemptStats)(_web_lib_stats__WEBPACK_IMPORTED_MODULE_8__.serviceAudio,0,!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.isVisible)(this._els.searchNoLocalResults),e,i,void 0,void 0,void 0,void 0,t&&_.fetchedQuery,void 0,void 0,_.fromSuggestsAcceptId)}this._toggleSearchProgress(!1)}.bind(this))},AudioPage.prototype._toggleSearchProgress=function(_){this._els.searchInput&&!this._muteSearch&&(_?uiSearch.showProgress(this._els.searchInput):uiSearch.hideProgress(this._els.searchInput))},AudioPage.prototype._doShowSearchSection=function(_){const e=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)();if(_&&(this._prevSearchParams=_),!(_=_||this._prevSearchParams))return;let t=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.replaceEntities)(_.q)+(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.replaceEntities)(_.globalQuery||"");(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.each)(["performer","lyrics","sort"],(function(e,i){t+=_[i]||0})),t+=this._ownerId,this._toggleSearchProgress(!0);const i=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getPlaylist(_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_PLAYLIST,this._ownerId,_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.DEFAULT_PLAYLIST_ID);function o(){i.search(_,function(i){let o="";const s=this._data.playlistsIndex?this._data.playlistsIndex.search(_.q):[];if(this.showSection("search"),s.length){let _="";(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.each)(s,(function(e,t){t.cover_image=AudioPage.getCoverImage(t.thumb,t.title),_+=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.getTemplate)("audio_pl_item",t)})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(this._els.searchSectionPlaylistsHeader),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(this._els.searchSectionPlaylists),o=+this._ownerId===vk.id?e.langs.audio_found_your_local_playlists:_shared_ranges__WEBPACK_IMPORTED_MODULE_57__.Ranges.isUserId(this._ownerId)?e.langs.audio_found_user_local_playlists:e.langs.audio_found_group_local_playlists,this._els.searchSectionPlaylistsHeader.innerHTML=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.langNumeric)(s.length,o),this._els.searchSectionPlaylists.innerHTML=_}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.searchSectionPlaylistsHeader),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.searchSectionPlaylists);const a=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getPlaylist(_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_SEARCH,vk.id,(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_20__.hashCode)(t));a.mergeWith({list:i,searchParams:{globalQuery:_.globalQuery||_.q,performer:_.performer,lyrics:_.lyrics,sort:_.sort}}),a.setLocalFoundCount(i.length),i.length||s.length?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.searchNoLocalResults):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(this._els.searchNoLocalResults),o=vk.id===+this._ownerId?e.langs.audio_no_local_results:_shared_ranges__WEBPACK_IMPORTED_MODULE_57__.Ranges.isUserId(this._ownerId)?e.langs.audio_no_user_local_results:e.langs.audio_no_group_local_results,this._els.searchNoLocalResults.innerHTML=o.replace("{query}","<strong>"+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.clean)(_.q)+"</strong>")),i.length||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.searchSectionAudiosHeader),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.searchSectionAudios)),this._pagePlaylist=a,this._toggleSearchProgress(!1)}.bind(this))}i.loadAll(function(){clearTimeout(this._onSilendLoadedTO),this._onSilendLoadedTO=setTimeout(function(){o.call(this)}.bind(this))}.bind(this))},AudioPage.prototype.showFriendMusic=function(_,e){return(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_4__.statlogsValueEvent)("audio_friends_block","click_friend"),this.isLayer()?nav.go({0:"/audios"+e},!1,{friendId:e}):nav.go("/audios"+e,_),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(_)},AudioPage.prototype._deinitNavigation=function(){cur.nav.pop(),this._navigationInited=!1},AudioPage.PageSections=["recoms_audio","recoms_block","search_block","recoms_personal","my"],AudioPage.followedRadioClassName="audio_page_player_follow_radiostation--followed";const layerSectionsToMainFrame=["search_block","search_playlists","recoms_block"];function updateDislikeStateInAudio(_,e){const t=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)();t?.updateAudioDislikeStatus(_.fullId,e),updateDislikeStateInAudioRowsData(_,e)}function updateDislikeStateInAudioRowsData(_,e){const t=Array.from(document.querySelectorAll(`._audio_row_${_.fullId}`));t.length<1||t.forEach((_=>{if(!_)return;const t=(0,_web_audio_player_track_getAudioFromEl__WEBPACK_IMPORTED_MODULE_51__.getAudioFromEl)(_);if(!t)return;const i=(0,_shared_audio_utils_getAudioExtra__WEBPACK_IMPORTED_MODULE_40__.getAudioExtra)(t);if(i.dislike===e)return;const o=(0,_shared_audio_utils_mergeAudioExtra__WEBPACK_IMPORTED_MODULE_71__.mergeAudioExtra)(i,{dislike:e});let s=[];s[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.EAudioTupleIndex.EXTRA]=o,s=(0,_shared_audio_utils_mergeAudioTupleWithoutContext__WEBPACK_IMPORTED_MODULE_52__.mergeAudioTupleWithoutContext)(t,s),_.setAttribute("data-audio",JSON.stringify(s))}))}function forEachAudioElement(_,e){const t=document.querySelectorAll(`.audio_row[data-full-id='${_.rawId}']`);Array.from(t).forEach((_=>{_&&e(_)}))}function checkIsGroupMusicBlock(_){return Boolean(_.closest(".CatalogBlock__group_audios"))}function checkIsOwnedMusicBlock(_){return Boolean(_.closest(".CatalogBlock__my_audios_block")||_.closest(".CatalogBlock__my_audios")||_.closest('[data-audio-context="my_audios_full"]')||checkIsGroupMusicBlock(_))}function toggleMusicAudioElementOwningState(_,e){const t=checkIsOwnedMusicBlock(_),i=checkIsGroupMusicBlock(_);e?!t||i?(_.classList.add("audio_row__added"),(0,_web_audio_player_track_onRowOver__WEBPACK_IMPORTED_MODULE_34__.onRowOver)(_,!1,!1)):(_.classList.remove("audio_row__deleted"),(0,_web_audio_player_track_onRowOver__WEBPACK_IMPORTED_MODULE_34__.onRowOver)(_,!1,!0)):t&&!i?(_.classList.add("audio_row__deleted"),(0,_web_audio_player_track_onRowOver__WEBPACK_IMPORTED_MODULE_34__.onRowOver)(_,!1,!0)):(_.classList.remove("audio_row__added"),(0,_web_audio_player_track_onRowOver__WEBPACK_IMPORTED_MODULE_34__.onRowOver)(_,!1,!1))}function toggleMusicAudioElementGroupOwningState(_,e){checkIsGroupMusicBlock(_)&&(e?(_.classList.add("audio_row__added"),_.classList.remove("audio_row__deleted"),(0,_web_audio_player_track_onRowOver__WEBPACK_IMPORTED_MODULE_34__.onRowOver)(_,!1,!0)):(_.classList.remove("audio_row__added"),_.classList.add("audio_row__deleted"),(0,_web_audio_player_track_onRowOver__WEBPACK_IMPORTED_MODULE_34__.onRowOver)(_,!1,!0)))}async function loadMusicPlaylistProvider(){const _=(0,_web_di__WEBPACK_IMPORTED_MODULE_0__.ensureDIRootWebContainer)(),{MusicPlaylistProvider:e}=await Promise.all([__webpack_require__.e(16729),__webpack_require__.e(89128),__webpack_require__.e(82666),__webpack_require__.e("langs/web/audioPageDomain")]).then(__webpack_require__.bind(__webpack_require__,86442));return _.resolve(e)}async function loadMusicPlaylistUploaderControllerProvider(){const _=(0,_web_di__WEBPACK_IMPORTED_MODULE_0__.ensureDIRootWebContainer)(),{MusicPlaylistUploaderControllerProvider:e}=await Promise.all([__webpack_require__.e(91498),__webpack_require__.e(89631),__webpack_require__.e(9828),__webpack_require__.e("langs/web/audioPageUI")]).then(__webpack_require__.bind(__webpack_require__,415016));return _.resolve(e)}AudioPage.prototype.initNavigation=function(){this._navigationInited||this.isPodcastPage()||(this._navigationInited=!0,this._prevLoc={},!this.isLayer()&&nav.objLoc.popup&&"recoms_onboarding"===nav.objLoc.popup&&_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageProxy.ensure().emitter.emit(_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageEventType.AudioRecomsOnboardingShowRequested,{reason:_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioRecomsOnboardingShowRequestedEventReason.Navigation}),cur.nav.push(function(_,e,t,i){const o=this._ignoreResetedSearch;if(delete this._ignoreResetedSearch,o&&i.fromSearch)return!1;if(i.isLayer&&!this.isLayer())return!1;if(t.popup&&"recoms_onboarding"===t.popup)return _web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageProxy.ensure().emitter.emit(_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageEventType.AudioRecomsOnboardingShowRequested,{reason:_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioRecomsOnboardingShowRequestedEventReason.Navigation}),nav.setLoc(t),!1;if(t.screen)return;if(this.isLayer()&&!1!==this._prevLoc){e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.clone)(this._prevLoc),_=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.clone)(t);for(let i in e)e.hasOwnProperty(i)&&(e[i]&&void 0===t[i]?_[i]=!1:e[i]==t[i]&&delete _[i])}if(!_||!Object.keys(_).length)return;let s;if(this.isLayer()){s=!t.q&&!!e.q&&t.section===e.section?this.prevSection||this.defaultSection:t.section}else s=t.section||this.defaultSection;let a=!1;return 0===t[0].indexOf("podcasts")&&(s="podcast"),i.tab||i.fromSearch||!1===_.q&&1===Object.keys(_).length||i.searchPerformer?a=!1:i.friendId&&this.isLayer()?(s="friend",this.resetSection(s),this._sectionData={friend_id:i.friendId},a=!1):(2!==Object.keys(_).length||!1!==_.q||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.isUndefined)(_[0]))&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.isUndefined)(_[0])?"signal"===t.section||"signal"===e.section?a=!0:((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.inArray)(_.section,AudioPage.PageSections)||_.hasOwnProperty("block")||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.inArray)(e.section,AudioPage.PageSections)&&!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.inArray)(_.section,AudioPage.PageSections))&&(!this.isLayer()||layerSectionsToMainFrame.includes(t.section)||_.hasOwnProperty("block")?a=!0:(a=!1,this._sectionData={audio_id:_.audio_id},s="recoms",delete this._currentSection)):a=!0,a?(this.catalogController&&this.catalogController.destroy(),!0):(t.q?(this._els.searchInput&&!i.fromSearch&&(this._els.searchInput.value=t.q,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.triggerEvent)(this._els.searchInput,"keyup",{},!0),this.lastQuery=t.q),this._showSearchSection((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)({},t,i))):(this._ignoreResetedSearch=!1===_.q,this._els.searchInput&&uiSearch.reset(this._els.searchInput,!0),this.showSection(s),this._switchTab(s)),this.isLayer()?this._prevLoc=t:nav.setLoc(t),(i.back||i.hist||i.nav)&&this.syncParametersUI(t),!1)}.bind(this)))},AudioPage.prototype._switchTab=function(_){if(this.isPodcastPage())return;const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_tab__"+_,this._els.pageContainer);e?uiTabs.switchTab((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domFC)(e)):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.removeClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("ui_tab_sel",this._els.pageContainer),"ui_tab_sel")},AudioPage.prototype.onLayerHide=function(){this._deinitNavigation(),this._deinitEvents(),this._onSectionOut(),delete this._currentSection,this._muteSearch=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.searchNoLocalResults),setTimeout((()=>uiSearch.reset(this._els.searchInput)),1e3)},AudioPage.prototype.updateLayerHeight=function(){let _=700;_=Math.min(_,window.innerHeight-150),_=Math.max(_,400),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.isVisible)(this._els.footer)&&(_-=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.getSize)(this._els.footer)[1]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.setStyle)(this._els.scrollWrap,{height:_}),this._els&&this._els.scrollWrap&&"function"==typeof this._els.scrollWrap.updateScroll&&this._els.scrollWrap.updateScroll()},AudioPage.prototype.scrollToCurrentTrack=function(){const _=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentAudio(),e=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getPlaylistQueue();if(this._audioRowsAutoList&&_&&e.indexOfAudio(_)>=0){let _=10;for(;_--;){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)(_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_CURRENT_CLS,this._audioRowsAutoList.getListEl());if(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.getXY)(_)[1];this._scroll.scroller.scrollTop=e-(0,_web_lib_scroll_utils__WEBPACK_IMPORTED_MODULE_59__.scrollGetY)()-300,this._scroll.update(),this._layerStartInit=!1;break}this._audioRowsAutoList.drawMore(),(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().updateCurrentPlaying()}}},AudioPage.prototype.onLayerShow=function(_){this._layerStartInit=!0;const e=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentPlaylist(),t=(0,_shared_audio_utils_isPodcast__WEBPACK_IMPORTED_MODULE_29__.isPodcast)((0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentAudio());if(t)this.showSection("podcast");else if(e)this.showSection("current");else if(_){(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getPlaylistQueue().isEmpty()&&"current"===_?this.showSection("all"):this.showSection(_)}else this.showSection("all");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.toggleClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_tab__current",this._els.pageContainer),"unshown",!e||t),this.initNavigation(),this.updateCurrentPlayingInfo(),this._initEvents(),this.updateLayerHeight(),this.scrollToCurrentTrack(),delete this._muteSearch},AudioPage.prototype.resetSection=function(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section__"+_,this._els.sections);this.catalogController.deleteSection(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.re)(e)},AudioPage.prototype.isUpdateRequested=function(_){return Array.isArray(sectionsToUpdate)&&sectionsToUpdate.includes(_+this.getOwnerId())},AudioPage.prototype.requestUpdate=function(_,e=""){sectionsToUpdate=_.map((_=>_+e))},AudioPage.prototype.showSection=function(_,e,t,i){!i&&this._currentSection&&this._currentSection!==this.prevSection&&(this.prevSection=this._currentSection),this.isPodcastPage()&&(_="podcast"),"search"!==this._currentSection||"all"!==_&&"current"!==_||uiSearch.reset(this._els.searchInput,!0),this._data.onlySkeleton||layers.fullhide&&layers.fullhide(),this._switchTab(_);const o="search"===_||this.isUpdateRequested(_),s=this._data.sectionData&&this._data.sectionData[_]||{};if(s.name=_,!this.isLayer()&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_60__.partConfigEnabled)("audio_nav_screens_web")){const{sectionId:_}=s;_&&audioNavScreenProvider.catalogSectionId!==_&&audioNavScreenProvider.setPage(_vkontakte_internal_domains__WEBPACK_IMPORTED_MODULE_55__.AudioNavScreenPageType.Catalog,_)}if(!i&&this._currentSection===_&&"search"!==this._currentSection)return void((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isFunction)(e)&&e());if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_60__.partConfigEnabled)("search_audio_catalog_web")&&"search"===_&&!this.isLayer())return;this._currentSection=_;const a=this.findSectionElement(_);if(t||(this._data.onlySkeleton=!1),!i&&a&&(!o||!1===t)&&!this._data.onlySkeleton){if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass)("_audio_section",this._els.pageContainer),(function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this)})),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.searchGlobalBlocks),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.searchGlobalCommunitiesPlace),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.searchGlobalPlaylistsPlace),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.searchGlobalArtistsPlace),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.searchGlobalAudiosBlock),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(a),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.searchNoLocalResults),"search"===_&&!a.innerHTML){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(this._els.searchNoLocalResults);const _=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)(),e=vk.id===+this._ownerId?_.langs.audio_no_local_results:_shared_ranges__WEBPACK_IMPORTED_MODULE_57__.Ranges.isUserId(this._ownerId)?_.langs.audio_no_user_local_results:_.langs.audio_no_group_local_results,t=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.winToUtf)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.clean)(s.searchParams?.globalQuery??""));this._els.searchNoLocalResults.innerHTML=e.replace("{query}","<strong>"+t+"</strong>")}if(this._onSectionOut(),delete cur._back,"podcast"!==_&&(this.catalogController.setSection(_,a,s||{}),!this.isLayer()&&_shared_ranges__WEBPACK_IMPORTED_MODULE_57__.Ranges.isUserId(window.vk.id)&&_web_audio_components_FullscreenBanner__WEBPACK_IMPORTED_MODULE_37__.FullscreenBanner.initiate(s.sectionId)),this._onSectionOut((()=>{this.catalogController.disableSection(_)})),this.isLayer()||(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentPlaylist()||!s.title||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.setDocumentTitle)(s.title),!["podcast","current"].includes(_))return(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isFunction)(e)&&e(),void(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().updateCurrentPlaying();switch(_){case"current":this._initSection_current(a,s,!0);break;case"podcast":this._initSection_podcast(a,s)}return(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().updateCurrentPlaying(),void((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isFunction)(e)&&e())}let l=this._ownerId,n=!1;if("podcast"===_&&!this.isPodcastPage()){const _=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentAudio()||this._readyAudio;l=_[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID];(0,_shared_audio_utils_getAudioExtra__WEBPACK_IMPORTED_MODULE_40__.getAudioExtra)(_).voiceAssistant&&(n=!0)}if(this.isUpdateRequested(_)&&(sectionsToUpdate=null),n)return void setTimeout((()=>{const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.se)(`<div class="audio_section _audio_section _audio_section__${_} audio_section__${_} clear_fix audio_w_covers">\n        <div class="page_block audio_block">\n          <div class="audio_page__audio_rows _audio_page__audio_rows">\n            <div class="audio_page__audio_rows_list _audio_page__audio_rows_list audio_w_covers"></div>\n          </div>\n        </div>\n      </div>`);this._els.sections.appendChild(t),delete this._currentSection,this.showSection(_,e,!1)}));let r="",d={};if((i||this._data.onlySkeleton)&&s.sectionId)r="/audio?act=load_catalog_section",d.section_id=s.sectionId;else{r="al_audio.php";const e={act:"section",section:_,owner_id:l,is_layer:this.isLayer()?1:0,claim:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)(nav.objLoc.claim)};"search"===_&&(e.query_id=this._cur_qid),d={...this._sectionData,...e}}ajax.post(r,d,{onDone:(t,i)=>{this._data.sectionData=this._data.sectionData||{};this.findSectionElement(_)&&t&&this.resetSection(_),this._data.sectionData[_]=i;const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.se)('<div class="audio_section _audio_section _audio_section__'+_+" audio_section__"+_+' clear_fix audio_w_covers">'+t+"</div>");this._els.sections.appendChild(o),delete this._currentSection,this.showSection(_,e,!1),this.scrollToAnchor();(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().notify(_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.NAVIGATE_TO_SECTION,i?.sectionId)},onFail:()=>!0}),delete this._sectionData},AudioPage.prototype._onSectionOut=function(_){_?(this._onSectionOutCbs=this._onSectionOutCbs?this._onSectionOutCbs:[],this._onSectionOutCbs.push(_)):((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.each)(this._onSectionOutCbs||[],(function(_,e){e()})),this._onSectionOutCbs=[])},AudioPage.prototype.scrollToAnchor=function(){const _=window.location.hash;if(!_)return;const e=_.replace("#",""),t=document.getElementById(e),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.getSize)("page_header")[1]||48,o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.getSize)("playerWrap")[1]||56,s=window.innerWidth>999?o:0,a=t.getBoundingClientRect().top+window.scrollY-i-s;t&&setTimeout((()=>window.scrollTo({top:a,behavior:"smooth"})),50)},AudioPage.prototype.findSectionElement=function(_){const[e]=this._els.sections.getElementsByClassName("_audio_section__"+_);return e},AudioPage.prototype.onPlaylistsReorder=function(_,e,t){const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(_,"raw-id"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(t,"raw-id");ajax.post("al_audio.php",{act:"reorder_playlist",owner_id:this.getOwnerId(),playlist_id:i.split("_")[1],prev_playlist_id:o?o.split("_")[1]:0,hash:this._data.reorderHash},{onFail:()=>!0})},AudioPage.prototype._initSection_current=function(_,e){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)(this._els,{audioRows:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_page__audio_rows_list",_),audioRowsMore:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_more_rows",_),friendsBlock:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_friends_list_wrap",_),friendsBlockContent:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_friends_list_content",_)});const t=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentPlaylist();if(!t&&!this.retriedCurrent)return this.retriedCurrent=!0,setTimeout((()=>this._initSection_current(_,e)));this.isLayer()&&(this._scroll=new _web_legacy_ui_ui_scroll__WEBPACK_IMPORTED_MODULE_16__.default(this._els.scrollWrap,{global:!0,stopScrollPropagation:!0,stopScrollPropagationAlways:!0})),t&&(this._pagePlaylist=t,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(this._els.audioRows,"playlist-id",t.getId()));const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_friends_search",_);i&&uiSearch.init(i),this._initAudioRowsAutoList(!0),setTimeout((()=>this._initFixedFriendsBlock(_)))},AudioPage.prototype.drawMore=function(){this._audioRowsAutoList&&this._audioRowsAutoList.drawMore()},AudioPage.prototype.scrollIntoView=function(_,e){this._scroll.scrollIntoView(_,e)},AudioPage.prototype._initSection_podcast=function(_,e){(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)(this._els,{audioRows:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_page__audio_rows_list",_),audioRowsMore:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("podcast_episodes_more",_)});let t=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentPlaylist();if(!t){const _=e.playlistData;_&&(t=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getPlaylist(_.type,_.ownerId,_.id),t.getAudiosCount()||(t.mergeWith(_),t.load()))}t&&(this._pagePlaylist=t,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(this._els.audioRows,"playlist-id",t.getId())),this._initAudioRowsAutoList(),this._data.reverse||this._enableAudioRowsSorter()},AudioPage.prototype.setPagePlaylist=function(_){this._pagePlaylist=_},AudioPage.prototype._initFixedFriendsBlock=function(){if(!this._els.friendsBlock)return;this._isFixed=!1,this._isDraggable=!1,this._initialPos=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.getXY)(this._els.friendsBlock);const _=this.isLayer(),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.getSize)("page_header")[1],t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.getSize)(this._els.playerWrap)[1],i=_?13:15;this._fixedThreshold=_?e+t+i:this._initialPos[1]-e-t-i;const o=_?this._scroll.scroller:window;if(this._fixedThreshold<0)return;(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(window,"resize",this._resizeHandler=()=>{this._initialPos=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.getXY)(this._els.friendsBlock)}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(o,"scroll",this._scrollHandler=()=>{this._moveFriendsBlock()});const s=this;AudioPage.onUpdateDraggablePosition=()=>{s._isDraggable=!0,s._moveFriendsBlock(),requestAnimationFrame((()=>s._isDraggable=!1))},AudioPage.forceFix=()=>{const _=s._els.friendsBlockContent.getBoundingClientRect();if(!(_.width>0&&_.height>0))return;const e=s.isLayer()?s._scroll.scroller.scrollTop:(0,_web_lib_scroll_utils__WEBPACK_IMPORTED_MODULE_59__.scrollGetY)();s._els.friendsBlockContent.style.transform=`translate(0,${Math.max(0,e-s._fixedThreshold-9)}px)`,s._unfixedFriendsBlock()},this._onSectionOut((()=>{this._scrollHandler&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(o,"scroll",this._scrollHandler),this._resizeHandler&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(window,"resize",this._resizeHandler),this._fixedBlockScrollHandler&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(this._els.friendsBlockContent,"mousewheel",this._fixedBlockScrollHandler),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.removeClass)(this._els.friendsBlockContent,"audio_friends_fixed")}))},AudioPage.prototype._moveFriendsBlock=function(){const _=this.isLayer()?this._scroll.scroller.scrollTop:(0,_web_lib_scroll_utils__WEBPACK_IMPORTED_MODULE_59__.scrollGetY)(),e=this._els.friendsBlockContent.getBoundingClientRect(),t=e.width>0&&e.height>0;this._isDraggable&&t?(this._els.friendsBlockContent.style.transform=`translate(0,${Math.max(0,_-this._fixedThreshold-9)}px)`,this._unfixedFriendsBlock()):(this._els.friendsBlockContent.style.transform="",_>this._fixedThreshold?this._fixedFriendsBlock():this._unfixedFriendsBlock())},AudioPage.prototype._fixedFriendsBlock=function(){this._isFixed||(this._initialPos=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.getXY)(this._els.friendsBlock),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.addClass)(this._els.friendsBlock,"audio_friends_fixed"),this._isFixed=!0,this.isLayer()&&(this._fixedBlockScrollHandler=(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(this._els.friendsBlockContent,"mousewheel",(_=>(this._scroll.scroller.scrollTop=this._scroll.scroller.scrollTop+_.deltaY,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(_))))))},AudioPage.prototype._unfixedFriendsBlock=function(){this._isFixed&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.removeClass)(this._els.friendsBlock,"audio_friends_fixed"),this._isFixed=!1,this._fixedBlockScrollHandler&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(this._els.friendsBlockContent,"mousewheel",this._fixedBlockScrollHandler))},AudioPage.prototype.playPlaylist=function(_,e,t,i){const o=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)(),s=o.getCurrentPlaylist(),a=o.getPlaylist(_,e,t);s&&s.equals(a)&&o.isPlaying()?o.pauseByButton():a.load(0,(function(){o.playList({audio:a.getAudiosList()[0],playlist:a,context:i})}))},AudioPage.prototype.playShuffledBlockPlaylist=function(_){const e=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)();if(!e)return;const t=e.getPlaylistByBlockId(_)||new _web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist({hasMore:!0,blockId:_});t.clean(),t.loadByBlockId("",(function(_){e.playBlock(_.getOwnerId(),_.getAlbumId(),_.getAccessHash(),_.getContext(),"","default",{shuffled:!0,blockId:_.getBlockId()})}))},AudioPage.prototype.saveAsPlaylist=async function(_){const e=document.querySelector(".audio_page_save_as_playlist_button"),t=document.querySelector(".audio_page_save_as_playlist_button_text");e.disabled=!0;const i=document.querySelector("#audio_page_save_as_playlist_icon_create"),o=document.querySelector("#audio_page_save_as_playlist_icon_delete"),s=(0,_web_audio_services_AudioPage__WEBPACK_IMPORTED_MODULE_42__.ensureAudioPageMyAudioPlaylistsService)();s.setUserId(vk.id);const a=s.$myAudioPlaylistsIdentitiesMap.getState()[_];if(a){try{await s.deleteFx({blockId:_,id:a.id}),o.classList.add("audio_page_save_as_playlist_icon_hide"),i.classList.remove("audio_page_save_as_playlist_icon_hide"),t.textContent=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_save_as_playlist_button")}catch(_){console.error("[AudioPage saveAsPlaylist]",_)}finally{e.disabled=!1}return}const l=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getPlaylistByBlockId(_)||new _web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist({hasMore:!0,blockId:_});l.clean(),l.loadByBlockId("",(async function(a){try{await(0,_web_audio_player_playlist_addAudioPlaylistToMyAudioPlaylists__WEBPACK_IMPORTED_MODULE_41__.addAudioPlaylistToMyAudioPlaylists)(_,a,s),i.classList.add("audio_page_save_as_playlist_icon_hide"),o.classList.remove("audio_page_save_as_playlist_icon_hide"),t.textContent=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_save_as_playlist_delete_button")}catch(_){console.error("[AudioPage saveAsPlaylist]",_)}finally{e.disabled=!1}}))},AudioPage.prototype.playBlockPlaylist=function(_,e=null){const t=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)(),i=t.getCurrentPlaylist(),o=t.getPlaylistByBlockId(_)||new _web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist({hasMore:!0,blockId:_});if(i&&i.equals(o)&&t.isPlaying())t.pauseByButton();else{const _=o.getContext()||e&&e.dataset.context||"";o.loadByBlockId("",(e=>{t.playList({audio:e.getAudiosList()[0],playlist:e,context:_})}))}},AudioPage.prototype.onAudioRowsReorder=function(_,e,t,i){const o=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)(),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(e,"full-id"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(i,"full-id"),l=o.getPlaylistQueue(),n=this.getPageCurrentPlaylist();let r=(_?l:n).indexOfAudio(s),d=(_?l:n).indexOfAudio(a);a?d++:d=0,l.moveAudio(r,d),_&&o.saveStateCurrentPlaylist(),this.isPodcastPage()?ajax.post("al_podcasts.php",{act:"a_reorder_episodes",hash:this._data.audiosReorderHash,oid:this.getOwnerId(),episode_id:s?s.split("_")[1]:0,next_episode_id:a?a.split("_")[1]:0},{onFail:()=>!0}):_||ajax.post("al_audio.php",{act:"reorder_audios",hash:this._data.audiosReorderHash,owner_id:this.getOwnerId(),audio_id:s?s.split("_")[1]:0,next_audio_id:a?a.split("_")[1]:0},{onFail:()=>!0})},AudioPage.prototype._enableAudioRowsSorter=function(_){(this._data.audiosReorderHash||_)&&(this._audioRowsSorter&&this._audioRowsSorter.destroy(),this._audioRowsSorter=new _web_grid_sorted__WEBPACK_IMPORTED_MODULE_21__.default(this._els.audioRows,"",{wrapNode:this.isLayer()?this._scroll.scroller:void 0,onReorder:(e,t,i)=>this.onAudioRowsReorder(_,e,t,i)}),this._onSectionOut(function(){this._audioRowsSorter&&this._audioRowsSorter.destroy()}.bind(this)))},AudioPage.prototype._disableAudioRowsSorter=function(){this._audioRowsSorter&&this._audioRowsSorter.disable()},AudioPage.prototype._onCurrentSectionNeedRows=async function(_,e){const t=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getPlaylistQueue();_(await t.getAudios(e,e+_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_QUEUE_MAX_AUDIOS_COUNT))},AudioPage.prototype._initAudioRowsAutoList=function(_=!1){if(!this._els.audioRows)return;const e=this.isPodcastPage()||"podcast"===this._currentSection,t=this._pagePlaylist;this._els.audioRows.innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.toggleClass)(this._els.audioRows,"audio_owner_list_canedit",!e&&!!this._data.canEdit),this._audioRowsAutoList&&this._audioRowsAutoList.destroy(),this._audioRowsAutoList=new _web_auto_list_auto_list__WEBPACK_IMPORTED_MODULE_13__.default(this._els.audioRows,{scrollNode:!!this._scroll&&this._scroll.scroller,onRendered:function(){(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().updateCurrentPlaying()},onNoMore:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(this._els.audioRowsMore)}.bind(this),offset:0,onNeedRows:function(i,o,s,a,l){const n=[],r=(_=[])=>{_.forEach((_=>{n.push((0,_web_audio_player_track_drawAudio__WEBPACK_IMPORTED_MODULE_30__.drawAudio)(_))})),i(n),0===o&&this._audioRowsSorter&&this._audioRowsSorter.update(),0===o&&1===n.length&&l.drawMore()};e?((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.lockButton)(this._els.audioRowsMore),this._loadPodcastEpisodes(o,function(_){r((_||[]).slice(o)),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.unlockButton)(this._els.audioRowsMore)}.bind(this))):_?this._onCurrentSectionNeedRows(r,o):t&&t.load(o,(()=>{const _=t.getAudiosList();r(_)}))}.bind(this)}),this._onSectionOut(function(){this._audioRowsAutoList.destroy(),this._els.audioRows.innerHTML=""}.bind(this))},AudioPage.prototype._loadPodcastEpisodes=function(_,e){let t;const i=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentAudio()||this._readyAudio;let o={};try{o=JSON.parse(i[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_EXTRA])}catch(_){}if(o&&o.externalAudio){let _=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentPlaylist();return void e(_._ref._list)}t=this.isPodcastPage()?this._ownerId:i[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID],cur._podcastsEpisodes=cur._podcastsEpisodes||{},cur._podcastsEpisodes[t]=cur._podcastsEpisodes[t]||[];const s=cur._podcastsEpisodes[t];s.length&&_<s.length?e(s):ajax.post("al_podcasts.php",{act:"a_episodes",oid:t,episode_full_id:i?i[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]+"_"+i[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]:"",offset:_,rev:this._data.reverse,claim:window.nav.objLoc.claim},{onDone:function(_){cur._podcastsEpisodes[t]=s.concat(_||[]),e(cur._podcastsEpisodes[t])},onFail:function(){return e(cur._podcastsEpisodes[t]),!0}})},AudioPage.prototype._destroyReadyAudio=function(){delete this._readyAudio},AudioPage.showAttachBox=function(_,e){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)()&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.data)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_item_list",(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().bodyNode),"offset")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.data)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_item_list",(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().bodyNode),"offset",0),1===vk.widget?(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showBox)("al_audio.php",{act:"choose_box",owner_id:_,options:JSON.stringify(e)}):AudioPage.editPlaylist(_,_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.DEFAULT_PLAYLIST_ID,"attach",e)},AudioPage.editPlaylist=function(_,e,t,i){if(vk.widget)for(let _ in i)i.hasOwnProperty(_)&&((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isString)(i[_])?i[_]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.clean)(i[_]):(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isFunction)(i[_])?delete i[_]:i[_]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)(i[_]));let o,s;if("edit"===t&&i&&(i.audioAttachSwitchOwnerId=!1),i&&i.audioAttachSwitchOwnerId&&(cur.audioAttachSwitchOwnerId=i.audioAttachSwitchOwnerId),t=t||"edit",e)o=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getPlaylist(_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_PLAYLIST,_,e);else if(cur.audioPage){const _=cur.audioPage._data.maxPlaylistsCount;if((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isArray)(cur.audioPage._data.playlists)&&cur.audioPage._data.playlists.length>=_){const e=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.langNumeric)(_,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.curLang)("audio_playlists_limit_error")).replace("{limit}",_);return void new _web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.MessageBox({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_error")}).content(e).setButtons("Ok",(function(){(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide()})).show()}}const a=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.showBoxLoader)(),l=_=>{throw i&&i.onFail&&i.onFail(_),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.isBoxLoadingCancelled)(a)||(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.hideBoxLoader)(),_};try{(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_20__.parallel)((_=>{window.stManager.add(["audio.css",window.jsc("web/indexer.js"),window.jsc("web/auto_list.js"),window.jsc("web/grid_sorter.js"),"edit"===t&&window.jsc("web/upload.js")],_).catch((_=>{throw l(_),_}))}),(_=>{o?(o.setForceReload(!0),o.loadAll(_,t,(_=>{throw(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.hideBoxLoader)(_),_}))):_()}),(e=>{if(cur.audioPage&&cur.audioPage.getOwnerId()===+_&&!i?.promotedAudios&&(s=cur.audioPage.getOwnerPlaylists()),i?.promotedAudios){const _=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)();s=[],i.addAudio=[],i.promotedAudios.forEach(((t,o,s)=>{const a=_.getPlaylist(_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_PLAYLIST,t[0],t[1]);0===a.getAudiosCount()&&void 0===a.getTotalCount()?a.load((()=>{i.addAudio.push(...a.getAudiosList()),o===s.length-1&&e()}),null,!1,"default",null,(_=>{throw l(_),_})):(i.addAudio.push(...a.getAudiosList()),o===s.length-1&&e())}))}else s?e():AudioPage.loadPlaylists(_,void 0,!1,"attach"===t,(_=>{s=_,e()}))}),(()=>{(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.isBoxLoadingCancelled)(a)||(i&&i.onDone&&i.onDone(),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.hideBoxLoader)(),AudioPage._openEditPlaylist(t,_,e,s,i))}))}catch(_){throw l(_),_}},AudioPage.initBoxEls=function(_){return{boxContent:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_pl_edit_box",_.bodyNode),playlistNameInput:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("ape_pl_input",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("ape_pl_title",_.bodyNode)),playlistDescriptionInput:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("ape_pl_input",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("ape_pl_description",_.bodyNode)),playlistDiscoverToggle:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("ape_discover_checkbox",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("ape_pl_discover",_.bodyNode)),playlistUpdateIdInput:_.bodyNode.querySelector("#ape_pl_to_update_id"),playlistUpdateTimeInput:_.bodyNode.querySelector("#ape_pl_to_update_time"),playlistUpdateCutInput:_.bodyNode.querySelector("#ape_pl_to_update_cut"),playlistUpdateFilterInput:_.bodyNode.querySelector("#ape_pl_to_update_filter"),stat:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_pl_stat",_.bodyNode),uploadCoverButtonWrapper:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_cover",_.bodyNode),uploadCoverInput:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_cover_upload",_.bodyNode),errorMsg:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_error_msg",_.bodyNode),header:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_header",_.bodyNode),search:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_search",_.bodyNode),searchInput:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_field",_.bodyNode),addAudiosButton:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("ape_add_audios_btn",_.bodyNode),addAudiosFromPlaylistsButton:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("ape_add_pl_audios_btn",_.bodyNode),listWrap:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_list_wrap",_.bodyNode),list:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_item_list",_.bodyNode),globalResults:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_item_global_results",_.bodyNode),globalResultsList:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_item_global_list",_.bodyNode),emptyPlaceholder:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_audios_empty_list",_.bodyNode),emptyPlaylistsPlaceholder:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_audios_empty_playlists_list",_.bodyNode),emptyGlobalPlaceholder:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_audios_empty_global_list",_.bodyNode)}},AudioPage._openEditPlaylist=async function(_,e,t,i,o){const s=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_60__.partConfigEnabled)("frontend.web_music_playlist_cover_uploader_redesign");let a,l,n,r,d,c,u;const E=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)(),h=E.getPlaylist(_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_TEMP,e,(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.irand)(0,999999));if((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)()){d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.data)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_item_list",(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().bodyNode),"offset"),c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.val)("ape_edit_playlist_search");const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_item_list",(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().bodyNode);_&&(u=_.scrollTop)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(boxLoader),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)()||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(boxLayerWrap),cur.apLayer&&(r=cur.apLayerPlaylistId,layers.fullhide()),o=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)({audioPickerButtonText:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_add_media"),playlistPickerButtonText:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_attach_playlist_button"),canPlaylistAttach:!1,onAudioChoose:_web_audio_player_track_onAudioChoose__WEBPACK_IMPORTED_MODULE_31__.onAudioChoose,onPlaylistChoose:_web_audio_player_playlist_onPlaylistChoose__WEBPACK_IMPORTED_MODULE_61__.onPlaylistChoose},o),cur.onChooseAudio=o.onAudioChoose,cur.onChoosePlaylist=o.onPlaylistChoose;const P=!t||t===_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.DEFAULT_PLAYLIST_ID,g="attach"===_,p=!!o?.promotedAudios;let b,M=!1,D=!1,O=!1,A=!1,y=0,C=null,w=!1,m=null,I=!0,B=!1,L=0,T=0;i=i.filter((_=>_.id!==_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.DEFAULT_PLAYLIST_ID&&_.size>0));const R=new _web_indexer_indexer__WEBPACK_IMPORTED_MODULE_19__.vkIndexer(i,(_=>_.title)),f=i.length>0;let v=!1;P&&!g||p?o.addAudio&&h.pushAudio(o.addAudio):(v=E.getPlaylist(_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_PLAYLIST,e,t),h.pushAudio(v.getAudiosList()),h.mergeWith({title:v.getTitle(),description:v.getDescription(),rawDescription:v.getRawDescription(),coverUrl:v.getCoverUrl(),editHash:v.getEditHash(),noDiscover:v.getNoDiscover()}));const U=g?(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_choose_audio_title"):t?(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_edit_playlist_title"):(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_new_playlist_title");function W(_){if(_=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.trim)(_)){let e=" "+(_+"|")+((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.parseLatin)(_)||"")+((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.parseCyr)(_)||"");e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.trim)(e.replace(/\)/g,"").replace(/&/,"&amp;")),A=new RegExp("(\\s|^)("+e.replace(_web_indexer_indexer__WEBPACK_IMPORTED_MODULE_19__.vkIndexer.delimiter,"|").replace(/(^\||\|$|\?)/g,"")+")","gi")}else A=!1;j(D,"playlists"!==M,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.emptyGlobalPlaceholder)}function K(){o.onClose&&o.onClose(),I||(h.clean(),E.deletePlaylist(h),r&&(0,_web_audio_player_playlist_showAudioPlaylist__WEBPACK_IMPORTED_MODULE_33__.showAudioPlaylist)(r[0],r[1]))}function k(e){if(!B||e||"attach"===_)return!0;let i,o;return t?(i=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_edit_playlist_cancel_confirm_text"),o=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_edit_playlist_cancel_confirm_yes")):(i=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_new_playlist_remove_confirm_text"),o=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_new_playlist_remove_confirm_continue")),(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_warning"),i,o,(()=>{I=!1,(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide(),a.hide(!0)}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_cancel")),!1}function S(){return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.trim)(l.searchInput.value)}function x(e){const t=h.indexOfAudio(e)>=0?"ape_selected":"",i=e;A&&((e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.clone)(i))[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE]=e[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE].replace(A,"$1<em>$2</em>"),e[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]=e[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER].replace(A,"$1<em>$2</em>"));let s="";if("edit"===_){s=`<div class="ape_check" data-testid="MusicPlaylist_EditModal_">\n        <div class="ape_check--unchecked">${(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_62__.getIcon24CheckCircleOff)().icon}</div>\n        <div class="ape_check--checked">${(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_63__.getIcon24CheckCircleOn)().icon}</div>\n      </div>`}else{let _=(0,_shared_audioplayer_AudioPlayerAdapter_audioTuple_audioTupleToAudioObject__WEBPACK_IMPORTED_MODULE_32__.audioTupleToAudioObject)(i);if(o&&o.wiki){s='<div role="button" class="ape_attach" data-testid="attach-audio" onclick="'+`editorChooseAudio(\n        '${(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.clean)(_.performer)}',\n        '${(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.clean)(_.title)}',\n        ${_.duration},\n        '${_.fullId}',\n        '${_.url}',\n        ${_.duration},\n        this)`+'">'+o.audioPickerButtonText+"</div>"}else{_=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.clean)(JSON.stringify(_));s=`<div role="button" class="ape_attach" data-testid="attach-audio" onclick="cur.onChooseAudio(event, this, ${_}, ${(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.clean)(JSON.stringify(i))})">${o.audioPickerButtonText}</div>`}}return'<div class="ape_audio_item_wrap _ape_audio_item '+t+'" data-testid="MusicPlaylist_EditModal_MusicTrackRow">'+s+(0,_web_audio_player_track_drawAudio__WEBPACK_IMPORTED_MODULE_30__.drawAudio)(e)+"</div>"}function N(){clearTimeout(L);const _=S();_&&(L=setTimeout((function(){L=!1,O=E.getPlaylist(_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_SEARCH,vk.id,(0,_web_lib_utils__WEBPACK_IMPORTED_MODULE_20__.hashCode)(_+"no conflict")),O.mergeWith({searchParams:{globalQuery:_},hasMore:!0});let e=0;n&&(e=n.getOffset(),n.destroy()),n=new _web_auto_list_auto_list__WEBPACK_IMPORTED_MODULE_13__.default(l.list,{scrollNode:l.list,onNeedRows:function(_,t){t-=e,O.load(t,(function(){const e=[],i=O.getAudiosList();if(0==+t&&i.length&&e.push('<div class="ape_list_header">'+(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_edit_playlist_global_results")+"<div>"),i.length){const _=Math.min(i.length,t+20);for(let o=t;o<_;o++)i[o]&&e.push(x(i[o]))}O.getAudiosCount()||n&&n._offset?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.emptyGlobalPlaceholder),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.list)):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.emptyGlobalPlaceholder),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.list)),_(e)}))}}),n.drawMore()}),300),m=null)}function H(){a.setOptions({title:'<div class="back _back"><span class="back__icon">'+(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_64__.getIcon24ChevronLeft)().icon+"</span>"+(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_back")+"</div>",bodyStyle:"padding: 0"})}function F(){let _="";cur.audioAttachSwitchOwnerId&&cur.audioAttachOriginalOwnerId&&(_='<span class="dvd"></span><a class="tab_link" onclick="cur.audioAttachSwitch()">',_+=_shared_ranges__WEBPACK_IMPORTED_MODULE_57__.Ranges.isGroupId(h.getOwnerId())?(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_choose_wall_to_my_audios"):(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_choose_wall_to_group_audios"),h.getOwnerId()===cur.audioAttachOriginalOwnerId?cur.audioAttachSwitch=function(){AudioPage.showAttachBox(cur.audioAttachSwitchOwnerId,o)}:cur.audioAttachSwitch=function(){AudioPage.showAttachBox(cur.audioAttachOriginalOwnerId,o)},_+="</a>"),a.setOptions({title:U+_,bodyStyle:"padding: 0"})}function q(){const _=l.boxContent.getBoundingClientRect();if(_.height&&_.width){const e=l.list.getBoundingClientRect();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.setStyle)(l.list,{height:_.height-(e.y-_.y)})}}function j(_,e,t){D=_,e&&D?t?D.search({q:t},(function(_){G(!0,_)})):G(!0,D.getAudiosList(),_):G(!1,t?R.search(t):i),Y("initial"===M&&!t)}function G(_,e,t){l.list.innerHTML="",n&&n.destroy(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.list),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.emptyPlaceholder),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.emptyGlobalPlaceholder),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.emptyPlaylistsPlaceholder),q();let i=0;n=new _web_auto_list_auto_list__WEBPACK_IMPORTED_MODULE_13__.default(l.list,{scrollNode:l.list,onNoMore:function(){0===i&&(S()?_||((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.list),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.emptyPlaylistsPlaceholder)):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.list),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.emptyPlaceholder))),p?function(){clearTimeout(T);const _=S();_&&(T=setTimeout((function(){T=!1;let e=0;n&&(e=n.getOffset(),n.destroy()),n=new _web_auto_list_auto_list__WEBPACK_IMPORTED_MODULE_13__.default(l.list,{scrollNode:l.list,onNeedRows:function(t,i){i>e?t([]):(i-=e,ajax.post("/audio?act=load_catalog_section",{section_id:o.audioSectionId,search_query:_},{onDone:function(){const _=arguments[1]?.playlist?.list||[],e=[];0==+i&&_.length&&e.push('<div class="ape_list_header">'+(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_edit_playlist_global_results")+"<div>"),_.length&&_.forEach((_=>{e.push(x(_))})),_&&_.length?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.emptyGlobalPlaceholder),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.list)):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.list),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.emptyGlobalPlaceholder)),t(e)},onFail:function(_){return(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_error"),width:350},_),!0}}))}}),n.drawMore()}),100),m=null)}():_&&N()},onNeedRows:function(o,s){let a=d||20;const l=t&&t.hasMore()?s+a:Math.min(e.length,s+a);if(l>e.length&&t&&t.hasMore())t.load(s+a,(a=>{const n=z((e=t.getAudiosList()).slice(s,l),_);i+=n.length,o(n)}));else{const t=z(e.slice(s,l),_);i+=t.length,o(t)}},onRendered:_=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.data)(l.list,"offset",_),u&&d&&(l.list.scrollTop=u,d=0,u=0)}})}function z(_,e){const t=(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_65__.getIcon24Playlist)().icon,i=(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_66__.getIcon24ChevronRight)().icon;return _.map((_=>{if(e)return x(_);const o='<div class="ape_pl_item_inner"><span class="ape_pl_title">'+(A?_.title.replace(A,"$1<em>$2</em>"):_.title)+'</span> <span class="ape_pl_size">'+(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.langNumeric)(_.size,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.curLang)("audio_playlist_audios_count"),!0).replace("{count}",_.size)+"</span></div>";return`<div class="ape_pl_item"\n                        data-playlist-access-hash="${_.access_hash}"\n                        data-playlist-owner-id="${_.owner_id}"\n                        data-playlist-id="${_.id}">\n                          <div class="ape_pl_item__icon_playlist">${t}</div>\n                          ${o}\n                          <div class="ape_pl_item__icon_chevron">${i}</div>\n                        </div>`}))}function Y(_){b||(b=new _web_grid_sorted__WEBPACK_IMPORTED_MODULE_21__.default(l.list,"ape_audio_item_wrap",{wrapNode:l.list,onReorder:function(_,e){let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_row",_),"full-id");const i=h.indexOfAudio(t);let o;e?(t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_row",e),"full-id"),o=h.indexOfAudio(t)):o=h.getAudiosCount(),h.moveAudio(i,o)}})),_?b.enable():b.disable()}function V(t,s){if("default"===t&&cur.audioPage&&cur.audioPage._data.addBanned)(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_error")},cur.audioPage._data.addBannedText);else{switch(M=t,a.removeButtons(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(l.list,"view",t),t){case"initial":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.header),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.addAudiosFromPlaylistsButton),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.addAudiosButton),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.search),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.globalResults),j(h,!0),$(),F();break;case"default":const t=E.getPlaylist(_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_PLAYLIST,e,_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.DEFAULT_PLAYLIST_ID);(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.disableEl)(l.addAudiosButton),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.showProgress)(l.addAudiosButton),t.load((function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.enableEl)(l.addAudiosButton),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.hideProgress)(l.addAudiosButton),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.header),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.search),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.toggle)(l.addAudiosFromPlaylistsButton,f),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.addAudiosButton),"edit"===_?H():F(),j(t,!0,c),q(),"edit"===_&&$()}));break;case"playlists":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.header),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.search),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.addAudiosFromPlaylistsButton),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.addAudiosButton),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.globalResults),H(),j(i);break;case"playlist":(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.header),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.search),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.addAudiosFromPlaylistsButton),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.addAudiosButton),H(),j(s,!0),g&&function(_){if(!o.canPlaylistAttach)return;function e(e){cur.onChoosePlaylist(e,_)}a.addButton(o.playlistPickerButtonText,e,"ok",!0)}(s),"edit"===_&&$("MusicPlaylist_EditModal_Save")}q(),l.searchInput.value="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.elfocus)(l.searchInput),A=!1,m=null,clearTimeout(L),E&&E.updateCurrentPlaying&&E.updateCurrentPlaying()}}function $(_){a.addButton((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_save_playlist_button"),J,"ok",!0,void 0,void 0,_)}function Q(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domClosest)("ape_pl_item",_.target);if(e){const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(e,"playlist-id"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(e,"playlist-owner-id"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(e,"playlist-access-hash"),a=E.getPlaylist(_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_PLAYLIST,o,i,s);(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.showProgress)(e),a.load((function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.hideProgress)(e),V("playlist",a)}))}if(_.target.closest(".ape_check")){function t(_,e){if(cur.audioPage&&cur.audioPage._data.addBanned)return void(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_error")},cur.audioPage._data.addBannedText);const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.toggleClass)(_,"ape_selected",e),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_row",_),o=(0,_web_audio_player_track_getAudioFromEl__WEBPACK_IMPORTED_MODULE_51__.getAudioFromEl)(i);t?h.pushAudio(o,0):h.removeAudio(o)}const n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domClosest)("_ape_audio_item",_.target);if(_.shiftKey&&m){let r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domChildIndex)(m),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domChildIndex)(n);const c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domPN)(n);if(r>d){const P=d;d=r,r=P}const u=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hasClass)(m,"ape_selected");for(let p=r;p<=d;p++)t(c.children[p],u)}else t(n),m=n;X(),e_()}if(g&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hasClass)(_.target,"artist_link")){if(_.metaKey&&_shared_lib_browser__WEBPACK_IMPORTED_MODULE_2__.browser.mac||_.ctrlKey)return;const b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(_.target,"performer")||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.trim)(_.target.innerText);b&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.val)(l.searchInput,b),uiSearch.onChanged(l.searchInput),W(b))}return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(_)}function X(){const _=h.getAudiosCount(),e=h.getTotalDuration();let t;if(_){let i;t=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.langNumeric)(_,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.curLang)("audio_edit_playlist_audios_info")),t=t.replace("{count}",_);const o=e%60,s=Math.floor(e/60)%60,a=Math.floor(e/3600);e<60?i=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.langNumeric)(e,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.curLang)("audio_total_dur_seconds")):e<3600?(i=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.langNumeric)(s,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.curLang)("audio_total_dur_minutes")),o&&(i+=" "+(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.langNumeric)(o,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.curLang)("audio_total_dur_seconds")))):(i=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.langNumeric)(a,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.curLang)("audio_total_dur_hours")),s&&(i+=" "+(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.langNumeric)(s,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.curLang)("audio_total_dur_minutes")))),t+='<span class="dvd">'+i+"</span>"}else t=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_edit_playlist_no_audios");l.stat.innerHTML=t}function J(_){let t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.val)(l.playlistNameInput));t=t.replace(/[\u200B-\u200D\uFEFF]/g,"");const i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.trim)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.val)(l.playlistDescriptionInput)),n=+(l.playlistDiscoverToggle&&l.playlistDiscoverToggle.classList.contains("on"));if(l.playlistUpdateIdInput&&(t=`${(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.trim)(l.playlistUpdateIdInput.value)}_${l.playlistUpdateTimeInput.valueAsNumber}_${l.playlistUpdateCutInput.valueAsNumber}`),!t)return V("initial"),void(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.notaBene)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.ge)("ape_pl_name"));const r=[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.each)(h.getAudiosList(),(function(_,e){r.push(e[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]+"_"+e[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_ID]+"_"+e[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_ACCESS_KEY])}));const d=o.newPlaylistHash||cur.audioPage&&cur.audioPage._data.newPlaylistHash||"",c={hash:P?d:v.getEditHash(),owner_id:e,playlist_id:P?0:v.getPlaylistId(),title:t,description:i,Audios:r.join(","),cover:w?-1:(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isObject)(y)?JSON.stringify(y):y};l.playlistUpdateIdInput&&(c.update_id=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.trim)(l.playlistUpdateIdInput.value),c.update_time=(l.playlistUpdateTimeInput.valueAsNumber+6e4*(new Date).getTimezoneOffset())/1e3,c.update_cut=l.playlistUpdateCutInput.valueAsNumber,c.update_filter=l.playlistUpdateFilterInput.classList.contains("on")?1:0),null!==n&&(c.no_discover=n),ajax.post("al_audio.php?act=save_playlist",c,{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.lockButton)(_),onDone:async(_,t)=>{let i=null;if(s&&C){const e=(await(0,_web_audio_EVA_domain_music_MusicService_lazySingleton__WEBPACK_IMPORTED_MODULE_54__.ensureMusicService)()).playlistCoverUploaders.create(_.ownerId),t=await e.save(new _vkontakte_internal_vk_utils__WEBPACK_IMPORTED_MODULE_67__.OwnedIdentity({id:_.id,ownerId:_.ownerId}),C);if(t){const _=(0,_spa_shared_audio_abstract_image_model__WEBPACK_IMPORTED_MODULE_68__.createAudioImageNullable)(t)?.pickByWidth(143);_?.src&&(i=_.src)}}o?.onSavePlaylistDone?.();P&&!document.querySelector(".CatalogSection ._audio_page__playlists")?nav.reload():((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass)("_audio_pl_"+_.ownerId+"_"+_.id),(function(){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("audio_pl__cover",this);if(e){let t=i??_.coverUrl;AudioPage.setCoverImageElem(e,t,_.title);const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_pl_grid_covers_wrap",this);o&&(o.innerHTML=t?"":_.gridCovers)}const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("audio_pl__title",this);if(t){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("audio_item__title",t);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.val)(e||t,_.title)}const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_pl__stats_count",this);o&&(o.innerHTML=_.totalCount)})),P&&cur.audioPage&&e==cur.audioPage.getOwnerId()&&["all","my_playlists"].includes(cur.audioPage._currentSection)&&((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.each)(cur.audioPage._els.pageContainer.querySelectorAll(".CatalogBlock__my_playlists ._audio_page_block__playlists_items"),(function(){const{title:e}=t,o=i??_.coverUrl,s={...t,cover_image:AudioPage.getCoverImage(o,e)},a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.se)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.getTemplateSafety)("audio_pl_item",s));let l=this;if(l.classList.contains(_web_components_ui_gallery__WEBPACK_IMPORTED_MODULE_38__.UI_GALLERY_CLASSNAME)){const _=(0,_web_components_ui_gallery__WEBPACK_IMPORTED_MODULE_38__.uiGetGallery)(l);let e=document.createElement("div");e.classList.add("ui_gallery_item"),e.appendChild(a),_.addItems([e],0)}else{l.insertBefore(a,l.firstChild);const _=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(l,"max-items"));_&&l.children.length>_&&l.removeChild(l.lastChild)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.gpeByClass)("_audio_page__playlists",l))})),cur.audioPage._data.playlists=cur.audioPage._data.playlists||[],cur.audioPage._data.playlists.unshift(t)),P&&cur.audioPage&&cur.audioPage.catalogController.updateSectionReorder(),cur.audioPage&&cur.audioPage.updatePlaylistsCounter&&cur.audioPage.updatePlaylistsCounter(e),v&&(v.clean(),v.mergeWith(_)),a.hide(!0),(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isFunction)(o.onPlaylistSave)&&o.onPlaylistSave(v))},onFail:()=>(a.hide(!0),!0)})}function Z(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.coverThumb),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.setStyle)(l.coverThumb,"background-image","url("+_+")"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.addClass)(l.uploadCoverButtonWrapper,"ape_thumb_set"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.uploadCoverButton)}function __(_){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.removeClass)(l.uploadCoverButtonWrapper,"ape_thumb_set"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_cover_thumb")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.uploadCoverButton),y=-1,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(_)}function e_(){B=!0}(2===vk.widget||3===vk.widget)&&window.box&&(!boxQueue.count()&&!(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)()||cur.audioChooseBox===(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)())?(a=window.box,a.setOptions({title:U,bodyStyle:"padding: 0",width:560,onBeforeHide:K,onHideAttempt:k,hideButtons:!0})):(cur.audioChooseBox&&cur.audioChooseBox===(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)()&&(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_7__.curBox)().hide(),a=new _web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.MessageBox({title:U,bodyStyle:"padding: 0",width:560,onBeforeHide:K,onHideAttempt:k})),cur.audioChooseBox=a,a.content((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.getTemplate)("audio_edit_playlist")),a.show(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.data)(a,"ownerId",e),l=AudioPage.initBoxEls(a),await async function(t){const i=window.innerHeight;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.setStyle)(l.boxContent,"height",Math.min(800,Math.max(i-200,500))),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(l.addAudiosFromPlaylistsButton,"click",V.bind(this,"playlists")),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(l.addAudiosButton,"click",V.bind(this,"default")),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(l.list,"click",Q),g&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(l.list,"audio-context","attach");(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(a.titleWrap,"click",(function(_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hasClass)(_.target,"_back")&&function(){switch(M){case"initial":break;case"default":V("initial");break;case"playlists":V("default");break;case"playlist":V("playlists")}}()})),uiSearch.init("ape_edit_playlist_search",{onChange:W,searchButtonTestId:t?.searchButtonTestId}),"edit"===_&&(V("initial"),X(),s?await async function(_){C=null,w=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.addClass)(l.uploadCoverButtonWrapper,"ape_cover_redesigned");const t=await loadMusicPlaylistUploaderControllerProvider();t.provide(l.uploadCoverButtonWrapper).mount({ownerId:e,src:_,onUpload:()=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.errorMsg)},onUploaded:_=>{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.errorMsg),C=_},onRemoveInitial:()=>{w=!0},onRemove:()=>{C=null},onValidationFailed:(_,e)=>{let t;switch(_){case _spa_web_widgets_audio_music_MusicPlaylistCoverUploader_constants__WEBPACK_IMPORTED_MODULE_53__.MusicPlaylistCoverUploaderValidationErrorType.ImageSize:t=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.langReplace)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_image_uploading_wrong_size_error"),{min_size:e.minWidth||e.minHeight||300,max_size:e.maxWidth||e.maxHeight||7e3});break;case _spa_web_widgets_audio_music_MusicPlaylistCoverUploader_constants__WEBPACK_IMPORTED_MODULE_53__.MusicPlaylistCoverUploaderValidationErrorType.MinImageSize:t=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.langReplace)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_image_uploading_min_image_size_error"),{min_size:e.minWidth||e.minHeight||300});break;case _spa_web_widgets_audio_music_MusicPlaylistCoverUploader_constants__WEBPACK_IMPORTED_MODULE_53__.MusicPlaylistCoverUploaderValidationErrorType.MaxImageSize:t=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.langReplace)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_image_uploading_max_image_size_error"),{max_size:e.maxWidth||e.maxHeight||7e3});break;case _spa_web_widgets_audio_music_MusicPlaylistCoverUploader_constants__WEBPACK_IMPORTED_MODULE_53__.MusicPlaylistCoverUploaderValidationErrorType.MaxFileSize:t=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.langReplace)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_image_uploading_too_big_file_error"),{max_size_in_mbyte:e.maxFileSize?Math.floor(e.maxFileSize/1048576):5});break;case _spa_web_widgets_audio_music_MusicPlaylistCoverUploader_constants__WEBPACK_IMPORTED_MODULE_53__.MusicPlaylistCoverUploaderValidationErrorType.FileExtension:t=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_23__.langReplace)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_image_uploading_wrong_format_error"),{extensions:e.fileExtensions?e.fileExtensions.join(", "):""});break;case _spa_web_widgets_audio_music_MusicPlaylistCoverUploader_constants__WEBPACK_IMPORTED_MODULE_53__.MusicPlaylistCoverUploaderValidationErrorType.Unknown:t=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_image_uploading_unknown_error")}t&&(l.errorMsg.innerHTML=t,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.errorMsg))}})}(h.getCoverUrl()):function(){if(!cur.audioCoverUploadOptions||!cur.audioCoverUploadOptions[e])return;const _=cur.audioCoverUploadOptions[e],t={file_name:"photo",file_size_limit:5242880,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF;*.bmp;*.BMP",onUploadStart:function(_,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_cover_progress"))},onUploadComplete:function(_,e){(e=JSON.parse(e)).error?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.show)(l.errorMsg),q()):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)(l.errorMsg),y=e,Z(y.url),e_(),q()),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_cover_progress"))},onUploadProgress:function(_,e,t){},onUploadError:function(_,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hide)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_cover_progress"))},clear:1,type:"photo",max_attempts:3,server:_.server,noCheck:!0,chooseBox:!0,uploadButton:!0,accept:".jpg,.jpeg,.png",filesize_hide_last:!0,label:_.button};function i(){(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.isObject)(y)&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.isVisible)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_cover_progress"))||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByTag1)("input",l.uploadCoverButtonWrapper).click()}Upload.init(l.uploadCoverButtonWrapper,_.url,_.vars,t),l.uploadCoverButton=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("ape_cover_accessibility_upload_btn",a.bodyNode),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_cover_delete"),"click",__),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(l.uploadCoverButton,"click",(()=>i())),l.coverThumb=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_ape_cover_thumb")}(),h.getCoverUrl()&&Z(h.getCoverUrl()),(0,_web_lib_layout_utils__WEBPACK_IMPORTED_MODULE_5__.autosizeSetup)(l.playlistDescriptionInput,{minHeight:30,maxHeight:150,onResize:q}),l.playlistNameInput.value=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.replaceEntities)(h.getTitle()),l.playlistDescriptionInput.value=(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_15__.replaceEntities)(h.getRawDescription().replace(/<br>/g,"\n")),l.playlistDiscoverToggle&&l.playlistDiscoverToggle.classList.toggle("on",h.getNoDiscover()),l.playlistNameInput.addEventListener("input",e_),l.playlistDescriptionInput.addEventListener("input",e_),l.playlistDiscoverToggle&&l.playlistDiscoverToggle.addEventListener("click",e_),l.playlistUpdateIdInput&&cur.editorialPlaylistsParams&&(l.playlistUpdateIdInput.value=cur.editorialPlaylistsParams.target_playlist,l.playlistUpdateTimeInput.valueAsNumber=1e3*cur.editorialPlaylistsParams.update_time-6e4*(new Date).getTimezoneOffset(),l.playlistUpdateCutInput.valueAsNumber=cur.editorialPlaylistsParams.update_cut,l.playlistUpdateFilterInput.classList.toggle("on",1===cur.editorialPlaylistsParams.update_filter),l.playlistUpdateFilterInput.setAttribute("aria-checked",1===cur.editorialPlaylistsParams.update_filter),l.playlistUpdateIdInput.addEventListener("input",e_),l.playlistUpdateTimeInput.addEventListener("input",e_),l.playlistUpdateCutInput.addEventListener("input",e_),l.playlistUpdateFilterInput.addEventListener("click",e_)));p?V("playlist",h):g&&V("default");F(),v&&"attach"!==_&&a.setControlsText(`<a onclick="AudioPage.deletePlaylist(${v.getOwnerId()}, ${v.getPlaylistId()}, '${v.getEditHash()}')">\n                              ${(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_delete_playlist")}\n                            </a>`)}({searchButtonTestId:"MusicPlaylist_EditModal_SearchTracks"}),c&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.val)(l.searchInput,c),N()},AudioPage.prototype._deinitEvents=function(){this._deinitKeyEvents(),this._deinitMusicEvents()},AudioPage.prototype._initEvents=function(){this._initKeyEvents(),this._initMusicPlaylistDeletionEvents(),this._initMusicEvents()},AudioPage.prototype._deinitKeyEvents=function(){this._audioHQKeyEventHandler1&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(window.document,"keydown",this._audioHQKeyEventHandler1),this._audioHQKeyEventHandler2&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(window.document,"keyup",this._audioHQKeyEventHandler2),this._audioHQKeyEventHandler3&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(window.document,"visibilitychange",this._audioHQKeyEventHandler3),this._audioHQKeyEventHandler4&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(window.document,"mousedown",this._audioHQKeyEventHandler4),this._audioSeekKeyEventHandler&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(window.document,"keydown",this._audioSeekKeyEventHandler)},AudioPage.prototype._initKeyEvents=function(){this._deinitKeyEvents();const _=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)(),e=()=>!this.isLayer()&&(0,_web_audio_player_utils_getLayer__WEBPACK_IMPORTED_MODULE_69__.getLayer)().isShown();(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(window.document,"mousedown",this._audioHQKeyEventHandler4=function(_){_.ctrlKey&&(cur.ctrlMouseDown=!0,cur.ctrlPressed=!1)},!0),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(window.document,"keydown",this._audioHQKeyEventHandler1=function(_){e()||(cur.ctrlPressed=_.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.KEY.CTRL)}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(window.document,"keyup",this._audioHQKeyEventHandler2=function(_){e()||(_.keyCode!==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.KEY.CTRL||cur.ctrlMouseDown)&&(delete cur.ctrlMouseDown,delete cur.ctrlPressed)}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(window.document,"keydown",this._audioSeekKeyEventHandler=function(t){const i=t.target,o=i&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.inArray)(i.tagName.toLowerCase(),["input","textarea"])&&""!==(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.val)(i),s=i&&i.isContentEditable,a=cur&&cur.pvShown;o||s||a||e()||!_.isPlaying()||!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.inArray)(t.keyCode,[_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.KEY.RIGHT,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.KEY.LEFT])||cur.wallLayer||t.ctrlKey||_.seekCurrentAudio(t.keyCode===_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.KEY.RIGHT)}),cur.destroy.push((()=>this._deinitKeyEvents()))},AudioPage.prototype._initMusicPlaylistFollowingEvents=async function(){const _=(await(0,_web_audio_EVA_domain_music_MusicService_lazySingleton__WEBPACK_IMPORTED_MODULE_54__.ensureMusicService)()).playlistsFollowing,e=({originalIdentity:_,followedIdentity:e})=>{AudioPage.onMusicPlaylistToggleFollowing(_,e,!0)},t=({originalIdentity:_,followedIdentity:e})=>{AudioPage.onMusicPlaylistToggleFollowing(_,e,!1)};_.events.on("followed",e),_.events.on("unfollowed",t),cur.destroy.push((()=>{_.events.off("followed",e),_.events.off("unfollowed",t)}))},AudioPage.prototype._initMusicPlaylistDeletionEvents=async function(){const _=await loadMusicPlaylistProvider(),e=({target:_})=>{AudioPage.onMusicPlaylistDelete(_.ownerId,_.id),AudioPage.onMusicPlaylistDeleted()};_.events.on("deleted",e),cur.destroy.push((()=>{_.events.off("deleted",e)}))},AudioPage.prototype._deinitMusicEvents=async function(){const _=await(0,_web_audio_EVA_domain_music_MusicService_lazySingleton__WEBPACK_IMPORTED_MODULE_54__.ensureMusicService)();this._onMyMusicAdded&&_.myMusic.events.off("added",this._onMyMusicAdded),this._onMyMusicRestored&&_.myMusic.events.off("restored",this._onMyMusicRestored),this._onMyMusicDeleted&&_.myMusic.events.off("deleted",this._onMyMusicDeleted),this._onGroupMusicAdded&&_.myMusic.events.off("added",this._onGroupMusicAdded),this._onGroupMusicRestored&&_.myMusic.events.off("restored",this._onGroupMusicRestored),this._onGroupMusicDeleted&&_.myMusic.events.off("deleted",this._onGroupMusicDeleted),this._onMusicDislikesActivated&&_.dislikes.events.off("activated",this._onMusicDislikesActivated),this._onMusicDislikesDeactivated&&_.dislikes.events.off("deactivated",this._onMusicDislikesDeactivated)},AudioPage.prototype._initMusicEvents=async function(){const _=this.getOwnerId(),e=await(0,_web_audio_EVA_domain_music_MusicService_lazySingleton__WEBPACK_IMPORTED_MODULE_54__.ensureMusicService)();if(e.myMusic.events.on("added",this._onMyMusicAdded=function(_){for(const e of[_.source,_.target])forEachAudioElement(e,(_=>{toggleMusicAudioElementOwningState(_,!0)}))}),e.myMusic.events.on("restored",this._onMyMusicRestored=function(_){for(const e of[_.source,..._.targets])forEachAudioElement(e,(_=>{toggleMusicAudioElementOwningState(_,!0)}))}),e.myMusic.events.on("deleted",this._onMyMusicDeleted=function(_){for(const e of[_.source,..._.targets])forEachAudioElement(e,(_=>{toggleMusicAudioElementOwningState(_,!1)}))}),e.dislikes.events.on("activated",this._onMusicDislikesActivated=function({identity:_}){updateDislikeStateInAudio(_,!0)}),e.dislikes.events.on("deactivated",this._onMusicDislikesDeactivated=function({identity:_}){updateDislikeStateInAudio(_,!1)}),_shared_ranges__WEBPACK_IMPORTED_MODULE_57__.Ranges.isGroupId(_)){const t=e.groupMusicServices.get(_shared_ranges__WEBPACK_IMPORTED_MODULE_57__.Ranges.convertOwnerIdToGroupId(_));t.events.on("added",this._onGroupMusicAdded=function(_){for(const e of[_.source,_.target])forEachAudioElement(e,(_=>{toggleMusicAudioElementGroupOwningState(_,!0)}))}),t.events.on("restored",this._onGroupMusicRestored=function(_){for(const e of[_.source,..._.targets])forEachAudioElement(e,(_=>{toggleMusicAudioElementGroupOwningState(_,!0)}))}),t.events.on("deleted",this._onGroupMusicDeleted=function(_){for(const e of[_.source,..._.targets])forEachAudioElement(e,(_=>{toggleMusicAudioElementGroupOwningState(_,!1)}))})}cur.destroy.push((()=>this._deinitMusicEvents()))},AudioPage.prototype.updateStatusExportControls=function(_){const e=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getStatusExportInfo();if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.each)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass)("_audio_export_status",this._els.pageContainer),(function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.toggleClass)(this,"on",e&&!!e[(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domData)(this,"oid")])})),!_)if(this.isLayer())cur.audioPage&&cur.audioPage.updateStatusExportControls(!0);else{const _=(0,_web_audio_player_utils_getLayer__WEBPACK_IMPORTED_MODULE_69__.getLayer)().getPageInstance();_&&_.updateStatusExportControls(!0)}return!1},AudioPage.prototype.playStatusAudio=function(_,e,t){const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.gpeByClass)("_audio_friend",t);(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().playLive(_,{showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.showProgress.pbind(i),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.hideProgress.pbind(i)}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(e)},AudioPage.showActionTooltip=function(_,e){const t=[3,-8,0],i=currentAudioPage(_),o=i&&i.isLayer();(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hasClass)(_,"_audio_page_player_add")?(0,_web_lib_feature_tooltips__WEBPACK_IMPORTED_MODULE_25__.audioShowActionTooltip)(_,t,o):(0,_web_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_26__.showTooltip)(_,{text:e,black:1,shift:t,appendParentCls:"_audio_page_player",forcetodown:o,needLeft:o})},AudioPage.prototype.onHide=function(){const _=this;cur.nav=cur.nav.filter((function(e){return _._nav_func!=e})),this._deinitKeyEvents()},AudioPage.prototype.showRecoms=function(_,e){(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_4__.statlogsValueEvent)("audio_recoms_by_track_button_click",!0),nav.go({0:"audio",section:"recoms_audio",audio_id:e},null,{nocur:!0})},AudioPage.prototype.onAudioUploaded=function(_,e){if(!e)return;const t=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)(),i=t.getPlaylist(_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_PLAYLIST,this.getOwnerId(),_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.DEFAULT_PLAYLIST_ID);i.pushAudio(e);const o=t.getCurrentPlaylist();o&&o.getSelf()==i&&o.pushAudio(e),"all"!==this._currentSection&&this.resetSection("all");let s=(0,_shared_audioplayer_AudioPlayerAdapter_audioTuple_audioTupleToAudioObject__WEBPACK_IMPORTED_MODULE_32__.audioTupleToAudioObject)(e);(0,_web_audio_player_stat_onAdditionalEvent__WEBPACK_IMPORTED_MODULE_12__.onAdditionalEvent)(null,s,{type:_shared_audio_AudioStats__WEBPACK_IMPORTED_MODULE_11__.TYPE_ADDED,subtype:_shared_audio_AudioStats__WEBPACK_IMPORTED_MODULE_11__.SUBTYPE_UPLOAD,context:"on_audio_uploaded",playlistId:i.getOwnerId()+"_"+i.getPlaylistId()});let a=5;const l=this;!function _(t){--a<0||setTimeout((function(){ajax.post("al_audio.php?act=check_audio_data",{audio_owner_id:s.ownerId,audio_id:s.id},{onDone:function(i){if(!i)return;let o=i[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE]!=e[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_TITLE];o=o||i[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER]!=e[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_PERFORMER],o=o||i[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS]!=e[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_FLAGS],o&&((0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().updateAudio(s.fullId,i),"all"===l._currentSection&&"audio"===cur.module&&l._initAudioRowsAutoList(),s=i),_(1.5*t)},onFail:()=>!0})}),t)}(1e3)},AudioPage.prototype.onAudioAllUploaded=function(){"all"===this._currentSection&&nav.reload()},AudioPage.prototype.uploadAudio=function(_){this._data.uploadBanned?(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_error")},this._data.uploadBannedText):(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showBox)("al_audio.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)(_||{},{act:"new_audio",gid:_shared_ranges__WEBPACK_IMPORTED_MODULE_57__.Ranges.isGroupId(this.getOwnerId())?-this.getOwnerId():0}),{params:{width:"450px",bodyStyle:"padding: 0px; position: relative;"}})},AudioPage.prototype.editAudio=function(_,e,t){return(0,_web_lib_message_box__WEBPACK_IMPORTED_MODULE_18__.showBox)("al_audio.php",{act:"edit_audio_box",aid:e},{params:{width:"456px",bodyStyle:"padding: 20px; background-color: #F7F7F7;",hideButtons:1}}),t&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.cancelEvent)(t),!1},AudioPage.isInRecentPlayed=function(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.gpeByClass)("_audio_playlist",_);return!(!e||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hasClass)(e,"audio_recent_rows"))&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.data)(e,"playlist")},AudioPage.prototype.chooseFromMyAudios=function(_){let e=!1;AudioPage.editPlaylist(vk.id,_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.DEFAULT_PLAYLIST_ID,"attach",{audioPickerButtonText:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_add"),playlistPickerButtonText:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("global_add"),onClose:()=>{e&&nav.reload()},onAudioChoose:(t,i,o)=>{const s=t.ctrlKey||t.metaKey;if(ajax.post("al_audio.php?act=add",{group_id:_,audio_owner_id:o.ownerId,audio_id:o.id,hash:o.addHash},{onDone:_=>{_&&(e=!0)},onFail:()=>!0}),s)i.innerHTML=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_24__.getLang)("audio_choose_added"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.addClass)(i,"ape_added");else{e=!0;const _=window.__bq;if(_)for(;_.count();)_.hideLast()}}})},AudioPage.prototype.loadMarketItemsCarousel=function(){try{Boolean(document.querySelector(".EcommAudioMarketItemsCarousel__root"))&&(0,_vkontakte_vkjs__WEBPACK_IMPORTED_MODULE_39__.asyncImportLoader)((()=>Promise.all([__webpack_require__.e(91498),__webpack_require__.e(82915),__webpack_require__.e("langs/web/MarketItemsCarousel")]).then(__webpack_require__.bind(__webpack_require__,713600))),3)}catch(_){}},AudioPage.prototype.updatePlayerClass=function(_){const e=(0,_shared_audio_utils_isPodcast__WEBPACK_IMPORTED_MODULE_29__.isPodcast)(_);if(!this.isPodcastPage()){this.isLayer()&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.toggleClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_tab__current",this._els.pageContainer),"unshown",e||!(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentPlaylist());const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_tab__podcast",this._els.pageContainer);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.toggle)(t,e),t&&e&&(_=_||(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getCurrentAudio(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.attr)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("ui_tab",t),"href","podcasts"+_[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_35__.AUDIO_PLAYER_ENUMS.AUDIO_ITEM_INDEX_OWNER_ID]))}},AudioPage.prototype._getCurrentSearchParams=function(){const _=window.radioBtns["audio_search_type_"+(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)(this.isLayer())],e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.intval)(this._searchSortFilter?.selectedItems()[0][0]);return{performer:_&&_.val?1:null,lyrics:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.hasClass)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_fltr_with_lyrics",this._container),"on")?1:null,sort:e?1:null}},AudioPage.searchAudios=function(_,e,t,i,o){currentAudioPage(this)?.searchAudios(_,e,t,i,o)},AudioPage.prototype.searchAudios=function(_,e,t,i,o){this.lastQuery!==_&&(this.lastQuery=_,this._muteSearch?delete this._muteSearch:(_=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.trim)(_),nav.change((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_6__.extend)(this._getCurrentSearchParams(),{q:_||null}),!1,{fromSearch:!0,globalQuery:_,fromHistory:t,isLayer:this.isLayer(),fetchedQuery:i,fromSuggestsAcceptId:o})))},AudioPage.prototype.onUserAction=function(_,e){const t=e.indexOfAudio(_);if(-1!=+t&&e.getType()===_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_SEARCH){if(!(e.getOwnerId()===vk.id&&t>=0&&t<e.getLocalFoundCount())&&e.getSearchParams()){const t=e.getSearchParams();t.globalQuery&&uiSearch.saveHistorySearch(this.searchInputEl,t.globalQuery,_.ownerId,_.id,e.getTotalCount(),e.getTotalCountHash())}}},AudioPage.prototype.isLayer=function(){return this._data.isLayer},AudioPage.prototype.isPodcastPage=function(){return!this.isLayer()&&!!this._data.podcastPage},AudioPage.prototype.destroy=function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(window,"scroll",this._ev_onScroll)},AudioPage.prototype.getPageCurrentPlaylist=function(){return this._pagePlaylist},AudioPage.prototype.clearCurrentPlaylist=function(){if(!this.isLayer())return;const _=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)();_?.notify(_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.PLAYLIST_CLEAR_REQUESTED),_.deleteCurrentPlaylist(),this.updateCurrentPlayingInfo();(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)().getPlaylistQueue().clean();const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_tab__current",this._els.pageContainer);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.addClass)(e,"unshown"),"current"===this.getCurrentSection()&&(uiTabs.goTab((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.domFC)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("_audio_section_tab__all",this._els.pageContainer)),null,!0),this.updateCurrentPlayingInfo(),this.updatePlayerClass(null)),this._initPlayer(!0);const t=_.getPlaylistsByType(_web_audio_player_components_AudioPlaylist__WEBPACK_IMPORTED_MODULE_14__.AudioPlaylist.TYPE_MY).find((_=>_.getAudiosList().length)),i=t&&t.getAudiosList()[0];if(i&&(this._readyAudio=i,this._initPlayer(!0)),cur.audioPage){cur.audioPage._readyAudio=i,cur.audioPage._initPlayer(!0);try{const _=cur.audioPage._data.sectionData[cur.audioPage._currentSection].title;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.setDocumentTitle)(_)}catch(_){}}this.updateLayerHeight(),this._scroll.scrollTop(),_.notify(_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.PLAYLIST_CLEARED)},AudioPage.prototype._initPlayer=function(){const _=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_56__.getAudioPlayer)();if(!_)return;[_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.MUSIC_AUDIOS_ADD,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.MUSIC_PLAYLISTS_ADD,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.MUSIC_OWNERS_FOLLOW,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.MUSIC_OWNERS_UNFOLLOW,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.CURATOR_FOLLOW,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.CURATOR_UNFOLLOW,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.PLACEHOLDER_REMOVE].forEach((e=>_.on(this,e,((_,t)=>{this.catalogController&&this.catalogController.emitEvent(e,t)})))),_.on(this,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.MUSIC_PLAYLISTS_ADD,((_,e)=>{const{playlists:t,playlistsIndex:i}=this._data;Array.isArray(t)&&t.find((_=>_.id===e.id&&_.owner_id===e.owner_id))||(t&&(t.unshift(e),i&&i.add(e)),this.updatePlaylistsCounter(vk.id))})),_.on(this,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.RADIOSTATION_FOLLOW,((_,e)=>{const t=this._els.pageContainer.querySelectorAll(`.AudioRadiostationItem[data-id='${e}']`);Array.from(t).forEach((_=>{_.classList.add("AudioRadiostationItem--followed")}))})),_.on(this,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.RADIOSTATION_UNFOLLOW,((_,e)=>{const t=this._els.pageContainer.querySelectorAll(`.AudioRadiostationItem[data-id='${e}']`);Array.from(t).forEach((_=>{_.classList.remove("AudioRadiostationItem--followed")}))})),_.on(this,[_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.PLAY,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.PLAY_REQUESTED],((_,e,t)=>{this._destroyReadyAudio(),this.updateCurrentPlayingInfo()})),_.on(this,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.UPDATE,((_,e)=>{_&&this.updatePlayerClass(_)})),_.on(this,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.CURRENT_CHANGED,(()=>{const e=_.getCurrentAudio()||this._readyAudio;this.updatePlayerClass(e)})),_.on(this,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.AUDIO_RESTORE_BY_DISLIKE_ACTION,((_,e)=>{if(!e)return;const t=this._els.sections.querySelectorAll(`.audio_row[data-full-id='${e}']`);Array.from(t).forEach((_=>{_.closest(".CatalogBlock__my_audios_block")||_.closest(".CatalogBlock__my_audios")||_.closest('[data-audio-context="my_audios_full"]')?_.classList.remove("audio_row__deleted"):_.classList.add("audio_row__added")}))})),_.on(this,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.AUDIO_DELETE_BY_DISLIKE_ACTION,((_,e)=>{if(!e)return;const t=this._els.sections.querySelectorAll(`.audio_row[data-full-id='${e}']`);Array.from(t).forEach((_=>{(_.closest(".CatalogBlock__my_audios_block")||_.closest(".CatalogBlock__my_audios")||_.closest('[data-audio-context="my_audios_full"]'))&&_.classList.add("audio_row__deleted"),_.classList.remove("audio_row__added")}))})),_.on(this,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.PLAY,(()=>{for(let _ of this._playlistLoadingProvider().getSet()){const e=this._getPlaylistByQuerySelector(_);e&&e.classList.remove("audio_pl__loading")}this._playlistLoadingProvider().resetSet()})),_.on(this,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.PLAYLIST_START_LOADING,((_,e,t)=>{const i=`${e}_${t}`,o=`${window.vk.id}_${t}`;this._getPlaylistByQuerySelector(i)?this._markLoadingPlaylist(i):this._getPlaylistByQuerySelector(o)&&this._markLoadingPlaylist(o)})),_.on(this,_shared_audio_AudioPlayerEvents__WEBPACK_IMPORTED_MODULE_10__.events.PLAYBACK_QUEUE_SHUFFLED_UPDATED,(()=>{"current"===this._currentSection&&this._initAudioRowsAutoList(!0)}));const e=_.getCurrentAudio()||this._readyAudio;this.updatePlayerClass(e)},AudioPage.prototype.promoAlbumSlideInit=function(){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("audio_promo");if(this.isLayer()||!_)return;const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("audio_promo__items",_);if(!e||e.children.length<=1)return;this.promoAlbumSlideAutoStart(e);const t=()=>this.promoAlbumSlideAutoStop(),i=()=>this.promoAlbumSlideAutoStart(e);(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(_,"mouseenter",t),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.addEvent)(_,"mouseleave",i),window.cur&&cur.destroy.push((()=>{this.promoAlbumSlideAutoStop(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(_,"mouseenter",t),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_9__.removeEvent)(_,"mouseleave",i)}))},AudioPage.prototype.promoAlbumSlideAutoStart=function(_){window.cur&&(cur._promoAlbumSlideTO=setTimeout((()=>this.promoAlbumSlide(_,1)),SLIDER_TIMEOUT))},AudioPage.prototype.promoAlbumSlideAutoStop=function(){window.cur&&clearTimeout(cur._promoAlbumSlideTO)},AudioPage.prototype.promoAlbumSlide=function(_,e){const t=vk.rtl?e>0?-1:1:e<0?-1:1,i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.gpeByClass)("audio_promo",_);if(!i)return;const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.geByClass1)("audio_promo__items",i);if(!o||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.data)(o,"sliding"))return;this.promoAlbumSlideAutoStop();const s=o.scrollLeft,a=o.offsetWidth,l=o.children,n=l.length,r=_=>vk.rtl?o.scrollWidth-_*a-a:_*a;if(!(l.length>1))return;this.promoAlbumSlideAutoStart(_);let d=!1,c=null,u=!1,E=Math.round(s/a);E+=t,E>=n||E<0?(d=l[0].cloneNode(!0),o.appendChild(d),E>=n?(u=!0,c=r(E)):E<0&&(o.scrollLeft=r(n),E=n-1,c=r(E))):c=r(E),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.data)(o,"sliding",!0),(0,_web_lib_fx__WEBPACK_IMPORTED_MODULE_3__.animate)(o,{scrollLeft:c},{duration:500,transition:_web_lib_fx__WEBPACK_IMPORTED_MODULE_3__.Fx.Transitions.swiftOut,onComplete:()=>{u&&(o.scrollLeft=r(0)),d&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.re)(d),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.data)(o,"sliding",!1)}})},AudioPage.setVisibilitySectionsContent=function(_){cur.audioPage&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_17__.toggle)(cur.audioPage._els.sections,_)},AudioPage.prototype._playlistLoadingProvider=function(){return _PlaylistLoadingProvider__WEBPACK_IMPORTED_MODULE_70__.PlaylistLoadingProvider.ensure()},AudioPage.prototype._getPlaylistByQuerySelector=function(_){return document.querySelector(`._audio_pl_${_}`)},AudioPage.prototype._markLoadingPlaylist=function(_){const e=this._getPlaylistByQuerySelector(_);e&&(e.classList.add("audio_pl__loading"),this._playlistLoadingProvider().addPlaylist(_))};try{(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("Audio/Catalog/RecommendationsPlaylists/Playlist/OpenButton/Click",(_=>{const{target:e,dataAttrs:t}=_.payload;!e.disabled&&t.options&&_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageProxy.ensure().emitter.emit(_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageEventType.AudioRecomsOnboardingShowRequested,{reason:_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioRecomsOnboardingShowRequestedEventReason.RecommendationsPlaylistOpenButton,payload:JSON.parse(t.options)})}))}catch(_){console.error(_)}try{(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("Audio/Catalog/RecommendationsPlaylists/Playlist/PlayButton/Click",(_=>{const{target:e,dataAttrs:t}=_.payload;!e.disabled&&t.options&&_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageProxy.ensure().emitter.emit(_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageEventType.AudioRecomsOnboardingShowRequested,{reason:_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioRecomsOnboardingShowRequestedEventReason.RecommendationsPlaylistPlayButton,payload:JSON.parse(t.options)})}))}catch(_){console.error(_)}try{(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("Audio/Catalog/VibeRecommendationsPlaylists/Playlist/PlayButton/Click",(_=>{const{target:e,dataAttrs:t}=_.payload;!e.disabled&&t.options&&_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageProxy.ensure().emitter.emit(_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioPageEventType.AudioRecomsOnboardingShowRequested,{reason:_web_audio_AudioPageProxy__WEBPACK_IMPORTED_MODULE_48__.AudioRecomsOnboardingShowRequestedEventReason.VibeRecommendationsPlaylistPlayButton,payload:JSON.parse(t.options)})}))}catch(_){console.error(_)}(0,_shared_evbus__WEBPACK_IMPORTED_MODULE_1__.tq)().setInteractiveHandler("Audio/Catalog/CreateMyMusicPlaylist/Click",(_=>{const e=(0,_web_di__WEBPACK_IMPORTED_MODULE_0__.ensureDIRootWebContainer)(),t=e.resolve(_vkontakte_internal_plugins__WEBPACK_IMPORTED_MODULE_72__.AuthService),i=e.resolve(_web_audio_catalog_AudioCatalogStatsCollector__WEBPACK_IMPORTED_MODULE_50__.AudioCatalogStatsCollector);try{t.assertAuthorized();const{target:e,dataAttrs:o}=_.payload;if(e.disabled||!o.options)throw new Error("Task unavailable");const{ownerId:s,blockId:a}=JSON.parse(o.options);AudioPage.editPlaylist(s),i.logOpenMyMusicPlaylistCreationModal({blockId:a})}catch(_){console.error("CreateMyMusicPlaylist/Click task failed",_)}}))},955377:(_,e,t)=>{t.d(e,{default:()=>d});var i=t(672277),o=t(692543),s=t(449299),a=t(754866),l=t(478752),n=t(972332);function r(_,e,t){if((0,l.isObject)(e)?t=e:this._dragElClass=e,this.options=(0,l.extend)({dragThreshold:r.DRAG_THRESHOLD_DIST},t),this._contEl=(0,a.ge)(_),this._contEl){this._excludedCount=0;for(let _=0;_<this._contEl.children.length;_++)this._contEl.children[_].getAttribute("nodrag")&&this._excludedCount++;(0,n.addEvent)(this._contEl,"mousedown",this._ev_mousedown_handler=this._onMouseDown.bind(this)),(0,a.setStyle)(this._contEl,"position","relative"),this._inited=!0,this._updateScrollbar=this._initUpdaterScrollbar()}}r.AUTO_SCROLL_DY=10,r.DRAG_THRESHOLD_DIST=0,r.AUTO_SCROLL_DISTANCE_THRESHOLD=300,r.AUTO_SCROLL_GAP=300,r.prototype.destroy=function(){this._inited&&(this._inited=!1,this._deinitEvents(!0))},r.prototype._getParentDragItemEl=function(_){let e,t=_;for(;t&&(e=(0,a.domPN)(t))!==this._contEl;)t=e;return t===this._curPlaceholderEl&&(t=null),t},r.prototype._onKey=function(_){_.keyCode===n.KEY.ESC&&this.isCurrentlyDragging()&&this._onMouseUp()},r.prototype.forceFinishDrag=function(_){this.isCurrentlyDragging()?(this.onDragFinish=_,this._onMouseUp(!0)):_()},r.prototype._onMouseDown=function(_){if(this._disabled||0!=_.button||this._curDragEl||(0,a.attr)(_.target,"nodrag")||this._dragElClass&&!(0,a.domClosest)(this._dragElClass,_.target))return;let e=_.target;for(;e&&e!==window.document;){if((0,l.intval)((0,a.domData)(e,"nodrag")))return;e=(0,a.domPN)(e)}const t=this._getParentDragItemEl(_.target);if(!t||(0,a.attr)(t,"nodrag"))return;if((0,a.re)((0,a.geByClass1)("ui_gridsorter_placeholder"),this._contEl),this._contInfo=this._contInfo||{prevSize:(0,a.getSize)(this._contEl)},this._ensureGridIsActual(),this._grid.length<=1)return;const i=window.getComputedStyle(t),o=(0,a.getXY)(t);this._initial={candidateEl:t,x:_.clientX,y:_.clientY,itemMargin:{x:parseInt(i.marginLeft),y:parseInt(i.marginTop)},shift:{x:_.pageX-o[0],y:_.pageY-o[1]}},(0,n.addEvent)(document,"mousemove",this._ev_mousemove_handler=this._onMouseMove.bind(this)),(0,n.addEvent)(document,"mouseup",this._ev_mouseup_handler=this._onMouseUp.bind(this)),(0,n.addEvent)(document,"keydown",this._ev_keydown_handler=this._onKey.bind(this)),cur.cancelClick=!1,(0,n.cancelEvent)(_)},r.prototype._dist=function(_){return Math.abs(_.clientX-this._initial.x)+Math.abs(_.clientY-this._initial.y)},r.prototype._onMouseUp=function(_){const e=this._curDragEl;let t=!_;if(!0===_&&(_=void 0),this._curDragEl){this._curDragEl=null,(0,a.removeClass)(e,"ui_gridsorter_moveable_notrans"),this._curOverCell||(this._curOverCell={el:this._curPlaceholderEl,pos:(0,a.getXY)(this._curPlaceholderEl),size:(0,a.getSize)(this._curPlaceholderEl)});const i=this._curOverCell.pos,o=this._curOverCell.el,s=this._grid[this._curDragCellIndex],l=s&&s.size;(0,a.gpeByClass)("_ape_item_list",e)&&(i[0]+=20,i[1]+=20),l&&this._isShiftToLeft&&(i[1]-=l[1]-this._curOverCell.size[1]),setTimeout((()=>{if(t){for(let _=0,e=this._grid.length;_<e;_++){const e=this._grid[_];e.dirty&&this._setPos(e.el,{left:0,top:0})}this._setPos(e,this._initialCurDragPos)}else this._setPos(e,{left:i[0],top:i[1]})})),setTimeout((()=>{if((0,a.re)(this._curPlaceholderEl),(0,a.removeClass)(this._contEl,"ui_gridsorter_cont"),this.options.dragCls&&(0,a.removeClass)(e,this.options.dragCls),!this._inited)return;let _;if(t){let _=this._grid.length;for(let e=0;e<_;e++){const _=this._grid[e];_.dirty&&this._setPos(_.el,{left:null,top:null})}this._setPos(e,{left:null,top:null,width:null,height:null})}else{let t;_=this._isShiftToLeft?(0,a.domNS)(o):o,this._contEl.insertBefore(e,_);let i=-1,s=this._initial.hasInlineSize;this._setPos(e,{left:null,top:null}),s||(0,a.setStyle)(e,{width:null,height:null});let l=this._grid.length;for(let _=0;_<l;_++){const l=this._grid[_];(l.dirty||l.el===e)&&(this._setPos(l.el,{left:null,top:null}),s||(0,a.setStyle)(l.el,{width:null,height:null}),l.pos=this._calcElementPos(l.el),l.dirty=!1),l.el===e?t=_:l.el===o&&(i=_)}if(i>=0){const _=this._grid.splice(t,1);this._grid.splice(i,0,_[0])}}(0,a.removeClass)(e,"ui_gridsorter_moveable"),this._curOverCell=this._curPlaceholderEl=null,t&&this.update(),this.options.onDragFinish&&this.options.onDragFinish(e),o!==e&&!t&&this.options.onReorder&&this.options.onReorder(e,_,(0,a.domPS)(e)),this.onDragFinish&&(this.onDragFinish(),this.onDragFinish=void 0)}),210),_&&this._dist(_)>5&&((0,n.cancelEvent)(_),cur.cancelClick=!0)}this._updateScrollbar(),this._deinitEvents(),e&&this._overEl&&this.options.onDragLeave&&this.options.onDragLeave(this._overEl,e),t||e&&this._overEl&&this.options.onDragDrop&&(t=this.options.onDragDrop(this._overEl,e)),this._overEl=null},r.prototype._deinitEvents=function(_){_&&(this._onMouseUp(),(0,n.removeEvent)(this._contEl,"mousedown",this._ev_mousedown_handler)),clearTimeout(this._autoScrollTO),this._autoScrollTO=!1,this._ev_mousemove_handler&&(0,n.removeEvent)(document,"mousemove",this._ev_mousemove_handler),this._ev_mouseup_handler&&(0,n.removeEvent)(document,"mouseup",this._ev_mouseup_handler),this._ev_keydown_handler&&(0,n.removeEvent)(document,"keydown",this._ev_keydown_handler)},r.prototype._setPos=function(_,e){this.options.noPosTransform||!this._hasTranslateFeauture&&!(this._hasTranslateFeauture=window.getComputedStyle(_).getPropertyValue("transform"))?(0,a.setStyle)(_,(0,l.extend)({transform:null},e)):null===e.left||null===e.top?(0,a.setStyle)(_,{transform:null,top:null,left:null}):(0,a.setStyle)(_,{transform:"translate("+e.left+"px, "+e.top+"px)",top:null,pos:null})},r.prototype._recalc=function(){const _=this._curDragEl,e=this._curOverCell.el;if(this._initGrid(),e===_){let e=this._grid.length;for(let t=0;t<e;t++){const e=this._grid[t];e.el!==_&&e.dirty&&(e.dirty=!1,this._setPos(e.el,{left:null,top:null}))}return}let t=0,i=!1,o=!1,s=this._grid.length;for(let t=0;t<s;t++){const o=this._grid[t];if(o.el===_){i=!0;break}if(o.el===e){i=!1;break}}this._isShiftToLeft=i;let a=i?0:this._grid.length-1,l=i?this._grid.length:-1,n=i?1:-1,r=[0,0];for(;a!==l;a+=n){const s=this._grid[a];if(2!==t)if(s.el!==_){if(s.el===e&&t++,1===t||2===t){let _=0,e=0;i?(_=o.pos[0]+r[0],e=o.pos[1]+r[1],r[0]+=s.size[0]-o.size[0],r[1]+=s.size[1]-o.size[1]):(r[0]+=o.size[0]-s.size[0],r[1]+=o.size[1]-s.size[1],_=o.pos[0]+r[0],e=o.pos[1]+r[1]),this._setPos(s.el,{left:_-s.pos[0],top:e-s.pos[1]}),s.dirty=!0}else s.dirty&&(this._setPos(s.el,{left:null,top:null}),s.dirty=!1);o=s}else t++,o=s;else s.dirty&&(this._setPos(s.el,{left:null,top:null}),s.dirty=!1),o=s}},r.prototype.disable=function(){this._disabled=!0},r.prototype.enable=function(){this._disabled=!1,this._initGrid(!0)},r.prototype.update=function(){this._disabled||this._initGrid(!0)},r.prototype._ensureGridIsActual=function(){this._initGrid()},r.prototype._needGridUpdate=function(){if(!this._grid)return 1;this._contInfo.prevSize=this._contInfo.prevSize||(0,a.getSize)(this._contEl);let _=0,e=this._contEl.children.length-this._excludedCount-(0,l.intval)(!!this._curPlaceholderEl);if(e!==this._grid.length)_=e>this._grid.length?2:1,this._contInfo.prevSize=(0,a.getSize)(this._contEl);else{let e=(0,a.getSize)(this._contEl),t=this._contInfo.prevSize;(Math.abs(t[0]-e[0])>5||Math.abs(t[1]-e[1])>5)&&(_=1),this._contInfo.prevSize=e}return _},r.prototype._initGrid=function(_){let e=_?1:this._needGridUpdate();if(!e)return;1===e&&(this._grid=[],this._contInfo&&(delete this._contInfo.pos,delete this._contInfo.size));let t=this._grid?this._grid[this._grid.length-1]:null;this._grid=this._grid||[];let i,o=!!t,s=this._contEl.children;if(!s.length)return;let l=this._getItemMargins();for(let _=this._curDragEl?this._grid.length:0,e=s.length;_<e;_++){let e=s[_];t&&e===t.el?o=!1:o||e===this._curPlaceholderEl||e.getAttribute("nodrag")||(i=(0,a.getSize)(e),i[0]+=l[0],i[1]+=l[1],this._grid.push({el:e,size:i,pos:this._calcElementPos(e)}))}},r.prototype._getRelativeMousePos=function(_){let e=this._getContPos(),t=this._getContShift();return{left:_.clientX-e[0]-t[0],top:_.clientY-e[1]-t[1]}},r.prototype._updateDraggablePosition=function(_){if(!this._curDragEl)return;let e=this._getRelativeMousePos(_),t=this._getItemShift(),i=this._getContShift(),o=this._getContSize(),s=e.top-this._initial.shift.y-t[1]+i[1];this.options.limitBottomMove&&(s=Math.min(s,o[1]+30)),(0,a.hasClass)(this._contEl,"_ape_item_list")&&(s+=this._contEl.scrollTop),this._setPos(this._curDragEl,{left:e.left-this._initial.shift.x-t[0]+i[0],top:s}),window.AudioPage&&window.AudioPage.onUpdateDraggablePosition&&window.AudioPage.onUpdateDraggablePosition()},r.prototype._getContShift=function(){if(this._contInfo=this._contInfo||{},!this._contInfo.shift){let _=window.getComputedStyle(this._contEl);this._contInfo.shift=[parseFloat(_.paddingLeft),parseFloat(_.paddingTop)]}return this._contInfo.shift},r.prototype._getContSize=function(){return this._contInfo=this._contInfo||{},this._contInfo.size=(0,a.getSize)(this._contEl),this._contInfo.size},r.prototype._getContPos=function(){return this._contInfo=this._contInfo||{},this._contInfo.pos=(0,a.getXY)(this._contEl),this._contInfo.pos[1]-=(0,o.scrollGetY)(),this._contInfo.pos},r.prototype._getItemShift=function(){if(this._contInfo=this._contInfo||{},!this._contInfo.itemShift){let _=window.getComputedStyle((0,a.domFC)(this._contEl));this._contInfo.itemShift=[parseFloat(_.marginLeft),parseFloat(_.marginTop)]}return this._contInfo.itemShift},r.prototype._getItemMargins=function(){if(this._contInfo=this._contInfo||{},!this._contInfo.itemMargins){let _=window.getComputedStyle((0,a.domFC)(this._contEl));this._contInfo.itemMargins=[parseFloat(_.marginLeft)+parseFloat(_.marginRight),parseFloat(_.marginTop)+parseFloat(_.marginBottom)]}return this._contInfo.itemMargins},r.prototype._calcElementPos=function(_){let e=this._getContShift(),t=this._getItemShift();return[_.offsetLeft-e[0]-t[0],_.offsetTop-e[1]-t[1]]},r.prototype.isCurrentlyDragging=function(){return!!this._curDragEl},r.prototype._initUpdaterScrollbar=function(){return(0,s.throttle)((_=>{const e=this.options.wrapNode||_;let t=(0,a.data)(e,"sb");t&&t.update(!1,!0)}),500)},r.prototype._onMouseMove=function(_){const e=()=>this.options.wrapNode?this.options.wrapNode.scrollTop:(0,o.scrollGetY)(),t=_=>{this.options.wrapNode?this.options.wrapNode.scrollTop=_:(0,i.scrollToY)(_,0,!1,!0)};if(this._curDragEl){this._ensureGridIsActual(),!_&&(_={clientX:this._lastMousePos.x,clientY:this._lastMousePos.y}),this._lastMousePos={x:_.clientX,y:_.clientY},this._updateDraggablePosition(_);let i=this._getContSize(),s=this._getRelativeMousePos(_),l=!1;if((0,a.hasClass)(this._contEl,"_ape_item_list")&&(s.top+=this._contEl.scrollTop),s.left>0&&s.left<i[0]&&s.top>0&&s.top<i[1]){let _=0,e=this._grid.length-1,t=50;for(;t;){let i=_+Math.floor((e-_)/2);const o=this._grid[i];if(s.left>o.pos[0]&&s.top>o.pos[1]&&s.left<o.pos[0]+o.size[0]&&s.top<o.pos[1]+o.size[1]){l=o;break}if(_===e)break;s.top<o.pos[1]||s.left<o.pos[0]&&s.top<o.pos[1]+o.size[1]?e=e===i?e-1:i:_=_===i?_+1:i,t--}}else{let _,e,t,i=this._grid.length,o=999999;for(let a=0;a<i;a++){const i=this._grid[a];e=s.left-(i.pos[0]+i.size[0]/2),t=s.top-(i.pos[1]+i.size[1]/2);const l=e*e+t*t;o>l&&(o=l,_=i)}l=_}!l||this._curOverCell&&this._curOverCell.el===l.el||(this._curOverCell=l,this._recalc());{let i,s,l,n,r=0;if(this.options.wrapNode)i=n=this.options.wrapNode,s=(0,a.getSize)(i),l=(0,a.getXY)(i),l[1]-=(0,o.scrollGetY)(),r=_.clientY;else{let e=window,t=document.documentElement,i=document.body,o=e.innerWidth||t.clientWidth||i.clientWidth,a=e.innerHeight||t.clientHeight||i.clientHeight;n=e.bodyNode,s=[o,a],l=[0,0],r=_.clientY}let d=Math.max(20,s[1]/10),c=l[1]+d-r,u=d-(l[1]+s[1]-r);if(u>0||c>0){let _=Math.min(1,c/d),i=Math.min(1,u/d);this._autoScrollTO||(this._autoScrollTO=setTimeout((()=>{this._autoScrollTO=!1;let o=e();t(o+16*(_>0?-_:i)),o!==n.scrollTop&&(this._updateScrollbar(n),this._onMouseMove())}),20))}}if(this.options.onDragOverElClass){let e=_.target;(0,a.hasClass)(e,this.options.onDragOverElClass)||(e=(0,a.gpeByClass)(this.options.onDragOverElClass,e))?this._overEl!==e&&(this._overEl&&this.options.onDragLeave&&this.options.onDragLeave(this._overEl,this._curDragEl),this.options.onDragEnter&&this.options.onDragEnter(e,this._curDragEl),this._overEl=e):(this._overEl&&this.options.onDragLeave&&this.options.onDragLeave(this._overEl,this._curDragEl),this._overEl=null)}}else if(this._dist(_)>this.options.dragThreshold){this._curDragEl=this._initial.candidateEl;let e=this._grid.length;for(let _=0;_<e;_++)if(this._grid[_].el===this._curDragEl){this._curDragCellIndex=_;break}this.options.dragCls&&(0,a.addClass)(this._curDragEl,this.options.dragCls);const t=(0,a.getSize)(this._curDragEl),i=(0,a.getXY)(this._curDragEl),o=window.getComputedStyle(this._curDragEl),s=this._getContPos();this._initial.hasInlineSize=!(!this._curDragEl.style.width&&!this._curDragEl.style.height),(0,a.setStyle)(this._curDragEl,{width:t[0],height:t[1]}),this._initialCurDragPos={left:i[0]-s[0],top:i[1]-s[1]-document.body.scrollTop},this._curPlaceholderEl=(0,a.ce)("div",{className:"ui_gridsorter_placeholder"}),(0,a.setStyle)(this._curPlaceholderEl,{width:t[0]+parseFloat(o.marginLeft)+parseFloat(o.marginRight),height:t[1]+parseFloat(o.marginTop)+parseFloat(o.marginBottom)}),this._contEl.insertBefore(this._curPlaceholderEl,this._curDragEl),(0,a.addClass)(this._curDragEl,"ui_gridsorter_moveable"),(0,a.addClass)(this._curDragEl,"ui_gridsorter_moveable_notrans"),(0,a.addClass)(this._contEl,"ui_gridsorter_cont"),this._onMouseMove(_),this._updateDraggablePosition(_),this.options.onDragStart&&this.options.onDragStart(this._curDragEl)}(0,n.cancelEvent)(_)};const d=r},402096:(_,e,t)=>{t.d(e,{ON_BOARDING_BG_RECT_ID:()=>n,default:()=>c});var i=t(754866),o=t(972332),s=t(672277),a=t(287470),l=t(250598);const n="onboarding_bg_rect",r="page_header_cont",d="onboarding";class c{initOnboardingBG(){if(!window.onboardingBG){let _='\n<div id="onboarding_layout">\n  <svg id="onboarding_bg_header" width="100%" height="49px">\n    <rect id="onboarding_bg_rect" class="GroupOnboardingBg" x="0" y="0" width="100%" height="100%" fill-opacity="0.8" fill="#000"></rect>\n  </svg>\n  <svg id="onboarding_bg" width="100%" height="100%">\n  <defs>\n    <mask id="mask" x="0" y="0" width="100%" height="100%">\n      <rect x="0" y="0" width="100%" height="100%" fill="#fff"></rect>\n      <rect id="onboarding_bg_clip" class="GroupOnboardingBgClip" x="0" y="0" width="0" height="0" fill="#000" rx="8" ry="8"></rect>\n    </mask>\n  </defs>\n  <rect id="onboarding_bg_rect" class="GroupOnboardingBg" x="0" y="42" width="100%" height="100%" mask="url(#mask)" fill-opacity="0.8"></rect>\n  </svg>\n</div>\n      ',e=(0,i.se)(_);(0,i.domInsertBefore)(e,window.layerBG),t._dG("onboardingBGHeader",(0,i.ge)("onboarding_bg_header")),t._dG("onboardingBG",(0,i.ge)("onboarding_bg")),t._dG("onboardingBGRect",(0,i.ge)(n)),t._dG("onboardingBGClip",(0,i.ge)("onboarding_bg_clip")),window.cur.destroy.push((()=>{(0,i.hide)(window.onboardingBG),(0,i.hide)(window.onboardingBGHeader),(0,i.removeClass)((0,i.ge)(r),d),this.hideDarkness=!0,this.hideTT(),delete window.onboardingBG,delete window.onboardingBGHeader,delete window.onboardingBGRect,delete window.onboardingBGClip,this.opts.onBGClick&&(0,o.removeEvent)(window.onboardingBG,"click",this.opts.onBGClick)}))}this.opts.onBGClick&&(0,o.addEvent)(window.onboardingBG,"click",this.opts.onBGClick)}showTT(){const[,_]=(0,i.getXY)(this.el);this.tt=new l.ElementTooltip(this.el,this.ttParams),this.opts.highlight&&(this.addDarkness(),this.addHighlight()),this.tt.show();const e=this.tt.getContent();(0,a.isElementInViewport)(this.el)&&(0,a.isElementInViewport)(e)||(0,s.scrollToY)(_-42-this.ttParams.scrollOffset)}hideTT(){this.tt&&(this.tt.destroy(),this.removeDarkens(),this.hideDarkness&&((0,o.removeEvent)(window,"scroll"),(0,o.removeEvent)(window,"resize")),this.opts.onBGClick&&window.onboardingBG&&(0,o.removeEvent)(window.onboardingBG,"click",this.opts.onBGClick),this.opts.onHide&&this.opts.onHide())}addHighlight(){window.onboardingBGClip&&(this.highlightElement(),(0,o.addEvent)(window,"scroll",this.onScrollTT.bind(this)),(0,o.addEvent)(window,"resize",this.onResizeTT.bind(this)))}highlightElement(){let _=this.el.offsetWidth,e=this.el.offsetHeight,t=(0,i.getXY)(this.el);(0,i.attr)(window.onboardingBGClip,"width",_+this.border[1]+this.border[3]),(0,i.attr)(window.onboardingBGClip,"height",e+this.border[0]+this.border[2]),(0,i.attr)(window.onboardingBGClip,"x",t[0]-this.border[1]),(0,i.attr)(window.onboardingBGClip,"y",t[1]-this.border[0])}onResizeTT(){this.setDartToFullWidth(),this.highlightElement()}onScrollTT(){let _=this.getPageHeight();window.onboardingBG.height!=_&&this.setDartToFullHeight()}setDartToFullHeight(){(0,i.attr)(window.onboardingBG,"height",this.getPageHeight())}setDartToFullWidth(){(0,i.attr)(window.onboardingBG,"width",this.getPageWidth()),(0,i.attr)(window.onboardingBGHeader,"width",this.getPageWidth())}addDarkness(){(0,i.isVisible)(window.onboardingBG)||(this.setDartToFullHeight(),this.setDartToFullWidth(),(0,i.show)(window.onboardingBG),(0,i.isVisible)(window.onboardingBGHeader)||((0,i.show)(window.onboardingBGHeader),(0,i.addClass)((0,i.ge)(r),d)))}removeDarkens(){this.hideDarkness&&((0,i.hide)(window.onboardingBG),(0,i.hide)(window.onboardingBGHeader),(0,i.removeClass)((0,i.ge)(r),d))}ttOnHide(){this.hideTT()}show(){setTimeout(this.showTT.bind(this),1e3)}getPageWidth(){const _=document.documentElement,e=document.body;return Math.max(e.scrollWidth,_.scrollWidth,e.offsetWidth,_.offsetWidth,e.clientWidth,_.clientWidth)}getPageHeight(){const _=document.documentElement,e=document.body;return Math.max(e.scrollHeight,_.scrollHeight,e.offsetHeight,_.offsetHeight,e.clientHeight,_.clientHeight)}constructor(_,e,t={}){this.el=_,this.text=e,this.hideDarkness=!0,this.oldColor=!1;let i={autoShow:!1,noAutoHideOnWindowClick:t.noAutoHideOnWindowClick??!0,content:e instanceof HTMLElement?e:`${e}`,cls:`feature_intro_tt tutorial_tip_tt ${(()=>{const _=t.class??"";return t.tooltipWhite?_:_+" feature_intro_blue_tt"})()}`,appendToParent:!0,onHide:this.ttOnHide.bind(this),scrollOffset:t.scrollOffset||0,align:t.align||l.ElementTooltip.ALIGN_CENTER};t.side&&(i.forceSide=t.side),t.offset&&(i.offset=t.offset),t.width&&(i.width=t.width),t.shift&&(i.centerShift=t.shift),t.border?this.border=t.border:this.border=[10,10,10,10],t.ttOnHide&&(i.onHide=t.ttOnHide),t.withCloseButton&&(i.withCloseButton=t.withCloseButton,i.onCloseButtonClick=t.onCloseButtonClick),t.align&&(i.align=t.align),this.ttParams=i,this.opts=t,this.initOnboardingBG()}}},109507:(_,e,t)=>{function i(_){switch(_.type){case"action":return _;case"link":{const{href:e,...t}=_;return{...t,type:"action",action:()=>{window.open(e,"_blank")?.focus()}}}}}t.d(e,{mapChoiceToActionChoice:()=>i})},982335:(_,e,t)=>{t.d(e,{CatalogBannerStatCollector:()=>s});var i=t(452223),o=t(314309);class s{destroy(){this.observer.disconnect(),this.observed_items.forEach(((_,e)=>this.sendViewStat(e))),this.elements.forEach((_=>_.removeEventListener("mousedown",this.clickHandler)))}addHandlers(){this.clickHandler=this.onClick.bind(this),this.elements.forEach((_=>_.addEventListener("mousedown",this.clickHandler))),this.elements.forEach((_=>this.observer.observe(_)))}onClick(_){if(_.currentTarget&&_.currentTarget instanceof HTMLElement&&_.currentTarget.parentElement&&_.currentTarget.dataset.id){const e=parseInt(_.currentTarget.dataset.id),t={type:i.ClickProductionStatEventTypes.TYPE_CATALOG_BANNER_ITEM,position:[..._.currentTarget.parentElement.children].indexOf(_.currentTarget)+1},o={type:i.EventItemType.CATALOG_BANNER,id:e,track_code:this.blockId};this.clickCollector.logEvent(t,o)}}sendViewStat(_){if(void 0!==this.observed_items[_]){const e={...this.observed_items[_],end_view:this.productCollector.getCurrentTime()},t={type:i.EventItemType.CATALOG_BANNER,id:_,track_code:this.blockId};this.viewCollector.logEvent(e,t),delete this.observed_items[_]}}onView(_){_.forEach((_=>{const e=_.target;if(e instanceof HTMLElement&&e.parentElement&&e.dataset.id){const t=parseInt(e.dataset.id);_.isIntersecting?void 0===this.observed_items[t]&&(this.observed_items[t]={type:i.ViewProductionStatEventTypes.TYPE_CATALOG_BANNER_ITEM,start_view:this.productCollector.getCurrentTime(),end_view:"0",position:[...e.parentElement.children].indexOf(e)+1}):this.sendViewStat(t)}}))}constructor(_,e){this.blockId=e;this.observed_items=[],this.observer=new IntersectionObserver((_=>this.onView(_)),{root:null,rootMargin:"0px",threshold:.5}),this.productCollector=new o.ProductionStatCollector,this.viewCollector=new o.ViewStatCollector(this.productCollector),this.clickCollector=new o.ClickStatCollector(this.productCollector),this.elements=_,this.addHandlers()}}},241503:(_,e,t)=>{t.d(e,{BannersController:()=>s,ConsumeReason:()=>o});var i=t(982335),o=function(_){return _.Click="click",_.Close="close",_}({});class s{getBanners(){return Array.from(this.blockContent.querySelectorAll(".BannerItem"))}setBannersEvents(){this.getBanners().forEach((_=>{if(_.dataset.id){const e=parseInt(_.dataset.id);this.addConsumableClick(_,e),this.addConsumableCloseClick(_,e)}}))}checkItems(){this.getBanners().length||this.blockContent&&this.blockContent.remove()}destroy(){this.bannerStatCollector.destroy()}onDataLoad(){}constructor(_,e){this.blockContent=_,this.blockId=e;const t=this.getBanners();this.bannerStatCollector=new i.CatalogBannerStatCollector(t,e)}}},830772:(_,e,t)=>{t(474848),t(928961),t(766216),t(454154)},118096:(_,e,t)=>{t(830772)},996544:(_,e,t)=>{t(474848),t(648179),t(191601),t(454154)},728611:(_,e,t)=>{t(996544)},160919:(_,e,t)=>{t(118096),t(728611)},646995:(_,e,t)=>{t.d(e,{AudioBroadcastIconButton:()=>l});var i=t(474848),o=t(732336),s=t(271036),a=t(723723);const l=({active:_,...e})=>(0,i.jsx)(s.IconButton,{draggable:!1,...e,children:(0,i.jsx)(o.Icon24Broadcast,{className:(0,a.getColorClass)(_?"color_icon_accent":"color_icon_secondary")})})},959633:(_,e,t)=>{t.d(e,{AudioBroadcastIconButton:()=>i.AudioBroadcastIconButton});var i=t(646995)},55287:(_,e,t)=>{t.d(e,{AudioDislikeIconButton:()=>n});var i=t(474848),o=t(907763),s=t(529028),a=t(271036),l=t(723723);const n=({added:_,...e})=>{const t=_?o.Icon24ThumbsDown:s.Icon24ThumbsDownOutline;return(0,i.jsx)(a.IconButton,{draggable:!1,...e,children:(0,i.jsx)(t,{className:(0,l.getColorClass)("color_icon_secondary")})})}},841037:(_,e,t)=>{t.d(e,{AudioDislikeIconButton:()=>i.AudioDislikeIconButton});var i=t(55287)},102883:(_,e,t)=>{t.d(e,{AudioFavoritesIconButton:()=>n});var i=t(474848),o=t(320767),s=t(766216),a=t(271036),l=t(723723);const n=({added:_,...e})=>{const t=_?o.Icon24Bookmark:s.Icon24BookmarkOutline;return(0,i.jsx)(a.IconButton,{...e,draggable:!1,children:(0,i.jsx)(t,{className:(0,l.getColorClass)("color_icon_secondary")})})}},46055:(_,e,t)=>{t.d(e,{AudioFavoritesIconButton:()=>i.AudioFavoritesIconButton});var i=t(102883)},41637:(_,e,t)=>{t.d(e,{AudioLyricsIconButton:()=>l});var i=t(474848),o=t(198838),s=t(271036),a=t(723723);const l=_=>(0,i.jsx)(s.IconButton,{draggable:!1,..._,children:(0,i.jsx)(o.Icon24TextTtOutline,{className:(0,a.getColorClass)("color_icon_secondary")})})},680596:(_,e,t)=>{t.d(e,{AudioLyricsIconButton:()=>i.AudioLyricsIconButton});var i=t(41637)},450973:(_,e,t)=>{t.d(e,{AudioRecomsIconButton:()=>l});var i=t(474848),o=t(463469),s=t(271036),a=t(723723);const l=_=>(0,i.jsx)(s.IconButton,{draggable:!1,..._,children:(0,i.jsx)(o.Icon24StarsOutline,{className:(0,a.getColorClass)("color_icon_secondary")})})},64399:(_,e,t)=>{t.d(e,{AudioRecomsIconButton:()=>i.AudioRecomsIconButton});var i=t(450973)},547725:(_,e,t)=>{t.d(e,{AudioRepeatIconButton:()=>r});var i=t(474848),o=t(140713),s=t(923417),a=t(723723),l=t(271036);const n={"not-repeat":(0,i.jsx)(o.Icon24RepeatOutline,{className:(0,a.getColorClass)("color_icon_secondary")}),repeat:(0,i.jsx)(o.Icon24RepeatOutline,{className:(0,a.getColorClass)("color_icon_accent")}),"repeat-one":(0,i.jsx)(s.Icon24Repeat1Outline,{className:(0,a.getColorClass)("color_icon_accent")})},r=({state:_,...e})=>(0,i.jsx)(l.IconButton,{draggable:!1,...e,children:n[_]})},775907:(_,e,t)=>{t.d(e,{AudioRepeatIconButton:()=>i.AudioRepeatIconButton});var i=t(547725)},675359:(_,e,t)=>{t.d(e,{AudioShareIconButton:()=>l});var i=t(474848),o=t(677251),s=t(271036),a=t(723723);const l=_=>(0,i.jsx)(s.IconButton,{draggable:!1,..._,children:(0,i.jsx)(o.Icon24ShareOutline,{className:(0,a.getColorClass)("color_icon_secondary")})})},298921:(_,e,t)=>{t.d(e,{AudioShareIconButton:()=>i.AudioShareIconButton});var i=t(675359)},926387:(_,e,t)=>{t.d(e,{AudioShuffleIconButton:()=>l});var i=t(474848),o=t(870821),s=t(271036),a=t(723723);const l=({active:_,...e})=>(0,i.jsx)(s.IconButton,{...e,draggable:!1,children:(0,i.jsx)(o.Icon24ShuffleOutline,{className:(0,a.getColorClass)(_?"color_icon_accent":"color_icon_secondary")})})},892187:(_,e,t)=>{t.d(e,{AudioShuffleIconButton:()=>i.AudioShuffleIconButton});var i=t(926387)},751344:(_,e,t)=>{t.d(e,{AudioBroadcastIconButton:()=>d.AudioBroadcastIconButton,AudioDislikeIconButton:()=>i.AudioDislikeIconButton,AudioFavoritesIconButton:()=>o.AudioFavoritesIconButton,AudioLyricsIconButton:()=>s.AudioLyricsIconButton,AudioRecomsIconButton:()=>a.AudioRecomsIconButton,AudioRepeatIconButton:()=>l.AudioRepeatIconButton,AudioShareIconButton:()=>r.AudioShareIconButton,AudioShuffleIconButton:()=>n.AudioShuffleIconButton});var i=t(841037),o=t(46055),s=t(680596),a=t(64399),l=t(775907),n=t(892187),r=t(298921),d=t(959633)},678949:(_,e,t)=>{t.d(e,{AudioRecomsIconLink:()=>l});var i=t(474848),o=t(279734),s=t(751344),a=t(436799);function l({href:_,target:e,onClick:t,...l}){return _?(0,i.jsx)(o.Link,{href:_,target:e,className:a.default.link,children:(0,i.jsx)(s.AudioRecomsIconButton,{hoverMode:"opacity",activeMode:"opacity",noPadding:!0,...l})}):t?(0,i.jsx)(s.AudioRecomsIconButton,{hoverMode:"opacity",activeMode:"opacity",noPadding:!0,...l}):function(_){throw new TypeError(`Unexpected props ${_} for component AudioRecomsIconLink`)}(l)}},766639:(_,e,t)=>{t.d(e,{AudioRecomsIconLink:()=>i.AudioRecomsIconLink});var i=t(678949)},312712:(_,e,t)=>{t.d(e,{AudioRecomsIconLink:()=>i.AudioRecomsIconLink});var i=t(766639)},207881:(_,e,t)=>{t.d(e,{AudioBroadcastIconButton:()=>i.AudioBroadcastIconButton,AudioDislikeIconButton:()=>i.AudioDislikeIconButton,AudioFavoritesIconButton:()=>i.AudioFavoritesIconButton,AudioLyricsIconButton:()=>i.AudioLyricsIconButton,AudioRecomsIconLink:()=>o.AudioRecomsIconLink,AudioRepeatIconButton:()=>i.AudioRepeatIconButton,AudioShareIconButton:()=>i.AudioShareIconButton,AudioShuffleIconButton:()=>i.AudioShuffleIconButton});var i=t(751344),o=t(312712);t(160919)},686408:(_,e,t)=>{function i(_){let e=_.split(" ");e=e.slice(0,e.length-1);let t=e.join(" ");return t&&(t+="..."),t}function o(_,e=0){if(_.scrollHeight/_.clientHeight>1.1){let t=_.clientHeight,o=_.innerText;for(;o&&_.scrollHeight/t>1.1&&_.innerText.split(" ").length>e;)o=i(o),_.innerHTML=o}}t.d(e,{truncateMultilineText:()=>o})},961745:(_,e,t)=>{t.d(e,{useUpdateEffect:()=>o,useUpdateLayoutEffect:()=>s});var i=t(296540);const o=a(i.useEffect),s=a(i.useLayoutEffect);function a(_){return function(e,t){const o=(0,i.useRef)(void 0);_((()=>{if(o.current)return e();o.current=!0}),t)}}},395439:(_,e,t)=>{t.d(e,{initReactApp:()=>a});var i=t(440961),o=t(205338),s=t(540462);function a(_,e,t){if(_)if((0,s.partConfigEnabled)("enable_create_root1")){const i=(0,o.createRoot)(_);i.render(e),t||window.cur.destroy?.push((()=>{i.unmount()}))}else i.render(e,_),t||window.cur.destroy?.push((()=>{_&&i.unmountComponentAtNode(_)}))}},335423:(_,e,t)=>{t.d(e,{AudioCatalogVkMixBlockTq:()=>l});var i=t(474848),o=t(395439),s=t(310619),a=t(502722);const l=({payload:{target:_,data:e}})=>{if(!_)throw new Error("AudioCatalogVkMixBlock: Missing target");const{items:t,block:l,needShowOnboarding:n}=e;(0,o.initReactApp)(_,(0,i.jsx)(a.AudioCatalogMusicMixBlockApplication,{id:t[0].id,blockId:l.id,backgroundAnimationUrl:t[0].background_animation_url,description:(0,s.decodeHTML)(t[0].description),header:(0,s.decodeHTML)(t[0].title),title:(0,s.decodeHTML)(t[0].stream_mix.title),style:l.layout.style||"default",needShowOnboarding:n}))}},920554:(_,e,t)=>{t.d(e,{registerAudioLegalNoticeIconTq:()=>h});var i=t(474848),o=t(712600),s=t(885528),a=t(865708),l=t(338329),n=t(260152),r=t(137516),d=t(242117),c=t(319756);const u=({payload:{target:_,data:e}})=>{if(!_)throw new Error("AudioLegalNoticeIcon: Missing target");const{legalNoticesType:t}=e;if(!t)return;const i=(0,s.bitmaskToAudioLegal)(t);if(!i)return;const a=(0,r.getAudioLegalNoticeLines)((0,c.ensureDIRootWebContainer)().resolve(o.Langs),i);if(!a?.length)return;(0,n.createReactInitiator)(E,_,{destroyAfterNavigation:!0,useConcurrentRender:!0}).render({lines:a,placement:"top",portalElement:document.body})};function E(_){return(0,i.jsx)(a.AppRootProvider,{children:(0,i.jsx)(d.AudioLegalNoticeIcon,{..._})})}function h(){(0,l.tq)().setStartupHandler("AudioLegalNoticeIcon/init",u)}},390552:(_,e,t)=>{t.d(e,{AudioPlayerBlockTq:()=>s});var i=t(683066),o=t(142278);const s=({payload:{target:_,data:e}})=>{if(!_)throw new Error("AudioPlayerBlock: Missing target");const t=e.isCompact?"AudioModal_AudioPlayerBlock":"AudioPage_AudioPlayerBlock";(0,o.createReactInitiator)(i.AudioPlayerBlockApplication,_,{destroyAfterNavigation:!1}).render({initData:e,"data-testid":t})}},940399:(_,e,t)=>{t.d(e,{showAudioLyricsModal:()=>r});var i=t(474848),o=t(865708),s=t(435442),a=t(211413),l=t(319756);const n=(0,s.lazyModule)({loader:async()=>{const{AudioLyricsModal:_}=await Promise.all([t.e(89631),t.e(14545),t.e(7919),t.e(53372),t.e(86588),t.e(59974),t.e("langs/web/AudioLyricsModal")]).then(t.bind(t,438047));return _},name:"AudioLyricsModal"});function r(){return(0,a.showMessageBoxModal)((({onClose:_})=>(0,i.jsx)(l.DIRootWebProvider,{children:(0,i.jsx)(o.AppRootProvider,{children:(0,i.jsx)(n,{onClose:_})})})),{width:490,hideOnBGClick:!0,fullscreen:!1})}},331600:(_,e,t)=>{t.d(e,{PlaylistLoadingProvider:()=>i});class i{static ensure(){return i.instance||(i.instance=new i),i.instance}addPlaylist(_){this.playlistLoadingSet.add(_)}getSet(){return this.playlistLoadingSet}resetSet(){this.playlistLoadingSet.clear()}constructor(){this.playlistLoadingSet=new Set}}},842372:(_,e,t)=>{t.d(e,{AudioCatalogStatsCollector:()=>u});var i=t(434518),o=t(763812),s=t(331635),a=t(132028),l=t(460884),n=t(314309),r=t(452223),d=t(847154),c=(0,o._)("_clickCollector");class u{logOpenMyMusicPlaylistCreationModal({blockId:_}={}){const e=this.navScreenProvider.catalogSectionId||void 0,t={event:{client_server_time:(0,d.getClientServerTime)(),nav_info:{track_code:e},source_info:{track_code:_}},target_nav_info:[]},o={type:r.ClickProductionStatEventTypes.TYPE_MUSIC_PLAYLIST_TAP_GOTO,[r.ClickProductionStatEventTypes.TYPE_MUSIC_PLAYLIST_TAP_GOTO]:t};(0,i._)(this,c)[c].logEvent(o,{type:r.EventItemType.MUSIC_PLAYLIST_GOTO})}constructor(_){Object.defineProperty(this,c,{writable:!0,value:void 0}),this.navScreenProvider=_;const e=new n.ProductionStatCollector;(0,i._)(this,c)[c]=new n.ClickStatCollector(e)}}u=(0,s.__decorate)([a.scope.container(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===l.AudioNavScreenProvider?Object:l.AudioNavScreenProvider])],u)},530351:(_,e,t)=>{t.d(e,{AudioCatalogStatsCollector:()=>i.AudioCatalogStatsCollector});var i=t(842372)},66536:(_,e,t)=>{t.d(e,{BannersController:()=>s});var i=t(241503),o=t(761520);class s extends i.BannersController{consumeBanner(_,e){o.ajax.post("/al_audio.php?act=consume_banner",{id:_,ref:this.blockId,reason:e},{onFail:()=>!0})}addConsumableClick(_,e){_.classList.contains("BannerItem--consumable")&&_.dataset.id&&_.addEventListener("click",(()=>this.consumeBanner(e,i.ConsumeReason.Click)))}addConsumableCloseClick(_,e){const t=_.querySelector(".BannerItem__close");t instanceof HTMLElement&&(t.onclick=t=>{this.consumeBanner(e,i.ConsumeReason.Close),_.remove(),this.checkItems(),t.stopPropagation(),t.preventDefault()})}checkItems(){const _=this.getBanners();if(_.length){if(1===_.length){const _=this.blockContent.querySelectorAll(".audio_promo__control");_&&_.forEach((_=>_.remove()))}}else{const _=this.blockContent.parentElement;this.blockContent&&this.blockContent.remove(),_&&!_.childElementCount&&_.remove()}}constructor(_,e){super(_,e),this.setBannersEvents()}}},155502:(_,e,t)=>{t.d(e,{BaseController:()=>a});var i=t(963116),o=t(459831),s=t(826332);class a{fetchNext(){return this.fetchSection(this.id,this.nextFrom)}fetchSection(_,e,t={}){return this.fetchInProgress=!0,new Promise(((i,o)=>{const s={section_id:_,start_from:e,...t};window.nav.objLoc.claim&&(s.claim=window.nav.objLoc.claim),window.ajax.post("al_audio.php?act=load_catalog_section",s,{onDone:(_,e,t)=>{this.fetchInProgress=!1,i({blocks:_,data:e,blockItems:t})},onFail:()=>(o(),this.fetchInProgress=!1,!0)})}))}getId(){return this.id}static getHint(_,e){switch(e.type){case i.HintType.Tooltip:return new o.TooltipHint(e,_);case i.HintType.Highlight:return new s.HighlightHint(e,_)}return null}}},351129:(_,e,t)=>{t.d(e,{BlockController:()=>b});var i=t(150681),o=t(983567),s=t(925537),a=t(155502),l=t(170438),n=t(955377),r=t(335700),d=t(257168),c=t(66536),u=t(754866),E=t(3850),h=t(688344),P=t(761520),g=t(466247),p=t(392358);class b extends a.BaseController{initSpecificBlockController(){if(this.blockContent)switch(this.blockContent.dataset.type){case"catalog_banners":this.specificController=new c.BannersController(this.blockContent,this.getId());break;case"artist":case"curator":this.specificController=new g.MusicAuthorController(this.blockContent)}}enable(){this.reorderer&&this.reorderer.enable()}disable(){this.blockAutoList&&this.blockAutoList.destroy(),this.reorderer&&this.reorderer.disable()}emitEvent(_){if(this.listenEvents.includes(_))if(_===p.events.PLACEHOLDER_REMOVE)this.removeBlock();else this.reloadData()}initSearch(){const _=this.block.getElementsByClassName("ui_search");_.length&&Array.prototype.forEach.call(_,(_=>d.default.init(_)))}initListenEvents(){if(this.blockContent?.dataset.listenEvents)try{this.listenEvents=JSON.parse(this.blockContent?.dataset.listenEvents)}catch(_){}}onSectionInit(){this.blockItemsContainer&&this.blockItemsContainer.classList.contains(s.BLOCK_ITEMS_REORDERABLE)&&this.initListReorder("current"!==this.section.name)}hasBlockName(_){return this.blockContent&&this.blockContent.classList.contains(`${s.BLOCK_ELEMENT}__${_}`)}reloadData(){this.fetchSection(this.id,"").then((({blockItems:_,data:e})=>{if(this.setItems(b.createNodesFromItems(_)),e.playlists&&e.playlists.length){const _=(0,o.getAudioPlayer)();_&&_.addWithReplacePlaylists(e.playlists.filter(Boolean))}})).catch((()=>!0))}setFromBlockContent(){if(this.blockContent=this.block.classList.contains(s.BLOCK_CONTENT)?this.block:this.block.querySelector(`.${s.BLOCK_CONTENT}`),this.blockContent){this.id=this.blockContent.dataset.id||"",this.nextFrom=this.blockContent.dataset.next||"",this.dataType=this.blockContent.dataset.type||null;const _=this.blockContent.classList.toString().match(/CatalogBlock__layout--(.*)/);this.layoutName=_&&_[1]}}removeBlock(){this.destroy();const _=this.block.closest(`.${s.BLOCK_ELEMENT}`);let e=this.block;_ instanceof HTMLElement&&1===_.childElementCount&&(e=_),e.remove()}clearList(){this.blockItemsContainer&&(this.blockItemsContainer.innerHTML="")}destroy(){this.blockAutoList&&this.blockAutoList.destroy(),this.reorderer&&this.reorderer.destroy(),this.specificController&&this.specificController.destroy()}hideLoader(){this.loader&&(this.loader.style.display="none")}showLoader(){this.loader&&(this.loader.style.display="")}setNextFrom(_){this.nextFrom=_,this.blockContent&&(this.blockContent.dataset.next=this.nextFrom)}setId(_){this.id=_,this.blockContent&&(this.blockContent.dataset.id=this.id),this.blockItemsContainer&&this.blockItemsContainer.dataset.playlistId&&(this.blockItemsContainer.dataset.playlistId=this.id)}setItems(_){if(this.blockItemsContainer&&this.dataType&&this.layoutName){new E.BlockItemsReplacer(this.blockItemsContainer,this.dataType,this.layoutName).replaceItems(_)}}resetItems(){this.blockItemsContainer&&(this.clearItems(),this.blockItemsContainer.append(...this.initialItems))}clearItems(){this.blockItemsContainer&&(this.blockItemsContainer.innerHTML="")}initAutoList(_=[]){let e=_;this.blockItemsContainer&&(this.blockAutoList&&this.blockAutoList.destroy(),this.blockAutoList=new i.default(this.blockItemsContainer,{scrollNode:!1,onRendered:()=>{(0,o.getAudioPlayer)().updateCurrentPlaying(),this.specificController&&this.specificController.onDataLoad()},onNoMore:()=>this.hideLoader(),onNeedRows:_=>{if(this.showLoader(),e.length){const t=e;return e=[],void _(t)}this.nextFrom?this.fetchNext().then((({blockItems:e,data:t})=>{this.setNextFrom(t.nextFrom),this.dataType===h.DataType.RadioStations&&t.playlist&&b.mergePlaylistFromPaginatedResponse(t.playlist),_(e)})).catch((()=>{})):_(null)}}))}updateListReorder(){this.reorderer&&this.reorderer.update()}initListReorder(_=!0){let e;switch(this.dataType){case h.DataType.MusicAudios:e=(e,t,i)=>this.onAudioBlockReorder(e,t,i,_);break;case h.DataType.MusicPlaylists:e=this.onPlaylistsBlockReorder.bind(this);break;default:e=()=>{}}this.reorderer=new n.default(this.blockItemsContainer,"",{onReorder:e.bind(this)})}onAudioBlockReorder(_,e,t,i){window.currentAudioPage(this.block).onAudioRowsReorder(!i,_,e,t)}onPlaylistsBlockReorder(_,e,t){window.currentAudioPage(this.block).onPlaylistsReorder(_,e,t)}static mergePlaylistFromPaginatedResponse(_){const e=(0,o.getAudioPlayer)(),t=e.getPlaylist(_.type,_.ownerId,_.id);e.mergePlaylistData(t,_)}initSortSelector(){const _=this.block.querySelector(`.${s.SORTER_ACTION}`);_&&(this.sortSelector=new l.BlockSorter(_,(_=>{P.ajax.post("/al_audio.php?act=replace_blocks",{replacement_ids:_},{onDone:_=>this.section.replaceBlocks(_.replacements,_.nextFrom,_.playlists)})})))}initGallery(){this.blockItemsContainer&&this.blockItemsContainer.classList.contains(s.GALLERY)&&(this.gallery=new r.UIGallery(this.blockItemsContainer,{scrollY:!1}))}static search(_,e,t,i){const o=b.findBlockById(_,i.target);o&&!o.fetchInProgress&&(t?o.fetchSection(e,"",{search_query:t}).then((({blockItems:_})=>{o.setItems(b.createNodesFromItems(_))})).catch((()=>!0)):o.resetItems())}static showMore(_,e){const t=b.findBlockById(_,e);t&&!t.fetchInProgress&&t.fetchNext().then((({blockItems:_,data:e})=>{t.setItems(b.createNodesFromItems(_)),t.nextFrom=e.nextFrom})).catch((()=>!0))}static findBlockById(_,e){const t=window.currentAudioPage(e).catalogController.currentSection;return t?t.getBlockById(_):null}static findBlockByElement(_){const e=(0,u.gpeByClass)("CatalogBlock__content",_),t=e?.dataset.id;return t||null}static createNodesFromItems(_){return _.map((_=>{const e=document.createElement("template");return e.innerHTML=_,e.content.firstElementChild})).filter((_=>!!_))}initHints(){if(this.block.dataset.catalogHintId){const _=this.section.getHintById(this.block.dataset.catalogHintId);if(_){const e=a.BaseController.getHint(this.block,_);if(e){const t=this.section.hintsToShow.findIndex((_=>e.id===_.id&&_.initialElement.parentElement===e.initialElement.parentElement));if(t>-1){const e=this.section.hintsToShow[t],i=e.initialElement.parentElement||e.initialElement,o=a.BaseController.getHint(i,_);o&&(this.section.hintsToShow[t]=o)}else this.section.hintsToShow.push(e)}delete this.block.dataset.catalogHintId}}const _=this.block.querySelectorAll("[data-catalog-hint-id]");if(_.length){const e={};_.forEach((_=>{_.dataset.catalogHintId&&(Array.isArray(e[_.dataset.catalogHintId])?e[_.dataset.catalogHintId].push(_):e[_.dataset.catalogHintId]=[_],delete _.dataset.catalogHintId)})),Object.entries(e).forEach((([_,e])=>{const t=this.section.getHintById(_);if(!t)return;let i;i=1===e.length?e[0]:this.block;const o=a.BaseController.getHint(i,t);o&&this.section.hintsToShow.push(o)}))}}constructor(_,e){super(),this.section=_,this.block=e,this.listenEvents=[],this.setFromBlockContent(),this.blockItemsContainer=e.querySelector(`.${s.BLOCK_ITEMS_CONTAINER}`),this.blockItemsContainer&&(this.initialItems=[...this.blockItemsContainer.children]),this.initSpecificBlockController(),this.initGallery(),this.loader=e.getElementsByClassName(s.AUTO_LIST_LOADER)[0],this.initSearch(),this.initSortSelector(),this.initHints(),this.initListenEvents()}}},3850:(_,e,t)=>{t.d(e,{BlockItemsReplacer:()=>s});var i=t(688344),o=t(26345);class s{replaceItems(_){switch(this.dataType){case i.DataType.MusicAudios:this.replaceItemsBase(_);break;case i.DataType.MusicPlaylists:this.replaceMusicPlaylists(_);break;case i.DataType.MusicOwners:this.replaceMusicOwners(_);break;default:this.replaceItemsBase(_)}}replaceMusicPlaylists(_){let e=_;this.layoutName===o.LayoutName.LargeSlider&&(e=_.slice(0,5)),this.replaceItemsBase(e)}replaceItemsBase(_){this.container.innerHTML="",this.container.append(..._)}replaceMusicOwners(_){const e=_[0];if(e){const _=e.querySelector(".MusicOwnerCell__actions");if(_){const e=this.container.querySelector(".MusicOwnerCell__actions");if(e)e.innerHTML=_.innerHTML;else{const e=this.container.querySelector(".MusicOwnerCell__after");e&&e.appendChild(_)}}}}constructor(_,e,t){this.container=_,this.dataType=e,this.layoutName=t}}},170438:(_,e,t)=>{t.d(e,{BlockSorter:()=>s});var i=t(925537),o=t(428374);class s{getConfig(){const _=this.element.querySelector(`.${i.SORTER_ACTION_DATA}`);if(!_)return null;const e=Array.from(_.querySelectorAll("li"));if(0===e.length)return null;const t={};return t.items=e.map((_=>{const e=_.dataset.id||"";return _.dataset.selected&&(t.selected=e),[e,_.innerText]})),t.withArrow=!0,_.remove(),t}constructor(_,e){this.element=_;const t=this.getConfig();this.dropdown=new o.InlineDropdown(_,{onSelect:e,...t})}}},855776:(_,e,t)=>{t.d(e,{CatalogController:()=>o});var i=t(978068);class o{setSection(_,e,t){this.sections[_]&&this.sections[_].getId()===t.sectionId?(this.currentSection=this.sections[_],this.enableSection(_)):(this.currentSection=new i.SectionController(e,t,this),this.sections[_]=this.currentSection)}disableSection(_){this.sections[_]&&this.sections[_].disable()}enableSection(_){this.sections[_]&&this.sections[_].enable()}emitEvent(_,e){Object.values(this.sections).forEach((t=>t.emitEvent(_,e)))}deleteSection(_){const e=this.sections[_];e&&(e.destroy(),delete this.sections[_])}destroy(){Object.entries(this.sections).forEach((([,_])=>{_.destroy()})),this.headerSection&&this.headerSection.destroy()}updateSectionReorder(){this.currentSection&&this.currentSection.updateReorder()}initBlocksManually(){this.currentSection=new i.SectionController(this.root,{nextFrom:"",isBlockPagination:!1,sectionId:"",name:""},this),this.currentSection.initBlocksManually()}constructor(_){this.sections={},this.root=_;const e=this.root.querySelector(".CatalogSection--header_section");e instanceof HTMLElement&&(this.headerSection=new i.SectionController(e,{})),this.tabs=Array.from(this.root.querySelectorAll("._audio_section_tab .ui_tab"))}}},826332:(_,e,t)=>{t.d(e,{HighlightHint:()=>l});var i=t(963116),o=t(727076),s=t(402096),a=t(672277);class l extends o.Hint{show(){this.highlight=new s.default(this.initialElement,this.generateContent(),this.options),(0,a.disableBodyScroll)(),this.highlight.showTT()}hide(){this.highlight.hideTT(),(0,a.enableBodyScroll)(),super.hide()}constructor(_,e){super(i.HintType.Highlight,_),this.initialElement=e,this.options={highlight:!0,width:280,offset:[0,-17],scrollOffset:40,side:"bottom"},_.unskipable?this.options.ttOnHide=()=>{}:this.options.onBGClick=()=>this.hide()}}},727076:(_,e,t)=>{t.d(e,{Hint:()=>a});var i=t(102088),o=t(972332),s=t(761520);class a{hide(){this.onHide&&this.onHide(),s.ajax.post("al_index.php",{act:"help_hints_hide",hint_id:this.hintId,hash:this.hideHash})}generateContent(){let _=document.createElement("div");if(this.title&&(_.innerHTML+=`<div class="CatalogHint__title">${this.title}</div>`),this.text&&(_.innerHTML+=`<div class="CatalogHint__text">${this.text}</div>`),this.actions){const e=document.createElement("div");e.classList.add("CatalogHint__actions");let t=this.actions.map((_=>{const e=document.createElement("a");switch(e.classList.add("flat_button"),_.type){case"open_url":e.href=_.url,e.onclick=e=>{window.nav.go(_.url),this.hide(),(0,o.cancelEvent)(e)};break;case"switch_section":e.onclick=t=>{(0,o.cancelEvent)(t);window.currentAudioPage(e).catalogController.currentSection.switchSection(_.targetSectionId),this.hide()}}return e.innerHTML=_.label,e}));if(e.append(...t),this.tutorialSteps){const _=document.createElement("div");_.classList.add("CatalogHint__tutorialSteps"),_.innerHTML=(0,i.langStr)((0,i.getLang)("audio_onboarding_tutorial_progress"),"step",this.tutorialSteps.current,"total_steps",this.tutorialSteps.total),e.append(_)}_.append(e)}return _}constructor(_,e){this.type=_,this.id=e.id,this.title=e.title,this.text=e.text,this.hintId=e.hintId,this.hideHash=e.hideHash,this.actions=e.actions,e.currentStep&&e.totalSteps&&(this.tutorialSteps={current:e.currentStep,total:e.totalSteps})}}},963116:(_,e,t)=>{t.d(e,{HintType:()=>i});var i=function(_){return _.Tooltip="tooltip",_.Highlight="highlight",_}({})},459831:(_,e,t)=>{t.d(e,{TooltipHint:()=>a});var i=t(963116),o=t(727076),s=t(250598);class a extends o.Hint{show(){this.tooltip.show()}constructor(_,e){let t=e,o="center",a="top";(e.classList.contains("CatalogBlock__layout--header")||e.classList.contains("CatalogBlock__layout--header_extended"))&&(t=e.querySelector(".CatalogBlock__title")||e,o="left"),e.classList.contains("MusicAuthor__follow_btn")&&(o="right",a="bottom"),super(i.HintType.Tooltip,_),this.initialElement=e;const l={force_side:a,align:o,offset_left:0,offset_top:0,width:"250px",..._};this.tooltip=new s.ElementTooltip(t,{content:this.title||this.text||"",cls:`feature_intro_tt ${this.id} CatalogTooltip`,forceSide:l.force_side,align:l.align,width:l.width,offset:[l.offset_left,l.offset_top],autoShow:!1,onHide:()=>this.hide()})}}},466247:(_,e,t)=>{t.d(e,{MusicAuthorController:()=>o});var i=t(686408);class o{truncateName(){const _=this.blockContent.querySelector(".MusicAuthor_block__title");if(_ instanceof HTMLElement){(0,i.truncateMultilineText)(_);parseInt(getComputedStyle(_).lineHeight)===_.clientHeight&&_.classList.add("MusicAuthor_block__title--singleLine"),_.classList.remove("MusicAuthor_block__title--hidden")}}destroy(){}onDataLoad(){}constructor(_){this.blockContent=_,this.truncateName()}}},978068:(_,e,t)=>{t.d(e,{SectionController:()=>d});var i=t(138586),o=t(983567),s=t(150681),a=t(351129),l=t(925537),n=t(155502),r=t(826332);class d extends n.BaseController{showHints(){if(this.hintsToShow.length){let _;const e=this.hintsToShow.filter((_=>_ instanceof r.HighlightHint));e.length?(_=e[0],this.hintsToShow.splice(this.hintsToShow.indexOf(_),1),_.onHide=()=>this.showHints(),_.show()):this.hintsToShow.forEach((_=>_.show()))}}initBlocksManually(){this.initBlocks()}getSectionElement(){return this.sectionEl}enable(){this.initSectionAutoList(),this.blocks.forEach((_=>_.enable()))}disable(){this.sectionAutoList&&this.sectionAutoList.destroy(),this.blocks.forEach((_=>_.disable()))}emitEvent(_,e){this.blocks.forEach((t=>{e&&e!==t.getId()||t.emitEvent(_)}))}switchSection(_){const e=this.catalogController?.tabs;e&&e.forEach((e=>{e.dataset.sectionId===_&&e.click()}))}replaceBlocks(_,e,t){let i=!1;t&&this.addPlaylists(t),_.forEach((_=>{const e=_.fromIds.map((_=>this.getBlockById(_))).filter((_=>null!==_));let t=null;if(e.length&&e[e.length-1]?.block&&(t=e[e.length-1].block),!t)return;const o=a.BlockController.createNodesFromItems(_.toBlocks);o.forEach((_=>t?.insertAdjacentElement("beforebegin",_))),i=i||e.some((_=>_===this.paginatedBlockController)),e.forEach((_=>{_.block.remove(),_.destroy(),this.blocks=this.blocks.filter((e=>e!==_))}));const s=o.map((_=>new a.BlockController(this,_)));this.blocks.push(...s),this.hideShowMoreLoaders()})),"string"==typeof e&&this.setNextFrom(e),i&&(this.initPaginatedBlock(),e&&(this.isBlockPagination?this.initBlockAutoList([],this.nextFrom):this.sectionAutoList.isDone()&&this.initSectionAutoList()))}sectionInited(){this.blocks.forEach((_=>_.onSectionInit()))}initTabsHints(){const _=this.catalogController?.tabs;_&&_.forEach((_=>{if(_.dataset.catalogHintId){const e=this.getHintById(_.dataset.catalogHintId);if(e){const t=n.BaseController.getHint(_,e);t&&this.hintsToShow.push(t),delete _.dataset.catalogHintId}}}))}getHintById(_){return this.sectionData.hints&&this.sectionData.hints[_]||null}destroy(){this.sectionAutoList&&this.sectionAutoList.destroy(),this.blocks&&this.blocks.forEach((_=>_.destroy()))}getBlockById(_){return this.blocks&&this.blocks.find((e=>e.getId()===_))||null}reloadBlock(_){const e=this.findBlockByBlockName(_);e&&e.reloadData()}updateReorder(){this.blocks&&this.blocks.forEach((_=>{_.updateListReorder()}))}hideShowMoreLoaders(){this.blocks.forEach((_=>_.hideLoader()))}addPlaylists(_){_.forEach((_=>{_&&new i.AudioPlaylist(_)}))}setPagePlaylist(_){const e=window.currentAudioPage(this.sectionEl);let t=(0,o.getAudioPlayer)().getPlaylist(_.type,_.ownerId,_.id,"",_.blockId);t.mergeWith(_),t.getAudiosCount()||t.load(),e.setPagePlaylist(t)}setNextFrom(_){this.nextFrom=_,this.sectionEl&&(this.sectionEl.dataset.next=_)}initSectionAutoList(){this.sectionAutoList&&this.sectionAutoList.destroy(),this.sectionAutoList=new s.default(this.sectionEl,{fetchImmediate:!1,onNeedRows:_=>{if(this.isBlockPagination)return this.initBlockAutoList(),void _(null);this.nextFrom?(this.paginatedBlockController?.showLoader(),this.fetchNext().then((({blocks:e,data:t,blockItems:i})=>{if(this.setNextFrom(t.nextFrom),t.isBlockPagination||t.blockIds&&1===t.blockIds.length&&this.getBlockById(t.blockIds[0])){if(_(null),this.isBlockPagination=this.isBlockPagination||t.isBlockPagination,this.initBlockAutoList(i,this.nextFrom),t.playlist&&"search"===t.playlist.type){(0,o.getAudioPlayer)().getPlaylist().sendSearchStats("search_view")}}else t.playlists&&this.addPlaylists(t.playlists),_(e||null),this.initBlocks()})).catch((()=>{}))):_(null)}})}initBlocks(){this.blocks=[];const _=[];[...this.sectionEl.getElementsByClassName(l.BLOCK_ELEMENT)].forEach((e=>{e.classList.contains(l.BLOCK_DIVIDED)?e.querySelectorAll(`.${l.BLOCK_CONTENT}`).forEach((e=>_.push(e))):_.push(e)})),this.blocks=_.map((_=>new a.BlockController(this,_))),this.initPaginatedBlock()}initPaginatedBlock(){const _=this.sectionEl.querySelector(`.${l.PAGINATED_BLOCKS_CONTAINER}`);if(_){const e=[..._.getElementsByClassName(l.BLOCK_CONTENT)],t=e[e.length-1]?.dataset?.id;t&&(this.paginatedBlockController=this.getBlockById(t))}else this.paginatedBlockController=this.blocks[this.blocks.length-1]}initBlockAutoList(_=[],e){this.paginatedBlockController&&(void 0!==e&&this.paginatedBlockController.setNextFrom(e),this.paginatedBlockController.initAutoList(_))}findBlockByBlockName(_){return this.blocks.find((e=>e.hasBlockName(_)))}constructor(_,e,t){super(),this.sectionData=e,this.catalogController=t,this.blocks=[],this.hintsToShow=[];const i=_.classList.contains(l.SECTION)?_:_.querySelector(`.${l.SECTION}`);i?(this.sectionEl=i,this.name=e.name,this.initTabsHints(),this.initBlocks(),this.nextFrom=void 0===this.sectionEl.dataset.next?e.nextFrom:this.sectionEl.dataset.next,this.id=e.sectionId,e.playlists&&e.playlists.length&&this.addPlaylists(e.playlists),e.playlist&&this.setPagePlaylist(e.playlist),this.isBlockPagination=this.sectionData.isBlockPagination,this.initSectionAutoList(),this.hideShowMoreLoaders(),this.sectionInited(),this.showHints()):this.sectionEl=_}}},688344:(_,e,t)=>{t.d(e,{DataType:()=>i});var i=function(_){return _.MusicAudios="music_audios",_.MusicPlaylists="music_playlists",_.MusicOwners="music_owners",_.RadioStations="radiostations",_}({})},26345:(_,e,t)=>{t.d(e,{LayoutName:()=>i});var i=function(_){return _.LargeSlider="large_slider",_.List="list",_}({})},925537:(_,e,t)=>{t.d(e,{AUTO_LIST_LOADER:()=>r,BLOCK_CONTENT:()=>d,BLOCK_DIVIDED:()=>n,BLOCK_ELEMENT:()=>l,BLOCK_ITEMS_CONTAINER:()=>s,BLOCK_ITEMS_REORDERABLE:()=>a,GALLERY:()=>E,PAGINATED_BLOCKS_CONTAINER:()=>o,SECTION:()=>i,SORTER_ACTION:()=>c,SORTER_ACTION_DATA:()=>u});const i="CatalogSection",o="CatalogSection__paginatedBlocks",s="CatalogBlock__itemsContainer",a="CatalogBlock__itemsContainer--reorderable",l="CatalogBlock",n="CatalogBlock--divided",r="CatalogBlock__autoListLoader",d="CatalogBlock__content",c="CatalogBlock__sorter",u="CatalogBlock__sortingData",E="ui_gallery"},581789:(_,e,t)=>{t.d(e,{FullscreenBanner:()=>n});var i=t(761520),o=t(270959),s=t(241503),a=t(314309),l=t(452223);class n{static initiate(_){n.fetch(_).then((({banner:e,bannerId:t})=>e?new n(_,t,e):null)).catch((()=>null))}show(){this.box.show(),this.startView=this.productCollector.getCurrentTime()}hide(){this.box.hide(),this.sendViewStat()}sendViewStat(){const _={end_view:this.productCollector.getCurrentTime(),start_view:this.startView},e={type:l.EventItemType.AUDIO_FULLSCREEN_BANNER,id:this.bannerId,track_code:this.sectionId};this.viewCollector.logEvent(_,e)}static fetch(_){return new Promise(((e,t)=>{i.ajax.post("/audio?act=get_fullscreen_banner",{section_id:_},{onDone:_=>{_?.bannerId?e(_):t()},onFail:()=>(t(),!0)})}))}addEventListeners(){const _=this.box.bodyNode.querySelector(".FullscreenBanner__closeButton");_&&_.addEventListener("click",this.close.bind(this));this.box.bodyNode.querySelectorAll(".FullscreenBanner__button").forEach((_=>{_.addEventListener("click",(()=>{this.consume(_.dataset.reason||s.ConsumeReason.Click),setTimeout((()=>this.hide()))}))}))}close(){this.consume(s.ConsumeReason.Close),this.hide()}consume(_){i.ajax.post("/al_audio.php?act=consume_banner",{id:this.bannerId,type:"fullscreen",track_code:this.sectionId,reason:_})}constructor(_,e,t){this.sectionId=_,this.bannerId=e,this.productCollector=new a.ProductionStatCollector,this.viewCollector=new a.ViewStatCollector(this.productCollector),this.box=new o.MessageBox({bodyStyle:"padding: 0",width:655,containerClass:"FullscreenBanner",noControls:!0,onHide:()=>this.consume(s.ConsumeReason.Close)}),this.box.content(t),this.addEventListeners(),this.show()}}},267009:(_,e,t)=>{t.d(e,{ensureAudioPageMyAudioPlaylistsService:()=>n});var i=t(32489),o=t(746573),s=t(46201),a=t(786979),l=t(30899);const n=(0,t(558137).makeSharedState)("global/audio/audioPage/myPlaylists",(()=>function({config:_,myAudioPlaylistsService:e}){const t=(0,o.getEffectorServiceDomain)(_),i=t.createStore({}),l=t.createEffect((async _=>await e.createFx({..._}))),n=t.createEffect((async _=>{await e.deleteFx({..._})}));return i.on(l.done,((_,{params:e,result:t})=>(0,s.addPairToMap)(_,{key:e.blockId,value:t}))),i.on(n.done,((_,{params:e})=>(0,a.removePairFromMap)(_,e.blockId))),{createFx:l,deleteFx:n,setUserId:e.setUserId,$myAudioPlaylistsIdentitiesMap:i}}({config:{domain:(0,i.createDomain)("global/audio/audioPage/myPlaylists"),name:"global/audio/audioPage/myPlaylists"},myAudioPlaylistsService:(0,l.ensureMyAudioPlaylistsService)()})),{version:1})},785410:(_,e,t)=>{t.d(e,{ensureAudioPageMyAudioPlaylistsService:()=>i.ensureAudioPageMyAudioPlaylistsService});var i=t(267009)},655146:(_,e,t)=>{t.d(e,{ensureAudioPageMyAudioPlaylistsService:()=>i.ensureAudioPageMyAudioPlaylistsService});var i=t(785410)},51885:(_,e,t)=>{t.d(e,{AudioAdActionsModalApplication:()=>d});var i=t(474848),o=t(296540),s=t(507852),a=t(865708),l=t(961745),n=t(109507),r=t(545549);function d({target:_,ad:e,portalRoot:t=null,onClosed:d}){const[c,u]=(0,o.useState)((()=>{const o=e.choices.map(n.mapChoiceToActionChoice);return o.length?(0,i.jsx)(s.DropdownActionSheet,{usePortal:t??!1,shown:!0,onShownChange:_=>{_||u(null)},content:(0,i.jsx)(i.Fragment,{children:o.map((({label:_,action:e},t)=>(0,i.jsx)(s.DropdownActionSheet.Item,{onClick:e,children:_},t)))}),children:(0,i.jsx)(r.ForwardElementRef,{element:_})}):null}));return(0,l.useUpdateEffect)((()=>{c||d()}),[c]),(0,i.jsx)(a.AppRootProvider,{children:c})}},7971:(_,e,t)=>{t.d(e,{AudioAdActionsModalController:()=>a});var i=t(142278),o=t(51885);let s;class a{static ensure(){return s||(s=new a),s}open(_,e,t){this.mount(_,e,t)}close(_){_&&_!==this.currentTarget||this.unmount()}isOpen(_){return(!_||_===this.currentTarget)&&this.initiator.isMounted()}unmount(){this.initiator.unmount(),this.currentTarget=null}mount(_,e,t){this.isOpen(_)||(this.currentTarget=_),this.initiator.render({target:_,ad:e,portalRoot:t,onClosed:this.handleClosed})}constructor(){this.initiator=(0,i.createReactInitiator)(o.AudioAdActionsModalApplication),this.handleClosed=()=>{this.unmount()}}}},186088:(_,e,t)=>{t.d(e,{createAudioImageNullable:()=>o});var i=t(135479);function o(_){return _?.sizes.length?new i.AudioImage(_):null}},135479:(_,e,t)=>{t.d(e,{AudioImage:()=>n});var i=t(434518),o=t(763812),s=(0,o._)("_key"),a=(0,o._)("_pickHtmlAttrsBy"),l=(0,o._)("_pickBy");class n{get key(){return(0,i._)(this,s)[s]??this.sizes[0].src}pickByWidth(_){return(0,i._)(this,l)[l]("width",_)}pickByHeight(_){return(0,i._)(this,l)[l]("height",_)}pickHtmlAttrsByWidth(_){return(0,i._)(this,a)[a]("width",_)}pickHtmlAttrsByHeight(_){return(0,i._)(this,a)[a]("height",_)}constructor(_){Object.defineProperty(this,a,{value:r}),Object.defineProperty(this,l,{value:d}),Object.defineProperty(this,s,{writable:!0,value:void 0});const{sizes:e}=_;if(!e.length)throw new Error("AudioImage required at least one size");(0,i._)(this,s)[s]=_.key??null,this.sizes=e,this.mainColor=_.mainColor??null}}function r(_,e){const t=(0,i._)(this,l)[l](_,e).src,o=[2,3].reduce(((t,o)=>{const s=t.at(-1),a=(0,i._)(this,l)[l](_,e*o);return s?.src!==a.src&&t.push({src:a.src,ratio:o}),t}),[{src:t,ratio:1}]);if(1===o.length)return{src:t,srcset:void 0};const s=o.map((({src:_,ratio:e})=>`${_} ${Number.isInteger(e)?e:e.toFixed(1)}x`)).join(", ");return{src:t,srcset:s}}function d(_,e){let t=this.sizes[0];for(const i of this.sizes){if(i[_]===e)return i;if(!t){t=i;continue}const o=i[_]>e,s=i[_]<t[_]||t[_]<e,a=!o,l=i[_]>t[_];(o&&s||a&&l)&&(t=i)}return t}},242117:(_,e,t)=>{t.d(e,{AudioLegalNoticeIcon:()=>n});var i=t(474848),o=t(784536),s=t(815138),a=t(194528),l=t(526228);function n({lines:_,placement:e="top",portalElement:t,...n}){return _.length?(0,i.jsx)(o.Tooltip,{text:(0,i.jsx)(s.Join,{separator:(0,i.jsx)(a.Spacing,{size:16}),children:[..._]}),appearance:"neutral",placement:e,maxWidth:316,usePortal:t,...n,children:(0,i.jsx)(l.Icon12ErrorCircleFillGray,{})}):null}},475884:(_,e,t)=>{t.d(e,{AudioMediascopeScreenCounter:()=>d});var i=t(434518),o=t(763812),s=t(331635),a=t(132028),l=t(558137),n=t(622934),r=(0,o._)("_counter");class d{start(){(0,i._)(this,r)[r].start()}stop(){(0,i._)(this,r)[r].stop()}constructor(_){Object.defineProperty(this,r,{writable:!0,value:void 0}),(0,i._)(this,r)[r]=(0,l.makeSharedState)("spa/audio/AudioMediascopeScreenCounter",(()=>_.ensureActivityCounter({type:"screen",events:{start:{code:"632221"},stop:{code:"652221"},heartbeat:{code:"642221",msInterval:3e4}}})),{version:1})()}}d=(0,s.__decorate)([a.scope.global(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===n.Mediascope?Object:n.Mediascope])],d)},343289:(_,e,t)=>{t.d(e,{disableAudioSectionListeners:()=>d,enableAudioSectionListeners:()=>r});var i=t(983567),o=t(558137);const s=(0,i.getAudioPlayer)(),a=new Set(["BUTTON","INPUT","SELECT","TEXTAREA"]),l=_=>{const{code:e,target:t}=_,i=document.activeElement,o="Space"!==e,a="audio"!==window.cur.module,l=c(t??null),n=c(i??null);o||a||l||n||(_.preventDefault(),function(){if(!s.getCurrentAudio())return;s.isPlaying()?s.pauseByButton():s.playByButton()}())},n=(0,o.makeSharedState)("audio/section/globalListenerHandler",(()=>l),{version:0})();function r(){document.addEventListener("keydown",n)}function d(){document.removeEventListener("keydown",n)}function c(_){if(!_)return!1;const e=_.hasAttribute("onkeydown")||_.hasAttribute("onkeypress")||_.hasAttribute("onkeyup");if(a.has(_.tagName))return!0;if(e)return!0;return!("textbox"!==_.getAttribute("role"))||c(_.parentElement)}},161497:(_,e,t)=>{t.d(e,{AudioSectionEffects:()=>b});var i=t(434518),o=t(763812),s=t(331635),a=t(327813),l=t(132028),n=t(809424),r=t(595980),d=t(470388),c=t(475884),u=t(343289),E=(0,o._)("_reactions"),h=(0,o._)("_leaveSectionCheckInterval"),P=(0,o._)("_startLeaveSectionCheckInterval"),g=(0,o._)("_stopLeaveSectionCheckInterval");let p=l.destroy;class b{[p](){this.deactivate(),(0,i._)(this,g)[g](),(0,i._)(this,E)[E].dispose()}activate(){this.isActive||((0,u.enableAudioSectionListeners)(),this.mediascopeCounter.start(),this.isActive=!0)}deactivate(){this.isActive&&((0,u.disableAudioSectionListeners)(),this.mediascopeCounter.stop(),this.isActive=!1)}constructor(_,e,t){Object.defineProperty(this,P,{value:M}),Object.defineProperty(this,g,{value:D}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),this.metaData=_,this.mediascopeCounter=e,(0,i._)(this,E)[E]=new d.ReactionsAggregator,this.isActive=!1,(0,i._)(this,h)[h]=null,(0,a.makeObservable)(this),(0,i._)(this,E)[E].autorun((()=>{this.isActive&&t.isVisible?(0,i._)(this,P)[P]():(0,i._)(this,g)[g]()}))}}function M(){"undefined"!=typeof window&&((0,i._)(this,h)[h]&&clearInterval((0,i._)(this,h)[h]),(0,i._)(this,h)[h]=setInterval((()=>{"audio"!==this.metaData.get().module&&this.deactivate()}),5e3))}function D(){(0,i._)(this,h)[h]&&clearInterval((0,i._)(this,h)[h])}(0,s.__decorate)([a.observable],b.prototype,"isActive",void 0),(0,s.__decorate)([a.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",void 0)],b.prototype,"activate",null),(0,s.__decorate)([a.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",void 0)],b.prototype,"deactivate",null),b=(0,s.__decorate)([l.scope.global(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===n.MetaData?Object:n.MetaData,void 0===c.AudioMediascopeScreenCounter?Object:c.AudioMediascopeScreenCounter,void 0===r.PageVisibility?Object:r.PageVisibility])],b)},283050:(_,e,t)=>{t.d(e,{MusicPlaylistCoverUploaderValidationErrorType:()=>i});var i=function(_){return _.ImageSize="wrong_size",_.MinImageSize="min_image_size",_.MaxImageSize="max_image_size",_.MaxFileSize="max_file_size",_.FileExtension="file_extension",_.Unknown="unknown",_}({})},595980:(_,e,t)=>{t.d(e,{PageVisibility:()=>l});var i=t(331635),o=t(327813),s=t(939661),a=t(132028);class l{get isVisible(){return this._isVisible}get visibility(){return this.isVisible}constructor(){this.setVisibility=(0,o.action)((_=>{this._isVisible=_})),this._observer=s.PageVisibilityObserver.ensure(),this._isVisible=this._observer.visibility,(0,o.makeObservable)(this),this._observer.on("change",this.setVisibility)}}(0,i.__decorate)([o.observable,(0,i.__metadata)("design:type",Boolean)],l.prototype,"_isVisible",void 0),(0,i.__decorate)([o.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],l.prototype,"isVisible",null),(0,i.__decorate)([o.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],l.prototype,"visibility",null),l=(0,i.__decorate)([a.scope.platform(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[])],l)},739232:(_,e,t)=>{t.d(e,{useDebouncedCallback:()=>a});var i=t(296540),o=t(351118),s=t(634444);function a(_,e){const t=(0,s.useStableCallback)(_),a=(0,i.useMemo)((()=>(0,o.debounce)(t,e)),[t,e]);return(0,i.useEffect)((()=>()=>{a.cancel()}),[a]),a}},436799:(_,e,t)=>{t.d(e,{default:()=>i});const i={link:"AudioRecomsIconLink__link--VikKj"}},526228:(_,e,t)=>{t.d(e,{Icon12ErrorCircleFillGray:()=>s});var i=t(474848),o=(t(296540),t(506447));const s=_=>(0,i.jsxs)(o.SvgIconRootV2,{viewBox:"0 0 12 12",width:12,height:12,vkuiIconId:"error_circle_fill_gray_12",vkuiAttrs:{fill:"none"},vkuiProps:_,children:[(0,i.jsx)("path",{fill:"#a3adb8",fillRule:"evenodd",d:"M6 12c-3.312 0-6-2.688-6-6s2.688-6 6-6 6 2.688 6 6-2.688 6-6 6",clipRule:"evenodd"}),(0,i.jsx)("path",{fill:"#fff",fillRule:"evenodd",d:"M6 3a.75.75 0 0 0-.75.75v2.5a.75.75 0 0 0 1.5 0v-2.5A.75.75 0 0 0 6 3m0 5a.75.75 0 1 0 0 1.5A.75.75 0 0 0 6 8",clipRule:"evenodd"})]})},320767:(_,e,t)=>{t.d(e,{Icon24Bookmark:()=>s});var i=t(474848),o=(t(296540),t(506447));const s=_=>(0,i.jsx)(o.SvgIconRootV2,{viewBox:"0 0 24 24",width:24,height:24,vkuiIconId:"bookmark_24",vkuiAttrs:{fill:"currentColor"},vkuiProps:_,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M11.083 3h1.834c1.056 0 1.903 0 2.588.056.704.058 1.316.179 1.88.466a4.8 4.8 0 0 1 2.093 2.093c.287.564.409 1.176.466 1.88C20 8.18 20 9.027 20 10.083v7.615c0 .773 0 1.414-.046 1.914-.044.494-.144 1.026-.481 1.454a2.46 2.46 0 0 1-1.896.935c-.544.007-1.027-.238-1.447-.503-.423-.268-.933-.658-1.546-1.128l-1.617-1.24c-.607-.466-.714-.526-.797-.549a.66.66 0 0 0-.34 0c-.083.023-.19.083-.797.549l-1.617 1.24c-.613.47-1.123.86-1.546 1.128-.42.265-.903.51-1.447.503a2.46 2.46 0 0 1-1.896-.936c-.337-.427-.437-.96-.482-1.453C4 19.112 4 18.47 4 17.698v-7.615c0-1.056 0-1.903.056-2.588.057-.704.179-1.316.466-1.88a4.8 4.8 0 0 1 2.093-2.093c.564-.287 1.176-.408 1.88-.466C9.18 3 10.027 3 11.083 3",clipRule:"evenodd"})})},928961:(_,e,t)=>{t.d(e,{Icon24BookmarkCheckOutline:()=>s});var i=t(474848),o=(t(296540),t(506447));const s=_=>(0,i.jsxs)(o.SvgIconRootV2,{viewBox:"0 0 24 24",width:24,height:24,vkuiIconId:"bookmark_check_outline_24",vkuiAttrs:{fill:"currentColor"},vkuiProps:_,children:[(0,i.jsx)("path",{d:"M8.641 4.85c.57-.047 1.293-.05 2.308-.05a.9.9 0 0 0 0-1.8c-.992 0-1.797.001-2.454.055-.704.058-1.316.179-1.88.466a4.8 4.8 0 0 0-2.093 2.093c-.287.564-.409 1.176-.466 1.88C4 8.179 4 9.027 4 10.082v7.616c0 .771 0 1.413.045 1.913.045.492.145 1.026.482 1.454A2.46 2.46 0 0 0 6.423 22c.545.007 1.029-.239 1.447-.503.424-.267.933-.658 1.546-1.128l1.617-1.24a13 13 0 0 1 .595-.44.7.7 0 0 1 .202-.109.66.66 0 0 1 .34 0c.042.012.09.033.202.108.113.076.291.208.595.44l1.618 1.241c.612.47 1.121.86 1.545 1.128.418.264.902.51 1.447.503a2.46 2.46 0 0 0 1.896-.935c.337-.428.437-.962.482-1.454.045-.5.045-1.142.045-1.914v-3.075a.9.9 0 0 0-1.8 0v3.075c0 .805-.002 1.352-.038 1.75a2.3 2.3 0 0 1-.067.411.4.4 0 0 1-.036.093.66.66 0 0 1-.506.249c.008 0-.017.003-.095-.027a2.3 2.3 0 0 1-.366-.198c-.339-.213-.774-.545-1.412-1.035l-1.618-1.24c-.302-.231-.52-.394-.684-.504a2.4 2.4 0 0 0-.743-.355 2.46 2.46 0 0 0-1.27 0 2.4 2.4 0 0 0-.743.355c-.164.11-.382.273-.684.504L8.32 18.94c-.638.49-1.073.822-1.412 1.035a2.3 2.3 0 0 1-.366.197.4.4 0 0 1-.096.028.66.66 0 0 1-.505-.25.4.4 0 0 1-.036-.092 2.3 2.3 0 0 1-.067-.41c-.036-.4-.038-.946-.038-1.751v-7.614c0-1.084.001-1.847.05-2.443.048-.592.14-.941.276-1.209a3 3 0 0 1 1.306-1.306c.268-.137.617-.228 1.21-.276Z"}),(0,i.jsx)("path",{fillRule:"evenodd",d:"M18 1.999a5 5 0 1 0 0 10 5 5 0 0 0 0-10m2.78 3.22a.75.75 0 0 0-1.06 0l-2.47 2.47-.97-.97a.75.75 0 1 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.06 0l3-3a.75.75 0 0 0 0-1.06",clipRule:"evenodd"})]})},766216:(_,e,t)=>{t.d(e,{Icon24BookmarkOutline:()=>s});var i=t(474848),o=(t(296540),t(506447));const s=_=>(0,i.jsx)(o.SvgIconRootV2,{viewBox:"0 0 24 24",width:24,height:24,vkuiIconId:"bookmark_outline_24",vkuiAttrs:{fill:"none"},vkuiProps:_,children:(0,i.jsx)("path",{fill:"currentColor",fillRule:"evenodd",d:"M11.083 3h1.834c1.056 0 1.903 0 2.588.056.704.057 1.316.179 1.88.466a4.8 4.8 0 0 1 2.093 2.093c.287.564.408 1.176.466 1.88C20 8.18 20 9.027 20 10.083v7.615c0 .773 0 1.414-.045 1.914-.045.494-.145 1.026-.482 1.454a2.46 2.46 0 0 1-1.896.935c-.544.007-1.027-.238-1.447-.503-.424-.268-.933-.658-1.546-1.128l-1.617-1.24c-.607-.466-.714-.526-.797-.549a.66.66 0 0 0-.34 0c-.083.022-.19.083-.797.549l-1.617 1.24c-.613.47-1.123.86-1.546 1.128-.42.265-.903.51-1.447.503a2.46 2.46 0 0 1-1.896-.936c-.337-.427-.437-.96-.482-1.453C4 19.112 4 18.47 4 17.698v-7.615c0-1.056 0-1.903.056-2.588.057-.704.179-1.316.466-1.88a4.8 4.8 0 0 1 2.093-2.093c.564-.287 1.176-.409 1.88-.466C9.18 3 10.027 3 11.083 3M8.641 4.85c-.593.048-.941.14-1.209.276a3 3 0 0 0-1.306 1.306c-.137.268-.228.616-.276 1.21-.05.603-.05 1.376-.05 2.48v7.532c0 .828 0 1.387.038 1.794.038.414.103.503.103.503a.66.66 0 0 0 .506.25s.11-.003.461-.225c.346-.218.79-.558 1.448-1.062l1.582-1.213.1-.077c.44-.338.85-.654 1.327-.782a2.45 2.45 0 0 1 1.27 0c.478.128.888.444 1.326.782l.101.077 1.582 1.213c.658.504 1.102.844 1.448 1.062.351.222.461.225.461.225a.66.66 0 0 0 .506-.25s.065-.089.103-.503c.037-.407.038-.966.038-1.794v-7.532c0-1.104 0-1.877-.05-2.48-.048-.594-.14-.942-.276-1.21a3 3 0 0 0-1.306-1.306c-.268-.137-.617-.228-1.21-.276-.603-.05-1.376-.05-2.48-.05h-1.756c-1.104 0-1.877 0-2.48.05",clipRule:"evenodd"})})},732336:(_,e,t)=>{t.d(e,{Icon24Broadcast:()=>s});var i=t(474848),o=(t(296540),t(506447));const s=_=>(0,i.jsx)(o.SvgIconRootV2,{viewBox:"0 0 24 24",width:24,height:24,vkuiIconId:"broadcast_24",vkuiAttrs:{fill:"none"},vkuiProps:_,children:(0,i.jsx)("path",{fill:"currentColor",d:"M5.491 3.698a1 1 0 0 1-.033 1.414l-.033.03-.02.02A9.47 9.47 0 0 0 2.5 12a9.47 9.47 0 0 0 2.935 6.867 1 1 0 1 1-1.383 1.445A11.47 11.47 0 0 1 .5 12c0-3.163 1.284-6.123 3.516-8.276l.026-.025.035-.034a1 1 0 0 1 1.414.033m13.018 0a1 1 0 0 1 1.414-.033l.035.034.026.025A11.47 11.47 0 0 1 23.5 12c0 3.18-1.299 6.157-3.552 8.312a1 1 0 1 1-1.383-1.446A9.47 9.47 0 0 0 21.5 12a9.47 9.47 0 0 0-2.904-6.837l-.021-.02-.033-.031a1 1 0 0 1-.033-1.414M8.838 7.094a1 1 0 0 1-.057 1.413A4.73 4.73 0 0 0 7.25 12c0 1.345.56 2.598 1.53 3.492a1 1 0 0 1-1.356 1.47A6.73 6.73 0 0 1 5.25 12c0-1.91.799-3.694 2.175-4.963a1 1 0 0 1 1.413.057m6.324 0a1 1 0 0 1 1.413-.057A6.73 6.73 0 0 1 18.75 12c0 1.91-.798 3.693-2.174 4.962a1 1 0 1 1-1.356-1.47A4.73 4.73 0 0 0 16.75 12c0-1.345-.56-2.598-1.53-3.493a1 1 0 0 1-.058-1.413M12 9.75a2.25 2.25 0 1 1 0 4.5 2.25 2.25 0 0 1 0-4.5"})})},923417:(_,e,t)=>{t.d(e,{Icon24Repeat1Outline:()=>s});var i=t(474848),o=(t(296540),t(506447));const s=_=>(0,i.jsx)(o.SvgIconRootV2,{viewBox:"0 0 24 24",width:24,height:24,vkuiIconId:"repeat_1_outline_24",vkuiAttrs:{fill:"none"},vkuiProps:_,children:(0,i.jsxs)("g",{fill:"currentColor",children:[(0,i.jsx)("path",{fillRule:"evenodd",d:"M12.475 9.132a.9.9 0 0 1 .429.766V14.1a.9.9 0 0 1-1.8 0v-2.74a.9.9 0 0 1-.807-1.609l1.3-.656a.9.9 0 0 1 .878.037",clipRule:"evenodd"}),(0,i.jsx)("path",{d:"M2.005 12c0-3.258 2.642-5.9 5.902-5.9h10.026l-.564-.564a.9.9 0 1 1 1.273-1.272l2.1 2.1a.9.9 0 0 1 0 1.272l-2.1 2.1a.9.9 0 0 1-1.273-1.272l.564-.564H7.907A4.1 4.1 0 0 0 3.805 12v.097a.9.9 0 0 1-1.8 0zM21.104 11.003a.9.9 0 0 1 .9.9V12c0 3.259-2.642 5.9-5.902 5.9H6.074l.564.564a.9.9 0 1 1-1.273 1.272l-2.101-2.1a.9.9 0 0 1 0-1.272l2.1-2.1a.9.9 0 0 1 1.274 1.272l-.564.564h10.029a4.1 4.1 0 0 0 4.101-4.1v-.097a.9.9 0 0 1 .9-.9"})]})})},140713:(_,e,t)=>{t.d(e,{Icon24RepeatOutline:()=>s});var i=t(474848),o=(t(296540),t(506447));const s=_=>(0,i.jsx)(o.SvgIconRootV2,{viewBox:"0 0 24 24",width:24,height:24,vkuiIconId:"repeat_outline_24",vkuiAttrs:{fill:"none"},vkuiProps:_,children:(0,i.jsx)("g",{fill:"currentColor",children:(0,i.jsx)("path",{d:"M2.005 12c0-3.258 2.642-5.9 5.902-5.9h10.026l-.564-.564a.9.9 0 1 1 1.273-1.272l2.1 2.1a.9.9 0 0 1 0 1.272l-2.1 2.1a.9.9 0 0 1-1.273-1.272l.564-.564H7.907A4.1 4.1 0 0 0 3.805 12v.097a.9.9 0 0 1-1.8 0zM21.104 11.003a.9.9 0 0 1 .9.9V12c0 3.258-2.642 5.9-5.901 5.9H6.074l.564.564a.9.9 0 1 1-1.273 1.272l-2.101-2.1a.9.9 0 0 1 0-1.272l2.1-2.1a.9.9 0 0 1 1.274 1.272l-.564.564h10.029a4.1 4.1 0 0 0 4.101-4.1v-.097a.9.9 0 0 1 .9-.9"})})})},463469:(_,e,t)=>{t.d(e,{Icon24StarsOutline:()=>s});var i=t(474848),o=(t(296540),t(506447));const s=_=>(0,i.jsx)(o.SvgIconRootV2,{viewBox:"0 0 24 24",width:24,height:24,vkuiIconId:"stars_outline_24",vkuiAttrs:{fill:"none"},vkuiProps:_,children:(0,i.jsxs)("g",{fill:"currentColor",children:[(0,i.jsx)("path",{fillRule:"evenodd",d:"M14.005 10.444c-.367.761-.836 1.532-1.432 2.128-.597.597-1.368 1.066-2.129 1.433.761.367 1.532.836 2.129 1.432.596.597 1.064 1.366 1.432 2.126.368-.76.836-1.53 1.433-2.126.596-.596 1.365-1.064 2.125-1.432-.76-.368-1.529-.836-2.125-1.433-.597-.596-1.065-1.367-1.433-2.128m-.946-2.463c-.434 1.28-1.02 2.579-1.76 3.319-.739.74-2.037 1.325-3.317 1.759a22 22 0 0 1-1.449.437l-.247.066c-.381.098-.381.788 0 .886l.247.066a25 25 0 0 1 1.449.437c1.28.434 2.578 1.02 3.318 1.76.74.739 1.325 2.033 1.759 3.31q.078.23.15.458a25 25 0 0 1 .353 1.233c.099.38.787.38.886 0a25 25 0 0 1 .504-1.692c.434-1.276 1.019-2.57 1.758-3.31s2.034-1.325 3.31-1.759q.231-.078.459-.15a25 25 0 0 1 1.233-.353c.381-.099.381-.787 0-.886a26 26 0 0 1-1.691-.503c-1.277-.435-2.571-1.02-3.31-1.76-.74-.739-1.326-2.037-1.76-3.317a25.117 25.117 0 0 1-.503-1.695c-.098-.382-.788-.382-.886 0a25 25 0 0 1-.503 1.694",clipRule:"evenodd"}),(0,i.jsx)("path",{d:"M6.426 2.318a.47.47 0 0 0-.892 0l-.52 1.558a1.8 1.8 0 0 1-1.138 1.139l-1.558.52a.47.47 0 0 0 0 .89l1.554.519a1.8 1.8 0 0 1 1.14 1.145l.522 1.584a.47.47 0 0 0 .893 0l.52-1.58a1.8 1.8 0 0 1 1.146-1.147l1.58-.52a.47.47 0 0 0 0-.893l-1.584-.52a1.8 1.8 0 0 1-1.145-1.141z"})]})})},198838:(_,e,t)=>{t.d(e,{Icon24TextTtOutline:()=>s});var i=t(474848),o=(t(296540),t(506447));const s=_=>(0,i.jsx)(o.SvgIconRootV2,{viewBox:"0 0 24 24",width:24,height:24,vkuiIconId:"text_tt_outline_24",vkuiAttrs:{fill:"none"},vkuiProps:_,children:(0,i.jsxs)("g",{fill:"currentColor",children:[(0,i.jsx)("path",{d:"M7.1 6.8h1.8v11.3a.9.9 0 1 1-1.8 0zM2 5.9a.9.9 0 0 1 .9-.9h10.2a.9.9 0 1 1 0 1.8H2.9a.9.9 0 0 1-.9-.9M12 9.9a.9.9 0 0 1 .9-.9h8.2a.9.9 0 1 1 0 1.8h-8.2a.9.9 0 0 1-.9-.9"}),(0,i.jsx)("path",{d:"M16.1 10.796h1.8V18.1a.9.9 0 1 1-1.8 0z"})]})})},907763:(_,e,t)=>{t.d(e,{Icon24ThumbsDown:()=>s});var i=t(474848),o=(t(296540),t(506447));const s=_=>(0,i.jsx)(o.SvgIconRootV2,{viewBox:"0 0 24 24",width:24,height:24,vkuiIconId:"thumbs_down_24",vkuiAttrs:{fill:"currentColor"},vkuiProps:_,children:(0,i.jsx)("path",{fillRule:"evenodd",d:"M20.105 4a.896.896 0 0 0-.896.896v10.208a.896.896 0 1 0 1.791 0V4.896A.896.896 0 0 0 20.105 4m-3.496 11.818-1.954 4.089A1.922 1.922 0 0 1 11 19.078v-2.784a.294.294 0 0 0-.294-.294H6.002c-2.09 0-3.539-2.082-2.814-4.041l2.221-6A3 3 0 0 1 8.223 4H14a3 3 0 0 1 3 3v7.093a4 4 0 0 1-.39 1.725Z",clipRule:"evenodd"})})},529028:(_,e,t)=>{t.d(e,{Icon24ThumbsDownOutline:()=>s});var i=t(474848),o=(t(296540),t(506447));const s=_=>(0,i.jsx)(o.SvgIconRootV2,{viewBox:"0 0 24 24",width:24,height:24,vkuiIconId:"thumbs_down_outline_24",vkuiAttrs:{fill:"currentColor"},vkuiProps:_,children:(0,i.jsx)("path",{d:"M20.1 3a.9.9 0 0 0-.9.9v10.2a.9.9 0 1 0 1.8 0V3.9a.9.9 0 0 0-.9-.9m-7.233 19a2.87 2.87 0 0 0 2.58-1.618l2.064-4.265A4.9 4.9 0 0 0 18 13.983V6.9A3.9 3.9 0 0 0 14.1 3H8.19a3.9 3.9 0 0 0-3.658 2.55l-2.287 6.2c-.94 2.547.945 5.25 3.66 5.25H10v2.133A2.867 2.867 0 0 0 12.867 22m.96-2.402a1.067 1.067 0 0 1-2.027-.465v-2.739c0-.66-.535-1.194-1.194-1.194H5.904a2.1 2.1 0 0 1-1.97-2.827l2.287-6.2A2.1 2.1 0 0 1 8.19 4.8h5.91c1.16 0 2.1.94 2.1 2.1v7.083a3.1 3.1 0 0 1-.31 1.35z",clipRule:"evenodd"})})}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/web/chunks/058d4485.82b4ed2c.js")}catch(_){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/web/chunks/058d4485.82b4ed2c.js",_),_}