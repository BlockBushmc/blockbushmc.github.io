try{(self.webpackChunkvk=self.webpackChunkvk||[]).push([[13442,51246],{792379:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>evalWithLogging});var _web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(405546);const evalWithLogging=evalString=>{try{return eval(evalString)}catch(e){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_0__.fY)(e,evalString)}}},342804:(e,t,i)=>{i.d(t,{Y:()=>u});var o=i(221020),r=i(815287),n=i(356035),a=i(999051),s=i(634164),d=i(140094);const l="DynamicPagination__root--iY702",c="DynamicPagination__pagination--yLRE6",_="DynamicPagination__paginationHidden--8qAvI",u=(0,n.P)((({isLoading:e,fetchData:t,fetchError:i,nextFrom:n,rootMargin:u,withSpinner:h=!0,loaderLineHeight:v,dontSavePrevious:p=!1,fetchNextImmediately:m=!1})=>{const[g,y]=(0,r.useState)(),[f,k]=(0,d.Wx)({rootMargin:u}),w=void 0!==v?{height:v}:{},b=(0,r.useMemo)((()=>(0,s.$)(c,{[_]:e})),[e]);return(0,r.useEffect)((()=>{const e=setTimeout((()=>{p&&(k||m)&&n?t():g!==n?y(n):(k||m)&&n&&t()}),200);return()=>{clearTimeout(e)}}),[k,n,g,m]),n&&!i?(0,o.FD)("div",{className:l,style:w,children:[h&&(0,o.Y)(a.y,{size:"small"}),(0,o.Y)("div",{className:b,ref:f})]}):null}))},989792:(e,t,i)=>{i.d(t,{X:()=>r});var o=i(212452);const r=({images:e,width:t=0,height:i,isRetina:r=!1})=>{if(!e||0===e.length)return"";const n=r?2:1,a=t*n,s=("number"==typeof i?i:t)*n,d=[...e];(0,o.di)(d,((e,t)=>e.height<t.height?-1:e.height>t.height?1:e.width<t.width?-1:e.width>t.width?1:0));for(let e=0;e<d.length;e++)if(d[e].width>=a&&d[e].height>=s)return d[e];return d[d.length-1]}},212452:(e,t,i)=>{function o(e,t){return e.sort(t)}function r(e){return Array.isArray(e)}i.d(t,{cy:()=>r,di:()=>o})},412251:(e,t,i)=>{i.d(t,{H:()=>n,I:()=>r});var o=i(725308);function r(e){return o.z.isGroupId(e.id)}const n=(e=0,t=[],i=[])=>{if(e)return o.z.isUserId(e)?t.find((t=>t?.id===e)):i.find((t=>t?.id===Math.abs(e)))}},333702:(e,t,i)=>{i.d(t,{M:()=>n});var o=i(815287),r=i(264454);const n=(e,t,i=window,n,a=!0)=>{(0,o.useEffect)((()=>{let o;if(i)return e?(o=(0,r.n)((()=>{const e=i instanceof Window?Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight):Math.max(i.scrollHeight,i.clientHeight),o=i instanceof Window?document.documentElement.clientHeight:i.clientHeight,r=i instanceof Window?i.scrollY:i.scrollTop,a=o+r,s=Math.max(e-2*o,0);(!n&&a>=s||n&&r<o/2)&&t?.()}),34),a&&o(),i.addEventListener("scroll",o)):o&&i.removeEventListener("scroll",o),()=>{o&&i.removeEventListener("scroll",o)}}),[e,t,i,n])}},529931:(e,t,i)=>{i.d(t,{Sp:()=>o,ZN:()=>n,qw:()=>r,tk:()=>s,zE:()=>a});var o=function(e){return e.PHOTO="photo",e.VIDEO="video",e.LIVE="live",e}({}),r=function(e){return e.SWIPE="swipe",e.NAVIGATION_BUTTON="navigation_button",e.SIT_POSTING="sit_posting",e.LINK="link",e.STORY_REPLY="story_reply",e.STORY_REPOST="story_repost",e.CATALOG_ADD="catalog_add",e.DIALOG="dialog",e.STORY_LIVE_FINISHED="story_live_finished",e.DIALOG_VKME="dialog_vkme",e.STORY_VIEWER_FINISHED="story_viewer_finished",e.PUSH_TRY_MASK="push_try_mask",e.STORY_VIEWER_TRY_MASK="story_viewer_try_mask",e.LINK_MASK="link_mask",e.POSTING="posting",e.NEW_STORY_AVATAR="new_story_avatar",e.STORY_REPLIES_LIST="story_replies_list",e.STORIES_FEED="stories_feed",e.STORIES_SEARCH_NEWS="stories_search_news",e.QUESTION_STICKER="question_sticker",e.LIST_MIDDLE="list_middle",e.ARCHIVE_EMPTY_BUTTON="archive_empty_button",e.ARCHIVE_MENU_BUTTON="archive_menu_button",e.IM="im",e.PROFILE_BUTTON="profile_button",e.SHARE="share",e.MINI_APP="mini_app",e.SYSTEM_SHARING="system_sharing",e.SHORTCUT="shortcut",e.ARCHIVE_SHARING="archive_sharing",e.STORY_VIEWER_CAMERA_BUTTON="story_viewer_camera_button",e.STORY_VIEWER_MUSIC="story_viewer_music",e.STORY_VIEWER_MUSIC_SHEET="story_viewer_music_sheet",e.REPOST_TO_STORY_ACTIVITY="repost_to_story_activity",e.CHANGE_AVATAR="change_avatar",e.GROUP_ADD_STORIES_PAGE="group_add_stories_page",e.MUSIC_COVER_SHARING="music_cover_sharing",e}({}),n=function(e){return e.FEED="feed",e.FEED_MIDDLE="feed_middle",e.LINK="link",e.PROFILE="profile",e.IM_DIALOGS="im_dialogs",e.IM_DIALOG_HEADER="im_dialog_header",e.SNIPPET="snippet",e.REPLY="reply",e.REPLIES_LIST="replies_list",e.REPLY_STORY="reply_story",e.DISCOVER="discover",e.STORIES_MANAGE="stories_manage",e.USER_PERSONAL_CARD="user_personal_card",e.GROUP_PERSONAL_CARD="group_personal_card",e.NARRATIVE_SNIPPET="narrative_snippet",e.NARRATIVE_STORY="narrative_story",e.NARRATIVE_LINK="narrative_link",e.NARRATIVE_RECOMMENDATIONS="narrative_recommendations",e.NARRATIVE_SECTION="narrative_section",e.FAVE="fave",e.SPAMFEED="sf",e.ADS_PREVIEW="ads_preview",e.LIST_MIDDLE="list_middle",e.PLACE_STORY_LIST="place_story_list",e.SEARCH_STORY_LIST="search_story_list",e.STORY_ARCHIVE="story_archive",e.IM_MSG_LIST="im_msg_list",e.NOSPAM="nospam",e.PROFILE_SNACKBAR="profile_snackbar",e.MY_QUESTIONS="question_story",e}({}),a=function(e){return e.stories="stories",e.promoStories="promo_stories",e.discover="discover",e.liveActive="live_active",e.liveFinished="live_finished",e}({});const s={hashtag:1,mention:2,question:3,place:4,music:5,storyReply:6,owner:7,link:8,marketItem:9,post:10,poll:11,sticker:12,app:13,situationalTheme:14,playlist:15,videoButton:16,situationalTemplate:17,spoiler:18,service_yc_item:19,photo:20,album:21},d={situationalTemplate:s.situationalTemplate},l=Object.values(d);Object.values(s).filter((e=>!l.includes(e)))},227132:(e,t,i)=>{i.d(t,{Q:()=>o,Z:()=>r});const o=e=>e,r=e=>e},506432:(e,t,i)=>{i.d(t,{wV:()=>f,JG:()=>p,yI:()=>m,d$:()=>g,TE:()=>s,To:()=>d,IL:()=>y,An:()=>_,up:()=>h,yO:()=>v,EN:()=>c});const o=void 0;var r=i(227132),n=i(736819);const a=Number.isInteger||(e=>"number"==typeof e&&isFinite(e)&&Math.floor(e)===e),s=e=>((e,t)=>e.itemsById[t])(e,0),d=e=>s(e)?.title,l=(e,t)=>0===e.length?"":((e,t,i=!0)=>e.reduce(((e,o)=>{const r=t(o),n=t(e);return n===r?i?e:o:n<r?e:o})))(e,(e=>(t.width-e.width)**2+(t.height-e.height)**2),!1).url,c=(e,t,i)=>{const o=t.map((({asset:e,color_sets:t,id:o,score:r,title:n})=>({animationURL:e.animation_url||void 0,backgroundColor:t?.background,id:o,imageMenuURL:l(e.images,i.imageMenuSize),imagePreviewURL:"imagePreviewSize"in i?l(e.images,i.imagePreviewSize):void 0,imageStoryPanelURL:"imageStoryPanelSize"in i?l(e.images,i.imageStoryPanelSize):void 0,imageStoryPreviewURL:"imageStoryPreviewSize"in i?l(e.images,i.imageStoryPreviewSize):void 0,score:r,title:n,titleColor:t?.foreground}))),r={};return o.forEach((e=>{r[e.id]=e})),{id:e,items:o,itemsById:r}},_=e=>e===o,u=e=>a(e)&&e>=0&&e<=7,h=e=>{const t=parseInt(e,10);return u(t)?{isValid:!0,value:t}:{isValid:!1}},v=e=>{const t=h(e);return t.isValid?t.value:o},p=(e,t)=>{const i=(0,r.Z)({});return Object.entries((0,r.Q)(e)).forEach((([e,o])=>{const r=e,n=t?.itemsById?.[r]?.score??1;i[r]=n*(o||0)})),i},m=e=>Object.values((0,r.Q)(e)).reduce(((e,t)=>e+(t||0)),0),g=e=>m((0,r.Z)(e)),y=e=>m(e)>0,f=(e,t)=>e&&t?(0,n.n)(e,t):e===t},193132:(e,t,i)=>{i.d(t,{mZ:()=>B});var o=i(150242),r=i(819674),n=i(207402),a=i(645964),s=i(7258),d=i(646642),l=i(529931),c=i(799835),_=i(233536),u=i(300806),h=i(836382),v=i(412251),p=i(312020),m=i(544528),g=i(297520);const y={hashtag:l.tk.hashtag,mention:l.tk.mention,question:l.tk.question,place:l.tk.place,music:l.tk.music,story_reply:l.tk.storyReply,owner:l.tk.owner,link:l.tk.link,market_item:l.tk.marketItem,post:l.tk.post,poll:l.tk.poll,sticker:l.tk.sticker,app:l.tk.app,situational_theme:l.tk.situationalTheme,playlist:l.tk.playlist,clip:l.tk.videoButton,vk_video:l.tk.videoButton,situational_template:l.tk.situationalTemplate,spoiler:l.tk.spoiler,service_yc_item:l.tk.service_yc_item,photo:l.tk.photo,album:l.tk.album},f={transparent:1,blue_gradient:2,red_gradient:3,underline:4,blue:5,green:6,white:7,question_reply:8,light:9,impressive:10,dark:11,accent_background:12,accent_text:13,dark_unique:14,light_unique:15,light_text:18,dark_text:19,black:20,dark_without_bg:21,light_without_bg:22,rectangle:23,circle:24,poop:25,heart:26,star:27,album:28,horizontal:29,equalizer:30,header_meta:31,preview:32,miniature:33,fullview:34,cta:35,sticker:36,sticker_and_cta:37,accent:38},k=(e,t=6)=>isNaN(e)?NaN:Number(e.toFixed(t)),w=/^\[(id|club)(\d+)\|(.*)]$/;var b=i(506432),I=i(970343),S=i(663810),E=i(228909),T=i(452200),C=i(961829),O=i(85212),P=i(932216);const R=RegExp(`^\\/?audio${S.t4}\\/?$`);function L(e,t){let i,o=e.link;return o?(i=function(e,t){let i,o;const r=function(e){let t,i;const o=URL.parse(e.url);if(!o||!O.QF.test(o.host))return null;if(t=o.pathname,!R.test(t))return null;if(i=t.match(S.E7)?.[0],!i)return null;try{return new E._((0,T.v)(i))}catch(e){return(0,P.vV)(e),null}}(e);if(!r)return null;if(o=function(e,t){return e?.stickers?.find((({audioId:e,audioData:i})=>!!i&&(!!(0,C.e)(e)&&[t.rawId,t.accessRawId].includes(e))))}(t,r),!o)return null;try{return i=JSON.parse(o.audioData),{url:e.url,text:e.text,object_type:"audio",object:i}}catch(e){return(0,P.vV)(e),null}}(o,t),i||{url:o.url,text:o.text}):null}var A=i(251621),N=i(572101);function B(e,t,i){const{items:o,profiles:n=[],groups:a=[],reaction_sets:s}=e;return o.map((e=>{const o=e.owner_id||e.stories?.[0]?.owner_id||0,l=(0,v.H)(o,n,a)||{id:o},c="feed"===t&&"discover"===e.type?[]:e.stories?.filter(Boolean)||[],_=t===d.Jg.feed||t===d.Jg.discover,u={id:e.id||(0,r.A)(),author:D(l,n,c[0]?.also_subscribed),has_unseen:e.has_unseen,items:c.map((e=>V(e,l,n,a,i,t))),track_code:e.track_code,can_blacklist:_,app:e.app&&(h=e.app,{url:`/app${h.id}`,name:h.title,photoUrl:h.icon_139||h.icon_150||h.icon_75||""}),type:e.type,send_mask_hash:"",remove_from_blacklist_hash:"",is_narrative:!1,next_from:""};var h;return e.grouped?.length&&(u.grouped=B({items:e.grouped,profiles:n,groups:a},t,i)),s&&(u.reaction_set=x(s)),u}))}function D(e,t=[],i){const o=e.verified?'<div class="page_verified"></div>':"",r=function(e,t=[]){if(!e)return;const i=[],o=e.user_ids||[];return o.forEach((e=>{const o=t.find((t=>t.id===e));o&&i.push({photo_url:o.photo_50||o.photo_100||"",href:(0,a.dh)(o),name:o.first_name||"",sex:o.sex||0})})),{total_count:e.count||0,owners:i}}(i,t);if((0,a.Li)(e)){const t=e.id,i=e.first_name||"",n=e.last_name||"",s=e.first_name_gen||"",d=e.last_name_gen||"",l=e.first_name_ins||"",c=(0,a.Cg)(e),u=n?`${s} ${d}`:s;return{id:t,name:(0,_.ih)(c),name_get:(0,_.ih)(u),firstName:(0,_.ih)(i),first_name_gen:(0,_.ih)(s),first_name_ins:(0,_.ih)(l),photo:e.photo_100||e.photo_50||"",href:(0,a.dh)(e),verify:o,gender:e.sex||0,can_follow:Y(e),also_subscribed:r}}const n=-e.id,s=(0,_.ih)(e.name||"");return{id:n,name:s,name_get:s,firstName:s,first_name_gen:s,first_name_ins:s,photo:e.photo_100||e.photo_50||"",href:(0,a.dh)(e),verify:o,gender:0,can_follow:Y(e),also_subscribed:r}}function V(e,t,i,o,r,_){let b,S,E,T,C;if(e.mask?.owner_id){const t=(0,v.H)(e.mask?.owner_id,i,o);t&&(b=t.screen_name,(0,a.Li)(t)&&(S=t.sex))}const O=(0,A.L)(t,e,window.vk.id),P=!O&&(_===d.Jg.feed||_===d.Jg.discover);return E=function(e,t=[],i=[],o){const r=e?.clickable_stickers;if(!(r&&Object.values(r).length&&r.original_width&&r.original_height))return{original_width:0,original_height:0,stickers:[]};let n=r.original_width,s=r.original_height;Number((s/n).toFixed(2))>1.78&&(s=1.78*n);const d=(r.original_height-s)/2,_=n/100,h=s/100;return{original_width:n,original_height:s,stickers:r?.clickable_stickers?.length?r.clickable_stickers.reduce(((e,r)=>{if(!r)return e;const{clickable_area:n=[]}=r;if(n.length<4)return e;const s=Math.sqrt(Math.pow(n[1].x-n[0].x,2)+Math.pow(n[1].y-n[0].y,2)),b=Math.sqrt(Math.pow(n[1].x-n[2].x,2)+Math.pow(n[1].y-n[2].y,2));if(!s||!b)return e;const I=n[1].x-n[0].x;let S=180*Math.acos(I/s)/Math.PI;isNaN(S)&&(S=0),n[1].y<n[0].y&&(S=-S);const E=y[r.type],T={id:r.id,type:E,top:k((n[0].y-d)/h/100),left:k(n[0].x/_/100),width:k(s/_/100),height:k(b/h/100),rotate:k(S)};r.style&&(T.style=f[r.style],T.stickerStyle=r.style);let C=!1;switch(E){case l.tk.hashtag:r.hashtag?T.hashtag=r.hashtag:C=!0;break;case l.tk.mention:{const e=r.mention?.match(w),o=e?.[1],n=Number(e?.[2]);if(!n||isNaN(n)){C=!0;break}const s="id"===o&&t.find((({id:e})=>e===n)),d=!s&&"club"===o&&i.find((({id:e})=>e===n));s?(T.mentionedPhotoUrl=s.photo_100||s.photo_50||"",T.mentionedOwnerHref=(0,a.dh)(s),T.mentionedText=(0,a.Cg)(s)):d?(T.mentionedText=d.name||"",T.mentionedPhotoUrl=d.photo_100||d.photo_50||"",T.mentionedOwnerHref=(0,a.dh)(d)):C=!0;break}case l.tk.question:T.question=r.question||"";break;case l.tk.place:r.place_id?T.placeId=r.place_id:C=!0;break;case l.tk.music:if(!r.audio){C=!0;break}T.audioId=`${r.audio.owner_id}_${r.audio.id}`,T.audioData=JSON.stringify((0,m.U)(r.audio)),r.audio_restrictions&&(T.audioRestriction={code:r.audio_restrictions.id,title:r.audio_restrictions.title,buttonText:r.audio_restrictions.button?.title||"",buttonUrl:r.audio_restrictions.button?.action?.url||""}),T.audio=r.audio;break;case l.tk.playlist:if(!r.playlist){C=!0;break}T.playlistOwnerId=r.playlist.owner_id,T.playlistId=r.playlist.id,T.playlistAccessHash=r.playlist.followed?.access_key||r.playlist.access_key||"",T.playlistFollowed=Boolean(r.playlist.followed),T.playlistFollowedId=r.playlist.followed?.playlist_id,T.playlistFollowedOwnerId=r.playlist.followed?.owner_id,T.audioPlaylist=r.playlist;break;case l.tk.storyReply:r.owner_id&&(T.ownerId=r.owner_id),T.link=(0,a.dh)((0,v.H)(r.owner_id,t,i)),r.story_id?T.storyId=r.story_id:T.isExpired=!0;break;case l.tk.owner:r.owner_id&&(T.ownerId=r.owner_id),T.link=(0,a.dh)((0,v.H)(r.owner_id,t,i));break;case l.tk.link:r.link_object?(T.link=r.link_object.url?(0,g.Xo)(r.link_object.url,!0):"",T.tooltipText=r.tooltip_text||""):C=!0;break;case l.tk.marketItem:if(r.market_item)if(T.photoUrl=r.market_item.thumb&&(0,u.q)(r.market_item.thumb,50*devicePixelRatio)?.url||"",T.isRestricted=!1,o)T.link=`/product${r.market_item.owner_id}_${r.market_item.id}`;else{const e=(0,a.dh)((0,v.H)(r.market_item.owner_id,t,i));T.link=`${e}?w=product${r.market_item.owner_id}_${r.market_item.id}`,T.seoSlug=r.market_item.seo_slug}else C=!0;break;case l.tk.service_yc_item:const e=window.location;try{if(!r.link_object?.title||!r.link_object?.url){C=!0;break}const t=new URL(r.link_object.url);T.link=e.origin+t.pathname+t.search,T.tooltipText=r.link_object.title}catch{C=!0}break;case l.tk.photo:r.photo_id&&r.photo_owner_id?(T.photoId=r.photo_id,T.photoOwnerId=r.photo_owner_id):C=!0;break;case l.tk.post:r.post_owner_id&&(T.postOwnerId=r.post_owner_id),r.post_id?T.postId=r.post_id:C=!0;break;case l.tk.poll:r.poll?(T.pollId=r.poll.id,T.pollOwnerId=r.poll.owner_id):C=!0;break;case l.tk.sticker:r.sticker_pack_id?(T.stickerPackId=r.sticker_pack_id,r.sticker_id&&(T.stickerId=r.sticker_id),T.tooltipText=(0,c.Xo)("stories_view_sticker_pack")):C=!0;break;case l.tk.situationalTheme:r.situational_theme_id?(T.situationalAppId=p.FM,T.situationalThemeId=r.situational_theme_id):C=!0;break;case l.tk.videoButton:r.clip_id||r.video_id?(r.owner_id&&(T.videoOwnerId=r.owner_id),T.videoId=r.clip_id||r.video_id||0,T.videoType=r.clip_id?"clip":"video",T.tooltipText=r.clip_id?(0,c.Xo)("stories_link_attach_clip"):(0,c.Xo)("stories_link_attach_video")):C=!0;break;case l.tk.situationalTemplate:r.situational_theme_id?(T.situationalAppId=p.FM,T.situationalThemeId=r.situational_theme_id,r.situational_replied_users&&(T.situationalRepliedUsers=r.situational_replied_users,T.situationalRepliedAvatars=r.situational_replied_users?.items?.map((e=>{const{photo_100:o}=t.find((t=>t.id===e))||{},{photo_100:r}=i.find((t=>t.id===e))||{},n=o||r;if(n)return{photo_100:n}})).filter((e=>Boolean(e)))||[])):C=!0;break;default:C=!0}return C||e.push(T),e}),[]):[]}}(e,i,o,r),T=L(e,E),C=!!T&&"audio"===T.object_type,{owner_id:e.owner_id,raw_id:`${e.owner_id}_${e.id}`,date:(0,c.jc)(e.date||0),time:e.date||0,type:H(e),unread:!e.seen,canLike:Boolean(e.can_like),can_comment:z(e),can_share:Boolean(e.can_share),can_remove:j(e,t),can_delete_with_reason:Boolean(e.can_delete_with_reason),can_manage:O,can_ask:Boolean(e.can_ask),can_ask_anonymous:Boolean(e.can_ask_anonymous),canAddToNarrative:e.can_use_in_narrative,stats:{follow:{event_type:"subscribe",rhash:""},url_view:{event_type:"url_view",rhash:""}},isLiked:Boolean(e.is_liked),likesCount:e.likes_count||0,reaction_set_id:e.reaction_set_id||"",user_reaction_id:e.user_reaction_id||0,preview_url:e.blurred_preview||"",preview_thumb_hash:e.photo?.thumb_hash||e.video?.thumb_hash,needMute:Boolean(e.need_mute),muteReply:Boolean(e.mute_reply),isPromo:Boolean(e.is_promo),isProfileQuestion:Boolean(e.is_profile_question),promoCaption:e.is_promo&&e.caption||"",track_code:e.track_code||"",video:{owner_id:e.owner_id,video_id:e.video?.id||0,duration:e.video?.duration||0},vkVideoConfig:e.video?.ov_id?(0,I.de)(e.video):void 0,link:T??void 0,isPartOfNarrative:Boolean(e.narratives_count),report_hash:"",maskOwnerDomain:b,maskOwnerSex:S,memory_type:e.memory_type,memory_date:e.memory_date,can_hide_reply:(0,N.d)(e,i,o,window.vk.id),noSound:Boolean(e.no_sound),isNewQuestions:O&&Boolean(e.questions?.new),views:Boolean(e.views)?(0,s.B)(e.views||0):"",is_expired:Boolean(e.is_expired),is_deleted:Boolean(e.is_deleted),is_private:!Boolean(e.can_see),isAds:Boolean(e.is_ads),isOneTime:Boolean(e.is_one_time),isOneTimeSeen:Boolean(e.is_one_time)&&!Boolean(e.can_see),seenProgress:0,replies:e.replies?.count?(0,s.B)(e.replies.count):"",replies_new_counter:e.replies?.new||0,clickable_stickers:E,canMarkNotInterested:P,photo_url:e.photo?.sizes&&(0,u.q)(e.photo.sizes,(0,h.Q)()?1200:600)?.url||"",small_preview:M(e,r),smallest_preview:M(e,r,!0),video_url:e.video?.files?(0,n.K)(e.video.files):"",first_frame:e.video?.first_frame&&(0,u.q)(e.video?.first_frame,800)?.url||"",repliesCountText:"",authorId:0,isMusicCover:C,is_authors_ads:e.is_authors_ads,advertiser_info_url:e.advertiser_info_url,ad_marker:e.ad_marker,caption:e.caption,is_best_friends_privacy:e.is_best_friends_privacy,parent_story:e.parent_story,research:e.research||void 0}}function x(e){return e.map((({id:e,items:t})=>(0,b.EN)(e,t.map((e=>({...e,id:e.id}))),{imageMenuSize:{width:96,height:96},imagePreviewSize:{width:32,height:32},imageStoryPanelSize:{width:128,height:128},imageStoryPreviewSize:{width:40,height:40}})))}function M(e,t=!1,i=!1){const o=e.photo?.sizes;if(o)return(0,u.q)(o,t||i?10:(0,h.Q)()?600:300)?.url||"";const r=e.video?.first_frame;return r&&(0,u.q)(r,t||i?10:320)?.url||""}function Y(e){return(0,a.Li)(e)?window.vk.id!==e.id&&(e.friend_status===o.h.NOT_A_FRIEND||e.friend_status===o.h.INCOMING_REQUEST):!e.is_member&&!e.is_closed}function z(e){return e.can_comment?Boolean(e.can_comment):"live_active"===e.type&&Boolean(e.video?.can_comment)}function j(e,t){return!e.is_deleted&&(!e.can_delete_with_reason&&(!!e.can_delete||(0,A.L)(t,e,window.vk.id)&&("photo"===e.type||"video"===e.type)))}function H(e){return"photo"===e.type?l.Sp.PHOTO:"video"===e.type?l.Sp.VIDEO:"live_active"===e.type||"live_finished"===e.type?l.Sp.LIVE:l.Sp.PHOTO}},778722:(e,t,i)=>{i.d(t,{E:()=>n,u:()=>r});var o=i(799835);const r=e=>e.error_text||e.error_msg||(0,o.Xo)("global_unknown_error"),n=e=>e instanceof DOMException&&(20===e.code||"AbortError"===e.name)},986407:(e,t,i)=>{i.d(t,{E:()=>o});const o=e=>{if(e){if("is_nft"in e)return Boolean(e.is_nft);if("is_nft_photo"in e)return Boolean(e.is_nft_photo)}return!1}},511806:(e,t,i)=>{i.d(t,{R:()=>a});var o=i(989792),r=i(326107),n=i(836382);const a=e=>{if(e){if("photo"in e){if((0,r.cy)(e.photo)){const t=(0,o.X)({images:e.photo,width:50,isRetina:(0,n.Q)()});return t&&t.url||""}return e.photo||""}if("photo_100"in e&&"photo_100"in e)return(0,n.Q)()?e.photo_100||e.photo_50||"":e.photo_50||""}return""}},443660:(e,t,i)=>{i.d(t,{H:()=>o});const o=(e,t=!0,i)=>{let o="";return e&&("name"in e?o=e.name||"":!t&&"first_name"in e?o=i?e[`first_name_${i}`]||"":e.first_name||"":("first_name"in e||"last_name"in e)&&(o=i?`${e[`first_name_${i}`]} ${e[`last_name_${i}`]}`:`${e.first_name} ${e.last_name}`)),o}},931198:(e,t,i)=>{i.d(t,{D:()=>o});const o=(e,t="/",i="")=>e?"domain"in e&&"id"in e?`/artist/${e.domain||e.id||""}${i}`:"screen_name"in e&&e.screen_name?`${t}${e.screen_name}${i}`:"first_name"in e?`${t}id${e.id}${i}`:`${t}club${e.id}${i}`:""},631233:(e,t,i)=>{i.d(t,{Y:()=>l});var o=i(233536),r=i(130938),n=i(62069),a=i(849302),s=i(799835),d=i(412591);const l=e=>{const{partner_text:t,date:i,type:l,genres:c,views:_=1}=e;if(t)return(0,o.Lt)(t);const u=e=>(0,o.Lt)((0,a.n)(e));return i?"music_video"===l&&c?.length?`${(0,r.R0)(i,!0)} · ${c[0].name}`:i>Date.now()/d.Z2?(0,s.Xo)("video_postponed_publication"):(0,n.qP)(e)?u(_):`${u(_)} · ${(0,o.Lt)((0,r.R0)(i,!0))}`:u(_)}},335625:(e,t,i)=>{i.d(t,{a:()=>o});const o=(e,t,i,o)=>{let r;r=e.isUV?Math.floor(i*t/e.frequency):Math.min(e.countTotal,Math.max(0,Math.floor(e.countTotal*t-.5)));const n=Math.floor(r/e.countPerImage),a=Math.floor(r%e.countPerImage/e.countPerRow),s=r%e.countPerRow;let d=Math.floor(e.countPerImage/e.countPerRow);Boolean(e.isUV)||n!==Math.floor(e.countTotal/e.countPerImage)||(d=Math.floor(e.countTotal%e.countPerImage/e.countPerRow),e.countTotal%e.countPerImage%e.countPerRow>0&&d++);let l=e.countPerRow;!Boolean(e.isUV)&&n===Math.floor(e.countTotal/e.countPerImage)&&e.countTotal%e.countPerImage>0&&(l=Math.min(e.countPerRow,e.countTotal%e.countPerImage));let c=e.frameWidth,_=e.frameHeight;o&&(c>o?(_=_/c*o,c=o):_>o&&(c=c/_*o,_=o));const u=c*l,h=_*d,v=-s*c,p=-a*_;return{imgSrc:e.links[n],imgWidth:u,imgHeight:h,imgOffsetX:v,imgOffsetY:p,frameWidth:c,frameHeight:_}}},849302:(e,t,i)=>{i.d(t,{n:()=>n});var o=i(799835),r=i(527924);function n(e){return e>999?(0,r.yz)(e):(0,o.Xo)("video_N_views_list",e||1,!0)}},164780:(e,t,i)=>{i.d(t,{BS:()=>c,QI:()=>d,tF:()=>l});var o=i(443660),r=i(931198),n=i(300806);const a=[50,100,200],s=({photo:e})=>e?a.reduce(((t,i)=>(t[`photo_${i}`]=(0,n.q)(e,i)?.url,t)),{}):{},d=e=>({name:(0,o.H)(e),href:(0,r.D)(e)}),l=(e,t=!1)=>{if("music_video"!==e.type||!e.main_artists?.length)return null;const[i]=e.main_artists;return!t&&i.video_owner_id?null:{name:(0,o.H)(i),href:(0,r.D)(i),...s(i)}},c=e=>e?.featured_artists?e.featured_artists.map(d):void 0},938653:(e,t,i)=>{i.d(t,{xY:()=>g,ky:()=>f,g8:()=>I,LI:()=>T,x0:()=>E});var o=i(233536),r=i(799835),n=i(412591),a=i(809351);var s=i(48946);const d=({liveStatus:e,type:t})=>"live"===t&&"upcoming"===e;var l=i(164780),c=i(62069),_=i(631233),u=i(849302),h=i(130938),v=i(335625),p=i(9467),m=i(743397);const g=e=>!!e&&((e=>"members"===e.category?"to_subscribers":"by_link"===e.category?"by_link":Boolean(e.category&&!["all","any"].includes(e.category)))(e)||Boolean(e.excluded_category?.length||e.lists?.allowed?.length||e.lists?.excluded?.length||e.owners?.allowed?.length||e.owners?.excluded?.length)),y=e=>{if(!e)return;return{delete_outline:"delete",hide_outline:"hide",recent_outline:"recent",info_outline:"info",lock_outline:"lock",donate_outline:"donate",users_outline:"users",picture_outline:"picture",live_clock_badge_outline:"liveClockBadge",do_not_disturb_outline:"doNotDisturb",users3_outline:"users3",cancel_circle_outline:"cancelCircle",block_outline:"block",report_outline:"report"}[e]},f=e=>{const t=e&&(e=>e&&(e.icon_name?.length||e.mute_info_link?.length)?1===e.blur?"blurred":e.mute_info_link&&e.mute_info_link.length>0?"muted":"hidden":null)(e);if(!t)return null;const i=e&&e.can_play&&("subscribe"===e.button?.action||"donat"===e.button?.action);return{title:e.title,action:e.button?.action,buttonTitle:"donat"===e.button?.action||i?void 0:e.button?.title,mode:t,iconType:y(e.icon_name)}},k=e=>{const t=e.title||"",i=e.subtitle||"";return"music_video"===e.type?`${t} ${i}`:t},w=e=>{const t=d({type:e.type,liveStatus:e.live_status})&&((0,p.z2)("frontend.video_live_start_time_badge_vk")||(0,s.u)({platform:"vk",userEnv:{isToggleEnabled:p.AW,partConfigEnabled:p.z2},video:e})),i=t?e?.live_start_time:e.published_at;if(t){return(e=>{const t=new Date;if(!e||e<t)return(0,r.Xo)("global_video_soon");const i=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),o=(0,r.Xo)("video_live_start_tomorrow_badge","raw"),n=(0,r.Xo)("months_sm_of","raw"),a=i(e,t),s=i(e,new Date(t.getFullYear(),t.getMonth(),t.getDate()+1)),d=e.getFullYear()!==t.getFullYear();return a||s?(0,r.rF)(e,o,0,n):d?(0,r.rF)(e,"{day} {month} {year}, {hour}:{minute}",0,n):(0,r.rF)(e,o,0,n)})(i?new Date(i*n.Z2):void 0)}if(!i)return;const o=i*n.Z2;return Date.now()>o?void 0:(0,r.rF)(o,(0,r.Xo)("global_short_date_time","raw"),0,(0,r.Xo)("months_sm_of","raw"))};function b(e){const t={isUpcoming:d({type:e.type,liveStatus:e.live_status}),isInteractive:Boolean(e.interactive_info),badgeText:e.platform};return t.isUpcoming?(0,p.z2)("frontend.video_live_start_time_badge_vk")||(0,s.u)({platform:"vk",userEnv:{isToggleEnabled:p.AW,partConfigEnabled:p.z2},video:e})?t.badgeText=void 0:t.badgeText=(0,r.Xo)("global_video_soon"):t.isInteractive&&(t.badgeText=(0,r.Xo)("video_interactive_label")),t}function I(e){const t=e?.timeline_thumbs;if(t)return{frameWidth:t.frame_width??0,frameHeight:t.frame_height??0,countPerRow:t.count_per_row??0,countPerImage:t.count_per_image??0,countTotal:t.count_total??0,isUV:!!t.is_uv,frequency:t.frequency??0,links:t.links??[]}}function S(e){if(!e.episodes?.length)return;const t=I(e);if(!t)return;const i=e.duration??0,o=e.episodes.map((({time:e=0,text:o=""})=>({time:e,text:o,thumbData:{...(0,v.a)(t,e/i,i,m.vc),frameWidth:t.frameWidth,frameHeight:t.frameHeight}})));return o}const E=e=>{const{isUpcoming:t,isInteractive:i,badgeText:o}=b(e);return{additionalInfo:(0,_.Y)(e),description:e.description,duration:e.duration,href:e.content_restricted?void 0:(0,a.f_)(e),isLive:(0,c.qP)(e),isPrivacyLocked:g(e.privacy_view),isProcessing:Boolean(e.processing),ownersRelationText:e.featured_artists?(0,r.Xo)("video_feature_relation_text"):void 0,badgeText:o,publishDate:w(e),restriction:f(e.restriction),secondaryOwners:(0,l.BS)(e),thumbSrc:(0,c.hA)(e),title:k(e),trailerSrc:e.trailer?.mp4_360,isUpcoming:t,viewedDuration:e.viewed_duration,isInteractive:i,episodes:S(e),badgeMarks:e.snippet_marks,contentType:((0,p.z2)("frontend.audio_video_note_icon")||(0,p.AW)("video_card_music_icon")||(0,p.AW)("video_card_music_icon_unreg"))&&Boolean(e.uma_track_id)?"music-video":void 0}},T=(e,t)=>{const{isUpcoming:i,isInteractive:r,badgeText:n}=b(e);return{title:k(e),isPrivacyLocked:g(e.privacy_view),isLive:(0,c.qP)(e),duration:e.duration,viewedDuration:e.viewed_duration,badgeText:n,isUpcoming:i,isInteractive:r,thumbSrc:(0,c.hA)(e),restriction:f(e.restriction),href:(0,a.f_)(e),views:void 0!==e.views?(0,u.n)(e.views):void 0,date:t||void 0===e.date?void 0:(0,o.Lt)((0,h.R0)(e.date,!0)),contentType:((0,p.z2)("frontend.audio_video_note_icon")||(0,p.AW)("video_card_music_icon")||(0,p.AW)("video_card_music_icon_unreg"))&&Boolean(e.uma_track_id)?"music-video":void 0}}},38078:(e,t,i)=>{i.d(t,{qn:()=>s,uW:()=>n,y0:()=>r,yx:()=>a});var o=i(193132);function r(e,t){window.cur[`stories_list_${e}`]=t}function n(e){return window.cur[`stories_list_${e}`]}function a(e){delete window.cur[`stories_list_${e}`]}function s(e,t){return(0,o.mZ)(t,e,!1)}},793722:(e,t,i)=>{i.d(t,{s:()=>S});var o=i(221020),r=i(356035),n=i(42107),a=i(331635),s=i(327813),d=i(916533),l=i(349785),c=i(645189),_=i(651253),u=i(849645),h=i(877791),v=i(874800);class p{get(e){return this.key!==e?null:this.cache}set(e,t){this.key=e,this.cache=t}constructor(){this.key=null,this.cache=null}}p=(0,a.Cg)([n.z8.global()],p);class m{async[n.Ts](){this.sendStats(),await this.loadLegacyContent()}[n.zr](){this.cancel()}get isLoading(){return this._isLoading}get hasError(){return this._hasError}get jsScripts(){return this.content.js}get htmlContent(){return this.content.html}get key(){const{url:e,queryParams:t,getCacheKey:i}=this.props.current;if(i)return i(e,t)}async sendStats(){if(this.userEnv.partConfigEnabled("statshouse_logging_legacy_injector"))try{const e=this.props.current.queryParams?.act??"NO_ACT";this.statLog.send({name:"legacy_injector_usage",value:1,keys:[e,this.metadata.get().module,this.props.current.url]})}catch(e){this.errorLogger.log(e,{metaData:{environment:"legacyInjector-sendStats"}})}}cancel(){this._isLoading=!1,this._hasError=!1,this.content={html:void 0,js:void 0},this._isCanceled=!0,this.cancellationToken?.cancel()}parsePayload(e){if(this.props.current.withWrapPage){const[,t,i]=e;return{html:t,js:i}}const[t,i]=e;return{html:t,js:i}}constructor(e,t,i,o,r,n,a){this.props=e,this.authService=t,this.statLog=i,this.userEnv=o,this.errorLogger=r,this.metadata=n,this.legacyInjectorCacheService=a,this._isLoading=!0,this._isCanceled=!1,this._hasError=!1,this.content={html:void 0,js:void 0},this.requestLegacyContent=async()=>{const e=this.key?this.legacyInjectorCacheService.get(this.key):null;if(e)return e;const t=((e,{delay:t=3e3,numberOfTries:i=3,isCanceled:o=()=>!1}={})=>function(...r){const n=async(a=1)=>{try{return await e(...r)}catch(e){if(a>=i||o())throw e;return new Promise((e=>setTimeout((()=>e(n(a+1))),t*a)))}};return n()})((()=>h.R.promisifiedPost(this.props.current.url,{al_id:this.authService.userId,...this.props.current.queryParams},{cancellationToken:this.cancellationToken,ignoreDefaultErrorLogger:!0,failOnStaticExecuteError:!0})),{isCanceled:()=>this._isCanceled}),i=await t(),{html:o,js:r}=this.parsePayload(i);if(r&&"string"!=typeof r||"string"!=typeof o){const e=o?JSON.stringify(o).slice(0,100):"undefined",t=r?JSON.stringify(r).slice(0,100):"undefined";throw new Error(`LegacyInjector: Received 'js' and 'html' must be a string. Received html: '${e}...', js: '${t}...'`)}return this.key&&this.legacyInjectorCacheService.set(this.key,{html:o,js:r}),{html:o,js:r}},this.loadLegacyContent=async()=>{this._isLoading=!0;try{this.cancellationToken=new v.ZY;const{html:e,js:t}=await this.requestLegacyContent();this.props.current.onDone?.(Boolean(e),Boolean(t)),this.content={html:e,js:t}}catch(e){if(!this._isCanceled){const t=e instanceof Error?e:new Error(`LegacyInjector: Load legacy content error - ${JSON.stringify(e)}`);this.errorLogger.log(t,{metaData:{environment:"legacyInjector"}}),this.props.current.onError?.(t),this._hasError=!0}}finally{(0,s.h5)((()=>{this._isLoading=!1,this._isCanceled=!1}))}},(0,s.l_)(this)}}m=(0,a.Cg)([n.z8.transient(),(0,a.Sn)("design:type",Function),(0,a.Sn)("design:paramtypes",[void 0===n.Ji?Object:n.Ji,void 0===d.u?Object:d.u,void 0===l.R?Object:l.R,void 0===c.J?Object:c.J,void 0===_.v?Object:_.v,void 0===u.e?Object:u.e,void 0===p?Object:p])],m);const{Provider:g,useModel:y}=(0,n.Qd)(m,{initInEffect:!1});var f=i(815287),k=i(243989),w=i(792379);const b=({htmlContent:e,jsScript:t,Component:i="div",...r})=>((0,f.useEffect)((()=>{t&&(0,w.g)(t)}),[t]),(0,o.Y)(k.E,{Component:i,...r,children:e})),I=(0,r.P)((function(){const e=y(),{loading:t,loadingError:i,onDone:r,onError:n,queryParams:a,url:s,renderHtmlContent:d,withWrapPage:l,getCacheKey:c,..._}=e.props.current;if(e.isLoading)return t;if(e.hasError)return i;const u=()=>(0,o.Y)(b,{htmlContent:e.htmlContent||"",jsScript:e.jsScripts,..._});return e.htmlContent?"function"==typeof d?d(u()):u():null})),S=(0,n.jn)(g,I)},540587:(e,t,i)=>{i.d(t,{V:()=>y});var o=i(221020),r=i(356035),n=i(331635),a=i(42107),s=i(327813),d=i(794345),l=i(41914),c=i(830443),_=i(975472);class u{[a.Ts](){this.fetchAccountInfo(),this.reactions.autorun((()=>{this.initVideoAutoplay()})),window.addEventListener("check-feed-common-autoplay",this.initVideoAutoplay)}isAutoplayAllowedByFeedType(e){return!!e&&[`news:${d._6}`,`news:${d.ey}`,"friends","search","likes","likes:wall","likes:wall_reply","likes:video","wall","wall:all","wall:search","wall:owner","wall:others","wall:postponed","wall:archived","wall:donut"].includes(e)}[a.zr](){this.reactions.destroy(),window.removeEventListener("check-feed-common-autoplay",this.initVideoAutoplay)}constructor(e,t,i){this.props=e,this.accountInfoService=t,this.feedDataService=i,this.reactions=new c.O,this._autoplayEnabled=!1,this.initVideoAutoplay=()=>{this._autoplayEnabled&&this.isAutoplayAllowedByFeedType(this.feedDataService.activeFeedType)&&this.props.current.feedCommonConfig?.initVideoAutoplay?.()},this.fetchAccountInfo=async()=>{const e=await this.accountInfoService.ensure({fields:["feed_type","video_autoplay","community_comments"],shouldSyncCachedData:!0}),t=e?.settings?.find((e=>"video_autoplay"===e.name));(0,s.h5)((()=>{this._autoplayEnabled=Boolean(t?.value)}))},(0,s.l_)(this)}}u=(0,n.Cg)([a.z8.transient(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[void 0===a.Ji?Object:a.Ji,void 0===l.m?Object:l.m,void 0===_.k?Object:_.k])],u);const{Provider:h,useModel:v}=(0,a.Qd)(u,{initInEffect:!1});var p=i(22392);const m=(0,r.P)((function({children:e}){const{key:t,from:i}=(0,p.z)();return e({feedHistoryCacheKey:t,previousFeedHistoryCacheKey:i?.key})}));function g({children:e,...t}){return(0,o.Y)(h,{...t,children:(0,o.Y)(m,{children:e})})}const y=(e,t)=>function({feedCommonConfig:i,children:r,...n}){return(0,o.Y)(g,{feedCommonConfig:i,children:i=>(0,o.Y)(e,{...n,...i,children:(0,o.Y)(t,{})})})}},572101:(e,t,i)=>{function o(e,t,i,o){if(!e.parent_story_owner_id||!e.parent_story_id)return!1;return e.parent_story_owner_id===o}i.d(t,{d:()=>o})},251621:(e,t,i)=>{i.d(t,{L:()=>r});var o=i(645964);function r(e,t,i){return(0,o.Li)(e)?t.owner_id===e.id&&i===e.id:t.owner_id===-e.id&&(t.is_ads?Boolean(e.is_advertiser):Boolean(e.is_admin))}},48946:(e,t,i)=>{i.d(t,{u:()=>n});var o=i(310432);function r(e){if(e){const t=function(e){try{return new URL(e).hostname}catch(e){return""}}(e);return(0,o.h)()||(0,o.h)(t)}return(0,o.h)()}function n({userEnv:e,platform:t,video:i}){let o=!1,n=!1;if("vk"===t?(o=e.partConfigEnabled("frontend.video_sub_btn_all")||e.isToggleEnabled("video_sub_btn_all"),n=e.partConfigEnabled("frontend.video_sub_btn_sport")||e.isToggleEnabled("video_sub_btn_sport")):(o=e.partConfigEnabled("frontend.video_sub_btn_all_mvk")||e.isToggleEnabled("video_sub_btn_all_mvk"),n=e.partConfigEnabled("frontend.video_sub_btn_sport_mvk")||e.isToggleEnabled("video_sub_btn_sport_mvk")),o)return!0;if(!o&&n){return r(i?.direct_url??i?.share_url??"")}return!1}},443430:(e,t,i)=>{function o(e){return!("click"!==e.type&&"mousedown"!==e.type&&"mouseup"!==e.type||0!==e.button||e.ctrlKey||e.shiftKey||e.altKey||e.metaKey)}i.d(t,{w:()=>o})},661449:(e,t,i)=>{i.d(t,{r:()=>u});var o=i(331635),r=i(42107),n=i(794345),a=i(739838),s=i(998286),d=i(651253),l=i(327813),c=i(529275),_=i(570440);class u{async addPost(e){try{const t=await this.wallApi.getPostById({posts:e,extended:1,fields:n.V7}),i=t.items?.[0];if(!i)return void this.errorLogger.log("post not found");if(!this.feedEntitiesStore.createFeedItemFromApi(i))return;(0,l.h5)((()=>{this.ownerService.setUserGroupEntity(t.profiles,t.groups)}))}catch(e){this.errorLogger.log(e)}}constructor(e,t,i,o,r){this.feedApi=e,this.wallApi=t,this.errorLogger=i,this.feedEntitiesStore=o,this.ownerService=r,(0,l.Gn)(this)}}u=(0,o.Cg)([r.z8.global(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[void 0===a.x?Object:a.x,void 0===s.t?Object:s.t,void 0===d.v?Object:d.v,void 0===c.B?Object:c.B,void 0===_.v?Object:_.v])],u)},433674:(e,t,i)=>{i.d(t,{y:()=>s});var o=i(331635),r=i(42107),n=i(24584),a=i(327813);class s{createUserFromAPI(e){return(0,a.sH)(e)}async fetchUsersByIds(e,t,i=!1){return(await(i?this.usersApi.getWithPrefetch:this.usersApi.get)({user_ids:e.userIds.join(","),fields:e.fields?.join(",")},t)).map((e=>this.createUserFromAPI(e)))}constructor(e){this.usersApi=e,(0,a.l_)(this)}}s=(0,o.Cg)([r.z8.container(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[void 0===n.l?Object:n.l])],s)},702931:(e,t,i)=>{i.d(t,{m:()=>s});var o=i(331635),r=i(42107),n=i(289375),a=i(849645);class s{sendVideoSharingOpen(e,t){const i={item:e,type:"type_modal_sharing_open",type_modal_sharing_open:{event:t}};this.productionStats.send({screen:this.metaData.get().screen,type:"type_click",type_click:i})}sendPlaylistSharingOpen(e,t){const i={item:e,type:"type_video_playlist_item",type_video_playlist_item:{event_type:t,album_id:e.id,owner_id:e.owner_id}};this.productionStats.send({screen:this.metaData.get().screen,type:"type_click",type_click:i},{force:!0})}constructor(e,t){this.productionStats=e,this.metaData=t}}s=(0,o.Cg)([r.z8.global(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[void 0===n.X?Object:n.X,void 0===a.e?Object:a.e])],s)},207402:(e,t,i)=>{function o(e){if(!e)return"";const t=/^mp4_(\d+)$/,{url:i}=Object.keys(e).reduce(((i,o)=>{const r=o.match(t);if(!r)return i;const n=Number.parseInt(r[1]);return i.quality<n&&(i.quality=n,i.url=String(e[o]??"")),i}),{url:"",quality:0});return i}i.d(t,{K:()=>o})},626853:(e,t,i)=>{function o(e){e.preventDefault(),e.stopPropagation()}i.d(t,{T:()=>o})},154767:(e,t,i)=>{i.d(t,{Q:()=>r,b:()=>n});var o=i(516427);const r=o.SvD,n=o.zM2},191736:(e,t,i)=>{i.d(t,{_:()=>r});var o=i(815287);const r=(e=!1)=>{const[t,i]=(0,o.useState)(e);return{activate:()=>i(!0),deactivate:()=>i(!1),isActive:t}}},56857:(e,t,i)=>{i.d(t,{I:()=>o});const o=({isProcessing:e,isPrivacyLocked:t})=>e?"processing":!0===t?"private":t||void 0},801297:(e,t,i)=>{i.d(t,{D:()=>_});var o=i(221020),r=i(634164);const n="vkitVideoCardOverlayIcon__overlayIcon--O3P05",a="vkitVideoCardOverlayIcon__overlayIconHovered--wMHVf",s="vkitVideoCardOverlayIcon__overlayIconShowOnHover--KKM5D",d={loading:"vkitVideoCardOverlayIcon__overlayIconLoading--yT7Mp",muted:"vkitVideoCardOverlayIcon__overlayIconMuted--QkNqF"},l={s:"vkitVideoCardOverlayIcon__overlayIconSizeS--NRF3j",m:"vkitVideoCardOverlayIcon__overlayIconSizeM--k3jQ7"},c={regular:"vkitVideoCardOverlayIcon__overlayIconHoverRegular--XBDcT",dark:"vkitVideoCardOverlayIcon__overlayIconHoverDark--S0EcA"},_=({children:e,type:t,size:i="s",hovered:_,hoverMode:u="regular",playIconOnHover:h})=>(0,o.Y)("div",{className:(0,r.$)(n,l[i],c[u],t&&d[t],_&&a,h&&s),children:e})},479559:(e,t,i)=>{i.d(t,{F:()=>f});var o=i(221020),r=i(620483),n=i(767091),a=i(634164),s=i(661823),d=i(934679),l=i(601079),c=i(154767),_=i(638945);const u="vkitVideoCardBadge__badge--FGtXw",h="vkitVideoCardBadge__upcomingLiveBadge--j1l3d",v="vkitVideoCardBadge__durationBadge--rKhgA",p="vkitVideoCardBadge__interactiveBadge--oAcIA",m="vkitVideoCardBadge__interactiveBadgeIcon--YGISx",g={s:"vkitVideoCardBadge__durationBadgeSizeS--Mt1Wy",m:"vkitVideoCardBadge__durationBadgeSizeM--J93rc"},y={"music-video":"vkitVideoCardBadge__musicVideoBadge--YHRJt"},f=({type:e,text:t,interactive:i,className:f,durationBadgeSize:k="s",contentType:w})=>{const b=(0,l.A)(),I=w&&y[w],S="music-video"===w;return"live"===e?(0,o.Y)(s.f,{className:u}):"upcoming"===e?(0,o.Y)(d.$,{className:(0,a.$)(h,u,v)}):t?(0,o.Y)(c.Q,{value:i?"dark":b,children:(0,o.FD)(_.tW,{weight:"2",className:(0,a.$)(u,v,g[k],i&&p,I,f),"data-testid":"video_card_duration",children:[i&&(0,o.Y)(r.l,{className:m}),S&&(0,o.Y)(n.K,{}),t]})}):null}},912585:(e,t,i)=>{i.d(t,{z:()=>h});var o=i(221020),r=i(353322),n=i(988398),a=i(591412),s=i(154159),d=i(997793),l=i(634164),c=i(56471);const _="vkitVideoCardIcon__icon--EsEdu",u={processing:r.n,private:n.S,by_link:a.S,to_subscribers:s.B,donate:d.S},h=({type:e,className:t,tooltipText:i})=>{if(!e||"boolean"==typeof e)return null;const r=u[e];return(0,o.Y)(c.f,{placement:"top-start",appearance:"black",text:i,children:(0,o.Y)(r,{className:(0,l.$)(_,t)})})}},660223:(e,t,i)=>{i.d(t,{e:()=>V});var o=i(221020),r=i(309481),n=i(450225),a=i(378169),s=i(470704),d=i(855354),l=i(815287),c=i(772812),_=i(999051),u=i(180329),h=i(325159),v=i(191736),p=i(56857),m=i(801297),g=i(224519),y=i(479559),f=i(912585),k=i(634164);const w="vkitVideoCardPreviewContainer__preview--8m2No",b="vkitVideoCardPreviewContainer__previewOverlayed--sWJK5",I=({activate:e,deactivate:t,focusDisabled:i,hasOverlay:r,videoCardPreviewLabel:n,children:a})=>i?(0,o.Y)("div",{className:(0,k.$)(w,r&&b),"aria-label":n,tabIndex:-1,children:a}):(0,o.Y)("div",{className:(0,k.$)(w,r&&b),onMouseOver:e,onFocus:e,onMouseLeave:t,onBlur:t,role:"button","aria-label":n,tabIndex:0,children:a}),S="vkitVideoCardTrailerPlayer__trailer--olpe2",E="vkitVideoCardTrailerPlayer__trailerActive--oB6eT",T=({active:e,src:t,alt:i,onLoadedData:r})=>{const n=(0,l.useRef)(null);return(0,l.useEffect)((()=>{n.current&&(e?(async()=>{try{await(n.current?.play())}catch(e){(e=>{if(!["AbortError","NotAllowedError","NotSupportedError"].includes(e.name)&&![20,9].includes(e.code))throw e})(e)}})():(n.current.pause(),n.current.currentTime=0))}),[e]),t?(0,o.Y)("video",{loop:!0,muted:!0,ref:n,crossOrigin:"anonymous","aria-label":i,className:(0,k.$)(S,e&&E),src:t,onLoadedData:r}):null},C="vkitVideoCardViewedDuration__duration--L2wtl",O="vkitVideoCardViewedDuration__viewedDuration--yhwoo",P="vkitVideoCardViewedDuration__durationHidden--QSXZd",R=({shown:e,duration:t,viewedDuration:i})=>{if(!i||!t)return null;const r=100*i/t;return(0,o.Y)("div",{className:(0,k.$)(C,!e&&P),children:(0,o.Y)("div",{className:O,style:{width:`${r}%`},"data-testid":"video_card_duration_timeline"})})};var L=i(284146);const A="vkitVideoCardPreview__top--jErt3",N="vkitVideoCardPreview__footer--u8Csr",B="vkitVideoCardPreview__privacyIcon--luFAp",D={s:()=>(0,o.Y)(r.G,{}),m:()=>(0,o.Y)(n.b,{}),l:()=>(0,o.Y)(a.d,{})},V=({isPrivacyLocked:e,privacyLockReason:t,title:i,badgeMarks:r,trailerSrc:n,thumbSrc:a,duration:k,viewedDuration:w,active:b,isLive:S,isUpcoming:E,badgeText:C,blurred:O,hasOverlay:P,isProcessing:V,muted:x,loading:M,direction:Y,size:z,blurSize:j="s",playIconSize:H="l",playOverlaySize:$="s",durationBadgeSize:F="s",playOverlayHovered:U,playOverlayHoverMode:q,publishDate:W,forceShowPlay:G,isInteractive:K,noPlayIcon:X,noExtendedBadge:Q,focusDisabled:J,hasVideoPlayerFullPreview:Z,videoCardPreviewLabel:ee,playIconOnHover:te,contentType:ie,forceImgCover:oe})=>{const{activate:re,deactivate:ne,isActive:ae}=(0,v._)(!1),[se,de]=(0,l.useState)(!1),le="horizontal"===Y&&"s"===z,ce=Boolean(n&&!le&&!O),_e=b&&(G||ce),ue=(0,p.I)({isProcessing:V,isPrivacyLocked:e}),he=W&&!le&&!O,ve=S&&!E?"live":E?"upcoming":void 0,pe=(0,l.useMemo)((()=>(({size:e,isInteractive:t,isUpcoming:i,badgeText:o,duration:r,noExtendedBadge:n})=>{const a=r?(0,L.a)(r):"";return"s"===e&&t?a:"m"===e&&i||n?o||"":[o,a].filter(Boolean).join(" · ")})({size:z,isInteractive:K,isUpcoming:E,badgeText:C,duration:k,noExtendedBadge:Q})),[z,K,E,C,k,Q]),me=D[H];return(0,o.FD)(I,{activate:re,deactivate:ne,focusDisabled:J,hasOverlay:P,videoCardPreviewLabel:ee,children:[(0,o.Y)(g.d,{hasImageHidden:ae&&se,src:a,alt:i,blurred:O,blurSize:j,forceImgCover:oe,children:M?(0,o.Y)(m.D,{type:"loading",children:(0,o.Y)(_.y,{size:"regular",className:(0,c.I)("color_icon_contrast")})}):!x||O||b?te?(0,o.Y)(m.D,{size:$,hovered:U,hoverMode:q,playIconOnHover:te,children:(0,o.Y)(me,{})}):X||Z||le||O||P||!G&&ce?null:(0,o.Y)(m.D,{size:$,hovered:U,hoverMode:q,children:(0,o.Y)(me,{})}):(0,o.Y)(m.D,{type:"muted",children:(0,o.Y)(s.f,{})})}),!Z&&n&&ce&&(0,o.Y)(T,{active:b,src:n,alt:i,onLoadedData:b?()=>{de(!0)}:void 0}),r&&!_e&&(0,o.Y)(u.s,{gap:4,className:A,children:r.map((e=>(0,o.Y)(h.R,{appearance:"overlay",size:"s",mode:"primary",children:e.title},e.title)))}),(0,o.FD)("div",{className:N,children:[(0,o.Y)(f.z,{type:ue,tooltipText:t,className:B}),he&&(0,o.FD)(h.R,{appearance:"overlay","data-testid":"video_card_preview_publish_date",children:[(0,o.Y)(h.R.IconSlot,{children:(0,o.Y)(d.B,{})}),W]})]}),(0,o.Y)(R,{shown:!ce||!b,duration:k,viewedDuration:w}),(0,o.Y)(y.F,{type:ve,text:pe,interactive:K,contentType:ie,durationBadgeSize:F})]})}},224519:(e,t,i)=>{i.d(t,{d:()=>p});var o=i(221020),r=i(634164),n=i(815287);const a="vkitVideoCardPreviewImage__container--PxkQy",s="vkitVideoCardPreviewImage__fullSize--kraQj",d="vkitVideoCardPreviewImage__containerVisible--RbEj5",l="vkitVideoCardPreviewImage__img--T637l",c="vkitVideoCardPreviewImage__imgHidden--39qiL",_="vkitVideoCardPreviewImage__imgBlurred--WrQxJ",u="vkitVideoCardPreviewImage__imgContain--46cbv",h="vkitVideoCardPreviewImage__imgCover--xdZTz",v={s:"vkitVideoCardPreviewImage__imgBlurredSizeS--X5kRf",m:"vkitVideoCardPreviewImage__imgBlurredSizeM--WGzof",l:"vkitVideoCardPreviewImage__imgBlurredSizeL--Rtu22",xl:"vkitVideoCardPreviewImage__imgBlurredSizeXl--7RB8n","2xl":"vkitVideoCardPreviewImage__imgBlurredSize2Xl--CByMT"},p=({alt:e,children:t,hasImageHidden:i,src:p,blurred:m,blurSize:g="s",vertical:y,onLoadError:f,width:k,height:w,forceImgCover:b,offsetX:I,offsetY:S})=>{const[E,T]=(0,n.useState)("loading"),[C,O]=(0,n.useState)(y),P="undefined"==typeof window;return(0,o.FD)("div",{className:(0,r.$)(a,s,("loaded"===E||!p||P)&&d),children:["error"!==E&&p&&(0,o.Y)("img",{className:(0,r.$)(l,s,t&&i&&c,m&&_,m&&v[g],C&&u,b&&h),src:p,alt:e,onLoad:e=>{T("loaded"),O(Boolean(e.currentTarget.naturalHeight>e.currentTarget.naturalWidth)&&!b)},onError:()=>{T("error"),f?.()},loading:"lazy",style:void 0===I||void 0===S?{}:{objectPosition:`${I}px ${S}px`,width:k,height:w}}),t]})}},877318:(e,t,i)=>{i.d(t,{U:()=>Ee});var o=i(221020),r=i(927841),n=i(881940),a=i(44348),s=i(660965),d=i(142633),l=i(578544),c=i(867865),_=i(954625),u=i(408844),h=i(181401),v=i(4254),p=i(799091),m=i(518710),g=i(782281),y=i(726756),f=i(762964),k=i(684797),w=i(679313),b=i(87256),I=i(884433),S=i(409724),E=i(480649),T=i(39174),C=i(951867),O=i(272398),P=i(589745),R=i(257460),L=i(40853),A=i(387204),N=i(883113),B=i(447552),D=i(359841),V=i(764001),x=i(289020),M=i(543945),Y=i(518094),z=i(339619),j=i(584342),H=i(504117),$=i(455548),F=i(842321),U=i(347820),q=i(389829),W=i(953008),G=i(588069),K=i(867227),X=i(761490),Q=i(31537),J=i(741700),Z=i(253937),ee=i(251814),te=i(634164),ie=i(187233),oe=i(409698),re=i(516427),ne=i(638945),ae=i(56471),se=i(962644);const de="vkitVideoCardRestrictionOverlay__restriction--MB0lw",le="vkitVideoCardRestrictionOverlay__restrictionBackground--4syXW",ce="vkitVideoCardRestrictionOverlay__title--aD6mL",_e="vkitVideoCardRestrictionOverlay__titleSmall--W8gtN",ue="vkitVideoCardRestrictionOverlay__titleXSmall--yFXBp",he="vkitVideoCardRestrictionOverlay__restrictionLayoutLight--zzLbI",ve="vkitVideoCardRestrictionOverlay__restrictionLayoutDark--8Sdwc",pe="vkitVideoCardRestrictionOverlay__restrictionLayoutDarkBlurred--4Gnz1",me="vkitVideoCardRestrictionOverlay__restrictionLayoutSecondary--Gu01v",ge={delete:r.z,hide:n.G,recent:a.o,info:s.G,lock:d.$,picture:l.g,liveClockBadge:c.t,doNotDisturb:_.L,users3:u.Z,donate:h.h,users:v.I,cancelCircle:p._,report:m.y,block:_.L},ye={delete:g.P,hide:y.A,recent:f.K,info:k.k,lock:w.Z,picture:b.i,liveClockBadge:c.t,doNotDisturb:I.V,users3:S.p,donate:E.F,users:T.I,cancelCircle:C.A,report:O.M,block:I.V},fe={delete:P.p,hide:R.a,recent:L.$,info:A.w,lock:N.z,picture:B.w,liveClockBadge:D.N,doNotDisturb:V.D,users3:x.N,donate:M.v,users:Y.k,cancelCircle:z.g,report:j.k,block:V.D},ke={delete:H.Y,hide:$.V,recent:F.E,info:U.L,lock:q.A,picture:W.k,liveClockBadge:G.K,doNotDisturb:K.M,users3:X.g,donate:Q._,users:J.b,cancelCircle:Z.v,report:ee.J,block:K.M},we={hidden:le,blurred:he,dark:ve,secondary:me,muted:void 0},be=({mode:e,buttonTitle:t,buttonNode:i,onRestrictionButtonClick:r})=>{if(i)return i;if(!r||!t||"blurred"===e)return null;const n=(0,o.Y)(ie.i,{mode:"horizontal",spacing:8,children:(0,o.Y)(oe.$,{mode:"secondary",appearance:"dark"===e?"accent":"neutral",size:"s",onClick:r,children:t})});return"dark"===e?(0,o.Y)(re.SvD,{value:"dark",children:n}):n},Ie=({title:e,titleNode:t,size:i,stretched:r})=>{const n="s"===i||"xs"===i?ne.HL:r?ne.EY:ne.LE,a={s:_e,xs:ue};return t||(e?(0,o.Y)(n,{weight:"xs"===i?"3":"2",className:(0,te.$)(ce,i&&a[i]),level:"xs"===i?"2":"1","data-testid":"video_card_resctriction_overlay_title",children:e}):null)},Se={m:fe,xs:ge,s:ye},Ee=({title:e,titleNode:t,buttonTitle:i,buttonNode:r,iconType:n,mode:a,size:s="m",stretched:d=!1,showTooltip:l,tooltipText:c,tooltipPlacement:_="top",tooltipMaxWidth:u,onRestrictionButtonClick:h})=>{const v=((e,t,i)=>i?(t?ke:Se[e])[i]:null)(s,d,n),p=l&&Boolean(c),m=(0,o.FD)(se.h,{className:(0,te.$)(de,we[a],d&&"blurred"===a&&pe),"data-testid":"video_card_resctriction_overlay",children:[v&&(0,o.Y)(v,{}),!p&&(0,o.FD)(o.FK,{children:[(0,o.Y)(Ie,{size:s,stretched:d,title:e,titleNode:t}),(0,o.Y)(be,{mode:a,buttonTitle:i,buttonNode:r,onRestrictionButtonClick:h})]})]});return p?(0,o.Y)(ae.f,{maxWidth:u,description:c,placement:_,children:m}):m}},940485:(e,t,i)=>{i.d(t,{Q:()=>s});var o=i(221020),r=i(674585),n=i(516427);const a="vkitVideoCardThumb__thumb--VibTP",s=({children:e,href:t,onClick:i,onContextMenu:s,controls:d,hasHover:l,className:c,focusDisabled:_,label:u,getRootRef:h})=>{const v=(0,r.b)({href:t,onClick:i});return(0,o.FD)("div",{className:c,ref:h,children:[(0,o.Y)(n.SB4,{onClick:i,onContextMenu:s,href:t,hasHover:Boolean(l),hasActive:v,className:a,"data-testid":"video_card_thumb","data-video-thumb":!0,tabIndex:_?-1:0,"aria-label":u,children:e}),d]})}}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/core_spa/chunks/13442.b897ffc9.js")}catch(e){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/core_spa/chunks/13442.b897ffc9.js",e),e}