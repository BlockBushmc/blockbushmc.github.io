try{(self.webpackChunkvk=self.webpackChunkvk||[]).push([[25901],{125901:(e,t,s)=>{"use strict";s.d(t,{n:()=>y});var r=s(53565),a=s(47262);class n{get hasCaptchaHandler(){return void 0!==this.captchaHandler}onCaptcha(e){return this.captchaHandler=e,this}processingCaptcha(e){const{captchaHandler:t}=this;return t?new Promise(((s,r)=>{t(e,(e=>new Promise(((t,a)=>{if(e instanceof Error)return a(e),void r(e);s({key:e,validate:{resolve:t,reject:a}})}))))})):Promise.reject(new a.K({code:a.j.MISSING_CAPTCHA_HANDLER,message:"Missing captcha handler"}))}get hasTokenRegenerateHandler(){return void 0!==this.tokenRegenerateHandler}onTokenRegenerate(e){return this.tokenRegenerateHandler=e,this}processingTokenRegenerate(){const{tokenRegenerateHandler:e}=this;return void 0===e?Promise.reject(new a.K({code:a.j.MISSING_TOKEN_REGENERATE_HANDLER,message:"Missing token regenerate handler"})):new Promise(((t,s)=>{e((e=>new Promise(((r,a)=>{if(e instanceof Error)return a(e),void s(e);t({token:e,validate:{resolve:r,reject:a}})}))))}))}}var i=s(783541),o=s.n(i);function c(e,t={}){return`API.${e}(${function(e){return JSON.stringify(e,((t,s)=>"object"==typeof s&&s!==e?String(s):s))}(t)})`}class u{toString(){return c(this.method,this.params)}buildParams(e={}){const{options:{token:t,version:s,language:r}}=this.api;return Object.fromEntries([...Object.entries({...!this.isCustomMethod&&{v:s,access_token:t},lang:r,...e}),...this.api.globalParams.entries()].filter((([,e])=>void 0!==e)))}get filteredParams(){return this.buildParams(this.params)}get isCustomMethod(){const{requestMethod:e}=this.api.options;return"function"==typeof e}async make(){const{options:{timeout:e,requestMethod:t}}=this.api;this.timeout=setTimeout((()=>this.options.abortController?.abort()),e);try{return this.isCustomMethod?await this.custom():await this[t]()}finally{clearTimeout(this.timeout)}}fetch(){const{abortController:e,body:t}=this.options,{options:{baseUrl:s}}=this.api,r=new URL(`/method/${this.method}`,s);return void 0!==t&&(r.search=new URLSearchParams(this.buildParams()).toString()),fetch(r,{method:"POST",signal:e?.signal,headers:{connection:"keep-alive"},body:t??new URLSearchParams(this.filteredParams)}).then((e=>e.json()))}bridge(){const{abortController:e}=this.options;return new Promise(((t,s)=>{e?.signal.aborted&&s(e.signal.reason),e?.signal.addEventListener("abort",(()=>{s(e.signal.reason)})),o().send("VKWebAppCallAPIMethod",{method:this.method,params:this.filteredParams}).then(t).catch((e=>{const{error_data:s}=e;t({error:s?.error_reason||s||e})}))}))}script(){const{abortController:e}=this.options,{options:{baseUrl:t}}=this.api;return new Promise(((s,r)=>{e?.signal.aborted&&r(e.signal.reason);const a=function(e){const t="abcdefghijklmnopqrstuvwxyz";let s="";for(let r=0;r<e;r++)s+=t.charAt(Math.floor(26*Math.random()));return s}(20),n=new URLSearchParams(this.filteredParams);n.set("callback",a);const i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=new URL(`/method/${this.method}?${n}`,t).toString(),window[a]=e=>{i.remove(),delete window[a],s(e)},e?.signal.addEventListener("abort",(()=>{i.remove(),delete window[a],r(e.signal.reason)})),document.head.appendChild(i)}))}custom(){const{abortController:e}=this.options,{requestMethod:t}=this.api.options;if("function"==typeof t)return new Promise(((s,r)=>{e?.signal.aborted&&r(e.signal.reason),e?.signal.addEventListener("abort",(()=>{r(e.signal.reason)})),t(this.method,this.filteredParams).then(s).catch(r)}))}constructor({api:e,method:t,params:s={},options:r={}}){var a;this.retries=0,this.api=e,this.method=t,this.params={...s},this.options={...r},(a=this.options).abortController??(a.abortController=new AbortController),this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}var p=s(571559),d=s(922244);class h{enqueue(e){this.queue.push(e),this.immediateHeat()}requeue(e){this.queue.unshift(e),this.immediateHeat()}pause(){this.paused=!0}resume(){this.paused=!1,this.immediateHeat()}heat(){if(this.paused||this.busy||!this.queue.length)return;this.busy=!0;const{requestMode:e}=this.api.options;this[e]()}sequential(){this.execute(),setTimeout((()=>{this.busy=!1,this.immediateHeat()}),this.intervalPerRequests)}burst(){const e=Math.min(this.api.options.limit,this.queue.length);for(let t=0;t<e&&0!==this.queue.length;t+=1)this.execute();const t=Math.ceil(d.qi-e*this.intervalPerRequests);setTimeout((()=>{this.busy=!1,this.immediateHeat()}),t<=0?d.qi:t)}immediateHeat(){setTimeout((()=>this.heat()))}constructor(e){this.busy=!1,this.paused=!1,this.queue=[],this.api=e,this.intervalPerRequests=Math.ceil(d.qi/this.api.options.limit)}}class l extends a.K{constructor(e){const t=Number(e.error_code);switch(super({code:t,message:`Code №${t} - ${e.error_msg}`}),this.params=e.request_params,t===p.tJZ&&(this.captchaSid=Number(e.captcha_sid),this.captchaImg=e.captcha_img),t){case p.tJZ:this.captchaSid=Number(e.captcha_sid),this.captchaImg=e.captcha_img;break;case p.rfW:this.redirectUri=e.redirect_uri;break;case p.x0k:this.confirmationText=e.confirmation_text}}}class m extends l{constructor(e){super({error_code:e.error_code,error_msg:e.error_msg,request_params:[]}),this.method=e.method}}var f=s(255238);class b extends h{async execute(e){if(e||(e=this.queue.shift()),!e)return;const{method:t}=e;let s;try{s=await e.make()}catch(t){const{options:s}=this.api;return e.retries===s.limit?(e.captchaValidate?.reject(t),void e.reject(t)):(e.retries+=1,await(0,f.u)(s.wait),void this.requeue(e))}void 0===s.error?(e.captchaValidate?.resolve(),t.startsWith("execute")?e.resolve({response:s.response,errors:(s.execute_errors||[]).map((e=>new m(e)))}):e.resolve(s.response??s)):this.handleError(e,new l(s.error))}async handleError(e,t){const{code:s}=t,{options:r}=this.api;if(e.retries!==r.limit){if(e.retries+=1,s===p.DwS)return this.paused?void this.requeue(e):(this.pause(),await(0,f.u)(d.qi),this.requeue(e),void this.resume());if(e.captchaValidate?.reject(t),e.tokenRegenerateValidate?.reject(t),s===p.tJZ&&this.api.hasCaptchaHandler)try{const{captchaSid:s}=t,{key:r,validate:a}=await this.api.processingCaptcha({type:d.Ni.API,src:t.captchaImg,sid:s,request:e});e.captchaValidate=a,e.params.captcha_sid=s,e.params.captcha_key=r,this.requeue(e)}catch(t){e.reject(t)}else if(s===p.vdv&&this.api.hasTokenRegenerateHandler)try{const{token:t,validate:s}=await this.api.processingTokenRegenerate();this.api.options.token=t,e.tokenRegenerateValidate=s,await(0,f.u)(d.qi),this.requeue(e)}catch(t){e.reject(t)}else e.reject(t)}else e.reject(t)}}class v extends b{async execute(){const{queue:e}=this;if(this.isAllowedMethod(e[0].method))return void super.execute();const{executeCount:t}=this.api.options,s=[];for(let r=0;r<this.queue.length&&(this.isAllowedMethod(e[r].method)||(s.push(e.splice(r,1)[0]),r-=1,!(s.length>=t)));r+=1);if(0===s.length)return;const r=new u({api:this.api,method:"execute",params:{code:(a=s.map(String),`return [${a.join(",")}];`)}});var a;super.execute(r);try{!function(e,t){let s=0;t.response.forEach(((r,a)=>{const n=e[a];!1===r?(n.reject(t.errors[s]),s++):n.resolve(r)}))}(s,await r.promise)}catch(e){for(const t of s)t.reject(e)}}isAllowedMethod(e){return e.startsWith("execute")||this.api.options.executeUnsupportedMethods.includes(e)}}const g=["account","accountPersonal","accountVerification","achievements","actionLinks","adex","admin","admins","ads","adsint","adsweb","antispam","appWidgets","apps","appsModeration","appsSDK","articles","assets","audio","audioAdmin","audioBooks","audioSearch","auth","authorsMarketplace","autotests","backoffice","badges","bandLink","bestFriends","bid","biz","blogforce","board","bot","botsConf","botscores","bugtracker","bugtrackerAdmin","businessGroups","calls","callsOk","captcha","captchaNotRobot","cashout","catalog","channels","classifieds","combo","communitySubscriptions","coupons","crowd","crowdAdmin","crowdCustomer","crowdService","cua","database","devAdmin","docs","documentation","donut","downloadedGames","ecosystem","ecosystemManager","education","educationCloud","educationEjd","educationExercise","educationExternal","educationMembership","educationOrganization","educationParents","educationPolls","educationReport","educationSchool","educationUser","email","esia","eventHub","exchange","exchangeRates","execute","explore","externalAudioMatching","fave","feedbacks","finance","findMe","fortuneSquare","fortuneWheel","friends","gamesPromo","geo","gifts","giftsCatalog","goodsOrders","government","groups","healthApp","healthCommon","healthCourses","healthFeed","healthLoyalty","healthSteps","healthWorkouts","id","identity","internal","jobs","kidsCollection","leadForms","likes","lovina","loyaltyTeen","market","marketIntegrations","marusia","masks","massClaim","meEducation","memories","messages","messagesEdu","microlandings","moderation","moderationMark","money","multiaccount","music","musicAdmin","musicManager","musicSubscriptions","narratives","newsfeed","nft","nftAdmin","nftMarket","nospam","notes","notifications","odnoklassniki","onboarding","orders","pages","payments","phones","photos","places","platform","platformConsole","podcasts","podcastsOffice","polls","prettyCards","promoCodes","questions","queue","recomSettings","reports","restore","rewardedAds","rightholders","safety","search","secure","serverEffects","serviceBooking","services","settings","settingsGeneral","shortVideo","shortVideoAdmin","situationalSuggests","sms","social","spaces","specials","splashscreens","splashscreensAdmin","statEvents","stats","statsDashboard","status","stickers","storage","store","stories","streaming","strikeSystem","studentsVerification","studio","superApp","superAppPromo","support","supportInternal","tabbar","tags","testlib","textlives","tickets","tinkoff","translations","uma","unitedContentPlatform","userActionLog","userLinking","users","utils","uxpolls","verification","video","videoPostcards","vkCharity","vkIdB2BHub","vkIdHub","vkMaps","vkMusic","vkProtect","vkRun","vkStart","vkUp","vkidmail","vkidok","vkstore","vmoji","voicerooms","wall","weather","widgets","widgetsIOS","widgetsKit","wishlists","zeus"];var A,E,w,_=s(45859);!function(e){e.PARALLEL="parallel",e.SEQUENTIAL="sequential"}(A||(A={})),function(e){e.SEQUENTIAL="sequential",e.BURST="burst"}(E||(E={})),function(e){e.FETCH="fetch",e.SCRIPT="script",e.BRIDGE="bridge"}(w||(w={}));const S="undefined"!=typeof window&&window.vk?.apiConfigDomains?.apiDomain||"api.vk.com";class y extends n{setOptions(e){this.options={...this.options,...e}}execute(e){return this.call("execute",e)}procedure(e,t){return this.call(`execute.${e}`,t)}call(e,t){return this.callWithRequest(new u({method:e,params:t,api:this}))}callWithRequest(e){return this.worker.enqueue(e),e.promise}getWorker(){switch(this.options.mode){case A.PARALLEL:return new v(this);case A.SEQUENTIAL:return new b(this)}}constructor(e,t={}){super(),this.globalParams=new Map,this.options={token:"",mode:A.SEQUENTIAL,requestMode:E.SEQUENTIAL,requestMethod:w.FETCH,wait:3e3,limit:3,bridge:!1,version:r.m,baseUrl:`https://${S}`,retryLimit:3,timeout:6e4,executeCount:25,language:"ru",executeUnsupportedMethods:["photos.save","photos.saveWallPhoto","photos.saveOwnerPhoto","photos.saveMessagesPhoto","messages.setChatPhoto","photos.saveMarketPhoto","photos.saveMarketAlbumPhoto","audio.save","docs.save","photos.saveOwnerCoverPhoto","stories.save","polls.savePhoto"],logError:()=>{},...e};for(const t of g)this[t]=new Proxy(Object.create(null),{get:(s,r)=>(s,a)=>{if("toJSON"!==r)return this.callWithRequest(new u({api:this,method:`${t}.${r}`,params:s,options:a}));e.logError&&e.logError(new Error("Internal API: Unsupported api method toJSON"))}});this.worker=this.getWorker(),this.updates=new _.LV(this,t)}}},922244:(e,t,s)=>{"use strict";s.d(t,{$0:()=>r,Ni:()=>n,qi:()=>a});const r=10,a=1133;var n;!function(e){e.API="API",e.DIRECT_AUTH="DIRECT_AUTH",e.IMPLICIT_FLOW_AUTH="IMPLICIT_FLOW_AUTH",e.ACCOUNT_VERIFICATION="ACCOUNT_VERIFICATION"}(n||(n={}))},47262:(e,t,s)=>{"use strict";var r;s.d(t,{K:()=>a,j:()=>r}),function(e){e.UNSUPPORTED_MODE="UNSUPPORTED_MODE",e.MISSING_CAPTCHA_HANDLER="MISSING_CAPTCHA_HANDLER",e.MISSING_TOKEN_REGENERATE_HANDLER="MISSING_TOKEN_REGENERATE_HANDLER"}(r||(r={}));class a extends Error{constructor({code:e,message:t}){super(t),this.code=e,this.name=this.constructor.name}}},6456:(e,t,s)=>{"use strict";var r;s.d(t,{g:()=>r,w:()=>a}),function(e){e.UGC_USER_UPDATE="ugc_user_update",e.UGC_PACK_UPDATE="ugc_pack_update",e.UGC_OWNER_UPDATE="ugc_owner_update",e.UGC_STICKER_UPDATE="ugc_sticker_update",e.CACHE_UPDATE="cache_update"}(r||(r={}));class a extends CustomEvent{constructor(e,t){super(e,{detail:t})}}},45859:(e,t,s)=>{"use strict";s.d(t,{LV:()=>A,sj:()=>m});var r,a=s(47262);class n extends a.K{}class i{hasEventListener(e,t,s){return this.listeners.some((r=>!(!s||r.id!==s)||r.type===e&&r.listener===t))}addEventListener(e,t,s={},r){return this.hasEventListener(e,t,r)||this.listeners.push({type:e,listener:t,options:s,id:r}),this}removeEventListener(e,t,s){if(s)return this.listeners=this.listeners.filter((e=>e.id!==s)),this;const r=this.listeners.findIndex((s=>s.type===e&&s.listener===t));return-1!==r&&this.listeners.splice(r,1),this}removeEventListeners(){return this.listeners=[],this}dispatchEvent(e){return this.listeners.filter((t=>t.type===e.type)).forEach((t=>{const{type:s,listener:r,options:{once:a}}=t;r.call(this,e),a&&this.removeEventListener(s,r)})),this}constructor(){this.listeners=[]}}!function(e){e.AVATAR="avatar",e.STICKERS="stickers",e.CHARACTER="character",e.STICKERS_PRINT_REQUEST="stickers_print_request"}(r||(r={}));class o extends CustomEvent{constructor(e,t){super(e,{detail:t})}}var c=s(6456);class u extends c.w{constructor(e){super(c.g.UGC_USER_UPDATE,e)}}class p extends c.w{constructor(e){super(c.g.UGC_USER_UPDATE,e)}}class d extends c.w{constructor(e){super(c.g.UGC_OWNER_UPDATE,e)}}class h extends c.w{constructor(e){super(c.g.UGC_STICKER_UPDATE,e)}}class l extends c.w{constructor(e){super(c.g.CACHE_UPDATE,e)}}var m,f,b,v=s(255238),g=s(922244);!function(e){e.USER="user",e.GROUP="group",e.VMOJI="vmoji",e.STICKERS="stickers"}(m||(m={})),function(e){e.CHECK="a_check",e.RELEASE="a_release"}(f||(f={})),function(e){e.NEED_RESTART="NEED_RESTART",e.POLLING_REQUEST_FAILED="POLLING_REQUEST_FAILED"}(b||(b={}));class A extends i{async start(){if(!this.started){this.started=!0;try{const e=await this.getLongPollServer();if(!e)return;const{server:t,key:s,ts:r}=e;switch(0===this.ts&&(this.ts=r),this.url=new URL(t),this.url.searchParams.set("key",s),this.url.searchParams.set("act",f.CHECK),this.url.searchParams.set("wait","25"),this.url.searchParams.set("mode",String(this.mode)),this.url.searchParams.set("version",String(g.$0)),this.source){case m.VMOJI:case m.STICKERS:this.url.searchParams.set("id",String(this.userId))}this.startFetchLoop()}catch(e){throw this.started=!1,e}}}async getLongPollServer(){let e;switch(this.source){case m.GROUP:e=await this.api.groups.getLongPollServer({group_id:this.groupId});break;case m.VMOJI:case m.STICKERS:e=await this.api[this.source].subscribeToQueue().then((({base_url:e,...t})=>({server:e,...t})));break;default:return}const{server:t}=e;return e.server=`${t.startsWith("https")?"":"https://"}${t}`,e}async stop(){this.started=!1,this.restarted=0}async startFetchLoop(){try{for(;this.started;)await this.fetchUpdates()}catch(e){if(e.code!==b.NEED_RESTART&&this.restarted!==this.retryLimit)return this.restarted+=1,await(0,v.u)(3e3),void this.startFetchLoop();for(;this.started;)try{await this.stop(),await this.start();break}catch(e){console.log(e),this.started=!0,await(0,v.u)(this.wait)}}}async fetchUpdates(){this.url.searchParams.set("ts",String(this.ts));const e=new AbortController,t=setTimeout((()=>e.abort()),3e4);let s;try{const t=await fetch(this.url,{method:"GET",signal:e.signal,headers:{connection:"keep-alive"},credentials:"include",mode:"cors"});if(!t.ok)throw new n({code:b.POLLING_REQUEST_FAILED,message:"Polling request failed"});s=await t.json()}finally{clearTimeout(t)}if(void 0!==s.failed){if(1===s.failed)return void(this.ts=s.ts);throw this.ts=0,new n({code:b.NEED_RESTART,message:"The server has been failed"})}this.restarted=0,this.ts=s.ts,s.pts&&(this.pts=Number(s.pts)),s.updates=s.updates||s.events||[];for(const e of s.updates)this.handleUpdate(e)}handleUpdate(e){switch(this.source){case m.VMOJI:!function(e,{data:t}){const{type:s,query_id:r}=t;r&&e.dispatchEvent(new o(r,t)),e.dispatchEvent(new o(s,t))}(this,e);break;case m.STICKERS:!function(e,{data:t}){const{type:s}=t;switch(s){case c.g.UGC_PACK_UPDATE:e.dispatchEvent(new u(t));break;case c.g.UGC_USER_UPDATE:e.dispatchEvent(new p(t));break;case c.g.UGC_OWNER_UPDATE:e.dispatchEvent(new d(t));break;case c.g.UGC_STICKER_UPDATE:e.dispatchEvent(new h(t));break;case c.g.CACHE_UPDATE:e.dispatchEvent(new l(t))}}(this,e)}}constructor(e,t={}){super(),this.mode=202,this.started=!1,this.ts=0,this.pts=0,this.restarted=0,this.api=e;const{source:s,userId:r,groupId:a,wait:n,retryLimit:i}=t;this.source=s,this.userId=r,this.groupId=a,this.wait=n||3e3,this.retryLimit=i||3}}},255238:(e,t,s)=>{"use strict";function r(e){return new Promise((t=>{setTimeout(t,e)}))}s.d(t,{u:()=>r})},783541:function(e,t){!function(e){"use strict";var t=function(){return t=Object.assign||function(e){for(var t,s=1,r=arguments.length;s<r;s++)for(var a in t=arguments[s])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},t.apply(this,arguments)};function s(e,t,s,r){return new(s||(s=Promise))((function(a,n){function i(e){try{c(r.next(e))}catch(e){n(e)}}function o(e){try{c(r.throw(e))}catch(e){n(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof s?t:new s((function(e){e(t)}))).then(i,o)}c((r=r.apply(e,t||[])).next())}))}function r(e,t){var s,r,a,n,i={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return n={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(n[Symbol.iterator]=function(){return this}),n;function o(o){return function(c){return function(o){if(s)throw new TypeError("Generator is already executing.");for(;n&&(n=0,o[0]&&(i=0)),i;)try{if(s=1,r&&(a=2&o[0]?r.return:o[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,o[1])).done)return a;switch(r=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return i.label++,{value:o[1],done:!1};case 5:i.label++,r=o[1],o=[0];continue;case 7:o=i.ops.pop(),i.trys.pop();continue;default:if(!((a=(a=i.trys).length>0&&a[a.length-1])||6!==o[0]&&2!==o[0])){i=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){i.label=o[1];break}if(6===o[0]&&i.label<a[1]){i.label=a[1],a=o;break}if(a&&i.label<a[2]){i.label=a[2],i.ops.push(o);break}a[2]&&i.ops.pop(),i.trys.pop();continue}o=t.call(e,i)}catch(e){o=[6,e],r=0}finally{s=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function a(e,t,s){if(s||2===arguments.length)for(var r,a=0,n=t.length;a<n;a++)!r&&a in t||(r||(r=Array.prototype.slice.call(t,0,a)),r[a]=t[a]);return e.concat(r||Array.prototype.slice.call(t))}function n(e,s,r){var a=function(e){var t={current:0,next:function(){return++this.current}},s={};return{add:function(r,a){var n=null!=a?a:"".concat(t.next(),"_").concat(e);return s[n]=r,n},resolve:function(e,t,r){var a=s[e];a&&(r(t)?a.resolve(t):a.reject(t),s[e]=null)}}}(r);return s((function(e){if(e.detail&&e.detail.data&&"object"==typeof e.detail.data&&"request_id"in e.detail.data){var t=e.detail.data,s=t.request_id,r=function(e,t){var s={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(s[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(s[r[a]]=e[r[a]])}return s}(t,["request_id"]);s&&a.resolve(s,r,(function(e){return!("error_type"in e)}))}})),function(s,r){return void 0===r&&(r={}),new Promise((function(n,i){var o=a.add({resolve:n,reject:i},r.request_id);e(s,t(t({},r),{request_id:o}))}))}}var i,o,c,u,p,d,h,l,m,f,b,v="undefined"!=typeof window,g=Boolean(v&&window.AndroidBridge),A=Boolean(v&&window.webkit&&window.webkit.messageHandlers&&window.webkit.messageHandlers.VKWebAppClose),E=Boolean(v&&window.ReactNativeWebView&&"function"==typeof window.ReactNativeWebView.postMessage),w=v&&!g&&!A,_=w&&/(^\?|&)vk_platform=mobile_web(&|$)/.test(location.search),S=w?"message":"VKWebAppEvent",y=a(["VKWebAppInit","VKWebAppGetCommunityAuthToken","VKWebAppAddToCommunity","VKWebAppAddToHomeScreenInfo","VKWebAppClose","VKWebAppCopyText","VKWebAppCreateHash","VKWebAppGetUserInfo","VKWebAppSetLocation","VKWebAppSendToClient","VKWebAppGetClientVersion","VKWebAppGetPhoneNumber","VKWebAppGetEmail","VKWebAppGetGroupInfo","VKWebAppGetGeodata","VKWebAppGetCommunityToken","VKWebAppGetConfig","VKWebAppGetLaunchParams","VKWebAppSetTitle","VKWebAppGetAuthToken","VKWebAppCallAPIMethod","VKWebAppJoinGroup","VKWebAppLeaveGroup","VKWebAppAllowMessagesFromGroup","VKWebAppDenyNotifications","VKWebAppAllowNotifications","VKWebAppOpenPayForm","VKWebAppOpenApp","VKWebAppShare","VKWebAppShowWallPostBox","VKWebAppScroll","VKWebAppShowOrderBox","VKWebAppShowLeaderBoardBox","VKWebAppShowInviteBox","VKWebAppShowRequestBox","VKWebAppAddToFavorites","VKWebAppShowStoryBox","VKWebAppStorageGet","VKWebAppStorageGetKeys","VKWebAppStorageSet","VKWebAppFlashGetInfo","VKWebAppSubscribeStoryApp","VKWebAppOpenWallPost","VKWebAppCheckAllowedScopes","VKWebAppCheckBannerAd","VKWebAppHideBannerAd","VKWebAppShowBannerAd","VKWebAppCheckNativeAds","VKWebAppShowNativeAds","VKWebAppRetargetingPixel","VKWebAppConversionHit","VKWebAppShowSubscriptionBox","VKWebAppCheckSurvey","VKWebAppShowSurvey","VKWebAppScrollTop","VKWebAppScrollTopStart","VKWebAppScrollTopStop","VKWebAppShowSlidesSheet","VKWebAppTranslate","VKWebAppRecommend","VKWebAppAddToProfile","VKWebAppGetFriends"],w&&!_?["VKWebAppResizeWindow","VKWebAppAddToMenu","VKWebAppShowInstallPushBox","VKWebAppShowCommunityWidgetPreviewBox","VKWebAppCallStart","VKWebAppCallJoin","VKWebAppCallGetStatus"]:["VKWebAppShowImages"],!0),k=v?window.AndroidBridge:void 0,P=A?window.webkit.messageHandlers:void 0,R=w?parent:void 0;e.EAdsFormats=void 0,(o=e.EAdsFormats||(e.EAdsFormats={})).REWARD="reward",o.INTERSTITIAL="interstitial",e.BannerAdLayoutType=void 0,(c=e.BannerAdLayoutType||(e.BannerAdLayoutType={})).RESIZE="resize",c.OVERLAY="overlay",e.BannerAdLocation=void 0,(u=e.BannerAdLocation||(e.BannerAdLocation={})).TOP="top",u.BOTTOM="bottom",e.BannerAdAlign=void 0,(p=e.BannerAdAlign||(e.BannerAdAlign={})).LEFT="left",p.RIGHT="right",p.CENTER="center",e.BannerAdHeightType=void 0,(d=e.BannerAdHeightType||(e.BannerAdHeightType={})).COMPACT="compact",d.REGULAR="regular",e.BannerAdOrientation=void 0,(h=e.BannerAdOrientation||(e.BannerAdOrientation={})).HORIZONTAL="horizontal",h.VERTICAL="vertical",e.EGrantedPermission=void 0,(l=e.EGrantedPermission||(e.EGrantedPermission={})).CAMERA="camera",l.LOCATION="location",l.PHOTO="photo",e.EGetLaunchParamsResponseLanguages=void 0,(m=e.EGetLaunchParamsResponseLanguages||(e.EGetLaunchParamsResponseLanguages={})).RU="ru",m.UK="uk",m.UA="ua",m.EN="en",m.BE="be",m.KZ="kz",m.PT="pt",m.ES="es",e.EGetLaunchParamsResponseGroupRole=void 0,(f=e.EGetLaunchParamsResponseGroupRole||(e.EGetLaunchParamsResponseGroupRole={})).ADMIN="admin",f.EDITOR="editor",f.MEMBER="member",f.MODER="moder",f.NONE="none",e.EGetLaunchParamsResponsePlatforms=void 0,(b=e.EGetLaunchParamsResponsePlatforms||(e.EGetLaunchParamsResponsePlatforms={})).DESKTOP_WEB="desktop_web",b.DESKTOP_WEB_MESSENGER="desktop_web_messenger",b.DESKTOP_APP_MESSENGER="desktop_app_messenger",b.MOBILE_WEB="mobile_web",b.MOBILE_ANDROID="mobile_android",b.MOBILE_ANDROID_MESSENGER="mobile_android_messenger",b.MOBILE_IPHONE="mobile_iphone",b.MOBILE_IPHONE_MESSENGER="mobile_iphone_messenger",b.MOBILE_IPAD="mobile_ipad";var T=function(e){var t=void 0,o=[],c=Math.random().toString(36).substring(2,5);function u(e){o.push(e)}function p(e){return g?!(!k||"function"!=typeof k[e]):A?!(!P||!P[e]||"function"!=typeof P[e].postMessage):!!w&&y.includes(e)}function d(){return A||g}function h(){return w&&window.parent!==window}function l(){return d()||h()}function m(e){if(A||g)return a([],o,!0).map((function(t){return t.call(null,e)}));var s=null==e?void 0:e.data;if(w&&s){if(E&&"string"==typeof s)try{s=JSON.parse(s)}catch(e){}var r=s.type,n=s.data,i=s.frameId;r&&("VKWebAppSettings"!==r?a([],o,!0).map((function(e){return e({detail:{type:r,data:n}})})):t=i)}}E&&/(android)/i.test(navigator.userAgent)?document.addEventListener(S,m):"undefined"!=typeof window&&"addEventListener"in window&&window.addEventListener(S,m);var f=n((function(s,r){k&&k[s]?k[s](JSON.stringify(r)):P&&P[s]&&"function"==typeof P[s].postMessage?P[s].postMessage(r):E?window.ReactNativeWebView.postMessage(JSON.stringify({handler:s,params:r})):R&&"function"==typeof R.postMessage&&R.postMessage({handler:s,params:r,type:"vk-connect",webFrameId:t,connectVersion:e},"*")}),u,c);return u((function(e){e.detail&&"SetSupportedHandlers"===e.detail.type&&(i=new Set(e.detail.data.supportedHandlers))})),{send:f,sendPromise:f,subscribe:u,unsubscribe:function(e){var t=o.indexOf(e);t>-1&&o.splice(t,1)},supports:function(e){return console.warn("bridge.supports method is deprecated. Use bridge.supportsAsync instead."),p(e)},supportsAsync:function(e){return s(this,void 0,void 0,(function(){var t;return r(this,(function(s){switch(s.label){case 0:if(g||A)return[2,p(e)];if(i)return[2,i.has(e)];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,f("SetSupportedHandlers")];case 2:return t=s.sent(),i=new Set(t.supportedHandlers),[3,4];case 3:return s.sent(),i=new Set(["VKWebAppInit"]),[3,4];case 4:return[2,i.has(e)]}}))}))},isWebView:d,isIframe:h,isEmbedded:l,isStandalone:function(){return!l()}}}("2.15.9");e.applyMiddleware=function e(){for(var s=[],r=0;r<arguments.length;r++)s[r]=arguments[r];return s.includes(void 0)||s.includes(null)?e.apply(void 0,s.filter((function(e){return"function"==typeof e}))):function(e){if(0===s.length)return e;var r,a={subscribe:e.subscribe,send:function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return e.send.apply(e,t)}},n=s.filter((function(e){return"function"==typeof e})).map((function(e){return e(a)})).reduce((function(e,t){return function(s){return e(t(s))}}));return r=n(e.send),t(t({},e),{send:r})}},e.default=T,e.parseURLSearchParamsForGetLaunchParams=function(t){var s={};try{new URLSearchParams(t).forEach((function(t,r){switch(r){case"vk_ts":case"vk_is_recommended":case"vk_profile_id":case"vk_has_profile_button":case"vk_testing_group_id":case"vk_user_id":case"vk_app_id":case"vk_group_id":s[r]=Number(t);break;case"sign":case"vk_chat_id":case"vk_ref":case"vk_access_token_settings":s[r]=t;break;case"odr_enabled":s.odr_enabled="1"===t?1:void 0;break;case"vk_is_app_user":case"vk_are_notifications_enabled":case"vk_is_favorite":s[r]=function(e){switch(e){case"0":return 0;case"1":return 1;default:return}}(t);break;case"vk_language":s.vk_language=function(t){return Object.values(e.EGetLaunchParamsResponseLanguages).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_viewer_group_role":s.vk_viewer_group_role=function(t){return Object.values(e.EGetLaunchParamsResponseGroupRole).some((function(e){return e===t}))}(t)?t:void 0;break;case"vk_platform":s.vk_platform=function(t){return Object.values(e.EGetLaunchParamsResponsePlatforms).some((function(e){return e===t}))}(t)?t:void 0}}))}catch(e){console.warn(e)}return s},Object.defineProperty(e,"__esModule",{value:!0})}(t)}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/core_spa/chunks/25901.596e216e.js")}catch(e){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/core_spa/chunks/25901.596e216e.js",e),e}