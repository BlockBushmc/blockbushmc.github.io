try{(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[47211],{393856:(e,t,i)=>{i.d(t,{AudioRecomsOnboarding:()=>A});var s=i(434518),o=i(763812),n=i(716860),r=i(553608),a=i(867366),h=i(965539),d=i(459899),c=i(246429),_=i(936011),l=i(983567),u=i(502722),p=i(754866),b=i(558137),g=i(540462),f=(0,o._)("_audioPage"),v=(0,o._)("_musicMixBlockEvents"),y=(0,o._)("_fetchService"),m=(0,o._)("_needSkipOnbording"),w=(0,o._)("_isFinalScreenAvailableForRestoration"),O=(0,o._)("_restoreFinalScreen"),S=(0,o._)("_show"),P=(0,o._)("_connectEvents");class A{init(){(0,s._)(this,P)[P]()}constructor(){Object.defineProperty(this,S,{value:E}),Object.defineProperty(this,P,{value:j}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),(0,s._)(this,f)[f]=d.AudioPageProxy.ensure(),(0,s._)(this,v)[v]=u.AudioCatalogMusicMixEmitter.ensure().listenable,(0,s._)(this,y)[y]=new n.AudioRecomsOnboardingFetchService}}async function E(e){const t=(0,s._)(A,w)[w];if(e?.onlyFinalScreen&&!t)return;if(e?.checkNeedSkipOnboarding&&(0,s._)(A,m)[m])return void e?.onClose?.();const i=document.querySelector("#box_loader"),o=document.querySelector("#box_layer_wrap");(0,p.show)(i),(0,p.show)(o),(0,c.boxRefreshCoords)(i);const n=await(0,s._)(this,y)[y].fetch(e?.fetchParams);(0,p.hide)(i);let r=!1;if(e?.restoreFinalScreen&&t)(0,s._)(A,O)[O](),r=!0;else if(n){new h.AudioRecomsOnboardingMainScreen(n,{onClose:e?.onClose,onFinish:e?.onFinish}).show(),r=!0}r||(e?.onClose?.(),(0,p.hide)(o))}function j(){const e=(0,g.partConfigEnabled)("audio_recoms_onboarding_entry_points");(0,s._)(this,f)[f].events.on(d.AudioPageEventType.AudioRecomsOnboardingShowRequested,(({reason:t,payload:i})=>{switch(t){case d.AudioRecomsOnboardingShowRequestedEventReason.AudioPageInit:return void(0,s._)(this,S)[S]({onlyFinalScreen:!0,restoreFinalScreen:!0,fetchParams:{loadScript:!0},onFinish(){window.nav.reload()}});case d.AudioRecomsOnboardingShowRequestedEventReason.Navigation:return void(0,s._)(this,S)[S]({restoreFinalScreen:!0,onClose:()=>{(0,s._)(A,m)[m]=!0,(0,s._)(this,y)[y].notifySkipOnboarding(),window.nav.change({popup:!1})},onFinish:()=>{window.nav.change({popup:!1}),window.nav.reload()}});case d.AudioRecomsOnboardingShowRequestedEventReason.RecommendationsPlaylistOpenButton:{if(!e)return;const{id:t,ownerId:o,accessHash:n,context:r}=i;return void(0,s._)(this,S)[S]({checkNeedSkipOnboarding:!0,onClose:()=>{(0,s._)(A,m)[m]=!0,(0,s._)(this,y)[y].notifySkipOnboarding(),(0,_.showAudioPlaylist)(o,t,n,r)},onFinish:async()=>{(0,s._)(A,m)[m]=!0,(0,s._)(this,f)[f].reloadGeneralSectionData((()=>{(0,_.showAudioPlaylist)(o,t,n,r)}))}})}case d.AudioRecomsOnboardingShowRequestedEventReason.RecommendationsPlaylistPlayButton:{if(!e)return;const{id:t,ownerId:o,accessHash:n,context:r}=i;return void(0,s._)(this,S)[S]({checkNeedSkipOnboarding:!0,onClose:()=>{const e=(0,l.getAudioPlayer)();(0,s._)(A,m)[m]=!0,(0,s._)(this,y)[y].notifySkipOnboarding(),e.playPlaylist(o,t,n,r)},onFinish:()=>{const e=(0,l.getAudioPlayer)();(0,s._)(A,m)[m]=!0,(0,s._)(this,f)[f].reloadGeneralSectionData((()=>{e.playPlaylist(o,t,n,r)}))}})}case d.AudioRecomsOnboardingShowRequestedEventReason.VibeRecommendationsPlaylistPlayButton:{if(!e)return;const{id:t,ownerId:o,accessHash:n,context:r}=i;return void(0,s._)(this,S)[S]({checkNeedSkipOnboarding:!0,onClose:()=>{const e=(0,l.getAudioPlayer)();(0,s._)(A,m)[m]=!0,(0,s._)(this,y)[y].notifySkipOnboarding(),e.playPlaylist(o,t,n,r)},onFinish:()=>{const e=(0,l.getAudioPlayer)();(0,s._)(A,m)[m]=!0,(0,s._)(this,f)[f].reloadGeneralSectionData((()=>{e.playPlaylist(o,t,n,r)}))}})}case d.AudioRecomsOnboardingShowRequestedEventReason.Unknown:return console.warn("AudioRecomsOnboarding is shown for an unknown reason"),void(0,s._)(this,S)[S]()}})),(0,s._)(this,v)[v].once(u.AudioCatalogMusicMixBlockEventType.AudioRecomsOnboardingShowRequested,(({onHideOnboarding:t})=>{e&&(0,s._)(this,S)[S]({checkNeedSkipOnboarding:!0,onClose:()=>{(0,s._)(A,m)[m]=!0,(0,s._)(this,y)[y].notifySkipOnboarding(),t()},onFinish:()=>{(0,s._)(A,m)[m]=!0,(0,s._)(this,f)[f].reloadGeneralSectionData((()=>{t()}))}})}))}Object.defineProperty(A,m,{get:function(){return Boolean(r.vkLocalStorage.getItem(a.AUDIO_PLAYER_ENUMS.AUDIO_RECOMS_ONBOARDING_NEED_SKIP_LS_KEY))},set:function(e){r.vkLocalStorage.setItem(a.AUDIO_PLAYER_ENUMS.AUDIO_RECOMS_ONBOARDING_NEED_SKIP_LS_KEY,e)}}),Object.defineProperty(A,w,{get:function(){return Boolean(r.vkLocalStorage.getItem(a.AUDIO_PLAYER_ENUMS.ONBOARDING_ARTISTS_LS_KEY))},set:void 0}),Object.defineProperty(A,O,{value:function(){const e=r.vkLocalStorage.getItem(a.AUDIO_PLAYER_ENUMS.ONBOARDING_ARTISTS_LS_KEY);if(e)try{const t=JSON.parse(e),i=new h.AudioRecomsOnboardingMainScreen({artists:[],relatedCount:0,nextFrom:"",hash:""},{onFinish:()=>{window.nav.reload()}});return i.box.show(),i.showFinalScreenAfterDisconnect(t),!0}catch(e){throw new Error("Error when trying to restore the final audio recoms onboarding screen from LocalStorage",{cause:e})}return!1}}),A.ensure=(0,b.makeSharedState)("AudioRecomsOnboarding",(()=>new A),{version:1})},41579:(e,t,i)=>{i.d(t,{AudioRecomsOnboardingFetchService:()=>r});var s=i(52016),o=i(319756),n=i(761520);class r{async fetch(e){const t=await n.ajax.promisifiedPost("al_audio.php?act=get_recoms_onboarding",e);return t?.at(0)??null}async notifySkipOnboarding(){await this.catalogApi.hideBlock({block_id:"default:audio:onboarding_window_ca1"})}constructor(){this.catalogApi=(0,o.ensureDIRootWebContainer)().resolve(s.CatalogApi)}}},716860:(e,t,i)=>{i.d(t,{AudioRecomsOnboardingFetchService:()=>s.AudioRecomsOnboardingFetchService});var s=i(41579)},150548:(e,t,i)=>{i.d(t,{AudioRecomsOnboarding:()=>s.AudioRecomsOnboarding});var s=i(393856)},823291:(e,t,i)=>{i.d(t,{AudioRecomsOnboardingFinalScreen:()=>w});var s=i(434518),o=i(763812),n=i(535130),r=i(478752),a=i(754866),h=i(866467);const d="audio_onboarding";var c=(0,o._)("_titleInterval"),_=(0,o._)("_startAnim"),l=(0,o._)("_progressAnim"),u=(0,o._)("_successAnimation"),p=(0,o._)("_artists"),b=(0,o._)("_box"),g=(0,o._)("_destroyProgressScreen"),f=(0,o._)("_addArtistImages"),v=(0,o._)("_initFinalAnimation"),y=(0,o._)("_initProgressAnimation"),m=(0,o._)("_initTitleUpdate");class w{setArtists(e){(0,s._)(this,p)[p]=e}showProgressScreen(){(0,s._)(this,b)[b].content((0,r.getTemplate)("audio_recoms_onboarding_progress_box")),(0,s._)(this,b)[b].removeButtons(),(0,s._)(this,b)[b].setOptions({hideButtons:!0});const e=(0,s._)(this,b)[b].bodyNode.querySelector(".RecomsOnboarding__progressTitle");e instanceof HTMLElement&&(0,s._)(this,m)[m](e);const t=(0,s._)(this,b)[b].bodyNode.querySelector(".RecomsOnboarding__progressAnimation");t instanceof HTMLElement&&(0,s._)(this,y)[y](t)}showSuccessScreen(){const e=(0,a.se)((0,r.getTemplate)("audio_recoms_onboarding_final_box"));(0,s._)(this,f)[f](e),(0,s._)(this,b)[b].bodyNode.insertAdjacentElement("afterbegin",e),(0,s._)(this,v)[v](e),(0,s._)(this,b)[b].bodyNode.insertAdjacentElement("afterbegin",e)}destroySuccessScreen(){(0,s._)(this,u)[u]?.destroy()}constructor(e,t=[]){Object.defineProperty(this,g,{value:O}),Object.defineProperty(this,f,{value:S}),Object.defineProperty(this,v,{value:P}),Object.defineProperty(this,y,{value:A}),Object.defineProperty(this,m,{value:E}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,b,{writable:!0,value:void 0}),(0,s._)(this,p)[p]=[],(0,s._)(this,b)[b]=e,(0,s._)(this,p)[p]=t}}function O(){void 0!==(0,s._)(this,c)[c]&&window.clearInterval((0,s._)(this,c)[c]),(0,s._)(this,_)[_]?.destroy(),(0,s._)(this,l)[l]?.destroy()}function S(e){const t=e.querySelectorAll(".RecomsOnboarding__selectedArtist");let i=0;t.forEach((e=>{(0,s._)(this,p)[p][i]||(i=0);const t=(0,s._)(this,p)[p][i];i++,t&&(e.style.backgroundImage=`url(${t.image})`)}))}async function P(e){const t=document.createElement("div");t.className="RecomsOnboarding__finalAnimationContainer",e.prepend(t),(0,s._)(this,u)[u]=await n.LottieManager.loadAnimation({group:d,containers:[t],animationUrl:"/images/lottie_icons/music_onboarding_final.json",loop:!1});const i=e.querySelector(".RecomsOnboarding__progressTitle"),o=e.querySelector(".RecomsOnboarding__tiles"),r=e.querySelector(".RecomsOnboarding__selectedArtists");let a=!1,h=!1,c=!1;(0,s._)(this,u)[u].addEventListener("enterFrame",(e=>{i&&e>14&&!a&&((0,s._)(this,g)[g](),a=!0,i.classList.add("RecomsOnboarding__progressTitle--appear")),o&&e>10&&!h&&(o.classList.add("RecomsOnboarding__tiles--appear"),h=!0),r&&e>30&&!c&&(r.classList.add("RecomsOnboarding__selectedArtists--appear"),c=!0)}))}async function A(e){const t=e.querySelector(".RecomsOnboarding__animationItem--start"),i=e.querySelector(".RecomsOnboarding__animationItem--progress");if(!(t instanceof HTMLElement&&i instanceof HTMLElement))return;(0,s._)(this,_)[_]=await n.LottieManager.loadAnimation({group:d,containers:[t],animationUrl:"/images/lottie_icons/music_onboarding_progress_start.json",autoplay:!1,loop:!1});const o=await n.LottieManager.loadAnimation({group:d,containers:[i],animationUrl:"/images/lottie_icons/music_onboarding_progress.json",autoplay:!1,loop:!0});(0,s._)(this,l)[l]=o,o.hide(),(0,s._)(this,_)[_]?.addEventListener("loopComplete",(()=>{o.show(),o.play(),(0,s._)(this,_)[_]?.hide(),(0,s._)(this,_)[_]?.destroy()}),{once:!0}),(0,s._)(this,_)[_]?.play()}function E(e){const t=[(0,h.getLang)("audio_recoms_onboarding_progress_text1"),(0,h.getLang)("audio_recoms_onboarding_progress_text2"),(0,h.getLang)("audio_recoms_onboarding_progress_text3"),(0,h.getLang)("audio_recoms_onboarding_progress_text4")];let i=0;function o(){return!!t[i]&&(e.innerText=t[i],i++,!0)}o(),(0,s._)(this,c)[c]=window.setInterval((()=>{o()||(window.clearInterval((0,s._)(this,c)[c]),(0,s._)(this,c)[c]=void 0)}),1500)}},304622:(e,t,i)=>{i.d(t,{AudioRecomsOnboardingMainScreen:()=>J});var s=i(434518),o=i(763812),n=i(270959),r=i(478752),a=i(586573),h=i(866467),d=i(754866),c=i(257168),_=i(740342),l=i(678684),u=i(823291),p=i(553608),b=i(761520),g=i(867366),f=(0,o._)("_button"),v=(0,o._)("_itemsList"),y=(0,o._)("_searchItemsList"),m=(0,o._)("_relatedCount"),w=(0,o._)("_uiScroll"),O=(0,o._)("_loadingMore"),S=(0,o._)("_allArtistItems"),P=(0,o._)("_hash"),A=(0,o._)("_searchQuery"),E=(0,o._)("_isSearchActive"),j=(0,o._)("_allArtists"),R=(0,o._)("_selectedArtists"),L=(0,o._)("_nestingLevel"),k=(0,o._)("_selectedArtistsFromSearch"),M=(0,o._)("_relatedArtistsMap"),I=(0,o._)("_finalScreen"),C=(0,o._)("_searchArtists"),x=(0,o._)("_toggleSearch"),F=(0,o._)("_hide"),T=(0,o._)("_initInitialScreen"),D=(0,o._)("_loadMore"),N=(0,o._)("_loadSearchArtists"),B=(0,o._)("_finishOnboarding"),U=(0,o._)("_showFinalSuccessScreen"),z=(0,o._)("_getArtistsForFinalScreen"),q=(0,o._)("_canFinishOnboarding"),G=(0,o._)("_toggleArtistSelection"),H=(0,o._)("_toggleFinishButton"),W=(0,o._)("_addSelectedFromSearch"),V=(0,o._)("_addRelatedArtists"),Y=(0,o._)("_addMoreArtists"),K=(0,o._)("_getNextArtistElement"),$=(0,o._)("_addEventListeners"),Q=(0,o._)("_getArtistItems");class J{show(){this.box.show(),(0,s._)(this,w)[w]=new a.default(this.box.bodyNode.querySelector(".RecomsOnboarding__listWrapper"),{onmore:(0,s._)(this,D)[D].bind(this)})}showFinalScreenAfterDisconnect(e){(0,s._)(this,I)[I]=new u.AudioRecomsOnboardingFinalScreen(this.box,e),this.box.removeButtons(),this.box.setOptions({hideButtons:!0}),this.box.bodyNode.append((0,d.se)('<div class="RecomsOnboarding__body RecomsOnboarding__body--final"></div>')),(0,s._)(this,U)[U]()}constructor({artists:e,relatedCount:t,nextFrom:i,hash:o},r){Object.defineProperty(this,C,{value:X}),Object.defineProperty(this,x,{value:Z}),Object.defineProperty(this,F,{value:ee}),Object.defineProperty(this,T,{value:te}),Object.defineProperty(this,D,{value:ie}),Object.defineProperty(this,N,{value:se}),Object.defineProperty(this,B,{value:oe}),Object.defineProperty(this,U,{value:ne}),Object.defineProperty(this,z,{value:re}),Object.defineProperty(this,q,{value:ae}),Object.defineProperty(this,G,{value:he}),Object.defineProperty(this,H,{value:de}),Object.defineProperty(this,W,{value:ce}),Object.defineProperty(this,V,{value:_e}),Object.defineProperty(this,Y,{value:le}),Object.defineProperty(this,K,{value:ue}),Object.defineProperty(this,$,{value:pe}),Object.defineProperty(this,Q,{value:be}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,j,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,M,{writable:!0,value:void 0}),Object.defineProperty(this,I,{writable:!0,value:void 0}),(0,s._)(this,j)[j]={},(0,s._)(this,R)[R]={},(0,s._)(this,L)[L]={},(0,s._)(this,k)[k]={},(0,s._)(this,M)[M]={},(0,s._)(this,m)[m]=t,this.box=new n.MessageBox({bodyStyle:"padding: 0",width:640,containerClass:"RecomsOnboarding",onHide:()=>{r?.onHide?r.onHide():Boolean((0,s._)(this,I)[I])?r?.onFinish?.():r?.onClose?.()}}),(0,s._)(this,P)[P]=o,e.length&&(0,s._)(this,T)[T](e,i)}}function X(e){(0,s._)(this,A)[A]=e.trim(),(0,s._)(this,A)[A]?(0,s._)(this,N)[N]((0,s._)(this,A)[A]).then((({artists:e,nextFrom:t})=>{(0,s._)(this,y)[y].clear(),(0,s._)(this,y)[y].nextFrom=t,(0,s._)(this,x)[x](!0),e.length?(0,s._)(this,Y)[Y](e):(0,s._)(this,y)[y].showNotFound()})):(0,s._)(this,x)[x](!1)}function Z(e){(0,s._)(this,E)[E]=e,e?((0,s._)(this,v)[v].hide(),(0,s._)(this,y)[y].show()):((0,s._)(this,W)[W](),(0,s._)(this,v)[v].show(),(0,s._)(this,y)[y].hide(),(0,s._)(this,y)[y].clear())}function ee(){this.box.hide()}function te(e,t){this.box.content((0,r.getTemplate)("audio_recoms_onboarding_box",{artists:(0,s._)(this,Q)[Q](e).join("")}));const i=this.box.bodyNode.querySelector(".RecomsOnboarding__list");if(!(i instanceof HTMLElement))return;(0,s._)(this,S)[S]=e.reduce(((e,t)=>(e[t.id]=t,e)),{}),(0,s._)(this,f)[f]=this.box.addButton((0,h.getLang)("audio_continue"),(0,s._)(this,B)[B].bind(this),void 0,!0),(0,s._)(this,y)[y]=new l.ArtistsList(this.box.bodyNode.querySelector(".RecomsOnboarding__list--search"),""),(0,s._)(this,v)[v]=new l.ArtistsList(i,t),(0,s._)(this,H)[H](!1),(0,s._)(this,$)[$]();const o=(0,_.debounce)((0,s._)(this,C)[C].bind(this),500);c.default.init("artist_onboarding",{onChange:o})}function ie(){(0,s._)(this,O)[O]||((0,s._)(this,E)[E]?(0,s._)(this,y)[y].nextFrom&&((0,s._)(this,O)[O]=!0,(0,s._)(this,N)[N]((0,s._)(this,A)[A],(0,s._)(this,y)[y].nextFrom).then((({artists:e,nextFrom:t})=>{(0,s._)(this,O)[O]=!1,(0,s._)(this,Y)[Y](e),(0,s._)(this,y)[y].nextFrom=t}))):(0,s._)(this,v)[v].nextFrom&&((0,s._)(this,O)[O]=!0,b.ajax.post("al_audio.php?act=get_recoms_onboarding",{start_from:(0,s._)(this,v)[v].nextFrom},{onDone:({artists:e,nextFrom:t})=>{(0,s._)(this,O)[O]=!1,(0,s._)(this,Y)[Y](e.filter((e=>!(0,s._)(this,j)[j][e.id]))),(0,s._)(this,v)[v].nextFrom=t}})))}function se(e,t=""){return new Promise(((i,s)=>{b.ajax.post("/al_audio.php?act=search_artists",{query:e,start_from:t},{onDone:i,onFail:s})}))}function oe(){if(!(0,s._)(this,q)[q]())return;const e=Object.keys((0,s._)(this,R)[R]),t=(0,s._)(this,z)[z]();p.vkLocalStorage.setItem(g.AUDIO_PLAYER_ENUMS.ONBOARDING_ARTISTS_LS_KEY,JSON.stringify(t)),(0,s._)(this,I)[I]=new u.AudioRecomsOnboardingFinalScreen(this.box,t),Promise.all([new Promise(((t,i)=>{b.ajax.post("/al_audio.php?act=finish_recoms_onboarding",{artists:e,hash:(0,s._)(this,P)[P]},{onDone:e=>t(e),onFail:()=>i()})})),new Promise((e=>setTimeout(e,6e3)))]).finally((()=>(0,s._)(this,U)[U]())),(0,s._)(this,I)[I].showProgressScreen()}function ne(){(0,s._)(this,I)[I].showSuccessScreen(),p.vkLocalStorage.removeItem(g.AUDIO_PLAYER_ENUMS.ONBOARDING_ARTISTS_LS_KEY),setTimeout((()=>{this.box.hide(),(0,s._)(this,I)[I].destroySuccessScreen()}),4e3)}function re(){const e=[];let t=[];for(let i in(0,s._)(this,R)[R])if((0,s._)(this,R)[R].hasOwnProperty(i)){if(!(e.length<7))break;e.push((0,s._)(this,S)[S][i]),(0,s._)(this,M)[M][i]&&(t=t.concat((0,s._)(this,M)[M][i]))}if(e.length<7)for(let i of t){if(!(e.length<7))break;e.push((0,s._)(this,S)[S][i])}return e}function ae(){return Object.keys((0,s._)(this,R)[R]).length>=5}function he(e){const t=e.dataset.id;if(!t)return!1;const i=!(0,s._)(this,R)[R][t];[(0,s._)(this,v)[v],(0,s._)(this,y)[y]].forEach((({container:e})=>{e.querySelectorAll(`[data-id='${t}']`).forEach((e=>{e.classList.toggle("RecomsOnboarding__item--selected",i)}))})),i?((0,s._)(this,R)[R][t]=!0,(0,s._)(this,j)[j][t]=!0,!e.classList.contains("RecomsOnboarding__item--hasRelated")&&((0,s._)(this,L)[L][t]||0)<3&&(e.classList.add("RecomsOnboarding__item--hasRelated"),(0,s._)(this,V)[V](t))):delete(0,s._)(this,R)[R][t],(0,s._)(this,E)[E]&&i&&((0,s._)(this,k)[k][t]=(0,s._)(this,S)[S][t]),!i&&(0,s._)(this,k)[k][t]&&delete(0,s._)(this,k)[k][t],(0,s._)(this,H)[H]((0,s._)(this,q)[q]())}function de(e){(0,s._)(this,f)[f].disabled=!e,(0,s._)(this,f)[f].classList.toggle("button_disabled",!e)}function ce(){(0,s._)(this,v)[v].container.querySelectorAll(".RecomsOnboarding__item--fromSearch").forEach((e=>e.remove()));const e=(0,s._)(this,v)[v].container.querySelector(".RecomsOnboarding__item");e instanceof HTMLElement&&(0,s._)(this,Y)[Y](Object.values((0,s._)(this,k)[k]),e,"RecomsOnboarding__item--fromSearch")}function _e(e){b.ajax.post("/al_audio.php?act=get_related_artists",{artist_id:e,count:2*(0,s._)(this,m)[m]},{onDone:({artists:t})=>{t.forEach((t=>(0,s._)(this,L)[L][t.id]=((0,s._)(this,L)[L][e]||0)+1)),(0,s._)(this,M)[M][e]=t.map((e=>e.id));let i=t.filter((e=>!(0,s._)(this,j)[j][e.id]));i=i.slice(0,(0,s._)(this,m)[m]),(0,s._)(this,Y)[Y](i,(0,s._)(this,K)[K](e))}})}function le(e,t=null,i=""){const o=((0,s._)(this,E)[E]?(0,s._)(this,y)[y]:(0,s._)(this,v)[v]).container;if(e&&e.length){e.forEach((e=>(0,s._)(this,S)[S][e.id]=e));const n=(0,s._)(this,Q)[Q](e),r=document.createElement("div");r.innerHTML=n.join("");const a=Array.from(r.children);a.forEach((e=>{e.dataset.id&&((0,s._)(this,R)[R][e.dataset.id]&&e.classList.add("RecomsOnboarding__item--selected"),i&&e.classList.add(i),t&&o?.insertBefore(e,t))})),t||o.append(...a)}}function ue(e){const t=((0,s._)(this,E)[E]?(0,s._)(this,y)[y]:(0,s._)(this,v)[v]).container.querySelector(`[data-id="${e}"]`);if(t)return t.nextElementSibling instanceof HTMLElement?t.nextElementSibling:null}function pe(){(0,s._)(this,v)[v].onSelect=e=>(0,s._)(this,G)[G](e),(0,s._)(this,v)[v].onSelect=e=>(0,s._)(this,G)[G](e),[(0,s._)(this,v)[v],(0,s._)(this,y)[y]].forEach((({container:e})=>{e.addEventListener("click",(e=>{if(e.target instanceof HTMLElement){const t=e.target.closest(".RecomsOnboarding__item");if(!(t instanceof HTMLElement))return;(0,s._)(this,G)[G](t)}}))}));const e=this.box.bodyNode.querySelector(".RecomsOnboarding__closeButton");e&&e.addEventListener("click",(0,s._)(this,F)[F].bind(this))}function be(e){return e.map((e=>((0,s._)(this,j)[j][e.id]=!0,(0,r.getTemplate)("audio_recoms_onboarding_item",e))))}},965539:(e,t,i)=>{i.d(t,{AudioRecomsOnboardingMainScreen:()=>s.AudioRecomsOnboardingMainScreen});var s=i(304622);i(823291)},678684:(e,t,i)=>{i.d(t,{ArtistsList:()=>o});var s=i(866467);class o{initEvents(){this.container.addEventListener("click",(e=>{if(e.target instanceof HTMLElement){const t=e.target.closest(".RecomsOnboarding__item");if(!(t instanceof HTMLElement))return;this.onSelect&&this.onSelect(t)}}))}hide(){this.container.style.display="none"}show(){this.container.style.display="flex"}clear(){this.container.innerHTML=""}showNotFound(){const e=document.createElement("div");e.className="RecomsOnboarding__notFoundPlaceholder",e.innerText=(0,s.getLang)("audio_not_found"),this.container.append(e)}constructor(e,t){this.container=e,this.nextFrom=t}}},52016:(e,t,i)=>{i.d(t,{CatalogApi:()=>r});var s=i(331635),o=i(641569),n=i(132028);class r extends o.ApiNamespace{get namespace(){return"catalog"}constructor(...e){super(...e),this.getSearchTop=this.makeMethod("getSearchTop"),this.getSearchAll=this.makeMethod("getSearchAll"),this.getAudio=this.makeMethod("getAudio"),this.getAudioArtist=this.makeMethod("getAudioArtist"),this.getAudioCurator=this.makeMethod("getAudioCurator"),this.getAudioSearch=this.makeMethod("getAudioSearch"),this.getGroups=this.makeMethod("getGroups",!0),this.consumeBanner=this.makeMethod("consumeBanner"),this.getSearchGroups=this.makeMethod("getSearchGroups"),this.getSearchChannels=this.makeMethod("getSearchChannels"),this.getVideo=this.makeMethod("getVideo"),this.getVideoWithPrefetch=this.makeMethod("getVideo",!0),this.getSection=this.makeMethod("getSection"),this.getGroupsCollection=this.makeMethod("getGroupsCollection"),this.getBlockItems=this.makeMethod("getBlockItems"),this.getClassifieds=this.makeMethod("getClassifieds"),this.getAudioClips=this.makeMethod("getAudioClips"),this.getAudioClipsSearch=this.makeMethod("getAudioClipsSearch"),this.replaceBlocks=this.makeMethod("replaceBlocks"),this.getShortVideoSearch=this.makeMethod("getShortVideoSearch"),this.getVideoShowcase=this.makeMethod("getVideoShowcase"),this.getVideoSearchSubscriptions=this.makeMethod("getVideoSearchSubscriptions"),this.getVideoSearchWeb2=this.makeMethod("getVideoSearchWeb2"),this.getVideoSearch=this.makeMethod("getVideoSearch"),this.getSearchGames=this.makeMethod("getSearchGames"),this.getSearchMarket=this.makeMethod("getSearchMarket"),this.getPeopleSearch=this.makeMethod("getPeopleSearch"),this.getPeopleSearchWithPrefetch=this.makeMethod("getPeopleSearch",!0),this.getOwnerVideosSearch=this.makeMethod("getOwnerVideosSearch"),this.getSearchMiniApps=this.makeMethod("getSearchMiniApps"),this.getSearchStatuses=this.makeMethod("getSearchStatuses"),this.getStickers=this.makeMethod("getStickers"),this.getStickersSearch=this.makeMethod("getStickersSearch"),this.hideBlock=this.makeMethod("hideBlock")}}r=(0,s.__decorate)([n.scope.global()],r)},50790:(e,t,i)=>{i.d(t,{useIsMounted:()=>o});var s=i(296540);const o=()=>{const e=(0,s.useRef)(!1);return(0,s.useEffect)((()=>(e.current=!0,()=>{e.current=!1})),[]),(0,s.useCallback)((()=>e.current),[])}},251964:(e,t,i)=>{i.d(t,{LottieDataCache:()=>d});var s=i(434518),o=i(763812),n=(0,o._)("_OUTDATED_CACHE_LIFETIME"),r=(0,o._)("_cache"),a=(0,o._)("_outdated"),h=(0,o._)("_checkOutdated");class d{static set(e,t){(0,s._)(this,r)[r].set(e,t)}static get(e){return(0,s._)(this,a)[a].delete(e),(0,s._)(this,h)[h](),(0,s._)(this,r)[r].get(e)}static delete(e){(0,s._)(this,r)[r].delete(e)}static outdate(e){(0,s._)(this,r)[r].has(e)&&(0,s._)(this,a)[a].set(e,Date.now())}}Object.defineProperty(d,h,{value:function(){for(const[e,t]of(0,s._)(this,a)[a])Date.now()-t<=(0,s._)(this,n)[n]||((0,s._)(this,r)[r].delete(e),(0,s._)(this,a)[a].delete(e))}}),Object.defineProperty(d,n,{writable:!0,value:3e5}),Object.defineProperty(d,r,{writable:!0,value:new Map}),Object.defineProperty(d,a,{writable:!0,value:new Map})},838086:(e,t,i)=>{i.d(t,{AnimationDataLoadError:()=>s});class s extends Error{constructor(){super("Не удалось загрузить данные об анимации")}}},641771:(e,t,i)=>{i.d(t,{EmptyAnimationDataError:()=>s});class s extends Error{constructor(){super("Не переданы данные для загрузки анимации")}}},264508:(e,t,i)=>{i.d(t,{InvalidAnimationSizeError:()=>s});class s extends Error{constructor(){super("Передайте размер анимации, размеры контейнера имеют неявные значения")}}},300712:(e,t,i)=>{i.d(t,{OffscreenCanvasNotSupportedError:()=>s});class s extends Error{constructor(){super("OffscreenCanvas не поддерживается клиентом, проигрывание анимации невозможно")}}},830235:(e,t,i)=>{i.d(t,{AnimationObserver:()=>v});var s=i(434518),o=i(763812),n=i(108193),r=i(342042),a=i(184330),h=i(505471),d=(0,o._)("_observer"),c=(0,o._)("_paused"),_=(0,o._)("_visible"),l=(0,o._)("_primaryGroup"),u=(0,o._)("_groups"),p=(0,o._)("_ignoredGroups"),b=(0,o._)("_checkPlayers"),g=(0,o._)("_checkPlayer"),f=(0,o._)("_removePlayer");class v{static addPlayer(e){var t,i;const{canvas:o,options:{group:n}}=e;(t=(0,s._)(this,u)[u])[i=n]??(t[i]=new Set);(0,s._)(this,u)[u][n].add(e),(0,s._)(this,d)[d]?.observe(o)}static removePlayer(e){const{canvas:t,options:{group:i}}=e,o=(0,s._)(this,u)[u][i];o?.size&&(o.delete(e),o.size||delete(0,s._)(this,u)[u][i]),(0,s._)(this,d)[d]?.unobserve(t),(0,s._)(this,c)[c].delete(e),(0,s._)(this,_)[_].delete(e)}static setPrimaryGroup({group:e,...t}){(0,s._)(this,l)[l]=e,(0,s._)(this,b)[b](t)}static resetPrimaryGroup(){(0,s._)(this,l)[l]=void 0,(0,s._)(this,b)[b]()}static ignoreGroup(e){Array.isArray(e)||(e=[e]),e.forEach((e=>{(0,s._)(this,p)[p].add(e)})),(0,s._)(this,b)[b]()}static removeIgnoredGroup(e){Array.isArray(e)||(e=[e]),e.forEach((e=>{(0,s._)(this,p)[p].add(e)})),(0,s._)(this,b)[b]()}}Object.defineProperty(v,b,{value:function(e={}){const{group:t}=e,i=void 0!==t;if(i&&!(0,s._)(this,u)[u][t])return;const o=i?[t]:Object.keys((0,s._)(this,u)[u]);for(const t of o){const i=(0,s._)(this,u)[u][t];i?.forEach((t=>{(0,s._)(this,g)[g]({player:t,...e})}))}}}),Object.defineProperty(v,g,{value:async function({player:e,idle:t,pause:i,destroy:o,destroyCache:n}){const{canvas:r,options:{group:h}}=e,d=(0,s._)(this,c)[c].has(e),u=(0,s._)(this,_)[_].has(e),b=(0,s._)(this,p)[p].has(h),g=(0,s._)(this,l)[l]&&(0,s._)(this,l)[l]!==h,v=await e.paused();if(o||!b&&!r.isConnected)return void(0,s._)(this,f)[f](e);!1===t&&v&&a.isSafari&&e.redraw();if(b)return;if((i||t||g)&&!v)return e.pause().then((()=>{g&&n&&e.destroyCache()})),void(0,s._)(this,c)[c].add(e);d&&v&&u&&!g&&(e.play(),(0,s._)(this,c)[c].delete(e))}}),Object.defineProperty(v,f,{value:function(e){const{canvas:t,options:{group:i}}=e;e.destroy();const o=(0,s._)(this,u)[u][i];o?.size&&(o.delete(e),o.size||delete(0,s._)(this,u)[u][i]);(0,s._)(this,d)[d]?.unobserve(t),(0,s._)(this,_)[_].delete(e)}}),Object.defineProperty(v,d,{writable:!0,value:void 0}),Object.defineProperty(v,c,{writable:!0,value:new Set}),Object.defineProperty(v,_,{writable:!0,value:new Set}),Object.defineProperty(v,l,{writable:!0,value:void 0}),Object.defineProperty(v,u,{writable:!0,value:{}}),Object.defineProperty(v,p,{writable:!0,value:new Set}),h.isIntersectionObserverSupported&&((0,s._)(v,d)[d]=new IntersectionObserver((e=>{for(const{target:t,isIntersecting:i}of e)for(const e in(0,s._)(v,u)[u]){if(!(0,s._)(v,u)[u].hasOwnProperty(e))continue;const o=[...(0,s._)(v,u)[u][e]]?.find((e=>e.canvas===t));if(!o)continue;const r=(0,s._)(v,p)[p].has(e),{initialized:a,initializing:h,options:{lazyLoading:d}}=o;if(i){if(!d||a||h||n.AnimationObserverLazyLoad.addToQueue(o),r)continue;(0,s._)(v,_)[_].add(o),(0,s._)(v,g)[g]({player:o})}else{if(n.AnimationObserverLazyLoad.removeFromQueue(o),o.canvas.isConnected||o.destroy(),r)continue;(0,s._)(v,_)[_].delete(o),(0,s._)(v,g)[g]({player:o,pause:!0}),o.destroyCache()}break}}))),r.idleManager.addEventListener("change",(e=>{(0,s._)(v,b)[b]({idle:e})}))},108193:(e,t,i)=>{i.d(t,{AnimationObserverLazyLoad:()=>l});var s=i(434518),o=i(763812),n=i(351118),r=(0,o._)("_PROCESSING_LIMIT"),a=(0,o._)("_queue"),h=(0,o._)("_processing"),d=(0,o._)("_processQueue"),c=(0,o._)("_processQueueHandler"),_=(0,o._)("_processPlayer");class l{static addToQueue(e){(0,s._)(this,a)[a].add(e),(0,s._)(this,d)[d]()}static removeFromQueue(e){(0,s._)(this,a)[a].delete(e)}}Object.defineProperty(l,c,{value:function(){if(!(0,s._)(this,a)[a].size||(0,s._)(this,h)[h].size)return;for(;(0,s._)(this,h)[h].size<(0,s._)(this,r)[r]&&(0,s._)(this,a)[a].size;){const e=[...(0,s._)(this,a)[a]].shift();e&&((0,s._)(this,a)[a].delete(e),(0,s._)(this,_)[_](e))}}}),Object.defineProperty(l,_,{value:async function(e){(0,s._)(this,h)[h].add(e);try{await e.init()}catch(e){console.error(e)}(0,s._)(this,h)[h].delete(e),(0,s._)(this,d)[d]()}}),Object.defineProperty(l,r,{writable:!0,value:8}),Object.defineProperty(l,a,{writable:!0,value:new Set}),Object.defineProperty(l,h,{writable:!0,value:new Set}),Object.defineProperty(l,d,{writable:!0,value:(0,n.throttle)((0,s._)(l,c)[c].bind(l),20)})},173086:(e,t,i)=>{i.d(t,{EventDispatcher:()=>s});class s{hasEventListener(e,t){return this.listeners.some((i=>i.type===e&&i.listener===t))}addEventListener(e,t,i={}){return this.hasEventListener(e,t)||this.listeners.push({type:e,listener:t,options:i}),this}removeEventListener(e,t){const i=this.listeners.findIndex((i=>i.type===e&&i.listener===t));return-1!==i&&this.listeners.splice(i,1),this}removeEventListeners(){return this.listeners=[],this}dispatchEvent(e,...t){return this.listeners.filter((t=>t.type===e)).forEach((e=>{const{type:i,listener:s,options:o}=e;s(...t),o?.once&&this.removeEventListener(i,s)})),this}constructor(){this.listeners=[]}}},342042:(e,t,i)=>{i.d(t,{idleManager:()=>p});var s=i(434518),o=i(763812),n=i(173086),r=i(488577),a=(0,o._)("_focusEventName"),h=(0,o._)("_isIdle"),d=(0,o._)("_focusPromise"),c=(0,o._)("_focusResolve"),_=(0,o._)("_setIsIdle");class l extends n.EventDispatcher{get focusPromise(){return(0,s._)(this,d)[d]}get isIdle(){return(0,s._)(this,h)[h]}constructor(){super(),Object.defineProperty(this,_,{value:u}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,s._)(this,h)[h]=!0,(0,s._)(this,d)[d]=Promise.resolve(),(0,s._)(this,c)[c]=()=>{},"undefined"!=typeof window&&(window.addEventListener("blur",(()=>{(0,s._)(this,_)[_](!0),window.addEventListener("focus",(()=>{(0,s._)(this,_)[_](!1)}),{once:!0})})),window.addEventListener((0,s._)(l,a)[a],(()=>{(0,s._)(this,_)[_](!1)}),{once:!0,passive:!0}),this.addEventListener("change",(e=>{e?(0,s._)(this,d)[d]=new Promise((e=>{(0,s._)(this,c)[c]=e})):(0,s._)(this,c)[c]()})))}}function u(e){(0,s._)(this,h)[h]!==e&&((0,s._)(this,h)[h]=e,this.dispatchEvent("change",e))}Object.defineProperty(l,a,{writable:!0,value:r.isTouchSupported?"touchstart":"mousemove"});const p=new l},812153:(e,t,i)=>{i.d(t,{useLottie:()=>r});var s=i(50790),o=i(296540),n=i(535130);function r(e,{play:t,show:i}={}){const{animationUrl:r,animationData:a}=e,h=(0,o.useRef)(!1),d=(0,o.useRef)(null),c=(0,o.useRef)(null),[_,l]=(0,o.useState)(!1),[u,p]=(0,o.useState)(null),[b,g]=(0,o.useState)(!1),[f,v]=(0,o.useState)(!1),y=(0,s.useIsMounted)();(0,o.useEffect)((()=>{const e=c.current;e&&!b&&(void 0!==t&&(t?e.play():e.pause()),void 0!==i&&(i?e.show():e.hide()))}),[b,t,i]),(0,o.useLayoutEffect)((()=>((async()=>{const t=c.current;t?h.current=!1:(g(!0),v(!1));const i=d.current;if((r||a)&&i&&!h.current){h.current=!0,l(!1),p(null);try{const t=await n.LottieManager.loadAnimation({containers:[i],...e});t.addEventListener("enterFrame",(()=>{requestAnimationFrame((()=>{v(!0)}))}),{once:!0}),t.addEventListener("destroy",(()=>{v(!1)}),{once:!0}),g(!1),c.current=t}catch(e){l(!0),p(e)}y()&&t?.destroy()}})(),()=>{c.current?.destroy()})),[r,a]);return{lottieError:_,lottieLoading:b,lottieLoaded:!b&&!_,lottieRendered:f,lottiePlayerRef:c,lottieContainerRef:d,lottieErrorMessage:u}}},535130:(e,t,i)=>{i.d(t,{LottieManager:()=>w});var s=i(434518),o=i(763812),n=i(351118),r=i(558137),a=i(542102),h=i(300712),d=i(830235),c=i(415855),_=i(351901),l=(0,o._)("_WORKERS_COUNT"),u=(0,o._)("_observer"),p=(0,o._)("_prevUsedWorkerIndex"),b=(0,o._)("_workers"),g=(0,o._)("_players"),f=(0,o._)("_initialized"),v=(0,o._)("_initializePromise"),y=(0,o._)("_getWorker");class m{static get observer(){return(0,s._)(this,u)[u]}static init(){return c.isOffscreenCanvasSupported?((0,s._)(this,v)[v]||((0,s._)(this,v)[v]=(async()=>{try{const{EsThread:e}=await(0,_.loadThreads)();(0,s._)(this,b)[b]=await Promise.all((0,n.createArray)((0,s._)(this,l)[l]).map((()=>e.Spawn(new Worker(new URL(self.location.origin+"/dist/"+i.u(75477),i.b),{type:void 0})))))}catch(e){throw e}(0,s._)(this,f)[f]=!0})()),(0,s._)(this,v)[v]):Promise.reject(new h.OffscreenCanvasNotSupportedError)}static async loadAnimation(e){(0,s._)(this,f)[f]||await this.init();const t=new a.LottiePlayer((0,s._)(this,y)[y](e),e);return t.options.lazyLoading||await t.init(),(0,s._)(this,g)[g].add(t),(0,s._)(this,u)[u].addPlayer(t),t.addEventListener("destroy",(()=>{(0,s._)(this,g)[g].delete(t),(0,s._)(this,u)[u].removePlayer(t)}),{once:!0}),t}}Object.defineProperty(m,y,{value:function(e){const t=e?.animationUrl,i=e?.animationData;for(const e of(0,s._)(this,g)[g])if(e.options.animationUrl===t||e.options.animationData===i)return e.worker;let o=(0,s._)(this,p)[p]++;o>=(0,s._)(this,b)[b].length&&(o=0,(0,s._)(this,p)[p]=0);return(0,s._)(this,b)[b][o]}}),Object.defineProperty(m,l,{writable:!0,value:4}),Object.defineProperty(m,u,{writable:!0,value:d.AnimationObserver}),Object.defineProperty(m,p,{writable:!0,value:0}),Object.defineProperty(m,b,{writable:!0,value:[]}),Object.defineProperty(m,g,{writable:!0,value:new Set}),Object.defineProperty(m,f,{writable:!0,value:!1}),Object.defineProperty(m,v,{writable:!0,value:void 0});const w=(0,r.makeSharedState)("rlottie",(()=>m),{version:3})()},42459:(e,t,i)=>{i.d(t,{LottiePlayerEventTask:()=>s});class s{constructor(e,t){this.taskUID=e,this.resolve=t}}},542102:(e,t,i)=>{i.d(t,{LottiePlayer:()=>D});var s=i(434518),o=i(763812),n=i(351118),r=i(251964),a=i(42459),h=i(173086),d=i(641771),c=i(264508),_=i(838086),l=i(157951),u=i(150195),p=i(273808),b=i(908575),g=i(351901),f=(0,o._)("_events"),v=(0,o._)("_worker"),y=(0,o._)("_options"),m=(0,o._)("_canvas"),w=(0,o._)("_destroyed"),O=(0,o._)("_initialized"),S=(0,o._)("_startInitialization"),P=(0,o._)("_initializePromise"),A=(0,o._)("_destroy"),E=(0,o._)("_render"),j=(0,o._)("_setOptions"),R=(0,o._)("_createPlayerMethodProxy"),L=(0,o._)("_loadAnimationUrl"),k=(0,o._)("_transferableOptions"),M=(0,o._)("_setName"),I=(0,o._)("_setSize"),C=(0,o._)("_setScale"),x=(0,o._)("_setCanvas"),F=(0,o._)("_attachEventTask"),T=(0,o._)("_destroyHandler");class D extends h.EventDispatcher{init(){if((0,s._)(this,O)[O]||!(0,s._)(this,S)[S])return(0,s._)(this,P)[P];const e=(async()=>{const[{Transfer:e}]=await Promise.all([(0,g.loadThreads)(),(0,s._)(this,L)[L]()]);if(!(0,s._)(this,y)[y].animationData)throw new d.EmptyAnimationDataError;const t=(0,s._)(this,k)[k],i=(0,s._)(this,m)[m].transferControlToOffscreen();await(0,s._)(this,v)[v].methods.createPlayer(e({canvas:i,options:t,id:this.id},[i]))})();return e.then((()=>{(0,s._)(this,O)[O]=!0,(0,s._)(this,y)[y].autoplay&&this.play()})),(0,s._)(this,S)[S](e),(0,s._)(this,S)[S]=void 0,(0,s._)(this,P)[P]}get worker(){return(0,s._)(this,v)[v]}get canvas(){return(0,s._)(this,m)[m]}get options(){return(0,s._)(this,y)[y]}get initialized(){return(0,s._)(this,O)[O]}get initializing(){return!(0,s._)(this,S)[S]&&!(0,s._)(this,O)[O]}show(){(0,s._)(this,m)[m].style.visibility="unset"}hide(){(0,s._)(this,m)[m].style.visibility="hidden"}setOptions(e){Object.assign((0,s._)(this,y)[y],e)}setSpeed(e=1){(0,s._)(this,y)[y].speed!==e&&((0,s._)(this,y)[y].speed=e)}setDirection(e=l.LottiePlayerDirection.FORWARD){(0,s._)(this,y)[y].direction!==e&&((0,s._)(this,y)[y].direction=e)}setCache(e=!0){(0,s._)(this,y)[y].cache=e}setStrictCache(e=!0){(0,s._)(this,y)[y].strictCache=e}setLazyLoading(e=!0){(0,s._)(this,y)[y].lazyLoading=e}setAutoplay(e=!0){(0,s._)(this,y)[y].autoplay=e}setLoop(e=!0){(0,s._)(this,y)[y].loop=e}setColor(e=null){if(Array.isArray(e)){const[t,i,s,o=1]=e;e=`rgba(${t},${i},${s},${o})`}else"currentColor"===e&&(e=getComputedStyle((0,s._)(this,m)[m]).color);(0,s._)(this,y)[y].color=e}setStartFrameIndex(e){void 0!==e&&((0,s._)(this,y)[y].startFrameIndex=e)}async render(...e){const t=await(0,s._)(this,E)[E](...e);if(!t)return;const i=new OffscreenCanvas((0,s._)(this,m)[m].width,(0,s._)(this,m)[m].height),o=i.getContext("2d");return o?(o.drawImage(t,0,0),i):void 0}destroy(){if(this.initialized)return(0,s._)(this,A)[A]();this.dispatchEvent("destroy")}constructor(e,t){super(),Object.defineProperty(this,R,{value:N}),Object.defineProperty(this,L,{value:B}),Object.defineProperty(this,k,{get:U,set:void 0}),Object.defineProperty(this,M,{value:z}),Object.defineProperty(this,I,{value:q}),Object.defineProperty(this,C,{value:G}),Object.defineProperty(this,x,{value:H}),Object.defineProperty(this,F,{value:W}),Object.defineProperty(this,T,{value:V}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),Object.defineProperty(this,S,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,E,{writable:!0,value:void 0}),Object.defineProperty(this,j,{writable:!0,value:void 0}),this.id=(0,n.getRandomString)(6),(0,s._)(this,m)[m]=document.createElement("canvas"),(0,s._)(this,w)[w]=!1,(0,s._)(this,O)[O]=!1,(0,s._)(this,P)[P]=new Promise((e=>{(0,s._)(this,S)[S]=e})),this.play=(0,s._)(this,R)[R]("play"),this.playPart=(0,s._)(this,R)[R]("playPart"),this.playTo=(0,s._)(this,R)[R]("playTo"),this.pause=(0,s._)(this,R)[R]("pause"),this.reset=(0,s._)(this,R)[R]("reset"),this.stop=(0,s._)(this,R)[R]("stop"),this.destroyCache=(0,s._)(this,R)[R]("destroyCache"),(0,s._)(this,A)[A]=(0,s._)(this,R)[R]("destroy"),this.paused=(0,s._)(this,R)[R]("paused"),this.state=(0,s._)(this,R)[R]("state"),this.redraw=(0,s._)(this,R)[R]("redraw"),(0,s._)(this,E)[E]=(0,s._)(this,R)[R]("render"),(0,s._)(this,j)[j]=(0,s._)(this,R)[R]("setOptions");const{name:i,loop:o,color:r,width:a,height:h,speed:d,cache:_,autoplay:l,direction:p,strictCache:b,lazyLoading:g,startFrameIndex:Y,containers:[K]}=t;if(!a||!h){const{width:e,height:i}=(0,u.getElementSize)(K);t.width=e,t.height=i}if(Number(t.width)<=0||Number(t.height)<=0)throw new c.InvalidAnimationSizeError;(0,s._)(this,v)[v]=e,(0,s._)(this,y)[y]={...t},(0,s._)(this,y)[y].containers.forEach((e=>{e.appendChild((0,s._)(this,m)[m])})),(0,s._)(this,M)[M](i),this.setLoop(o),this.setCache(_),this.setColor(r),this.setSpeed(d),(0,s._)(this,I)[I](t),(0,s._)(this,C)[C](t),(0,s._)(this,x)[x](t),this.setAutoplay(l),this.setDirection(p),this.setStrictCache(b),this.setLazyLoading(g),this.setStartFrameIndex(Y),(0,s._)(this,y)[y]=new Proxy((0,s._)(this,y)[y],{set:(e,t,i)=>(e[t]=i,(0,s._)(this,j)[j]((0,s._)(this,k)[k]),!0)}),(0,s._)(D,f)[f].forEach((e=>{(0,s._)(this,F)[F](e)})),this.addEventListener("destroy",(0,s._)(this,T)[T].bind(this),{once:!0})}}function N(e){return async(...t)=>{if(!(0,s._)(this,w)[w])return await(0,s._)(this,P)[P],(0,s._)(this,v)[v].methods[e](this.id,...t)}}async function B(){const{animationData:e,animationUrl:t}=(0,s._)(this,y)[y];if(t&&!e){const e=r.LottieDataCache.get(t),i=e||await fetch(t).then((e=>e.blob())).catch((()=>null));if(!i)throw new _.AnimationDataLoadError;e||r.LottieDataCache.set(t,i),(0,s._)(this,y)[y].animationData=i}}function U(){const e={...(0,s._)(this,y)[y]};return delete e.containers,e}function z(e=(0,s._)(this,y)[y].animationUrl||this.id){(0,s._)(this,y)[y].name=e}function q({width:e,height:t}){e&&((0,s._)(this,y)[y].width=Math.trunc(Math.abs(e))),t&&((0,s._)(this,y)[y].height=Math.trunc(Math.abs(t)))}function G({scale:e=1,upscale:t=!0}){(0,s._)(this,y)[y].scale=e,(0,s._)(this,y)[y].upscale=t,t&&window.devicePixelRatio>1&&((0,s._)(this,y)[y].scale+=window.devicePixelRatio-1),(0,s._)(this,m)[m].width=(0,s._)(this,y)[y].width*(0,s._)(this,y)[y].scale,(0,s._)(this,m)[m].height=(0,s._)(this,y)[y].height*(0,s._)(this,y)[y].scale,(0,s._)(this,m)[m].style.width=`${(0,s._)(this,y)[y].width}px`,(0,s._)(this,m)[m].style.height=`${(0,s._)(this,y)[y].height}px`}function H({width:e,height:t,containers:i,className:o}){e&&t&&((0,s._)(this,m)[m].dataset.testid="lottie",(0,s._)(this,y)[y].containers=i,o&&o.split(" ").forEach((e=>{e&&(0,s._)(this,m)[m].classList.add(e)})))}function W(e){const t=(0,p.getPlayerEventId)({event:e,player:this});(0,s._)(this,v)[v].tasks.set(t,new a.LottiePlayerEventTask(t,(t=>{(0,s._)(this,F)[F](e),this.dispatchEvent(e,t)})))}function V(){(0,s._)(this,w)[w]||((0,s._)(this,w)[w]=!0,(0,s._)(this,m)[m].remove(),this.removeEventListeners(),(0,s._)(this,v)[v].tasks.forEach((e=>{(0,b.isPlayerEvent)({event:e,player:this})&&(0,s._)(this,v)[v].tasks.delete(e.taskUID)})),(0,s._)(this,y)[y].strictCache||r.LottieDataCache.outdate((0,s._)(this,y)[y].animationUrl))}Object.defineProperty(D,f,{writable:!0,value:["ready","destroy","firstFrame","loopComplete","enterFrame"]})},157951:(e,t,i)=>{i.d(t,{LottiePlayerDirection:()=>s});var s=function(e){return e[e.FORWARD=1]="FORWARD",e[e.BACKWARD=-1]="BACKWARD",e}({})},273808:(e,t,i)=>{function s({event:e,player:{id:t}}){return`${e}${t}`}i.d(t,{getPlayerEventId:()=>s})},908575:(e,t,i)=>{function s({event:e,player:t}){return e.taskUID.endsWith(t.id)}i.d(t,{isPlayerEvent:()=>s})},150195:(e,t,i)=>{function s(e){const{paddingTop:t,paddingBottom:i,paddingLeft:s,paddingRight:o,borderTopWidth:n,borderBottomWidth:r,borderLeftWidth:a,borderRightWidth:h}=getComputedStyle(e),d=parseInt(s)+parseInt(o),c=parseInt(t)+parseInt(i),_=parseInt(a)+parseInt(h),l=parseInt(n)+parseInt(r);return{width:Math.trunc(parseInt(e.style.width)||e.clientWidth-d-_||e.offsetWidth)||0,height:Math.trunc(parseInt(e.style.height)||e.clientHeight-c-l||e.offsetHeight)||0}}i.d(t,{getElementSize:()=>s})},505471:(e,t,i)=>{i.d(t,{isIntersectionObserverSupported:()=>s});const s="undefined"!=typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype},184330:(e,t,i)=>{i.d(t,{isSafari:()=>o});var s=i(958396);const o="safari"in globalThis||s.userAgent&&(/\b(iPad|iPhone|iPod)\b/.test(s.userAgent)||s.userAgent.match("Safari")&&!s.userAgent.match("Chrome"))},488577:(e,t,i)=>{i.d(t,{isTouchSupported:()=>s});const s="undefined"!=typeof window&&("ontouchstart"in window||"DocumentTouch"in window)},351901:(e,t,i)=>{i.d(t,{loadThreads:()=>o});var s=i(351118);function o(){return(0,s.asyncImportLoader)((async()=>{const{EsThread:e,Transfer:t}=await Promise.all([i.e(81399),i.e("langs/web/threads-es")]).then(i.bind(i,808849));return{EsThread:e,Transfer:t}}))}},958396:(e,t,i)=>{i.d(t,{userAgent:()=>s});const s="undefined"!=typeof navigator?navigator.userAgent:null}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/web/chunks/549e015c.1c59b575.js")}catch(e){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/web/chunks/549e015c.1c59b575.js",e),e}