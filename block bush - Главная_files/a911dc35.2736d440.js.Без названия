try{(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[2004],{438649:(t,e,a)=>{a.d(e,{AudioAction:()=>u});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=(0,r._)("_onExecute"),d=(0,r._)("_onExecuted");class u{get hint(){return null}get isDisabled(){return this.isPending}get isPending(){return this.isExecuting}execute(){}constructor({onExecute:t,onExecuted:e}={}){Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),(0,i._)(this,n)[n]=null,(0,i._)(this,d)[d]=null,this.isExecuting=!1,this.onExecute=()=>{if(this.isExecuting||this.isPending||this.isDisabled)return;null==(0,i._)(this,n)[n]||(0,i._)(this,n)[n].call(this,this);const t=this.execute();t instanceof Promise?(this.isExecuting=!0,t.finally((()=>{(0,o.runInAction)((()=>{this.isExecuting=!1})),null==(0,i._)(this,d)[d]||(0,i._)(this,d)[d].call(this,this)}))):null==(0,i._)(this,d)[d]||(0,i._)(this,d)[d].call(this,this)},(0,i._)(this,n)[n]=t??null,(0,i._)(this,d)[d]=e??null,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.observable],u.prototype,"isExecuting",void 0),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"hint",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Boolean),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"isDisabled",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Boolean),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"isPending",null),(0,s.__decorate)([o.action.bound],u.prototype,"onExecute",void 0),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",Object)],u.prototype,"execute",null)},278589:(t,e,a)=>{a.d(e,{AudioAction:()=>i.AudioAction});var i=a(438649)},919244:(t,e,a)=>{function i(t){return!!t.dmca_blocked||Number.isInteger(t.content_restricted)&&0!==t.content_restricted}a.d(e,{getIsBlocked:()=>i})},618662:(t,e,a)=>{a.d(e,{AudioPlaybackTogglePlayingAction:()=>i.AudioPlaybackTogglePlayingAction});var i=a(898183)},898183:(t,e,a)=>{a.d(e,{AudioPlaybackTogglePlayingAction:()=>_});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(278589),d=(0,r._)("_ensureList"),u=(0,r._)("_langs"),c=(0,r._)("_checkIsCurrent"),p=(0,r._)("_checkIsPlaying"),l=(0,r._)("_checkIsPaused");class _ extends n.AudioAction{get type(){return"AudioPlayback_TogglePlaying"}get key(){return`${this.type}/${this.entity.identity.fullId}`}get title(){return this.isActive?(0,i._)(this,u)[u].getLang("audio_row_aria_label_pause"):(0,i._)(this,u)[u].getLang("audio_row_aria_label_play")}get isActive(){return(0,i._)(this,p)[p]()}get isPending(){return!!super.isPending||this.channel.isPending&&(0,i._)(this,c)[c]()}async execute(){(0,i._)(this,p)[p]()?this.channel.pause():(0,i._)(this,l)[l]()?this.channel.resume():await this.playAudio()}async playAudio(){const t=await(0,i._)(this,d)[d]();await this.channel.playAudio(this.entity,t)}constructor(t){super(t),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),this.channel=t.channel,this.entity=t.entity,(0,i._)(this,d)[d]=t.ensureList,(0,i._)(this,u)[u]=t.langs,(0,i._)(this,c)[c]=t.checkIsCurrent,(0,i._)(this,p)[p]=t.checkIsPlaying,(0,i._)(this,l)[l]=t.checkIsPaused}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"type",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"key",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"title",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"isActive",null),(0,s.__decorate)([o.override,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"isPending",null),(0,s.__decorate)([o.override,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",Promise)],_.prototype,"execute",null)},864023:(t,e,a)=>{a.d(e,{AudioPlaybackModel:()=>i.AudioPlaybackModel});var i=a(605646)},605646:(t,e,a)=>{a.d(e,{AudioPlaybackModel:()=>h});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(916011),d=a(948742),u=a(618662),c=(0,r._)("_channel"),p=(0,r._)("_entity"),l=(0,r._)("_ensureList"),_=(0,r._)("_langs"),y=(0,r._)("_onTogglePlaying"),m=(0,r._)("_overrideTogglePlayingAction");class h{get isCurrent(){return(0,i._)(this,c)[c].isCurrentInQueue((0,i._)(this,p)[p].identity)}get isPlaying(){return this.isCurrent&&(0,i._)(this,c)[c].playing}get isPaused(){return this.isCurrent&&(0,i._)(this,c)[c].paused}get progress(){return this.isCurrent?(0,i._)(this,c)[c].progress.amount:null}get bufferingProgress(){return this.isCurrent?(0,i._)(this,c)[c].bufferingProgress:null}get frequency(){return this.isCurrent?(0,i._)(this,c)[c].frequency:null}get progressInput(){return this.isCurrent&&(0,i._)(this,c)[c].permissions.progressUpdate?new n.AudioPlayerProgressInput({channel:(0,i._)(this,c)[c]}):null}get volumeInput(){return this.isCurrent?new d.AudioPlayerVolumeInput({channel:(0,i._)(this,c)[c]}):null}get togglePlayingAction(){const t={langs:(0,i._)(this,_)[_],channel:(0,i._)(this,c)[c],entity:(0,i._)(this,p)[p],ensureList:(0,i._)(this,l)[l],checkIsCurrent:()=>this.isCurrent,checkIsPlaying:()=>this.isPlaying,checkIsPaused:()=>this.isPaused,onExecuted:(0,i._)(this,y)[y]??void 0};return(0,i._)(this,m)[m]?(0,i._)(this,m)[m](t):new u.AudioPlaybackTogglePlayingAction(t)}constructor(t){Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),(0,i._)(this,c)[c]=t.channel,(0,i._)(this,p)[p]=t.entity,(0,i._)(this,l)[l]=t.ensureList,(0,i._)(this,_)[_]=t.langs,(0,i._)(this,y)[y]=t.onTogglePlaying??null,(0,i._)(this,m)[m]=t.overrideTogglePlayingAction??null}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Boolean),(0,s.__metadata)("design:paramtypes",[])],h.prototype,"isCurrent",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Boolean),(0,s.__metadata)("design:paramtypes",[])],h.prototype,"isPlaying",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Boolean),(0,s.__metadata)("design:paramtypes",[])],h.prototype,"isPaused",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],h.prototype,"progress",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],h.prototype,"bufferingProgress",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],h.prototype,"progressInput",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],h.prototype,"volumeInput",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type","undefined"==typeof IAudioPlaybackTogglePlayingAction?Object:IAudioPlaybackTogglePlayingAction),(0,s.__metadata)("design:paramtypes",[])],h.prototype,"togglePlayingAction",null)},652448:(t,e,a)=>{a.d(e,{AudioArtistAuthor:()=>i.AudioArtistAuthor});var i=a(443761)},35280:(t,e,a)=>{a.d(e,{mapAudioArtistToAudioArtistAuthorData:()=>r});var i=a(16157);function r(t){const{photo:e}=t;return{id:t.id,domain:t.domain,title:t.name,avatar:e&&(0,i.mapBaseImagesToAudioImageData)(e)}}},443761:(t,e,a)=>{a.d(e,{AudioArtistAuthor:()=>o});var i=a(331635),r=a(327813),s=a(186088);class o{get key(){return this.data.id??this.data.title}get title(){return this.data.title}get avatar(){return(0,s.createAudioImageNullable)(this.data.avatar)}get href(){const{data:t}=this;return`/artist/${t.domain??t.id}`}constructor(t){this.type="artist",this.data=t.data,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"key",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"title",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"avatar",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"href",null)},895494:(t,e,a)=>{a.d(e,{AudioGroupAuthor:()=>i.AudioGroupAuthor});var i=a(966503)},966503:(t,e,a)=>{a.d(e,{AudioGroupAuthor:()=>n});var i=a(331635),r=a(327813),s=a(468073),o=a(186088);class n{get key(){return this.ownerId}get ownerId(){return this.data.ownerId}get groupId(){return s.Ranges.convertOwnerIdToGroupId(this.ownerId)}get title(){return this.data.title}get avatar(){return(0,o.createAudioImageNullable)(this.data.avatar)}get href(){return["/",this.data.domain||`club${this.groupId}`].join("")}get isCurator(){return this.data.isCurator}constructor(t){this.type="group",this.data=t.data,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"key",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"ownerId",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"groupId",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"title",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"avatar",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"href",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"isCurator",null)},562656:(t,e,a)=>{a.d(e,{AudioTextAuthor:()=>i.AudioTextAuthor});var i=a(353969)},353969:(t,e,a)=>{a.d(e,{AudioTextAuthor:()=>i});class i{get key(){return this.data}get title(){return this.data}constructor(t){this.type="text",this.data=t.data}}},815524:(t,e,a)=>{a.d(e,{AudioUserAuthor:()=>i.AudioUserAuthor});var i=a(330677)},330677:(t,e,a)=>{a.d(e,{AudioUserAuthor:()=>o});var i=a(331635),r=a(327813),s=a(186088);class o{get key(){return this.ownerId}get ownerId(){return this.data.ownerId}get userId(){return this.ownerId}get title(){return[this.data.firstName,this.data.lastName].filter(Boolean).join(" ")}get avatar(){return(0,s.createAudioImageNullable)(this.data.avatar)}get href(){return["/",this.data.domain||`id${this.ownerId}`].join("")}constructor(t){this.type="user",this.data=t.data,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"key",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"ownerId",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"userId",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"title",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"avatar",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"href",null)},758066:(t,e,a)=>{a.d(e,{AudioArtistAuthor:()=>i.AudioArtistAuthor,AudioGroupAuthor:()=>r.AudioGroupAuthor,AudioTextAuthor:()=>s.AudioTextAuthor,AudioUserAuthor:()=>o.AudioUserAuthor});var i=a(652448),r=a(895494),s=a(562656),o=a(815524)},186088:(t,e,a)=>{a.d(e,{createAudioImageNullable:()=>r});var i=a(135479);function r(t){return t?.sizes.length?new i.AudioImage(t):null}},207545:(t,e,a)=>{a.d(e,{mapAudioPhotoToAudioImageData:()=>r});const i=[["photo_34",34],["photo_68",68],["photo_135",135],["photo_270",270],["photo_300",300],["photo_600",600],["photo_1200",1200]];function r(t,e){return{sizes:s(t),mainColor:e}}function s(t){const e=[];let a;if(!t)return e;for(const[r,s]of i)a=t[r],a&&e.push({src:a,height:s,width:s});return e}},16157:(t,e,a)=>{function i(t,e){return{sizes:r(t),mainColor:e}}function r(t){return t.length?t.map(s):[]}function s(t){return{width:t.width,height:t.height,src:t.url}}a.d(e,{mapBaseImagesToAudioImageData:()=>i})},135479:(t,e,a)=>{a.d(e,{AudioImage:()=>d});var i=a(434518),r=a(763812),s=(0,r._)("_key"),o=(0,r._)("_pickHtmlAttrsBy"),n=(0,r._)("_pickBy");class d{get key(){return(0,i._)(this,s)[s]??this.sizes[0].src}pickByWidth(t){return(0,i._)(this,n)[n]("width",t)}pickByHeight(t){return(0,i._)(this,n)[n]("height",t)}pickHtmlAttrsByWidth(t){return(0,i._)(this,o)[o]("width",t)}pickHtmlAttrsByHeight(t){return(0,i._)(this,o)[o]("height",t)}constructor(t){Object.defineProperty(this,o,{value:u}),Object.defineProperty(this,n,{value:c}),Object.defineProperty(this,s,{writable:!0,value:void 0});const{sizes:e}=t;if(!e.length)throw new Error("AudioImage required at least one size");(0,i._)(this,s)[s]=t.key??null,this.sizes=e,this.mainColor=t.mainColor??null}}function u(t,e){const a=(0,i._)(this,n)[n](t,e).src,r=[2,3].reduce(((a,r)=>{const s=a.at(-1),o=(0,i._)(this,n)[n](t,e*r);return s?.src!==o.src&&a.push({src:o.src,ratio:r}),a}),[{src:a,ratio:1}]);if(1===r.length)return{src:a,srcset:void 0};const s=r.map((({src:t,ratio:e})=>`${t} ${Number.isInteger(e)?e:e.toFixed(1)}x`)).join(", ");return{src:a,srcset:s}}function c(t,e){let a=this.sizes[0];for(const i of this.sizes){if(i[t]===e)return i;if(!a){a=i;continue}const r=i[t]>e,s=i[t]<a[t]||a[t]<e,o=!r,n=i[t]>a[t];(r&&s||o&&n)&&(a=i)}return a}},557875:(t,e,a)=>{a.d(e,{AudioInput:()=>d});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=(0,r._)("_onChange");class d{get hint(){return null}get isDisabled(){return this.isPending}get isPending(){return this.isExecuting}constructor({onChange:t}={}){Object.defineProperty(this,n,{writable:!0,value:void 0}),(0,i._)(this,n)[n]=null,this.isExecuting=!1,this.emitChange=t=>{this.isPending||this.isDisabled||(this.change(t),null==(0,i._)(this,n)[n]||(0,i._)(this,n)[n].call(this,this))},t&&((0,i._)(this,n)[n]=t),(0,o.makeObservable)(this)}}(0,s.__decorate)([o.observable],d.prototype,"isExecuting",void 0),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],d.prototype,"hint",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Boolean),(0,s.__metadata)("design:paramtypes",[])],d.prototype,"isDisabled",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Boolean),(0,s.__metadata)("design:paramtypes",[])],d.prototype,"isPending",null),(0,s.__decorate)([o.action.bound],d.prototype,"emitChange",void 0)},153013:(t,e,a)=>{function i(t){return{isExplicit:!!(2&t),isForeignAgent:!!(4&t)}}a.d(e,{bitmaskToAudioDataLegal:()=>i})},284436:(t,e,a)=>{a.d(e,{SimpleAudioList:()=>i.SimpleAudioList});var i=a(256334)},136309:(t,e,a)=>{a.d(e,{SimpleAudioList:()=>n});var i=a(891480),r=a(702130),s=a(843161),o=a(418562);class n extends r.AudioList{get length(){return this.items.length}get isEmpty(){return!this.items.length}get head(){return this.items}audioAt(t){return this.items.at(t)}async fetchAt(t){return this.audioAtStrict(t)}async fetchNext(){return[]}audioAtStrict(t){const e=this.audioAt(t);if(!e)throw new Error("Audio not found");return e}constructor(t){super(),this.type=i.AudioListType.SimpleAudioList,this.infinite=!1,this.context={ref:null},this.identity=t.identity??new s.SingleIdentity({id:`SimpleAudioList#${(0,o.default)()}`}),this.items=[...t.items]}}},824037:(t,e,a)=>{a.d(e,{SimpleAudioList:()=>i.SimpleAudioList});var i=a(136309)},256334:(t,e,a)=>{a.d(e,{SimpleAudioList:()=>i.SimpleAudioList});var i=a(824037)},395688:(t,e,a)=>{a.d(e,{AudioViewContextType:()=>i});var i=function(t){return t.Default="default",t.Kids="kids",t}({})},723955:(t,e,a)=>{a.d(e,{createViewContextByQueryParams:()=>s,createViewContextByUrl:()=>r});var i=a(517775);function r(t){const e=URL.parse(t)?.searchParams;if(!e)return new i.AudioDefaultViewContext;return s(Object.fromEntries(e))}function s(t){return i.kidsQueryParamMatchers.some((e=>{const a=t[e.queryParam];return!!a&&e.matchValue(a)}))?new i.AudioKidsViewContext:new i.AudioDefaultViewContext}},654777:(t,e,a)=>{a.d(e,{AudioDefaultViewContext:()=>r.AudioDefaultViewContext,AudioKidsViewContext:()=>r.AudioKidsViewContext,AudioViewContextFlags:()=>o.AudioViewContextFlags,AudioViewContextType:()=>i.AudioViewContextType,KIDS_VIEW_CONTEXT_IDENTIFIER:()=>r.KIDS_VIEW_CONTEXT_IDENTIFIER,bitmaskToFlagsContext:()=>o.bitmaskToFlagsContext,clientQueryParamMatcher:()=>r.clientQueryParamMatcher,createViewContextByQueryParams:()=>s.createViewContextByQueryParams,createViewContextByUrl:()=>s.createViewContextByUrl,serverQueryParamMatcher:()=>r.serverQueryParamMatcher});var i=a(395688),r=a(517775),s=a(723955),o=a(675624)},922834:(t,e,a)=>{a.d(e,{AudioViewContextFlags:()=>i});class i{get isKidsContent(){return this.has(2)}get isKidsSection(){return this.has(1)}get isKidsLimited(){return this.has(4)}get isKidsEditorial(){return this.has(8)}has(t){return(this.bitMask&t)===t}constructor(t){this.bitMask=t}}},86175:(t,e,a)=>{a.d(e,{bitmaskToFlagsContext:()=>r});var i=a(922834);function r(t){return new i.AudioViewContextFlags(t)}},883795:(t,e,a)=>{a.d(e,{AudioViewContextFlags:()=>r.AudioViewContextFlags,bitmaskToFlagsContext:()=>i.bitmaskToFlagsContext});var i=a(86175),r=a(922834)},675624:(t,e,a)=>{a.d(e,{AudioViewContextFlags:()=>i.AudioViewContextFlags,bitmaskToFlagsContext:()=>i.bitmaskToFlagsContext});var i=a(883795)},991256:(t,e,a)=>{a.d(e,{AudioDefaultViewContext:()=>i.AudioDefaultViewContext});var i=a(449993)},449993:(t,e,a)=>{a.d(e,{AudioDefaultViewContext:()=>r});var i=a(395688);class r{getRef(t){return t??null}enrichFetchParams(t){return{...t,ref:t.ref?t.ref:""}}constructor(){this.type=i.AudioViewContextType.Default,this.searchScreenRef="search_music_service"}}},935448:(t,e,a)=>{a.d(e,{AudioKidsViewContext:()=>i.AudioKidsViewContext,KIDS_VIEW_CONTEXT_IDENTIFIER:()=>r.KIDS_VIEW_CONTEXT_IDENTIFIER,clientQueryParamMatcher:()=>r.clientQueryParamMatcher,kidsQueryParamMatchers:()=>r.kidsQueryParamMatchers,serverQueryParamMatcher:()=>r.serverQueryParamMatcher});var i=a(454537),r=a(447554)},707568:(t,e,a)=>{a.d(e,{clientQueryParamMatcher:()=>i.clientQueryParamMatcher});var i=a(598433)},598433:(t,e,a)=>{a.d(e,{clientQueryParamMatcher:()=>r});var i=a(337995);const r={queryParam:"view_context",matchValue:t=>t===i.KIDS_VIEW_CONTEXT_IDENTIFIER}},337995:(t,e,a)=>{a.d(e,{KIDS_VIEW_CONTEXT_IDENTIFIER:()=>i});const i="kids"},447554:(t,e,a)=>{a.d(e,{KIDS_VIEW_CONTEXT_IDENTIFIER:()=>o.KIDS_VIEW_CONTEXT_IDENTIFIER,clientQueryParamMatcher:()=>r.clientQueryParamMatcher,kidsQueryParamMatchers:()=>i.kidsQueryParamMatchers,serverQueryParamMatcher:()=>s.serverQueryParamMatcher});var i=a(465683),r=a(707568),s=a(998964),o=a(337995)},465683:(t,e,a)=>{a.d(e,{kidsQueryParamMatchers:()=>r});var i=a(998964);const r=[a(707568).clientQueryParamMatcher,i.serverQueryParamMatcher]},998964:(t,e,a)=>{a.d(e,{serverQueryParamMatcher:()=>i.serverQueryParamMatcher});var i=a(70565)},70565:(t,e,a)=>{a.d(e,{serverQueryParamMatcher:()=>r});var i=a(337995);const r={queryParam:"section",matchValue:t=>t.includes(i.KIDS_VIEW_CONTEXT_IDENTIFIER)}},454537:(t,e,a)=>{a.d(e,{AudioKidsViewContext:()=>s});var i=a(395688);const r="kids_section";class s{getRef(t){return t?`${t}&${r}`:r}enrichFetchParams(t){return{...t,ref:this.getRef(t.ref)}}constructor(){this.type=i.AudioViewContextType.Kids,this.searchScreenRef="search_music_service_kids"}}},517775:(t,e,a)=>{a.d(e,{AudioDefaultViewContext:()=>i.AudioDefaultViewContext,AudioKidsViewContext:()=>r.AudioKidsViewContext,KIDS_VIEW_CONTEXT_IDENTIFIER:()=>r.KIDS_VIEW_CONTEXT_IDENTIFIER,clientQueryParamMatcher:()=>r.clientQueryParamMatcher,kidsQueryParamMatchers:()=>r.kidsQueryParamMatchers,serverQueryParamMatcher:()=>r.serverQueryParamMatcher});var i=a(991256),r=a(935448)},895411:(t,e,a)=>{a.d(e,{AudioTogglePlaying:()=>_});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(438649),d=a(978367),u=(0,r._)("_entity"),c=(0,r._)("_ensureList"),p=(0,r._)("_langs"),l=(0,r._)("_channel");class _ extends n.AudioAction{get key(){return`${this.type}/${(0,i._)(this,u)[u].identity.fullId}`}get title(){return this.isActive?(0,i._)(this,p)[p].getLang("audio_action_pause"):(0,i._)(this,p)[p].getLang("audio_action_play")}get isActive(){return this.isPlaying}get isPending(){return!!super.isPending||(0,i._)(this,l)[l].isPending&&this.isCurrentInQueue}async execute(){if(this.isPlaying)return void(0,i._)(this,l)[l].pause();if(this.isPaused)return void(0,i._)(this,l)[l].resume();const t=await(0,i._)(this,c)[c]();await(0,i._)(this,l)[l].playAudio((0,i._)(this,u)[u],t,d.AudioPlayerPlayAudioEventReason.AudioButton)}get isPlaying(){return(0,i._)(this,l)[l].playing&&this.isCurrentInQueue}get isPaused(){return(0,i._)(this,l)[l].paused&&this.isCurrentInQueue}get isCurrentInQueue(){return(0,i._)(this,l)[l].isCurrentInQueue((0,i._)(this,u)[u].identity)}constructor({entity:t,ensureList:e,langs:a,channel:r,...s}){super(s),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,i._)(this,u)[u]=t,(0,i._)(this,c)[c]=e,(0,i._)(this,p)[p]=a,(0,i._)(this,l)[l]=r,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"key",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"title",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"isActive",null),(0,s.__decorate)([o.override,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"isPending",null),(0,s.__decorate)([o.override,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",Promise)],_.prototype,"execute",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"isPlaying",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"isPaused",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Boolean),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"isCurrentInQueue",null)},875936:(t,e,a)=>{a.d(e,{AudioPlayerInputType:()=>i});var i=function(t){return t.Volume="Volume",t.Progress="Progress",t.Speed="Speed",t.Repeat="Repeat",t}({})},916011:(t,e,a)=>{a.d(e,{AudioPlayerProgressInput:()=>_});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(426389),d=a(557875),u=a(875936),c=(0,r._)("_channel"),p=(0,r._)("_getChangeReason"),l=(0,r._)("_calculateDeltaFromPreviousValue");class _ extends d.AudioInput{get type(){return u.AudioPlayerInputType.Progress}get key(){return`${this.type}/${(0,i._)(this,c)[c].id}`}get value(){return(0,i._)(this,c)[c].progress.amount}change(t){const e=(0,i._)(this,p)[p](t);(0,i._)(this,c)[c].seek(t,e)}constructor({channel:t,...e}){super(e),Object.defineProperty(this,p,{value:y}),Object.defineProperty(this,l,{value:m}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,i._)(this,c)[c]=t,(0,o.makeObservable)(this)}}function y(t){return(0,i._)(this,l)[l](t)<0?n.AudioPlayerSeekEventReason.SliderBack:n.AudioPlayerSeekEventReason.SliderForward}function m(t){return t-this.value}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"key",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"value",null)},948742:(t,e,a)=>{a.d(e,{AudioPlayerVolumeInput:()=>c});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(557875),d=a(875936),u=(0,r._)("_channel");class c extends n.AudioInput{get type(){return d.AudioPlayerInputType.Volume}get key(){return`${this.type}/${(0,i._)(this,u)[u].id}`}get value(){return(0,i._)(this,u)[u].volume.level}change(t){(0,i._)(this,u)[u].volume.setLevel(t)}constructor({channel:t,...e}){super(e),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,i._)(this,u)[u]=t,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"key",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"value",null)},854651:(t,e,a)=>{a.d(e,{MusicAlbumOpenAction:()=>n});var i=a(331635),r=a(327813),s=a(728100),o=a(24992);class n extends o.MusicAlbumAction{get title(){return this.langs.getLang("audio_open_album")}constructor(t){super({...t,type:s.MusicAlbumActionType.Open}),(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"title",null)},24992:(t,e,a)=>{a.d(e,{MusicAlbumAction:()=>i.MusicAlbumAction});var i=a(687857)},687857:(t,e,a)=>{a.d(e,{MusicAlbumAction:()=>n});var i=a(331635),r=a(327813),s=a(70148),o=a(438649);class n extends o.AudioAction{get key(){return`${this.type}/${this.identity.fullId}`}get identity(){return new s.OwnedIdentity(this.data.identity)}constructor(t){super(t),this.type=t.type,this.data=t.data,this.langs=t.langs,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"key",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type","undefined"==typeof IOwnedIdentity?Object:IOwnedIdentity),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"identity",null)},502633:(t,e,a)=>{a.d(e,{MusicAlbumActionType:()=>i.MusicAlbumActionType,MusicAlbumActions:()=>r.MusicAlbumActions});var i=a(728100),r=(a(158559),a(64800))},64800:(t,e,a)=>{a.d(e,{MusicAlbumActions:()=>s});var i=a(331635),r=a(327813);class s{get open(){const t=this.callbacks?.onOpen;return this.provider.provideOpen({data:this.data,onExecuted:t})}constructor(t){this.data=t.data,this.provider=t.provider,this.callbacks=t.callbacks??null,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],s.prototype,"open",null)},158559:(t,e,a)=>{a.d(e,{MusicAlbumActionsProvider:()=>i.MusicAlbumActionsProvider});var i=a(68310)},68310:(t,e,a)=>{a.d(e,{MusicAlbumActionsProvider:()=>u});var i=a(434518),r=a(763812),s=a(728100),o=a(854651),n=(0,r._)("_langs"),d=(0,r._)("_overrides");class u{provideOpen({data:t,...e}){const a=(0,i._)(this,d)[d]?.[s.MusicAlbumActionType.Open];return a?a(t,e.onExecuted):new o.MusicAlbumOpenAction({data:t,langs:(0,i._)(this,n)[n],...e})}constructor(t){Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),(0,i._)(this,n)[n]=t.langs,(0,i._)(this,d)[d]=t.overrides??null}}},340158:(t,e,a)=>{a.d(e,{MusicAlbumDataFromAudioAudioAlbumComputed:()=>d});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=(0,r._)("_source");class d{get identity(){const t=(0,i._)(this,n)[n];return{id:t.id,ownerId:t.owner_id,accessKey:t.access_key}}get type(){return"album"}get title(){return(0,i._)(this,n)[n].title}get genres(){return null}get releaseYear(){return null}get authors(){return null}constructor(t){Object.defineProperty(this,n,{writable:!0,value:void 0}),(0,i._)(this,n)[n]=t.source}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type","undefined"==typeof OwnedIdentityData?Object:OwnedIdentityData),(0,s.__metadata)("design:paramtypes",[])],d.prototype,"identity",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],d.prototype,"genres",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],d.prototype,"releaseYear",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],d.prototype,"authors",null)},427209:(t,e,a)=>{a.d(e,{MusicAlbumDataFromAudioPlaylistComputed:()=>c});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(938726),d=a(214806),u=(0,r._)("_source");class c{get identity(){const t=(0,i._)(this,u)[u];return{id:t.id,ownerId:t.owner_id,accessKey:t.access_key}}get type(){const t=(0,i._)(this,u)[u].album?.type;if(!t)return"album";switch(t){case"album":default:return"album";case"ep":return"ep";case"collection":return"collection";case"single":return"single"}}get title(){return(0,i._)(this,u)[u].title}get genres(){const t=(0,i._)(this,u)[u].genres;return t?t.map((t=>(0,n.mapAudioGenreToMusicGenreData)(t))):null}get releaseYear(){return(0,i._)(this,u)[u].year??null}get authors(){return(0,d.mapAudioPlaylistToMusicAuthorsData)((0,i._)(this,u)[u])}constructor(t){Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,i._)(this,u)[u]=t.source}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type","undefined"==typeof OwnedIdentityData?Object:OwnedIdentityData),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"identity",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",String),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"title",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"genres",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"releaseYear",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type","undefined"==typeof IMusicAuthorsData?Object:IMusicAuthorsData),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"authors",null)},191561:(t,e,a)=>{a.d(e,{MusicAlbumDataFromAudioAudioAlbumComputed:()=>r.MusicAlbumDataFromAudioAudioAlbumComputed,MusicAlbumDataFromAudioPlaylistComputed:()=>i.MusicAlbumDataFromAudioPlaylistComputed});var i=a(427209),r=a(340158)},728167:(t,e,a)=>{a.d(e,{MusicAlbumModelFactory:()=>l});var i=a(434518),r=a(763812),s=a(331635),o=a(712600),n=a(132028),d=a(367734),u=a(158559),c=a(106980),p=(0,r._)("_actionsProvider");class l{create(t){return new c.MusicAlbumModel({data:t.data,langs:this.langs,actionsProvider:(0,i._)(this,p)[p],actionsCallbacks:t.actionsCallbacks})}constructor(t,e){Object.defineProperty(this,p,{writable:!0,value:void 0}),this.langs=t,(0,i._)(this,p)[p]=new u.MusicAlbumActionsProvider({langs:this.langs,overrides:e.musicAlbumActionOverrides})}}l=(0,s.__decorate)([n.scope.container(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===o.Langs?Object:o.Langs,void 0===d.AudioPlatformConfig?Object:d.AudioPlatformConfig])],l)},651485:(t,e,a)=>{a.d(e,{MusicAlbumDataFromAudioAudioAlbumComputed:()=>r.MusicAlbumDataFromAudioAudioAlbumComputed,MusicAlbumModelFactory:()=>i.MusicAlbumModelFactory});var i=a(728167),r=a(191561)},106980:(t,e,a)=>{a.d(e,{MusicAlbumModel:()=>p});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(70148),d=a(194134),u=a(502633),c=(0,r._)("_langs");class p{get identity(){return new n.OwnedIdentity(this.data.identity)}get title(){return this.data.title}get typeLabel(){const t=(0,i._)(this,c)[c],e=this.data.type;switch(e){case"album":return t.getLang("audio_music_album_playlist_type_album");case"ep":return t.getLang("audio_music_album_playlist_type_ep");case"collection":return t.getLang("audio_music_album_playlist_type_collection");case"single":return t.getLang("audio_music_album_playlist_type_single");default:throw new TypeError(`Unsupported music album type ${e}`)}}get genreLabels(){const t=this.data.genres;return t?t.map((t=>t.name)):null}get releaseYear(){return this.data.releaseYear}get authors(){const t=this.data.authors;return t?new d.MusicAuthors({data:t}):null}constructor(t){Object.defineProperty(this,c,{writable:!0,value:void 0}),this.params=t,this.data=t.data,(0,i._)(this,c)[c]=t.langs,this.actions=new u.MusicAlbumActions({data:this.data,provider:t.actionsProvider,callbacks:t.actionsCallbacks})}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",String),(0,s.__metadata)("design:paramtypes",[])],p.prototype,"title",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",String),(0,s.__metadata)("design:paramtypes",[])],p.prototype,"typeLabel",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],p.prototype,"genreLabels",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],p.prototype,"releaseYear",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],p.prototype,"authors",null)},308058:(t,e,a)=>{a.d(e,{MusicAudioBroadcastAction:()=>n});var i=a(331635),r=a(327813),s=a(288866),o=a(734362);class n extends o.MusicAudioAction{get title(){return this.langs.getLang("audio_player_block_broadcast_tooltip_title")}execute(){throw new Error("Not implemented")}constructor(t){super({...t,type:s.MusicAudioActionType.Broadcast}),(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"title",null),(0,i.__decorate)([r.override,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",void 0)],n.prototype,"execute",null)},870066:(t,e,a)=>{a.d(e,{MusicAudioCopyPageURLAction:()=>p});var i=a(434518),r=a(763812),s=a(327813),o=a(734362),n=a(288866),d=(0,r._)("_href"),u=(0,r._)("_clipboard"),c=(0,r._)("_notifications");class p extends o.MusicAudioAction{get title(){return this.langs.getLang("audio_copy_audio_link")}async execute(){await(0,i._)(this,u)[u].copy((0,i._)(this,d)[d]),(0,i._)(this,c)[c].notify((()=>({message:{text:this.langs.getLang("audio_copy_audio_link_notification")}})))}constructor({href:t,clipboard:e,notifications:a,...r}){super({...r,type:n.MusicAudioActionType.CopyPageURL}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,i._)(this,d)[d]=t,(0,i._)(this,u)[u]=e,(0,i._)(this,c)[c]=a,(0,s.makeObservable)(this)}}},659845:(t,e,a)=>{a.d(e,{MusicAudioOpenAction:()=>n});var i=a(331635),r=a(327813),s=a(288866),o=a(734362);class n extends o.MusicAudioAction{get title(){return this.langs.getLang("global_open")}constructor(t){super({...t,type:s.MusicAudioActionType.Open}),this.href=t.href,this.target=t.target,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"title",null)},478393:(t,e,a)=>{a.d(e,{MusicAudioOpenLyricsAction:()=>n});var i=a(331635),r=a(327813),s=a(288866),o=a(734362);class n extends o.MusicAudioAction{get title(){return this.langs.getLang("audio_show_lyrics")}constructor(t){super({...t,type:s.MusicAudioActionType.OpenLyrics}),(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"title",null)},749244:(t,e,a)=>{a.d(e,{MusicAudioOpenSimilarAction:()=>n});var i=a(331635),r=a(327813),s=a(288866),o=a(734362);class n extends o.MusicAudioAction{get title(){return this.langs.getLang("audio_show_recommendations")}constructor(t){super({...t,type:s.MusicAudioActionType.OpenSimilar}),this.href=t.href,this.target=t.target,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"title",null)},974752:(t,e,a)=>{a.d(e,{MusicAudioOpenSnippetAction:()=>n});var i=a(331635),r=a(327813),s=a(734362),o=a(288866);class n extends s.MusicAudioAction{get title(){return this.langs.getLang("audio_music_track_row_snippet_action_hint")}constructor(t){super({...t,type:o.MusicAudioActionType.OpenSnippet}),(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"title",null)},862272:(t,e,a)=>{a.d(e,{MusicAudioOpenUmaAction:()=>n});var i=a(331635),r=a(327813),s=a(288866),o=a(734362);class n extends o.MusicAudioAction{get title(){return"UMA"}constructor(t){super({...t,type:s.MusicAudioActionType.OpenUma}),(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"title",null)},760478:(t,e,a)=>{a.d(e,{MusicAudioShareAction:()=>n});var i=a(331635),r=a(327813),s=a(288866),o=a(734362);class n extends o.MusicAudioAction{get title(){return this.langs.getLang("audio_share_audio")}get hint(){return this.langs.getLang("audio_action_share_hint")}constructor(t){super({...t,type:s.MusicAudioActionType.Share}),(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"title",null),(0,i.__decorate)([r.override,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"hint",null)},379925:(t,e,a)=>{a.d(e,{AudioDislikesAnalytics:()=>d});var i=a(331635),r=a(132028),s=a(655758),o=a(809424),n=a(740782);class d{sendAddDislike(t){this.productionStats.send({type:"type_action",type_action:{type:"type_audio_dislike_item",type_audio_dislike_item:{event_type:n.AudioEventItemType.DISLIKES_ADD_DISLIKE,...u(t)}},screen:this.metaData.get().screen})}sendRemoveDislike(t){this.productionStats.send({type:"type_action",type_action:{type:"type_audio_dislike_item",type_audio_dislike_item:{event_type:n.AudioEventItemType.DISLIKES_REMOVE_DISLIKE,...u(t)}},screen:this.metaData.get().screen})}constructor(t,e){this.productionStats=t,this.metaData=e}}function u({data:t,playerProgress:e,playlistIdentity:a,trackCode:i}){const r=t.apiAudio.duration,s=e?Math.floor(e*r*1e3):0;return a?{audio_id:t.identity.id,audio_owner_id:t.identity.ownerId,track_code:i??"",timeline_position:s,playlist_id:a.id,playlist_owner_id:a.ownerId}:{audio_id:t.identity.id,audio_owner_id:t.identity.ownerId,track_code:i??"",timeline_position:s}}d=(0,i.__decorate)([r.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.ProductionStats?Object:s.ProductionStats,void 0===o.MetaData?Object:o.MetaData])],d)},686474:(t,e,a)=>{a.d(e,{MusicAudioToggleDislikeAction:()=>l});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(288866),d=a(734362),u=(0,r._)("_service"),c=(0,r._)("_channel"),p=(0,r._)("_audioDislikesAnalytics");class l extends d.MusicAudioAction{get title(){return this.langs.getLang("audio_action_dislike")}get isActive(){return!!(0,i._)(this,u)[u].state.get(this.identity)}async execute(){if(this.isPending||this.isDisabled)return;const{trackCode:t}=this.data;let e,a,r=0;if((0,i._)(this,c)[c].currentAudio?.identity.fullId===this.identity.fullId){r=(0,i._)(this,c)[c].progress.amount;const{currentListIdentity:t}=(0,i._)(this,c)[c];t&&"id"in t&&"ownerId"in t&&(e=t)}this.isActive?(a=(0,i._)(this,u)[u].deactivate(this.identity,{}),(0,i._)(this,p)[p].sendRemoveDislike({data:this.data,playerProgress:r,trackCode:t,playlistIdentity:e})):(a=(0,i._)(this,u)[u].activate(this.identity,{}),(0,i._)(this,p)[p].sendAddDislike({data:this.data,playerProgress:r,trackCode:t,playlistIdentity:e})),await a}constructor(t){super({...t,type:n.MusicAudioActionType.ToggleDislike}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,i._)(this,u)[u]=t.dislikesService,(0,i._)(this,c)[c]=t.channel,(0,i._)(this,p)[p]=t.audioDislikesAnalytics,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],l.prototype,"title",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],l.prototype,"isActive",null),(0,s.__decorate)([o.override,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",Promise)],l.prototype,"execute",null)},173705:(t,e,a)=>{a.d(e,{MusicAudioToggleOwningAction:()=>y});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(898950),d=a(468073),u=a(288866),c=a(734362),p=(0,r._)("_getSource"),l=(0,r._)("_myMusicService"),_=(0,r._)("_groupMusicServices");class y extends c.MusicAudioAction{get title(){return this.explanation}get isActive(){return this.owning.hasOwned}get isPending(){return super.isPending||this.owning.isPending}execute(){if(!this.isPending&&!this.isDisabled)return this.isActive&&this.owning.isDeleted&&this.owning.isOwned?this.owning.restore():this.isActive?this.owning.delete():this.owning.add()}get explanation(){const{owning:t,targetOwnerType:e,langs:a}=this,{hasOwned:i}=t;switch(e){case"group":return i?a.getLang("audio_music_track_row_remove_from_group_music_action_hint"):a.getLang("audio_music_track_row_add_to_group_music_action_hint");case"myMusic":return i?a.getLang("audio_music_track_row_remove_from_my_music_action_hint"):a.getLang("audio_music_track_row_add_to_my_music_action_hint")}}get owning(){const{targetOwnerType:t,targetOwnerId:e}=this;switch(t){case"group":return new n.MusicAudioOwning({identity:this.identity,trackCode:this.data.trackCode,service:(0,i._)(this,_)[_].get(d.Ranges.convertOwnerIdToGroupId(e))});case"myMusic":return new n.MusicAudioOwning({identity:this.identity,trackCode:this.data.trackCode,service:(0,i._)(this,l)[l],getHasOwnedStateFallback:()=>(0,i._)(this,p)[p]().audio.like})}}get targetOwnerType(){return d.Ranges.isGroupId(this.targetOwnerId)?"group":"myMusic"}constructor(t){super({...t,type:u.MusicAudioActionType.ToggleOwning}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),(0,i._)(this,p)[p]=t.getSource,(0,i._)(this,l)[l]=t.myMusicService,(0,i._)(this,_)[_]=t.groupMusicServices,this.targetOwnerId=t.targetOwnerId,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"title",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"isActive",null),(0,s.__decorate)([o.override,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"isPending",null),(0,s.__decorate)([o.override,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",void 0)],y.prototype,"execute",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"explanation",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"owning",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",String),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"targetOwnerType",null)},424951:(t,e,a)=>{a.d(e,{MusicAudioTogglePlaying:()=>o});var i=a(327813),r=a(895411),s=a(288866);class o extends r.AudioTogglePlaying{get type(){return s.MusicAudioActionType.TogglePlaying}constructor(t){super(t),(0,i.makeObservable)(this)}}},734362:(t,e,a)=>{a.d(e,{MusicAudioAction:()=>i.MusicAudioAction});var i=a(407275)},407275:(t,e,a)=>{a.d(e,{MusicAudioAction:()=>o});var i=a(331635),r=a(327813),s=a(438649);class o extends s.AudioAction{get key(){return`${this.type}/${this.identity.fullId}`}get identity(){return this.data.identity}get releaseIdentity(){return this.data.releaseIdentity}constructor(t){super(t),this.type=t.type,this.data=t.data,this.langs=t.langs,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"key",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type","undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"identity",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Object),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"releaseIdentity",null)},97287:(t,e,a)=>{a.d(e,{MusicAudioActionType:()=>i.MusicAudioActionType,MusicAudioActions:()=>s.MusicAudioActions,MusicAudioActionsProvider:()=>r.MusicAudioActionsProvider});var i=a(288866),r=a(270037),s=a(800734)},800734:(t,e,a)=>{a.d(e,{MusicAudioActions:()=>y});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=(0,r._)("_getSource"),d=(0,r._)("_data"),u=(0,r._)("_entity"),c=(0,r._)("_ensureList"),p=(0,r._)("_context"),l=(0,r._)("_provider"),_=(0,r._)("_callbacks");class y{get open(){const t=(0,i._)(this,_)[_]?.onOpen;return(0,i._)(this,l)[l].provideOpen({data:(0,i._)(this,d)[d],target:"_blank",onExecuted:t})}get openSimilar(){const t=(0,i._)(this,_)[_]?.onOpenSimilar;return(0,i._)(this,l)[l].provideOpenSimilar({data:(0,i._)(this,d)[d],target:"_blank",onExecuted:t})}get openUma(){const t=(0,i._)(this,_)[_]?.onOpenUma;return(0,i._)(this,l)[l].provideOpenUma({data:(0,i._)(this,d)[d],onExecuted:t})}get openSnippet(){const t=(0,i._)(this,_)[_]?.onOpenSnippet;return(0,i._)(this,l)[l].provideOpenSnippet({data:(0,i._)(this,d)[d],onExecuted:t})}get toggleOwning(){const t=(0,i._)(this,_)[_]?.onToggleOwning;return(0,i._)(this,l)[l].provideToggleOwning({getSource:(0,i._)(this,n)[n],data:(0,i._)(this,d)[d],targetOwnerId:(0,i._)(this,p)[p].targetOwnerId,onExecuted:t})}get toggleDislike(){const t=(0,i._)(this,_)[_]?.onToggleDislike;return(0,i._)(this,l)[l].provideToggleDislike({data:(0,i._)(this,d)[d],onExecuted:t})}get togglePlaying(){const t=(0,i._)(this,_)[_]?.onTogglePlaying;return(0,i._)(this,l)[l].provideTogglePlaying({entity:(0,i._)(this,u)[u],ensureList:(0,i._)(this,c)[c],data:(0,i._)(this,d)[d],onExecuted:t})}get share(){const t=(0,i._)(this,_)[_]?.onShare;return(0,i._)(this,l)[l].provideShare({data:(0,i._)(this,d)[d],onExecuted:t})}get broadcast(){const t=(0,i._)(this,_)[_]?.onBroadcast;return(0,i._)(this,l)[l].provideBroadcast({data:(0,i._)(this,d)[d],onExecuted:t})}get openLyrics(){if(!(0,i._)(this,d)[d].hasLyrics)return null;const t=(0,i._)(this,_)[_]?.onOpenLyrics;return(0,i._)(this,l)[l].provideOpenLyrics({data:(0,i._)(this,d)[d],onExecuted:t})}get copyPageURL(){const t=(0,i._)(this,_)[_]?.onCopyPageURL;return(0,i._)(this,l)[l].provideCopyPageURL({data:(0,i._)(this,d)[d],onExecuted:t})}constructor(t){Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),(0,i._)(this,n)[n]=t.getSource,(0,i._)(this,d)[d]=t.data,(0,i._)(this,u)[u]=t.entity,(0,i._)(this,c)[c]=t.ensureList,(0,i._)(this,p)[p]=t.context,(0,i._)(this,l)[l]=t.provider,(0,i._)(this,_)[_]=t.callbacks??null,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"open",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"openSimilar",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"openUma",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"openSnippet",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"toggleOwning",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"toggleDislike",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"togglePlaying",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"share",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"broadcast",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"openLyrics",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"copyPageURL",null)},270037:(t,e,a)=>{a.d(e,{MusicAudioActionsProvider:()=>i.MusicAudioActionsProvider});var i=a(843788)},843788:(t,e,a)=>{a.d(e,{MusicAudioActionsProvider:()=>M});var i=a(434518),r=a(763812),s=a(70148),o=a(288866),n=a(659845),d=a(749244),u=a(862272),c=a(974752),p=a(173705),l=a(686474),_=a(424951),y=a(760478),m=a(308058),h=a(478393),g=a(870066),v=(0,r._)("_channel"),A=(0,r._)("_langs"),b=(0,r._)("_authService"),f=(0,r._)("_musicService"),P=(0,r._)("_overrides"),w=(0,r._)("_platformConfig"),k=(0,r._)("_notifications"),O=(0,r._)("_audioDislikesAnalytics"),I=(0,r._)("_getPageHref");class M{provideOpen({data:t,target:e,...a}){if(t.isBlocked)return null;const r=(0,i._)(this,I)[I](t);return new n.MusicAudioOpenAction({data:t,target:e,href:r,langs:(0,i._)(this,A)[A],...a})}provideOpenSimilar({data:t,target:e,...a}){const{releaseIdentity:r}=t,o=r?new s.OwnedIdentity(r).rawId:new s.OwnedIdentity(t.identity).accessRawId;return new d.MusicAudioOpenSimilarAction({data:t,target:e,langs:(0,i._)(this,A)[A],href:`/audio?section=recoms_audio&audio_id=${o}`,...a})}provideOpenUma({data:t,...e}){if(!(0,i._)(this,f)[f].userPermissions.permissions?.viewAudioMetaInfo)return null;const a=(0,i._)(this,P)[P]?.[o.MusicAudioActionType.OpenUma];return a?a(t,e.onExecuted):new u.MusicAudioOpenUmaAction({data:t,langs:(0,i._)(this,A)[A],...e})}provideOpenSnippet({data:t,...e}){const a=(0,i._)(this,P)[P]?.[o.MusicAudioActionType.OpenSnippet];return a?a(t,e.onExecuted):new c.MusicAudioOpenSnippetAction({data:t,langs:(0,i._)(this,A)[A],...e})}provideToggleMyMusic({data:t,...e}){const a=(0,i._)(this,b)[b].userId;return a?new p.MusicAudioToggleOwningAction({data:t,targetOwnerId:a,langs:(0,i._)(this,A)[A],myMusicService:(0,i._)(this,f)[f].myMusic,groupMusicServices:(0,i._)(this,f)[f].groupMusicServices,...e}):null}provideToggleOwning({data:t,targetOwnerId:e,...a}){return new p.MusicAudioToggleOwningAction({data:t,targetOwnerId:e,langs:(0,i._)(this,A)[A],myMusicService:(0,i._)(this,f)[f].myMusic,groupMusicServices:(0,i._)(this,f)[f].groupMusicServices,...a})}provideToggleDislike({data:t,...e}){return new l.MusicAudioToggleDislikeAction({data:t,langs:(0,i._)(this,A)[A],dislikesService:(0,i._)(this,f)[f].dislikes,channel:(0,i._)(this,v)[v],audioDislikesAnalytics:(0,i._)(this,O)[O],...e})}provideTogglePlaying({entity:t,ensureList:e,...a}){return new _.MusicAudioTogglePlaying({entity:t,ensureList:e,langs:(0,i._)(this,A)[A],channel:(0,i._)(this,v)[v],...a})}provideShare({data:t,...e}){const a=(0,i._)(this,P)[P]?.[o.MusicAudioActionType.Share];return a?a(t,e.onExecuted):new y.MusicAudioShareAction({data:t,langs:(0,i._)(this,A)[A],...e})}provideBroadcast({data:t,...e}){return new m.MusicAudioBroadcastAction({data:t,langs:(0,i._)(this,A)[A],...e})}provideOpenLyrics({data:t,...e}){if(!t.hasLyrics)return null;const a=(0,i._)(this,P)[P]?.[o.MusicAudioActionType.OpenLyrics];return a?a(t,e.onExecuted):new h.MusicAudioOpenLyricsAction({data:t,langs:(0,i._)(this,A)[A],...e})}provideCopyPageURL({data:t,...e}){const a=`${(0,i._)(this,w)[w].locationOrigin}${(0,i._)(this,I)[I](t)}`;return new g.MusicAudioCopyPageURLAction({data:t,href:a,clipboard:(0,i._)(this,w)[w].clipboard,notifications:(0,i._)(this,k)[k],langs:(0,i._)(this,A)[A],...e})}constructor(t){Object.defineProperty(this,I,{value:C}),Object.defineProperty(this,v,{writable:!0,value:void 0}),Object.defineProperty(this,A,{writable:!0,value:void 0}),Object.defineProperty(this,b,{writable:!0,value:void 0}),Object.defineProperty(this,f,{writable:!0,value:void 0}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,w,{writable:!0,value:void 0}),Object.defineProperty(this,k,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),(0,i._)(this,v)[v]=t.channel,(0,i._)(this,A)[A]=t.langs,(0,i._)(this,b)[b]=t.authService,(0,i._)(this,f)[f]=t.musicService,(0,i._)(this,w)[w]=t.platformConfig,(0,i._)(this,k)[k]=t.notifications,(0,i._)(this,O)[O]=t.audioDislikesAnalytics,(0,i._)(this,P)[P]=t.overrides??null}}function C(t){const{releaseIdentity:e}=t;return`/audio${e?new s.OwnedIdentity(e).rawId:new s.OwnedIdentity(t.identity).accessRawId}`}},892022:(t,e,a)=>{a.d(e,{MusicAudioDislike:()=>p});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(925763),d=(0,r._)("_musicService"),u=(0,r._)("_getSource"),c=(0,r._)("_service");class p{get identity(){return(0,n.toMusicAudioIdentity)(this.source.audio)}get isActive(){return(0,i._)(this,c)[c].state.get(this.identity)??!1}get isPending(){return(0,i._)(this,c)[c].pending.has(this.identity)}async toggle(t){let e=!this.isActive;"boolean"==typeof t&&(e=t),this.isActive!==e&&(e?await(0,i._)(this,c)[c].activate(this.identity,{}):await(0,i._)(this,c)[c].deactivate(this.identity,{}))}get source(){return(0,i._)(this,u)[u]()}constructor(t){Object.defineProperty(this,c,{get:l,set:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,i._)(this,d)[d]=t.musicService,(0,i._)(this,u)[u]=t.getSource,(0,o.makeObservable)(this)}}function l(){return(0,i._)(this,d)[d].dislikes}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],p.prototype,"identity",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],p.prototype,"isActive",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],p.prototype,"isPending",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Boolean]),(0,s.__metadata)("design:returntype",Promise)],p.prototype,"toggle",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],p.prototype,"source",null)},789538:(t,e,a)=>{a.d(e,{MusicAudioLike:()=>_});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(861807),d=a(925763),u=(0,r._)("_musicService"),c=(0,r._)("_getSource"),p=(0,r._)("_service"),l=(0,r._)("_getAddReason");class _{get identity(){return(0,d.toMusicAudioIdentity)(this.source.audio)}get trackCode(){return this.source.trackCode}get isActive(){return(0,i._)(this,p)[p].get(this.identity)??this.source.audio.like??!1}get isPending(){return(0,i._)(this,p)[p].checkPending(this.identity)}async toggle(t){let e=!this.isActive;"boolean"==typeof t&&(e=t),this.isActive!==e&&(e?await(0,i._)(this,p)[p].add(this.identity,{trackCode:this.trackCode??"",reason:(0,i._)(this,l)[l]()}):await(0,i._)(this,p)[p].delete(this.identity,{}))}get source(){return(0,i._)(this,c)[c]()}constructor(t){Object.defineProperty(this,p,{get:y,set:void 0}),Object.defineProperty(this,l,{value:m}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),(0,i._)(this,u)[u]=t.musicService,(0,i._)(this,c)[c]=t.getSource,this.entityType=t.entityType,(0,o.makeObservable)(this)}}function y(){return(0,i._)(this,u)[u].myMusic}function m(){if("snippet"===this.entityType)return n.MusicAudioOwningServiceAddReason.MusicSnippet}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"identity",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"trackCode",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"isActive",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"isPending",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Boolean]),(0,s.__metadata)("design:returntype",Promise)],_.prototype,"toggle",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"source",null)},2272:(t,e,a)=>{a.d(e,{MusicAudioDislike:()=>r.MusicAudioDislike,MusicAudioLike:()=>i.MusicAudioLike});var i=a(789538),r=a(892022)},139173:(t,e,a)=>{a.d(e,{MusicAudioDataComputed:()=>A});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(148542),d=a(768035),u=a(919244),c=a(153013),p=a(613836),l=a(654777),_=a(925763),y=a(522650),m=a(51084),h=a(322190),g=a(651485),v=(0,r._)("_getSource");class A{get trackCode(){return this.source.trackCode??this.sourceAudio.track_code??null}get identity(){return(0,_.toMusicAudioIdentity)(this.sourceAudio)}get releaseIdentity(){const t=this.sourceAudio.release_audio_id;return t&&(0,n.isAccessRawId)(t)?new h.MusicAudioIdentity((0,d.parseRawId)(t)):null}get title(){return this.sourceAudio.title}get subtitle(){return this.sourceAudio.subtitle??null}get duration(){return this.sourceAudio.duration}get authors(){return(0,p.mapAudioAudioToMusicAuthorsData)(this.sourceAudio)}get album(){const t=this.sourceAudio.album;return t?new g.MusicAlbumDataFromAudioAudioAlbumComputed({source:t}):null}get cover(){return(0,y.toMusicAudioCoverData)(this.sourceAudio)}get chartInfo(){return this.sourceAudio.audio_chart_info?{state:(0,m.toChartStateData)(this.sourceAudio),position:this.sourceAudio.audio_chart_info?.position??null}:null}get isBlocked(){return(0,u.getIsBlocked)(this.sourceAudio)}get legal(){return(0,c.bitmaskToAudioDataLegal)(this.sourceAudio.legal_notices_type??0)}get hasLyrics(){return this.sourceAudio.has_lyrics??!1}get isFocusTrack(){return this.sourceAudio.is_focus_track??!1}get rightholderMarks(){const t=this.sourceAudio.rightholder_marks;return!t||t.length<1?null:t}get specialProjectId(){return this.sourceAudio.special_project_id??null}get listIndex(){return this.source.listIndex??null}get apiAudio(){return(0,o.toJS)(this.sourceAudio)}get source(){return(0,i._)(this,v)[v]()}get sourceAudio(){return this.source.audio}get flagsContext(){return(0,l.bitmaskToFlagsContext)(this.source.audio.flags_context??0)}constructor(t){Object.defineProperty(this,v,{writable:!0,value:void 0}),(0,i._)(this,v)[v]=t.getSource,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"trackCode",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"identity",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"releaseIdentity",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"title",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"subtitle",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"duration",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"album",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"cover",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"chartInfo",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"isBlocked",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"legal",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"hasLyrics",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"isFocusTrack",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"rightholderMarks",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"specialProjectId",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"listIndex",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"apiAudio",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"source",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"sourceAudio",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0===l.AudioViewContextFlags?Object:l.AudioViewContextFlags),(0,s.__metadata)("design:paramtypes",[])],A.prototype,"flagsContext",null)},139852:(t,e,a)=>{a.d(e,{MusicAudioDataComputed:()=>i.MusicAudioDataComputed});var i=a(139173)},51084:(t,e,a)=>{function i(t){const e=t.audio_chart_info?.state;switch(e){case 0:return"new_release";case 1:return"no_changes";case 2:return"moved_up";case 3:return"moved_down";case 4:return"state_crown";default:return null}}a.d(e,{toChartStateData:()=>i})},522650:(t,e,a)=>{a.d(e,{toMusicAudioCoverData:()=>s});var i=a(207545),r=a(925763);function s(t){const e=t.album?.thumb??t?.thumb;if(!e)return null;const a=(0,r.toMusicAudioIdentity)(t),s=t.album?.main_color||t.main_color;return{...(0,i.mapAudioPhotoToAudioImageData)(e,s),key:`${a.fullId}_cover`}}},925763:(t,e,a)=>{a.d(e,{toMusicAudioIdentity:()=>r});var i=a(322190);function r(t){return new i.MusicAudioIdentity({id:t.id,ownerId:t.owner_id,accessKey:t.access_key})}},166014:(t,e,a)=>{a.d(e,{MusicAudioModel:()=>m});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(186088),d=a(137516),u=a(194134),c=(0,r._)("_getPlayback"),p=(0,r._)("_createAlbum"),l=(0,r._)("_authorsOverride"),_=(0,r._)("_createMusicAudioReference"),y=(0,r._)("_getTrackPageHref");class m{get key(){return this.identity.fullId}get identity(){return this.data.identity}get trackCode(){return this.data.trackCode}get release(){const{releaseIdentity:t}=this.data;return t?(0,i._)(this,_)[_](t):null}get original(){const{release:t}=this;if(t)return t;if(!this.isMine)return null;const e=this.musicService.myMusic.getSource(this.identity);return e?(0,i._)(this,_)[_](e):null}get pageHref(){return(0,i._)(this,y)[y](this.release?.identity??this.identity)}get authors(){return new u.MusicAuthors({data:(0,i._)(this,l)[l]??this.data.authors})}get cover(){return(0,n.createAudioImageNullable)(this.data.cover)}get album(){const t=this.data.album;return t?(0,i._)(this,p)[p](t):null}get isMine(){return this.musicService.myMusic.isOwned(this.identity)}get isLicenced(){const{authors:t}=this,e=!(!t.mainList?.length&&!t.featList?.length),a=!!this.album;return e&&a}get legalNoticeLines(){const{legal:t}=this.data;return t&&(0,d.getAudioLegalNoticeLines)(this.langs,t)}get playback(){return(0,i._)(this,c)[c]()}constructor(t){Object.defineProperty(this,_,{value:h}),Object.defineProperty(this,y,{value:g}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,i._)(this,c)[c]=t.getPlayback,(0,i._)(this,p)[p]=t.createAlbum,(0,i._)(this,l)[l]=t.authorsOverride??null,this.langs=t.langs,this.musicService=t.musicService,this.context=t.context,this.like=t.like,this.dislike=t.dislike,(0,o.makeObservable)(this)}}function h(t){return{identity:t,pageHref:(0,i._)(this,y)[y](t)}}function g(t){return`/audio${t.accessRawId}`}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"key",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"identity",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"trackCode",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"release",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"original",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"pageHref",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"authors",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"cover",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"album",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"isMine",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"isLicenced",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"legalNoticeLines",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],m.prototype,"playback",null)},169518:(t,e,a)=>{a.d(e,{MusicAudioModelFactory:()=>n});var i=a(331635),r=a(132028),s=a(267788),o=a(431498);class n{createTrack(t){return this.trackFactory.create(t)}createSnippet(t){return this.snippetFactory.create(t)}createTrackFromEntity(t){return this.trackFactory.createFromEntity(t)}createSnippetFromEntity(t){return this.snippetFactory.createFromEntity(t)}constructor(t,e){this.trackFactory=t,this.snippetFactory=e}}n=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.MusicTrackModelFactory?Object:s.MusicTrackModelFactory,void 0===o.MusicSnippetModelFactory?Object:o.MusicSnippetModelFactory])],n)},631576:(t,e,a)=>{a.d(e,{MusicAudioModelFactory:()=>r.MusicAudioModelFactory,MusicTrackModelFactory:()=>i.MusicTrackModelFactory,MusicTrackModelProvider:()=>i.MusicTrackModelProvider});var i=a(267788),r=(a(431498),a(169518))},537284:(t,e,a)=>{a.d(e,{MusicSnippetDataComputed:()=>o});var i=a(331635),r=a(327813),s=a(139173);class o extends s.MusicAudioDataComputed{get clipRange(){const{previewUrlResponse:t}=this.source,e=t?.clip_from,a=t?.clip_to;return e&&a?{from:e,to:a}:null}constructor(t){super(t),(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"clipRange",null)},759859:(t,e,a)=>{a.d(e,{MusicSnippetDataComputed:()=>i.MusicSnippetDataComputed});var i=a(537284)},179775:(t,e,a)=>{a.d(e,{MusicSnippetModelFactory:()=>I});var i=a(434518),r=a(763812),s=a(331635),o=a(132028),n=a(390312),d=a(587029),u=a(712600),c=a(951652),p=a(284436),l=a(367734),_=a(189784),y=a(744521),m=a(864023),h=a(651485),g=a(97287),v=a(379925),A=a(2272),b=a(759859),f=a(125563),P=(0,r._)("_createAudioEntity"),w=(0,r._)("_createFallbackEnsureList"),k=(0,r._)("_createActionsProvider"),O=(0,r._)("_createContext");class I{create(t){const{langs:e}=this,{getSource:a,onTogglePlaying:r}=t,s=t.context??(0,i._)(this,O)[O](),o=t.channel??this.player.main,n=new b.MusicSnippetDataComputed({getSource:a}),d=t.entities?.audio??(0,i._)(this,P)[P](a),u=t.ensureList??(0,i._)(this,w)[w](d),c=(0,i._)(this,k)[k](o),p=new A.MusicAudioLike({entityType:"snippet",musicService:this.musicService,getSource:a}),l=new A.MusicAudioDislike({musicService:this.musicService,getSource:a});return new f.MusicSnippetModel({entity:d,getData:()=>n,getPlayback:()=>new m.AudioPlaybackModel({entity:d,ensureList:u,channel:o,langs:e,onTogglePlaying:r}),context:s,like:p,dislike:l,langs:e,musicService:this.musicService,createAlbum:e=>this.albumFactory.create({data:e,actionsCallbacks:t.albumActionsCallbacks}),createActions:()=>new g.MusicAudioActions({getSource:a,data:n,entity:d,ensureList:u,context:s,provider:c,callbacks:t.actionsCallbacks}),authorsOverride:t.authorsOverride})}createFromEntity(t){const{audio:e}=t.entities;return this.create({...t,getSource:()=>({subtype:"snippet",audio:e.data.apiAudio,trackCode:e.context.trackCode,previewUrlResponse:null})})}constructor(t,e,a,i,r,s,o,n,d){Object.defineProperty(this,P,{value:M}),Object.defineProperty(this,w,{value:C}),Object.defineProperty(this,k,{value:S}),Object.defineProperty(this,O,{value:T}),this.langs=t,this.authService=e,this.entityFactory=a,this.musicService=i,this.albumFactory=r,this.audioConfig=s,this.notifications=o,this.player=n,this.audioDislikesAnalytics=d}}function M(t){const e=t();return this.entityFactory.createSnippet(e.audio).attachContext({trackCode:e.trackCode??e.audio.track_code??""})}function C(t){const e=t.context.list??new p.SimpleAudioList({items:[t]});return async()=>e}function S(t){return new g.MusicAudioActionsProvider({overrides:this.audioConfig.musicAudioActionOverrides,langs:this.langs,authService:this.authService,musicService:this.musicService,channel:t,platformConfig:this.audioConfig,notifications:this.notifications,audioDislikesAnalytics:this.audioDislikesAnalytics})}function T(t={}){return{targetOwnerId:this.authService.userIdOrAnonim,...t}}I=(0,s.__decorate)([o.scope.container(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===u.Langs?Object:u.Langs,void 0===c.AuthService?Object:c.AuthService,void 0===n.MusicAudioFactory?Object:n.MusicAudioFactory,void 0===d.MusicService?Object:d.MusicService,void 0===h.MusicAlbumModelFactory?Object:h.MusicAlbumModelFactory,void 0===l.AudioPlatformConfig?Object:l.AudioPlatformConfig,void 0===_.AudioNotifications?Object:_.AudioNotifications,void 0===y.AudioPlayer?Object:y.AudioPlayer,void 0===v.AudioDislikesAnalytics?Object:v.AudioDislikesAnalytics])],I)},431498:(t,e,a)=>{a.d(e,{MusicSnippetModelFactory:()=>i.MusicSnippetModelFactory,MusicSnippetModelProvider:()=>r.MusicSnippetModelProvider});a(759859);var i=a(179775),r=a(281877)},125563:(t,e,a)=>{a.d(e,{MusicSnippetModel:()=>c});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(166014),d=(0,r._)("_getData"),u=(0,r._)("_createActions");class c extends n.MusicAudioModel{get data(){return(0,i._)(this,d)[d]()}get actions(){return(0,i._)(this,u)[u]()}constructor(t){super(t),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),this.type="music_snippet",(0,i._)(this,d)[d]=t.getData,(0,i._)(this,u)[u]=t.createActions,this.entity=t.entity,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"data",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"actions",null)},281877:(t,e,a)=>{a.d(e,{MusicSnippetModelProvider:()=>n});var i=a(331635),r=a(132028),s=a(895587),o=a(179775);class n{async fetch(t){const{accessRawId:e,trackCode:a,subtype:i}=t,[r,s]=await Promise.all([this.repository.audioGetById({audios:e,url_type:"snippet"}),this.repository.audioGetAudioPreviewUrl({audio_id:e,preview_type:i})]),[o]=r;return this.factory.create({getSource:()=>({subtype:i,audio:o,trackCode:a,previewUrlResponse:s})})}create(t){return this.factory.create(t)}constructor(t,e){this.repository=t,this.factory=e}}n=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.AudioRepository?Object:s.AudioRepository,void 0===o.MusicSnippetModelFactory?Object:o.MusicSnippetModelFactory])],n)},98290:(t,e,a)=>{a.d(e,{MusicTrackModelFactory:()=>M});var i=a(434518),r=a(763812),s=a(331635),o=a(132028),n=a(500435),d=a(390312),u=a(587029),c=a(712600),p=a(951652),l=a(284436),_=a(367734),y=a(189784),m=a(744521),h=a(864023),g=a(651485),v=a(97287),A=a(379925),b=a(139852),f=a(2272),P=a(151517),w=(0,r._)("_createAudioEntity"),k=(0,r._)("_createFallbackEnsureList"),O=(0,r._)("_createActionsProvider"),I=(0,r._)("_createContext");class M{create(t){const{langs:e}=this,{getSource:a,onTogglePlaying:r,overrideTogglePlayingAction:s}=t,o=t.context??(0,i._)(this,I)[I](),n=t.channel??this.player.main,d=new b.MusicAudioDataComputed({getSource:a}),u=t.entities?.audio??(0,i._)(this,w)[w](a),c=t.ensureList??(0,i._)(this,k)[k](u),p=(0,i._)(this,O)[O](n),l=new f.MusicAudioLike({entityType:"track",musicService:this.musicService,getSource:a}),_=new f.MusicAudioDislike({musicService:this.musicService,getSource:a});return new P.MusicTrackModel({entity:u,getData:()=>d,getPlayback:()=>new h.AudioPlaybackModel({entity:u,ensureList:c,channel:n,langs:e,onTogglePlaying:r,overrideTogglePlayingAction:s}),context:o,like:l,dislike:_,langs:e,musicService:this.musicService,createAlbum:e=>this.albumFactory.create({data:e,actionsCallbacks:t.albumActionsCallbacks}),createActions:()=>new v.MusicAudioActions({getSource:a,data:d,entity:u,ensureList:c,context:o,provider:p,callbacks:t.actionsCallbacks}),authorsOverride:t.authorsOverride})}createFromEntity(t){const{audio:e,list:a}=t.entities;return this.create({...t,getSource:()=>{let t=null;return a&&(0,n.isSpecificMusicPlaylist)(a)&&(t=a.items.findIndex((t=>t.identity.fullId===e.identity.fullId))),{audio:e.data.apiAudio,trackCode:e.context.trackCode,listIndex:t}}})}constructor(t,e,a,i,r,s,o,n,d){Object.defineProperty(this,w,{value:C}),Object.defineProperty(this,k,{value:S}),Object.defineProperty(this,O,{value:T}),Object.defineProperty(this,I,{value:j}),this.langs=t,this.authService=e,this.entityFactory=a,this.musicService=i,this.albumFactory=r,this.audioConfig=s,this.notifications=o,this.player=n,this.audioDislikesAnalytics=d}}function C(t){const e=t();return this.entityFactory.createTrack(e.audio).attachContext({trackCode:e.trackCode??e.audio.track_code??""})}function S(t){const e=t.context.list??new l.SimpleAudioList({items:[t]});return async()=>e}function T(t){return new v.MusicAudioActionsProvider({overrides:this.audioConfig.musicAudioActionOverrides,langs:this.langs,authService:this.authService,musicService:this.musicService,channel:t,platformConfig:this.audioConfig,notifications:this.notifications,audioDislikesAnalytics:this.audioDislikesAnalytics})}function j(t={}){return{targetOwnerId:this.authService.userIdOrAnonim,...t}}M=(0,s.__decorate)([o.scope.container(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===c.Langs?Object:c.Langs,void 0===p.AuthService?Object:p.AuthService,void 0===d.MusicAudioFactory?Object:d.MusicAudioFactory,void 0===u.MusicService?Object:u.MusicService,void 0===g.MusicAlbumModelFactory?Object:g.MusicAlbumModelFactory,void 0===_.AudioPlatformConfig?Object:_.AudioPlatformConfig,void 0===y.AudioNotifications?Object:y.AudioNotifications,void 0===m.AudioPlayer?Object:m.AudioPlayer,void 0===A.AudioDislikesAnalytics?Object:A.AudioDislikesAnalytics])],M)},267788:(t,e,a)=>{a.d(e,{MusicTrackModelFactory:()=>i.MusicTrackModelFactory,MusicTrackModelProvider:()=>r.MusicTrackModelProvider});var i=a(98290),r=a(872743)},151517:(t,e,a)=>{a.d(e,{MusicTrackModel:()=>c});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(166014),d=(0,r._)("_getData"),u=(0,r._)("_createActions");class c extends n.MusicAudioModel{get data(){return(0,i._)(this,d)[d]()}get actions(){return(0,i._)(this,u)[u]()}constructor(t){super(t),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),this.type="music_track",(0,i._)(this,d)[d]=t.getData,(0,i._)(this,u)[u]=t.createActions,this.entity=t.entity,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"data",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"actions",null)},872743:(t,e,a)=>{a.d(e,{MusicTrackModelProvider:()=>n});var i=a(331635),r=a(132028),s=a(895587),o=a(98290);class n{async fetch(t){const{accessRawId:e,trackCode:a}=t,i=await this.repository.audioGetById({audios:e}),[r]=i;return this.factory.create({getSource:()=>({audio:r,trackCode:a})})}async fetchAudiosByArtist(t){const e=await this.repository.audioGetAudiosByArtist(t);return this.createMultiple(e.items)}async fetchRecommendations(t){const e=await this.repository.audioGetRecommendations(t);return this.createMultiple(e.items)}create(t){return this.factory.create(t)}createMultiple(t){return t.map((t=>this.factory.create({getSource:()=>({audio:t,trackCode:t.track_code??null})})))}constructor(t,e){this.repository=t,this.factory=e}}n=(0,i.__decorate)([r.scope.container(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.AudioRepository?Object:s.AudioRepository,void 0===o.MusicTrackModelFactory?Object:o.MusicTrackModelFactory])],n)},613836:(t,e,a)=>{a.d(e,{mapAudioAudioToMusicAuthorsData:()=>r});var i=a(35280);function r(t){return{main:t?.main_artists?.map(i.mapAudioArtistToAudioArtistAuthorData)??[],feat:t?.featured_artists?.map(i.mapAudioArtistToAudioArtistAuthorData)??[],raw:t.artist}}},214806:(t,e,a)=>{a.d(e,{mapAudioPlaylistToMusicAuthorsData:()=>r});var i=a(35280);function r(t){return{main:t?.main_artists?.map(i.mapAudioArtistToAudioArtistAuthorData)??[],feat:t?.featured_artists?.map(i.mapAudioArtistToAudioArtistAuthorData)??[],raw:t.main_artist}}},194134:(t,e,a)=>{a.d(e,{MusicAuthors:()=>i.MusicAuthors});var i=a(718615)},718615:(t,e,a)=>{a.d(e,{MusicAuthors:()=>u});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(758066),d=(0,r._)("_toArtistAuthor");class u{get single(){const t=this.mainList.at(0);if(t)return t;const{raw:e}=this.data;return e?new n.AudioTextAuthor({data:e}):null}get isSingle(){return this.mainList.length<=1}get isEmpty(){return!this.single}get mainList(){return this.data.main?.map((t=>(0,i._)(this,d)[d](t)))??[]}get featList(){return this.data.feat?.map((t=>(0,i._)(this,d)[d](t)))??[]}get fullList(){let t=[...this.mainList,...this.featList];if(t.length)return t;const{single:e}=this;return e?[e]:[]}get searchLink(){const t=this.data.raw;return!t||this.mainList.length>0||this.featList.length>0?null:{title:t,href:`/audio?performer=1&q=${t}`}}constructor(t){Object.defineProperty(this,d,{value:c}),this.data=t.data,(0,o.makeObservable)(this)}}function c(t){return new n.AudioArtistAuthor({data:t})}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"single",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"isSingle",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"isEmpty",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"mainList",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"featList",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"fullList",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"searchLink",null)},938726:(t,e,a)=>{function i(t){return{id:t.id,name:t.name}}a.d(e,{mapAudioGenreToMusicGenreData:()=>i})},149352:(t,e,a)=>{a.d(e,{AudioNotifications:()=>o});var i=a(331635),r=a(132028),s=a(367734);class o{notify(t){this.platformConfig.notificationsPresenter.show({createNotification:t,defaultDuration:4e3})}constructor(t){this.platformConfig=t}}o=(0,i.__decorate)([r.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===s.AudioPlatformConfig?Object:s.AudioPlatformConfig])],o)},189784:(t,e,a)=>{a.d(e,{AudioNotifications:()=>i.AudioNotifications});var i=a(149352)},268886:(t,e,a)=>{a.d(e,{AudioPlayer:()=>y});var i=a(434518),r=a(763812),s=a(331635),o=a(132028),n=a(327813),d=a(24516),u=a(4704),c=a(871396),p=(0,r._)("_broadcastsService"),l=(0,r._)("_init");let _=o.destroy;class y{get main(){return this.mainChannel}get advertising(){return this.advertisingChannel}get onMediaAttachment(){return this.onMediaAttachmentChannel}get posting(){return this.postingChannel}get active(){return this.channels.find((t=>t.active))??null}get playing(){return this.channels.find((t=>t.playing))??null}get paused(){return this.channels.find((t=>t.paused))??null}[_](){(0,i._)(this,p)[p]?.dispose()}get channels(){return[this.advertising,this.main,this.onMediaAttachment]}constructor(t,e,a,r,s,o){Object.defineProperty(this,l,{value:m}),Object.defineProperty(this,p,{writable:!0,value:void 0}),this.mainChannel=t,this.advertisingChannel=e,this.onMediaAttachmentChannel=a,this.postingChannel=r,this.broadcastsFactory=s,(0,i._)(this,p)[p]=null,o.partConfigEnabled("frontend.eva_audio_player_block")&&((0,i._)(this,p)[p]=this.broadcastsFactory.create(this.mainChannel)),(0,i._)(this,l)[l](),(0,n.makeObservable)(this)}}function m(){(0,i._)(this,p)[p]?.init()}(0,s.__decorate)([n.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"active",null),(0,s.__decorate)([n.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"playing",null),(0,s.__decorate)([n.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"paused",null),(0,s.__decorate)([n.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"channels",null),y=(0,s.__decorate)([o.scope.global(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===u.MainPlayerChannel?Object:u.MainPlayerChannel,void 0===u.AdvertisingPlayerChannel?Object:u.AdvertisingPlayerChannel,void 0===u.OnMediaAttachmentAudioPlayerChannel?Object:u.OnMediaAttachmentAudioPlayerChannel,void 0===u.PostingAudioPlayerChannel?Object:u.PostingAudioPlayerChannel,void 0===c.AudioPlayerBroadcastsFactory?Object:c.AudioPlayerBroadcastsFactory,void 0===d.UserEnv?Object:d.UserEnv])],y)},790775:(t,e,a)=>{a.d(e,{AudioPlayerChannelType:()=>i});var i=function(t){return t.Main="main",t.Advertising="advertising",t.OnMediaAttachment="on_media_attachment",t.Posting="posting",t}({})},449502:(t,e,a)=>{a.d(e,{AudioPlayerChannelType:()=>i.AudioPlayerChannelType});var i=a(790775)},744521:(t,e,a)=>{a.d(e,{AudioPlayer:()=>r.AudioPlayer,AudioPlayerChannelType:()=>i.AudioPlayerChannelType});var i=a(449502),r=a(268886)},572107:(t,e,a)=>{a.d(e,{AdvertisingPlayerChannel:()=>y});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(132028),d=a(734768),u=a(718540),c=a(744521),p=a(10292);class l extends p.GlobalAudioPlayer{get id(){return"AdvertisingPlayerChannelSource"}get permissions(){return{repeat:!1,progressView:!0,progressUpdate:!1,speedUpdate:!1}}get active(){return this.player.currentSubChannel===u.GlobalAudioPlayerSubChannelType.Ads}}var _=(0,r._)("_source");class y{get id(){return c.AudioPlayerChannelType.Advertising}get events(){return(0,i._)(this,_)[_].events}get isInitializing(){return(0,i._)(this,_)[_].isInitializing}get active(){return(0,i._)(this,_)[_].active}get playing(){return(0,i._)(this,_)[_].playing}get paused(){return(0,i._)(this,_)[_].paused}get volume(){return(0,i._)(this,_)[_].volume}get duration(){return(0,i._)(this,_)[_].duration}get isPending(){return(0,i._)(this,_)[_].isPending}get progress(){return(0,i._)(this,_)[_].progress}get bufferingProgress(){return(0,i._)(this,_)[_].bufferingProgress}get playbackSpeed(){return(0,i._)(this,_)[_].playbackSpeed}get frequency(){return(0,i._)(this,_)[_].frequency}get meta(){return(0,i._)(this,_)[_].meta}play(){(0,i._)(this,_)[_].play()}pause(){(0,i._)(this,_)[_].pause()}resume(){(0,i._)(this,_)[_].resume()}constructor(t){Object.defineProperty(this,_,{writable:!0,value:void 0}),(0,i._)(this,_)[_]=new l(t)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"events",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"isInitializing",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"active",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"playing",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"paused",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"volume",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"duration",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"isPending",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"progress",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"bufferingProgress",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"playbackSpeed",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"frequency",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],y.prototype,"meta",null),y=(0,s.__decorate)([n.scope.global(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===d.GlobalAudioPlayerLazyProxy?Object:d.GlobalAudioPlayerLazyProxy])],y)},652565:(t,e,a)=>{a.d(e,{AdvertisingPlayerChannel:()=>i.AdvertisingPlayerChannel});var i=a(572107)},10292:(t,e,a)=>{a.d(e,{GlobalAudioPlayer:()=>u});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(723281),d=(0,r._)("_assertPermission");class u{get events(){return null}get isInitializing(){return this.player.isInitializing}get queue(){return this.player.queue}get currentListIdentity(){return this.player.currentListIdentity}get playbackSource(){return this.player.playbackSource}get currentAudioIdentity(){return this.player.currentAudioIdentity}get currentAudio(){return this.player.currentAudio}get prevAudio(){return this.player.prevAudio}get playing(){return this.player.isPlaying&&this.active}get paused(){return this.player.isPaused&&this.active}get shuffled(){return this.player.isShuffled&&this.active}get isPending(){return this.player.isPending}get progress(){const t=this;return{get amount(){return t.progressData.amount},get playedTime(){return t.progressData.playedTime},snapshot:()=>({...t.progressData})}}get bufferingProgress(){return this.player.bufferingProgress}get duration(){return this.player.duration}get progressData(){return{amount:this.player.progress,playedTime:this.player.listenedTime}}get repeat(){return this.player.repeat}get frequency(){return this.player.frequencyData}get playbackSpeed(){return this.player.playbackSpeed}get meta(){return{activatedAt:this.player.activatedAt}}isCurrentInQueue(t){const e=this.currentAudio;return!!e&&e.identity.fullId===t.fullId}isCurrentListInQueue(t){const e=this.currentListIdentity;return!!e&&e.fullId===t.fullId}setRepeat(t){(0,i._)(this,d)[d]("repeat"),this.player.setRepeat(t)}async playAudioList(t){await this.player.playAudioList(t)}async playAudio(t,e){await this.player.playAudio(t,e)}async playQueuedAudio(t){await this.player.playQueuedAudio(t)}play(){return this.player.play()}playNext(){this.player.playNext()}playPrevious(){this.player.playPrev()}pause(){this.player.pause()}resume(){this.player.resume()}stop(){this.player.stop()}seek(t){(0,i._)(this,d)[d]("progressUpdate"),this.player.seek(t)}toggleShuffled(t){this.player.toggleShuffle(t)}setPlaybackSpeed(t){(0,i._)(this,d)[d]("speedUpdate"),this.player.updatePlaybackSpeed(t)}constructor(t){Object.defineProperty(this,d,{value:c}),this.player=t,this.volume=new n.GlobalAudioPlayerVolume(t),(0,o.makeObservable)(this)}}function c(t){if(!this.permissions[t])throw new Error(`"${t}" not permitted for audio player channel`,{cause:{id:this.id,currentAudioIdentity:this.currentAudioIdentity,currentListIdentity:this.currentListIdentity}})}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"isInitializing",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"queue",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"currentListIdentity",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"playbackSource",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"currentAudioIdentity",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"currentAudio",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"prevAudio",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"playing",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"paused",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"shuffled",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Boolean),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"isPending",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type","undefined"==typeof IAudioPlayerProgress?Object:IAudioPlayerProgress),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"progress",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Number),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"bufferingProgress",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Number),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"duration",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type","undefined"==typeof IAudioPlayerProgressData?Object:IAudioPlayerProgressData),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"progressData",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type","undefined"==typeof TPlaybackQueueRepeat?Object:TPlaybackQueueRepeat),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"repeat",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type","undefined"==typeof IFrequencyData?Object:IFrequencyData),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"frequency",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Number),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"playbackSpeed",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type","undefined"==typeof IAudioPlayerChannelMeta?Object:IAudioPlayerChannelMeta),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"meta",null)},723281:(t,e,a)=>{a.d(e,{GlobalAudioPlayerVolume:()=>s});var i=a(331635),r=a(327813);class s{get level(){return this.player.volume}get muted(){return this.player.isMuted}async setLevel(t){return await this.player.updateVolume(t),this.player.volume}async toggleMuted(t){return await this.player.toggleMuted(t),this.player.isMuted}constructor(t){this.player=t}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Number),(0,i.__metadata)("design:paramtypes",[])],s.prototype,"level",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Boolean),(0,i.__metadata)("design:paramtypes",[])],s.prototype,"muted",null),(0,i.__decorate)([r.action,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Number]),(0,i.__metadata)("design:returntype",Promise)],s.prototype,"setLevel",null),(0,i.__decorate)([r.action,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[Boolean]),(0,i.__metadata)("design:returntype",Promise)],s.prototype,"toggleMuted",null)},610663:(t,e,a)=>{a.d(e,{MainPlayerChannel:()=>p});var i=a(331635),r=a(327813),s=a(132028),o=a(734768),n=a(718540),d=a(449502),u=a(10292);const c=[n.GlobalAudioPlayerSubChannelType.MusicTrack,n.GlobalAudioPlayerSubChannelType.Podcast,n.GlobalAudioPlayerSubChannelType.Radio];class p extends u.GlobalAudioPlayer{get id(){return d.AudioPlayerChannelType.Main}get permissions(){switch(this.player.currentSubChannel){case n.GlobalAudioPlayerSubChannelType.MusicTrack:return{repeat:!0,progressView:!0,progressUpdate:!0,speedUpdate:!1};case n.GlobalAudioPlayerSubChannelType.Podcast:return{repeat:!0,progressView:!0,progressUpdate:!0,speedUpdate:!0};case n.GlobalAudioPlayerSubChannelType.Radio:default:return{repeat:!1,progressView:!1,progressUpdate:!1,speedUpdate:!1}}}get active(){const{currentSubChannel:t}=this.player;return!!t&&c.includes(t)}async ensureEvents(){return await this.player.init(),this.player.events}constructor(t){super(t)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type","undefined"==typeof IAudioPlayerChannelPermissions?Object:IAudioPlayerChannelPermissions),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"permissions",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"active",null),p=(0,i.__decorate)([s.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.GlobalAudioPlayerLazyProxy?Object:o.GlobalAudioPlayerLazyProxy])],p)},92900:(t,e,a)=>{a.d(e,{MainPlayerChannel:()=>i.MainPlayerChannel});var i=a(610663)},727469:(t,e,a)=>{a.d(e,{OnMediaAttachmentAudioPlayerChannel:()=>m});var i=a(331635),r=a(327813),s=a(132028),o=a(500435),n=a(26530),d=a(809424),u=a(474928),c=a(449502),p=a(461500),l=a(367734),_=a(480331),y=a(925720);class m{get id(){return c.AudioPlayerChannelType.OnMediaAttachment}get permissions(){return{repeat:!0,progressView:!0,progressUpdate:!0,speedUpdate:!0}}get events(){return this.player?.events??null}get isInitializing(){return this._isInitializing}get currentListIdentity(){return this.player?.currentListIdentity??null}get currentAudio(){return this.player?.currentAudio??null}get prevAudio(){return this.player?.prevAudio??null}get active(){return this.player?.active??!1}get playing(){return this.player?.playing??!1}get paused(){return this.player?.paused??!1}get shuffled(){return!1}get isPending(){return!1}get volume(){return this.player?.volume??{level:0,muted:!1,setLevel(){throw new Error("Not implemented")},toggleMuted(){throw new Error("Not implemented")}}}get progress(){return this.player?.progress??{amount:0,playedTime:0,snapshot:()=>({amount:0,playedTime:0})}}get bufferingProgress(){return 0}get duration(){return this.player?.duration??0}get repeat(){return this.player?.repeat??"none"}get frequency(){return{pitch:0,modulation:0,harmonics:0,amplitude:0}}get playbackSpeed(){return 1}get meta(){const t=this.player?.meta;return t||{activatedAt:null}}isCurrentInQueue(t){return this.player?.isCurrentInQueue?.(t)??!1}isCurrentListInQueue(t){return this.player?.isCurrentListInQueue?.(t)??!1}setRepeat(t){this.player?.setRepeat(t)}async playAudioList(t,e){(0,o.isSpecificMusicPlaylist)(t)&&await t.ensureItems(),await(this.player?.playAudioList(t,e))}async playQueuedAudio(){return this.player?.playQueuedAudio()}playAudio(t,e,a){return this.player?.playAudio(t,e,a)??Promise.resolve()}playNext(){throw this.player?.playNext()}playPrevious(){throw this.player?.playPrevious()}play(t){this.player?.play(t)}pause(t){this.player?.pause(t)}resume(t){this.player?.resume(t)}stop(t){this.player?.stop(t)}seek(t,e){this.player?.seek(t,e)}setPlaybackSpeed(){throw new Error("Not implemented")}toggleShuffled(){throw new Error("Not implemented")}clearQueue(){this.player?.clearQueue()}async ensurePlayer(){this.markInitializing();try{const{OnMediaAttachmentPlayer:t}=await Promise.all([a.e(47135),a.e("langs/web/audio_onMediaAttachmentPlayer")]).then(a.bind(a,355639)),{emitterFactory:e,platformConfig:i,statsListenerFactory:s,envData:o,metaData:n,network:d,networkAnalytics:u}=this;(0,r.runInAction)((()=>{this.player=new t({emitterFactory:e,platformConfig:i,statsListenerFactory:s,envData:o,metaData:n,network:d,networkAnalytics:u})})),this.unmarkInitializing()}catch{this.unmarkInitializing()}}markInitializing(){this._isInitializing=!0}unmarkInitializing(){this._isInitializing=!1}constructor(t,e,a,i,s,o,n){this.emitterFactory=t,this.platformConfig=e,this.statsListenerFactory=a,this.envData=i,this.metaData=s,this.network=o,this.networkAnalytics=n,this.player=null,this._isInitializing=!1,(0,r.makeObservable)(this),this.ensurePlayer()}}(0,i.__decorate)([r.observable.ref,(0,i.__metadata)("design:type",Object)],m.prototype,"player",void 0),(0,i.__decorate)([r.observable],m.prototype,"_isInitializing",void 0),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"events",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"isInitializing",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"currentListIdentity",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"currentAudio",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"prevAudio",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Boolean),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"active",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Boolean),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"playing",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Boolean),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"paused",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type","undefined"==typeof IAudioPlayerVolume?Object:IAudioPlayerVolume),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"volume",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type","undefined"==typeof IAudioPlayerProgress?Object:IAudioPlayerProgress),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"progress",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type","undefined"==typeof TPlaybackQueueRepeat?Object:TPlaybackQueueRepeat),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"repeat",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type","undefined"==typeof IAudioPlayerChannelMeta?Object:IAudioPlayerChannelMeta),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"meta",null),(0,i.__decorate)([r.action,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],m.prototype,"ensurePlayer",null),(0,i.__decorate)([r.action,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",void 0)],m.prototype,"markInitializing",null),(0,i.__decorate)([r.action,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",void 0)],m.prototype,"unmarkInitializing",null),m=(0,i.__decorate)([s.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===n.EmitterFactory?Object:n.EmitterFactory,void 0===l.AudioPlatformConfig?Object:l.AudioPlatformConfig,void 0===_.AudioPlayerStatsListenerFactory?Object:_.AudioPlayerStatsListenerFactory,void 0===p.AudioPlayerEnvData?Object:p.AudioPlayerEnvData,void 0===d.MetaData?Object:d.MetaData,void 0===u.Network?Object:u.Network,void 0===y.AudioPlayerNetworkAnalytics?Object:y.AudioPlayerNetworkAnalytics])],m)},439497:(t,e,a)=>{a.d(e,{OnMediaAttachmentAudioPlayerChannel:()=>i.OnMediaAttachmentAudioPlayerChannel});var i=a(727469)},102161:(t,e,a)=>{a.d(e,{PostingAudioPlayerChannel:()=>m});var i=a(331635),r=a(327813),s=a(132028),o=a(500435),n=a(26530),d=a(809424),u=a(474928),c=a(449502),p=a(461500),l=a(367734),_=a(480331),y=a(925720);class m{get id(){return c.AudioPlayerChannelType.Posting}get permissions(){return{repeat:!0,progressView:!0,progressUpdate:!0,speedUpdate:!0}}get events(){return this.player?.events??null}get isInitializing(){return this._isInitializing}get currentListIdentity(){return this.player?.currentListIdentity??null}get currentAudio(){return this.player?.currentAudio??null}get prevAudio(){return this.player?.prevAudio??null}get active(){return this.player?.active??!1}get playing(){return this.player?.playing??!1}get paused(){return this.player?.paused??!1}get shuffled(){return!1}get isPending(){return!1}get volume(){return this.player?.volume??{level:0,muted:!1,setLevel(){throw new Error("Not implemented")},toggleMuted(){throw new Error("Not implemented")}}}get progress(){return this.player?.progress??{amount:0,playedTime:0,snapshot:()=>({amount:0,playedTime:0})}}get bufferingProgress(){return 0}get duration(){return this.player?.duration??0}get repeat(){return this.player?.repeat??"none"}get frequency(){return{pitch:0,modulation:0,harmonics:0,amplitude:0}}get playbackSpeed(){return 1}get meta(){const t=this.player?.meta;return t||{activatedAt:null}}isCurrentInQueue(t){return this.player?.isCurrentInQueue?.(t)??!1}isCurrentListInQueue(t){return this.player?.isCurrentListInQueue?.(t)??!1}setRepeat(t){this.player?.setRepeat(t)}async playAudioList(t,e){(0,o.isSpecificMusicPlaylist)(t)&&await t.ensureItems(),await(this.player?.playAudioList(t,e))}playAudio(t,e,a){return this.player?.playAudio(t,e,a)??Promise.resolve()}async playQueuedAudio(){return this.player?.playQueuedAudio()}playNext(){throw this.player?.playNext()}playPrevious(){throw this.player?.playPrevious()}play(t){this.player?.play(t)}pause(t){this.player?.pause(t)}resume(t){this.player?.resume(t)}stop(t){this.player?.stop(t)}seek(t,e){this.player?.seek(t,e)}setPlaybackSpeed(){throw new Error("Not implemented")}toggleShuffled(){throw new Error("Not implemented")}clearQueue(){this.player?.clearQueue()}async ensurePlayer(){this.markInitializing();try{const{PostingPlayer:t}=await Promise.all([a.e(69240),a.e("langs/web/audio_postingPlayer")]).then(a.bind(a,182471)),{emitterFactory:e,platformConfig:i,statsListenerFactory:s,envData:o,metaData:n,network:d,networkAnalytics:u}=this;(0,r.runInAction)((()=>{this.player=new t({emitterFactory:e,platformConfig:i,statsListenerFactory:s,envData:o,metaData:n,network:d,networkAnalytics:u})})),this.unmarkInitializing()}catch{this.unmarkInitializing()}}markInitializing(){this._isInitializing=!0}unmarkInitializing(){this._isInitializing=!1}constructor(t,e,a,i,s,o,n){this.emitterFactory=t,this.platformConfig=e,this.statsListenerFactory=a,this.envData=i,this.metaData=s,this.network=o,this.networkAnalytics=n,this.player=null,this._isInitializing=!1,(0,r.makeObservable)(this),this.ensurePlayer()}}(0,i.__decorate)([r.observable.ref,(0,i.__metadata)("design:type",Object)],m.prototype,"player",void 0),(0,i.__decorate)([r.observable],m.prototype,"_isInitializing",void 0),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"events",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"isInitializing",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"currentListIdentity",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"currentAudio",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"prevAudio",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Boolean),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"active",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Boolean),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"playing",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Boolean),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"paused",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type","undefined"==typeof IAudioPlayerVolume?Object:IAudioPlayerVolume),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"volume",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type","undefined"==typeof IAudioPlayerProgress?Object:IAudioPlayerProgress),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"progress",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type","undefined"==typeof TPlaybackQueueRepeat?Object:TPlaybackQueueRepeat),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"repeat",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type","undefined"==typeof IAudioPlayerChannelMeta?Object:IAudioPlayerChannelMeta),(0,i.__metadata)("design:paramtypes",[])],m.prototype,"meta",null),(0,i.__decorate)([r.action,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],m.prototype,"ensurePlayer",null),(0,i.__decorate)([r.action,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",void 0)],m.prototype,"markInitializing",null),(0,i.__decorate)([r.action,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",void 0)],m.prototype,"unmarkInitializing",null),m=(0,i.__decorate)([s.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===n.EmitterFactory?Object:n.EmitterFactory,void 0===l.AudioPlatformConfig?Object:l.AudioPlatformConfig,void 0===_.AudioPlayerStatsListenerFactory?Object:_.AudioPlayerStatsListenerFactory,void 0===p.AudioPlayerEnvData?Object:p.AudioPlayerEnvData,void 0===d.MetaData?Object:d.MetaData,void 0===u.Network?Object:u.Network,void 0===y.AudioPlayerNetworkAnalytics?Object:y.AudioPlayerNetworkAnalytics])],m)},570585:(t,e,a)=>{a.d(e,{PostingAudioPlayerChannel:()=>i.PostingAudioPlayerChannel});var i=a(102161)},4704:(t,e,a)=>{a.d(e,{AdvertisingPlayerChannel:()=>s.AdvertisingPlayerChannel,MainPlayerChannel:()=>i.MainPlayerChannel,OnMediaAttachmentAudioPlayerChannel:()=>r.OnMediaAttachmentAudioPlayerChannel,PostingAudioPlayerChannel:()=>o.PostingAudioPlayerChannel});var i=a(92900),r=a(439497),s=a(652565),o=a(570585)},762970:(t,e,a)=>{a.d(e,{AudioPlayerBroadcastsFactory:()=>d});var i=a(331635),r=a(783091),s=a(132028),o=a(415606),n=a(124300);class d{create(t){return new r.AudioPlayerBroadcasts({channel:t,broadcastsService:this.broadcastsService,doormanPage:this.doormanPage})}constructor(t,e){this.broadcastsService=t,this.doormanPage=e}}d=(0,i.__decorate)([s.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.AudioBroadcastsService?Object:o.AudioBroadcastsService,void 0===n.DoormanPage?Object:n.DoormanPage])],d)},871396:(t,e,a)=>{a.d(e,{AudioPlayerBroadcastsFactory:()=>i.AudioPlayerBroadcastsFactory});var i=a(762970)},783091:(t,e,a)=>{a.d(e,{AudioPlayerBroadcasts:()=>v});var i=a(434518),r=a(763812),s=a(748885),o=a(639653),n=(0,r._)("_broadcastsService"),d=(0,r._)("_channel"),u=(0,r._)("_doormanPage"),c=(0,r._)("_connectPlayerEvents"),p=(0,r._)("_disconnectPlayerEvents"),l=(0,r._)("_connectDoormanPageEvents"),_=(0,r._)("_disconnectDoormanPageEvents"),y=(0,r._)("_handleClosePage"),m=(0,r._)("_handlePlayed"),h=(0,r._)("_handleRestored"),g=(0,r._)("_launch");class v{init(){(0,i._)(this,n)[n].init(),(0,i._)(this,c)[c](),(0,i._)(this,l)[l]()}dispose(){(0,i._)(this,p)[p](),(0,i._)(this,_)[_]()}constructor(t){Object.defineProperty(this,c,{value:A}),Object.defineProperty(this,p,{value:b}),Object.defineProperty(this,l,{value:f}),Object.defineProperty(this,_,{value:P}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),(0,i._)(this,y)[y]=()=>{(0,i._)(this,n)[n].sourceOperator.destroy()},(0,i._)(this,m)[m]=({audio:t})=>{(0,i._)(this,g)[g](t)},(0,i._)(this,h)[h]=({audio:t})=>{(0,i._)(this,g)[g](t)},(0,i._)(this,g)[g]=t=>{(0,s.isSpecificAudio)(t,o.AudioType.MusicTrack)?(0,i._)(this,n)[n].sourceOperator.launch({identity:t.identity,trackCode:t.apiAudio.track_code}):(0,i._)(this,n)[n].sourceOperator.destroy()},(0,i._)(this,n)[n]=t.broadcastsService,(0,i._)(this,d)[d]=t.channel,(0,i._)(this,u)[u]=t.doormanPage}}async function A(){const t=await(0,i._)(this,d)[d].ensureEvents();t?.on("play",(0,i._)(this,m)[m]),t?.on("restore",(0,i._)(this,h)[h])}async function b(){const t=await(0,i._)(this,d)[d].ensureEvents();t?.off("play",(0,i._)(this,m)[m]),t?.off("restore",(0,i._)(this,h)[h])}function f(){(0,i._)(this,u)[u].on("closePage",(0,i._)(this,y)[y])}function P(){(0,i._)(this,u)[u].off("closePage",(0,i._)(this,y)[y])}},461500:(t,e,a)=>{a.d(e,{AudioPlayerEnvData:()=>p});var i=a(331635),r=a(327813),s=a(418562),o=a(132028),n=a(510454),d=a(595980),u=a(951652);const c="audio_unique_unauth_id";class p{snapshot(){return{userId:this.authService.userId??0,anonymousUserId:this.anonymousUserId,isPageVisible:this.pageVisibility.isVisible}}get anonymousUserId(){const{localStorage:t}=this;let e=t.getItem(c);return e||(e=(0,s.default)(),t.setItem(c,e)),e}constructor(t,e,a){this.localStorage=t,this.pageVisibility=e,this.authService=a,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",String),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"anonymousUserId",null),p=(0,i.__decorate)([o.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===n.LocalStorage?Object:n.LocalStorage,void 0===d.PageVisibility?Object:d.PageVisibility,void 0===u.AuthService?Object:u.AuthService])],p)},247959:(t,e,a)=>{a.d(e,{AudioPlayerStatsListenerChannelAdapter:()=>y});var i=a(434518),r=a(763812),s=a(356812),o=a(423015),n=a(500435),d=a(639653),u=a(448131),c=(0,r._)("_userEnv"),p=(0,r._)("_channel"),l=(0,r._)("_emitter"),_=(0,r._)("_connectChannelEvents");class y{get events(){return(0,i._)(this,l)[l].listenable}getPlayingAudio(){const t=(0,i._)(this,p)[p].currentAudio;return t?(0,u.toAnyTrackedAudioData)(t):null}getListenedTime(){return(0,i._)(this,p)[p].progress.playedTime}getVolume(){return(0,i._)(this,p)[p].volume.level}isDebug(){return(0,i._)(this,c)[c].partConfigEnabled("frontend.audio_player_stats_debug")}isPlaying(){return(0,i._)(this,p)[p].playing}isLastTrack(){return!1}isRadio(){return!1}isPodcast(){return!1}isExternalStream(){return!1}isAdPlaying(){return!1}isRealPlaylist(){const t=(0,i._)(this,p)[p].currentAudio?.context?.list;return!!t&&(0,n.isSpecificMusicPlaylist)(t)}hasPlaylist(){return this.isRealPlaylist()}isRealPrevPlaylist(){return!1}hasSearchParams(){return!1}getSearchParams(){return null}getAudio(){return g((0,i._)(this,p)[p].currentAudio)}getAudioId(){const{currentAudio:t}=(0,i._)(this,p)[p];if(t&&t.type!==d.AudioType.Radio)return t.identity.rawId}getPrevAudio(){return g((0,i._)(this,p)[p].prevAudio)}hasPrevAudio(){return!!this.getPrevAudio()}getPrevAudioId(){const{prevAudio:t}=(0,i._)(this,p)[p];if(t&&t.type!==d.AudioType.Radio)return t.identity.rawId}getPlaylistId(){const t=(0,i._)(this,p)[p].currentListIdentity;return t&&"rawId"in t?t.rawId:null}hasPrevPlaylist(){return!1}getPrevPlaylistId(){return null}getAudioTrackCode(){return(0,i._)(this,p)[p].currentAudio?.context.trackCode}getProgress(){return(0,i._)(this,p)[p].progress.amount??0}getProgressInSeconds(){const{currentAudio:t}=(0,i._)(this,p)[p];return t?Math.round(this.getProgress()*(t.duration??0)):0}getState(){return 0}getContext(){return""}isAutoPlayed(){return!1}getSequence(){return 1}getPausedBy(){return null}getTrackPosition(){const{currentAudio:t}=(0,i._)(this,p)[p],e=t?.context.list;return t&&e?0:null}isRepeatAll(){return"queue"===(0,i._)(this,p)[p].repeat}isRepeatCurrentAudio(){return"audio"===(0,i._)(this,p)[p].repeat}sendListenedData(t){console.log("adapter sendListenedData",t)}constructor({channel:t,emitterFactory:e,userEnv:a}){Object.defineProperty(this,_,{value:m}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),this.isShuffledPlaylist=()=>!1,this.isMarusiaTrack=()=>!1,(0,i._)(this,p)[p]=t,(0,i._)(this,c)[c]=a,(0,i._)(this,l)[l]=e.create(),(0,i._)(this,_)[_]()}}function m(){if(!(0,i._)(this,p)[p].events)throw new Error("Audio player channel events not initialized");(0,i._)(this,p)[p].events.on("play",(t=>{var e;(0,i._)(this,l)[l].emit("playAudio",{...h(e=t),reason:e.reason}),(0,i._)(this,l)[l].emit("play")})).on("pause",(t=>{var e;(0,i._)(this,l)[l].emit("pauseAudio",{...h(e=t),reason:e.reason}),(0,i._)(this,l)[l].emit("pause")})).on("stop",(t=>{var e;(0,i._)(this,l)[l].emit("stopAudio",{...h(e=t),reason:e.reason}),(0,i._)(this,l)[l].emit("stop")})).on("seek",(t=>{var e;(0,i._)(this,l)[l].emit("seek",{...h(e=t),reason:e.reason,fromTime:e.fromTime}),(0,i._)(this,l)[l].emit("seekLegacy")}))}function h({audio:t,progress:e}){return{audio:(0,u.toAnyTrackedAudioData)(t),progressTime:e.amount}}function g(t){return t&&t.apiAudio?t.type===d.AudioType.Radio?null:(0,o.audioTupleToAudioObject)((0,s.apiAudioToAudioTuple)(t.apiAudio)):null}},843969:(t,e,a)=>{a.d(e,{AudioPlayerStatsListenerFactory:()=>_});var i=a(434518),r=a(763812),s=a(331635),o=a(132028),n=a(26530),d=a(24516),u=a(771979),c=a(972623),p=a(247959),l=(0,r._)("_createAdapter");class _{create(t){return new u.AudioPlayerStatsListener((0,i._)(this,l)[l](t))}createLegacyStats(t,e){return new c.AudioStats((0,i._)(this,l)[l](t),e)}constructor(t,e){Object.defineProperty(this,l,{value:y}),this.emitterFactory=t,this.userEnv=e}}function y(t){const{emitterFactory:e,userEnv:a}=this;return new p.AudioPlayerStatsListenerChannelAdapter({channel:t,emitterFactory:e,userEnv:a})}_=(0,s.__decorate)([o.scope.transient(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===n.EmitterFactory?Object:n.EmitterFactory,void 0===d.UserEnv?Object:d.UserEnv])],_)},480331:(t,e,a)=>{a.d(e,{AudioPlayerStatsListenerFactory:()=>i.AudioPlayerStatsListenerFactory});var i=a(843969)},448131:(t,e,a)=>{a.d(e,{toAnyTrackedAudioData:()=>n});var i=a(639653),r=a(164600),s=a(941277),o=a(52283);function n(t){switch(t.type){case i.AudioType.MusicTrack:case i.AudioType.MusicSnippet:return(0,r.toTrackedMusicAudioData)(t);case i.AudioType.PodcastEpisode:return(0,s.toTrackedPodcastAudioData)(t);case i.AudioType.Radio:return(0,o.toTrackedRadioAudioData)(t)}}},778777:(t,e,a)=>{function i(t){return{url:t.url,title:t.title,artwork:r(t),duration:t.duration,isExplicit:t.isExplicit,trackCode:t.context.trackCode}}function r(t){return t.cover?t.cover.sizes.map((t=>({src:t.src,size:t.width}))):[]}a.d(e,{toTrackedAudioData:()=>i})},164600:(t,e,a)=>{a.d(e,{toTrackedMusicAudioData:()=>o});var i=a(639653),r=a(488150),s=a(778777);function o(t){const e=function(t){const{identity:e}=t;return{id:e.id,ownerId:e.ownerId,accessKey:e.accessKey,releaseAudioId:t.releaseAudioIdentity?.fullId,ref:t.context?.list?.context?.ref??void 0}}(t);return{...(0,s.toTrackedAudioData)(t),identity:e,...e,type:n(t),author:d(t),disliked:t.dislike.state,hasLyrics:t.hasLyrics,trackCode:t.context.trackCode}}function n(t){switch(t.type){case i.AudioType.MusicTrack:return r.AudioType.MusicTrack;case i.AudioType.MusicSnippet:return r.AudioType.MusicSnippet}}function d(t){const{authors:e}=t;return{raw:e.raw,main:e.main.map(u),feat:e.feat.map(u)}}function u(t){return{id:t.id,name:t.name}}},941277:(t,e,a)=>{a.d(e,{toTrackedPodcastAudioData:()=>s});var i=a(488150),r=a(778777);function s(t){const e=function(t){const{identity:e}=t;return{id:e.id,ownerId:e.ownerId,accessKey:e.accessKey,podcastId:e.podcastId}}(t);return{...(0,r.toTrackedAudioData)(t),identity:e,...e,type:i.AudioType.PodcastEpisode}}},52283:(t,e,a)=>{a.d(e,{toTrackedRadioAudioData:()=>s});var i=a(488150),r=a(778777);function s(t){const e={id:t.identity.id,ownerId:100};return{...(0,r.toTrackedAudioData)(t),identity:e,...e,type:i.AudioType.Radio}}},481183:(t,e,a)=>{a.d(e,{AudioInternalContext:()=>n});var i=a(331635),r=a(132028),s=a(765966),o=a(955060);class n{constructor(t){this.eventsEmitter=new s.Emitter({catchListener:e=>{t.log(e)}})}}n=(0,i.__decorate)([r.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.ErrorLogger?Object:o.ErrorLogger])],n)},42503:(t,e,a)=>{a.d(e,{toAudioData:()=>d});var i=a(885528),r=a(549515),s=a(382902),o=a(35215),n=a(276719);function d(t){const{duration:e}=t,a=function(t){const{legal_notices_type:e}=t;return(0,i.bitmaskToAudioLegal)(e??0)}(t),r=t?.podcast_info?.plays;return{identity:(0,s.toOwnedAudioIdentityData)(t),title:t.title,cover:u(t),url:t.url||null,isExplicit:a.isExplicit,legal:a,authors:(0,n.toAudioDataAuthors)(t),duration:Number.isFinite(e)?e:void 0,isBlocked:c(t),plays:Number.isFinite(r)?r:void 0}}function u(t){const e=t.album?.thumb??t?.thumb,a=t.album?.main_color||t.main_color;return e?(0,r.mapAudioPhotoToAudioImage)(e,a):null}function c({dmca_blocked:t,content_restricted:e}){return!!t||(0,o.isNumber)(e)&&0!==e}},382902:(t,e,a)=>{function i(t){return{id:t.id,ownerId:t.owner_id,accessKey:t.access_key}}a.d(e,{toOwnedAudioIdentityData:()=>i})},276719:(t,e,a)=>{a.d(e,{artistToAudioDataAuthorInfo:()=>s,toAudioDataAuthors:()=>r});var i=a(397034);function r(t){return{main:t?.main_artists?.map(s)??[],feat:t?.featured_artists?.map(s)??[],raw:t.artist}}function s(t){return{name:t.name,avatar:o(t)}}function o(t){const e=t.photo;return e?(0,i.mapBaseImagesToAudioImage)(e):null}},267871:(t,e,a)=>{function i(t){return new Date(1e3*t)}a.d(e,{toAudioDate:()=>i})},828075:(t,e,a)=>{a.d(e,{AudioContextableEntityMultiton:()=>u});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(70916),d=(0,r._)("_makeCachedDataGetter");class u{get(t,e){const a=this.getEntityKey(t,e);let i=this.entities.get(a);if(i)return i;if(!e)return;const r=this.data.get(t);if(r){const s=this.constructEntity(this.makeEntityParams(t,r),e);i=s,this.entities.set(a,s)}return i}getStrict(t,e){const a=this.get(t,e);if(!a)throw new Error("Entity not created or lost cache");return a}create(t,e){const{identity:a,data:i}=t;if(this.setState(a,t.state),this.data.set(a,i),e){const e=this.constructEntity(this.makeEntityParams(a,i));this.entities.set(this.getEntityKey(t.identity),e)}const r=this.constructEntity(this.makeEntityParams(a,i),e);return this.entities.set(this.getEntityKey(t.identity,e),r),r}getEntityKey(t,e){const a=e&&this.getContextKey(e);return`${t.fullId}${a??""}`}makeEntityParams(t,e){return{identity:t,getData:(0,i._)(this,d)[d](t,e),attachContext:e=>this.getStrict(t,e)}}constructor(){Object.defineProperty(this,d,{value:c}),this.entities=new Map,this.data=new n.ObservableIdentityMap,(0,o.makeObservable)(this)}}function c(t,e){let a=e;return()=>{let e=this.data.get(t);return e&&(a=e),e??a}}(0,s.__decorate)([o.observable],u.prototype,"entities",void 0),(0,s.__decorate)([o.observable],u.prototype,"data",void 0),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",["undefined"==typeof CreateParams?Object:CreateParams,"undefined"==typeof Context?Object:Context]),(0,s.__metadata)("design:returntype",Object)],u.prototype,"create",null)},397034:(t,e,a)=>{function i(t,e){return{sizes:r(t),mainColor:e}}function r(t){return t.length?t.map(s):[]}function s(t){return{width:t.width,height:t.height,src:t.url}}a.d(e,{mapBaseImagesToAudioImage:()=>i})},473512:(t,e,a)=>{function i(t){return t.sizes.map((t=>({sizes:r(t),src:t.src})))}function r(t){return`${t.width}x${t.height}`}a.d(e,{toMediaImages:()=>i})},723263:(t,e,a)=>{a.d(e,{AudioBroadcastsAudience:()=>l});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=(0,r._)("_audienceReader"),d=(0,r._)("_audienceWriter"),u=(0,r._)("_sourceReader"),c=(0,r._)("_controller"),p=(0,r._)("_pendings");class l{get hasConnected(){return(0,i._)(this,n)[n].size>0&&!!(0,i._)(this,u)[u].current}get isPending(){return(0,i._)(this,p)[p].size>0}get isConnectionBlocked(){return!(0,i._)(this,u)[u].current||this.isPending}isConnected(t){return(0,i._)(this,n)[n].has(t)&&!!(0,i._)(this,u)[u].current}checkPending(t){return(0,i._)(this,p)[p].has(t)}async connect(t){const e=(0,i._)(this,u)[u].current;if(!this.isConnected(t)&&!this.isConnectionBlocked&&e){this.markPending(t);try{await(0,i._)(this,c)[c].activate({targets:[t],source:e}),this.unmarkPending(t),(0,i._)(this,d)[d].add(t)}catch{this.unmarkPending(t)}}}async disconnect(t){if(this.isConnected(t)){this.markPending(t);try{await(0,i._)(this,c)[c].deactivate([t]),this.unmarkPending(t),(0,i._)(this,d)[d].remove(t)}catch{this.unmarkPending(t)}}}async disconnectAll(){if(0!==(0,i._)(this,n)[n].size){(0,i._)(this,n)[n].current.forEach((t=>this.markPending(t)));try{await(0,i._)(this,c)[c].deactivate((0,i._)(this,n)[n].current),(0,i._)(this,n)[n].current.forEach((t=>this.unmarkPending(t))),(0,i._)(this,d)[d].clear()}catch{(0,i._)(this,n)[n].current.forEach((t=>this.unmarkPending(t)))}}}markPending(t){(0,i._)(this,p)[p].add(t)}unmarkPending(t){(0,i._)(this,p)[p].delete(t)}constructor(t){Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),(0,i._)(this,p)[p]=new o.ObservableSet([]),(0,i._)(this,n)[n]=t.audienceReader,(0,i._)(this,d)[d]=t.audienceWriter,(0,i._)(this,u)[u]=t.sourceReader,(0,i._)(this,c)[c]=t.controller,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],l.prototype,"hasConnected",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],l.prototype,"isPending",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],l.prototype,"isConnectionBlocked",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",["undefined"==typeof TAudioBroadcastTargetIdentity?Object:TAudioBroadcastTargetIdentity]),(0,s.__metadata)("design:returntype",void 0)],l.prototype,"markPending",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",["undefined"==typeof TAudioBroadcastTargetIdentity?Object:TAudioBroadcastTargetIdentity]),(0,s.__metadata)("design:returntype",void 0)],l.prototype,"unmarkPending",null)},508616:(t,e,a)=>{a.d(e,{AudioBroadcastsAudienceStore:()=>c});var i=a(434518),r=a(763812),s=a(331635),o=a(327813);const n="audio_broadcasts_targets";var d=(0,r._)("_storage"),u=(0,r._)("_targets");class c{get current(){return Array.from((0,i._)(this,u)[u])}get size(){return(0,i._)(this,u)[u].size}restore(){const t=this.getStoredTargets();var e;(e=t,Array.isArray(e)&&e.every(p))&&this.createTargets(t)}has(t){return(0,i._)(this,u)[u].has(t)}add(t){(0,i._)(this,u)[u].has(t)||((0,i._)(this,u)[u].add(t),this.save())}remove(t){(0,i._)(this,u)[u].has(t)&&((0,i._)(this,u)[u].delete(t),this.save())}set(t){this.createTargets(t),this.save()}clear(){0!==(0,i._)(this,u)[u].size&&((0,i._)(this,u)[u].clear(),this.save())}get isTargetsEmpty(){return 0===(0,i._)(this,u)[u].size}save(){this.isTargetsEmpty?this.removeTargetsFromStorage():this.saveTargetsToStorage()}getStoredTargets(){return JSON.parse((0,i._)(this,d)[d].getItem(n)||"[]")}createTargets(t){(0,i._)(this,u)[u]=new o.ObservableSet(t)}removeTargetsFromStorage(){(0,i._)(this,d)[d].removeItem(n)}saveTargetsToStorage(){const t=this.serializeTargets();(0,i._)(this,d)[d].setItem(n,t)}serializeTargets(){return JSON.stringify(Array.from((0,i._)(this,u)[u]))}constructor(t){Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,i._)(this,u)[u]=new o.ObservableSet([]),(0,i._)(this,d)[d]=t.storage,(0,o.makeObservable)(this)}}function p(t){return"currentUser"===t||"number"==typeof t}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"current",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"size",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",["undefined"==typeof TAudioBroadcastTargetIdentity?Object:TAudioBroadcastTargetIdentity]),(0,s.__metadata)("design:returntype",void 0)],c.prototype,"add",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",["undefined"==typeof TAudioBroadcastTargetIdentity?Object:TAudioBroadcastTargetIdentity]),(0,s.__metadata)("design:returntype",void 0)],c.prototype,"remove",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[]),(0,s.__metadata)("design:returntype",void 0)],c.prototype,"clear",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Boolean),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"isTargetsEmpty",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",void 0)],c.prototype,"createTargets",null)},645864:(t,e,a)=>{a.d(e,{AudioBroadcastsController:()=>n});var i=a(434518),r=a(763812),s=(0,r._)("_audioApi"),o=(0,r._)("_authService");class n{async activate(t){const{targets:e}=t;if(e.length<1)return;const{identity:a,trackCode:r}=t.source;await(0,i._)(this,s)[s].setBroadcast({audio:u(a),target_ids:d(t.targets,(0,i._)(this,o)[o].userId),enabled:1,...r&&{track_code:r}})}async deactivate(t){t.length<1||await(0,i._)(this,s)[s].setBroadcast({target_ids:d(t,(0,i._)(this,o)[o].userId),enabled:0})}constructor(t){Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,o,{writable:!0,value:void 0}),(0,i._)(this,s)[s]=t.audioApi,(0,i._)(this,o)[o]=t.authService}}function d(t,e){return t.map((t=>"currentUser"===t?e:`-${t}`)).join(",")}function u(t){return"number"==typeof t.fullId?String(t.fullId):t.fullId}},681780:(t,e,a)=>{a.d(e,{AudioBroadcastsSourceOperator:()=>u});var i=a(434518),r=a(763812),s=(0,r._)("_audienceReader"),o=(0,r._)("_sourceReader"),n=(0,r._)("_sourceWriter"),d=(0,r._)("_controller");class u{async launch(t){t.identity.fullId!==(0,i._)(this,o)[o].current?.identity.fullId&&(await(0,i._)(this,d)[d].activate({targets:(0,i._)(this,s)[s].current,source:t}),(0,i._)(this,n)[n].set(t))}async destroy(){await(0,i._)(this,d)[d].deactivate((0,i._)(this,s)[s].current),(0,i._)(this,n)[n].clear()}constructor(t){Object.defineProperty(this,s,{writable:!0,value:void 0}),Object.defineProperty(this,o,{writable:!0,value:void 0}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),(0,i._)(this,s)[s]=t.audienceReader,(0,i._)(this,o)[o]=t.sourceReader,(0,i._)(this,n)[n]=t.sourceWriter,(0,i._)(this,d)[d]=t.controller}}},62141:(t,e,a)=>{a.d(e,{AudioBroadcastsSourceStore:()=>s});var i=a(331635),r=a(327813);class s{get current(){return this.source}set(t){this.source=t}clear(){this.source=null}constructor(){this.source=null,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.observable,(0,i.__metadata)("design:type",Object)],s.prototype,"source",void 0),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],s.prototype,"current",null),(0,i.__decorate)([r.action,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",["undefined"==typeof IAudioBroadcastsSource?Object:IAudioBroadcastsSource]),(0,i.__metadata)("design:returntype",void 0)],s.prototype,"set",null),(0,i.__decorate)([r.action,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",void 0)],s.prototype,"clear",null)},415606:(t,e,a)=>{a.d(e,{AudioBroadcastsService:()=>A});var i=a(434518),r=a(763812),s=a(331635),o=a(132028),n=a(346675),d=a(951652),u=a(510454),c=a(645864),p=a(723263),l=a(681780),_=a(62141),y=a(508616),m=(0,r._)("_isInitialized"),h=(0,r._)("_audienceStore"),g=(0,r._)("_sourceStore"),v=(0,r._)("_controller");class A{init(){(0,i._)(this,m)[m]||((0,i._)(this,m)[m]=!0,(0,i._)(this,h)[h].restore())}constructor(t,e,a){Object.defineProperty(this,m,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),Object.defineProperty(this,g,{writable:!0,value:void 0}),Object.defineProperty(this,v,{writable:!0,value:void 0}),(0,i._)(this,m)[m]=!1,(0,i._)(this,h)[h]=new y.AudioBroadcastsAudienceStore({storage:a}),(0,i._)(this,g)[g]=new _.AudioBroadcastsSourceStore,(0,i._)(this,v)[v]=new c.AudioBroadcastsController({audioApi:t,authService:e}),this.audience=new p.AudioBroadcastsAudience({audienceReader:(0,i._)(this,h)[h],audienceWriter:(0,i._)(this,h)[h],sourceReader:(0,i._)(this,g)[g],controller:(0,i._)(this,v)[v]}),this.sourceOperator=new l.AudioBroadcastsSourceOperator({audienceReader:(0,i._)(this,h)[h],sourceReader:(0,i._)(this,g)[g],sourceWriter:(0,i._)(this,g)[g],controller:(0,i._)(this,v)[v]})}}A=(0,s.__decorate)([o.scope.global(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===n.AudioApi?Object:n.AudioApi,void 0===d.AuthService?Object:d.AuthService,void 0===u.LocalStorage?Object:u.LocalStorage])],A)},128028:(t,e,a)=>{a.d(e,{AUDIO_TYPES_TUPLE:()=>r});var i=a(639653);const r=[i.AudioType.MusicTrack,i.AudioType.MusicSnippet,i.AudioType.PodcastEpisode,i.AudioType.Radio]},748885:(t,e,a)=>{a.d(e,{isSpecificAudio:()=>r});var i=a(128028);function r(t,e){return e?Array.isArray(e)?e.includes(t.type):t.type===e:i.AUDIO_TYPES_TUPLE.includes(t.type)}},700190:(t,e,a)=>{a.d(e,{getAudioTypeFromAudioAudio:()=>r});var i=a(639653);function r(t){return t.podcast_info?i.AudioType.PodcastEpisode:i.AudioType.MusicTrack}},657009:(t,e,a)=>{a.d(e,{AttachmentAudioListProvider:()=>l});var i=a(331635),r=a(132028),s=a(843161),o=a(639653),n=a(891480),d=a(158400),u=a(261122),c=a(138316),p=a(700190);class l{static isSameTypeCollection(t){let e;for(const a of t){const t=(0,p.getAudioTypeFromAudioAudio)(a);if(e){if(t!==e)return!1}else e=t}return!0}createFromAPI(t){if(!t.length)throw new Error("Unexpected empty audios attachment collection");if(!l.isSameTypeCollection(t))throw new Error("Audios for AttachmentAudioList must be same type");const e=(0,p.getAudioTypeFromAudioAudio)(t[0]);switch(e){case o.AudioType.MusicTrack:{const e={type:n.AudioListType.AttachmentAudioList};return new c.LoadedAudioList({identity:this.createIdentityFromAPI(t),getData:()=>e,audios:t.map((t=>this.musicTrackProvider.createContextualFromAPI(t,{}))),context:{ref:null},attachContextToAudio:(t,e)=>t.attachContext(e)})}case o.AudioType.PodcastEpisode:{const e={type:n.AudioListType.AttachmentAudioList};return new c.LoadedAudioList({identity:this.createIdentityFromAPI(t),getData:()=>e,audios:t.map((t=>this.podcastEpisodeProvider.createContextualFromAPI(t,{}))),context:{ref:null},attachContextToAudio:(t,e)=>t.attachContext(e)})}default:throw new Error(`Unsupported AttachmentAudioList contentType ${e}`)}}createIdentityFromAPI(t){const e=t.map((t=>`AttachmentAudioList#${t.owner_id}_${t.id}${t.preview_url?"_snippet":""}`)).join("/");return new s.SingleIdentity({id:e})}constructor(t,e){this.musicTrackProvider=t,this.podcastEpisodeProvider=e}}l=(0,i.__decorate)([r.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===d.MusicTrackProvider?Object:d.MusicTrackProvider,void 0===u.PodcastEpisodeProvider?Object:u.PodcastEpisodeProvider])],l)},466707:(t,e,a)=>{a.d(e,{Audio:()=>_});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(473512),d=a(221592),u=(0,r._)("_identity"),c=(0,r._)("_context"),p=(0,r._)("_getData"),l=(0,r._)("_attachContext");class _{get identity(){return(0,i._)(this,u)[u]}get context(){return(0,i._)(this,c)[c]}attachContext(t){const e=(0,i._)(this,l)[l];if(!e)throw new Error("Audio is not contextable");return e(t)}get data(){return(0,i._)(this,p)[p]()}get type(){return this.data.type}get url(){return this.data.url}get title(){return this.data.title}get cover(){return this.data.cover}get isExplicit(){return this.data.isExplicit}get legal(){return this.data.legal}get authors(){return this.data.authors}get duration(){return this.data.duration}get plays(){return this.data.plays}get isBlocked(){return this.data.isBlocked}get mediaMetadata(){const{authors:t,cover:e}=this;return{title:this.title,artist:t&&(0,d.stringifyAudioAuthors)(t),artwork:e?(0,n.toMediaImages)(e):[]}}getContextStrict(){const{context:t}=this;if(!t)throw new Error("Audio is not contextual");return t}constructor(t){Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,i._)(this,u)[u]=t.identity,(0,i._)(this,c)[c]=t.context??null,(0,i._)(this,p)[p]=t.getData,(0,i._)(this,l)[l]=t.attachContext,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"data",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"type",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"url",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"title",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"cover",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"isExplicit",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"legal",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"authors",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"duration",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"plays",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"isBlocked",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type","undefined"==typeof MediaMetadataInit?Object:MediaMetadataInit),(0,s.__metadata)("design:paramtypes",[])],_.prototype,"mediaMetadata",null)},221592:(t,e,a)=>{function i(t){return[t.main.map((({name:t})=>t)).filter(Boolean).join(", "),t.feat.map((({name:t})=>t)).filter(Boolean).join(", ")].filter(Boolean).join(" . feat ")||t.raw}a.d(e,{stringifyAudioAuthors:()=>i})},942539:(t,e,a)=>{a.d(e,{AudioEntityToggle:()=>s});var i=a(331635),r=a(327813);class s{get isPending(){return this.toggleService.pending.has(this.identity)}get state(){return!!this.toggleService.state.get(this.identity)}activate(...[t]){return this.toggleService.activate(this.identity,t)}deactivate(...[t]){return this.toggleService.deactivate(this.identity,t)}toggle(t,e){return this.toggleService.toggle(this.identity,t,e)}constructor(t,e){this.identity=t,this.toggleService=e,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],s.prototype,"isPending",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],s.prototype,"state",null)},306338:(t,e,a)=>{a.d(e,{MusicAudio:()=>p});var i=a(331635),r=a(327813),s=a(70148),o=a(466707),n=a(863840),d=a(898950),u=a(942539),c=a(340615);class p extends o.Audio{get subtitle(){return this.data.subtitle}get album(){return this.data.album}get hasLyrics(){return this.data.hasLyrics}get rightholderMarks(){return this.data.rightholderMarks}get apiAudio(){return this.data.apiAudio}get releaseAudioIdentity(){const t=this.data.releaseAudioIdentity;return t&&new s.OwnedIdentity(t)}get mediaMetadata(){return{...super.mediaMetadata,album:this.album?.title}}get releaseAudio(){const t=this.releaseAudioIdentity;return t?this.trackProvider.get(t)??null:null}get originalAudio(){if(this.releaseAudio)return this.releaseAudio;if(!this.isMine)return null;const t=this.service.myMusic.getSource(this.identity);return t?this.trackProvider.get(t)??null:null}get isMine(){return this.myMusic.isOwned}get specialProject(){return this.data.specialProject}constructor(t){super(t);const{identity:e}=this,{service:a}=t,i=this.context?.trackCode??null;this.trackProvider=t.trackProvider,this.service=a,this.myMusic=new d.MusicAudioOwning({identity:e,trackCode:i,service:a.myMusic,getHasOwnedStateFallback:()=>this.data.apiAudio.like}),this.groupsMusic=new c.MusicAudioGroupsMusic({identity:e,trackCode:i,service:a.groupMusicServices}),this.dislike=new u.AudioEntityToggle(e,a.dislikes),this.lyrics=new n.MusicLyrics({identity:e,service:a.lyrics}),(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"subtitle",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"album",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"hasLyrics",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"rightholderMarks",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Object),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"apiAudio",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Object),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"releaseAudioIdentity",null),(0,i.__decorate)([r.override,(0,i.__metadata)("design:type","undefined"==typeof MediaMetadataInit?Object:MediaMetadataInit),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"mediaMetadata",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Object),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"releaseAudio",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Object),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"originalAudio",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"isMine",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],p.prototype,"specialProject",null)},340615:(t,e,a)=>{a.d(e,{MusicAudioGroupsMusic:()=>r});var i=a(898950);class r{create(t){return new i.MusicAudioOwning({identity:this.identity,trackCode:this.trackCode,service:this.service.get(t)})}constructor(t){this.identity=t.identity,this.trackCode=t.trackCode,this.service=t.service}}},58397:(t,e,a)=>{a.d(e,{MusicSnippet:()=>d});var i=a(331635),r=a(327813),s=a(873900),o=a(269230),n=a(306338);class d extends n.MusicAudio{async ensureClip(){if(this.isLoadedClip)return this.clip;const t=await this.repository.audioGetAudioPreviewUrl({audio_id:(0,s.getIdentityAccessRawId)(this.identity)});return(0,r.runInAction)((()=>{this.clip=(0,o.toMusicSnippetClip)(t),this.isLoadedClip=!0})),this.clip}constructor(t){super(t),this.repository=t.repository,this.clip=this.data.clip,this.isLoadedClip=!!this.data.clip,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.observable,(0,i.__metadata)("design:type",Object)],d.prototype,"clip",void 0),(0,i.__decorate)([r.action,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],d.prototype,"ensureClip",null)},930671:(t,e,a)=>{a.d(e,{MusicTrack:()=>o});var i=a(331635),r=a(327813),s=a(306338);class o extends s.MusicAudio{get isFocusTrack(){return this.data.isFocusTrack}constructor(t){super(t),(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"isFocusTrack",null)},294386:(t,e,a)=>{a.d(e,{PodcastAudio:()=>n});var i=a(331635),r=a(327813),s=a(466707),o=a(942539);class n extends s.Audio{get isFavorite(){return this.favorite.state}get isDonatorsExclusive(){return this.data.isDonatorsExclusive}get restrictionActionRawData(){return this.data.restrictionActionRawData}get apiAudio(){return this.data.apiAudio}constructor(t){super(t),this.favorite=new o.AudioEntityToggle(this.identity,t.favoritesService),(0,r.makeObservable)(this)}}(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"isDonatorsExclusive",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"restrictionActionRawData",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"apiAudio",null)},274181:(t,e,a)=>{a.d(e,{PodcastEpisode:()=>o});var i=a(331635),r=a(327813),s=a(294386);class o extends s.PodcastAudio{get description(){return this.data.description}get releaseDate(){return this.data.releaseDate}get isListened(){return this._isListened}async markAsListened(){this._isListened=!0}constructor(t){super(t),this._isListened=!1,(0,r.makeObservable)(this)}}(0,i.__decorate)([r.observable],o.prototype,"_isListened",void 0),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Object),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"description",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Object),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"releaseDate",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",Object),(0,i.__metadata)("design:paramtypes",[])],o.prototype,"isListened",null),(0,i.__decorate)([r.action,(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[]),(0,i.__metadata)("design:returntype",Promise)],o.prototype,"markAsListened",null)},390312:(t,e,a)=>{a.d(e,{MusicAudioFactory:()=>l});var i=a(331635),r=a(132028),s=a(70148),o=a(895587),n=a(930671),d=a(58397),u=a(158400),c=a(269230),p=a(587029);class l{createTrack(t){const{service:e,trackProvider:a}=this,i=new s.OwnedIdentity({id:t.id,ownerId:t.owner_id,accessKey:t.access_key}),r=()=>(0,c.toMusicTrackData)(t);return function t(s){return new n.MusicTrack({identity:i,getData:r,context:s,attachContext:e=>t(e),trackProvider:a,service:e})}()}createSnippet(t,e){const{repository:a,service:i,trackProvider:r}=this,o=new s.OwnedIdentity({id:t.id,ownerId:t.owner_id,accessKey:t.access_key}),n=()=>(0,c.toMusicSnippetData)(t,e);return function t(e){return new d.MusicSnippet({identity:o,getData:n,context:e,attachContext:e=>t(e),repository:a,trackProvider:r,service:i})}()}constructor(t,e,a){this.repository=t,this.service=e,this.trackProvider=a}}l=(0,i.__decorate)([r.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.AudioRepository?Object:o.AudioRepository,void 0===p.MusicService?Object:p.MusicService,void 0===u.MusicTrackProvider?Object:u.MusicTrackProvider])],l)},158400:(t,e,a)=>{a.d(e,{MusicTrackProvider:()=>f});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(132028),d=a(74270),u=a(70148),c=a(873900),p=a(895587),l=a(828075),_=a(382902),y=a(23975),m=a(930671),h=a(587029),g=a(269230),v=a(528697),A=(0,r._)("_corruptedIdentities"),b=(0,r._)("_setMyMusicState");class f extends l.AudioContextableEntityMultiton{get corruptedIdentities(){return(0,i._)(this,A)[A]}createContextualFromAPI(t,e){const a=t.track_code;if(!a)throw new Error("trackCode is not defined in source");return this.createFromAPI(t).attachContext({...e,trackCode:a})}createFromAPI(t){return this.create({identity:new u.OwnedIdentity((0,_.toOwnedAudioIdentityData)(t)),data:(0,g.toMusicTrackData)(t),state:(0,v.toMusicAudioStateData)(t)})}isFetchingAudio(t){return this.pendingEntities.has(this.toEntityIdentity(t))}async ensure(t){const e=this.get(t);return e||this.fetch(t)}async fetch(t){const[e]=await this.fetchMany([t]);if(!e)throw y.AudioError.createNotFoundError("Server did not return the audio");return e}async fetchMany(t){if(!t.length)return[];try{this.markPending(t);const e=await this.repository.audioGetById({audios:t.map(c.getIdentityAccessRawId).join(",")});return(0,o.runInAction)((()=>{const a=e.map((t=>this.createFromAPI(t)));return this.unmarkPending(t),a}))}catch(e){throw this.unmarkPending(t),e}}async ensureMany(t){let e=[];const a=[],i=[];for(const a of t){const t=this.get(a);t?e.push(t):i.push(a)}if(!i.length)return e;await this.fetchMany(i),e=[];for(const i of t){const t=this.get(i);t?e.push(t):(console.warn(`Audio ${i.fullId} not found in audio.getById response`),a.push(i))}return this.markCorrupted(a),e}constructEntity(t,e){return new m.MusicTrack({...t,context:e,trackProvider:this,service:this.service})}setState(t,e){const{hasLyrics:a,disliked:r}=e;(0,i._)(this,b)[b](t,e),void 0!==a&&this.service.lyrics.setHasLyrics(t,a),void 0!==r&&this.service.dislikes.setState(t,r)}getContextKey(t){return`${t.list?.identity.fullId??""}/${t.trackCode}`}toEntityIdentity(t){return new u.OwnedIdentity(t)}markPending(t){t.forEach((t=>this.pendingEntities.add(t)))}unmarkPending(t){t.forEach((t=>this.pendingEntities.delete(t)))}markCorrupted(t){t.forEach((t=>(0,i._)(this,A)[A].add(t)))}constructor(t,e){super(),Object.defineProperty(this,b,{value:P}),Object.defineProperty(this,A,{writable:!0,value:void 0}),this.repository=t,this.service=e,this.pendingEntities=new d.ObservableIdentitySet,(0,i._)(this,A)[A]=new d.ObservableIdentitySet,(0,o.makeObservable)(this)}}function P(t,e){const{liked:a,originalIdentity:i}=e,{myMusic:r}=this.service;let s;void 0!==a&&(s=this.toEntityIdentity(i),r.setState(s,t,a))}(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,s.__metadata)("design:returntype",Promise)],f.prototype,"ensure",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,s.__metadata)("design:returntype",Promise)],f.prototype,"fetch",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",Promise)],f.prototype,"fetchMany",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",Promise)],f.prototype,"ensureMany",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"markPending",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"unmarkPending",null),(0,s.__decorate)([o.action,(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[Object]),(0,s.__metadata)("design:returntype",void 0)],f.prototype,"markCorrupted",null),f=(0,s.__decorate)([n.scope.global(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===p.AudioRepository?Object:p.AudioRepository,void 0===h.MusicService?Object:h.MusicService])],f)},269230:(t,e,a)=>{a.d(e,{toMusicSnippetClip:()=>p,toMusicSnippetData:()=>c,toMusicTrackData:()=>u});var i=a(42503),r=a(639653),s=a(67259),o=a(887229);function n(t,e){return{...(0,i.toAudioData)(e),type:t,hasLyrics:e.has_lyrics??!1,authors:(0,s.toMusicAudioDataAuthors)(e),album:l(e),duration:e.duration,subtitle:e.subtitle??"",releaseAudioIdentity:(0,o.toReleaseMusicAudioIdentityData)(e),rightholderMarks:e.rightholder_marks??[],apiAudio:e,specialProject:d(e.special_project_id)}}function d(t){return t?{id:t}:null}function u(t){return{...n(r.AudioType.MusicTrack,t),isFocusTrack:t.is_focus_track??!1}}function c(t,e){return{...n(r.AudioType.MusicSnippet,t),clip:e??null}}function p(t){return t?.clip_from&&t?.clip_to?{to:t.clip_to,from:t.clip_from}:null}function l(t){const{album:e}=t;return e?{id:e.id,ownerId:e.owner_id,title:e.title}:null}},528697:(t,e,a)=>{a.d(e,{toMusicAudioStateData:()=>s});var i=a(382902),r=a(887229);function s(t){let e=(0,r.toReleaseMusicAudioIdentityData)(t);return e??(e=(0,i.toOwnedAudioIdentityData)(t)),{hasLyrics:t.has_lyrics,liked:t.like,disliked:t.dislike,originalIdentity:e}}},887229:(t,e,a)=>{a.d(e,{toReleaseMusicAudioIdentityData:()=>s});var i=a(187966),r=a(768035);function s(t){const{release_audio_id:e}=t;return e&&(0,i.isAnyRawId)(e)?(0,r.parseRawId)(e):null}},67259:(t,e,a)=>{a.d(e,{toMusicAudioDataAuthors:()=>s});var i=a(276719),r=a(996331);function s(t){return{main:t.main_artists?.map(o)??[],feat:t.featured_artists?.map(o)??[],raw:t.artist}}function o(t){return{...(0,i.artistToAudioDataAuthorInfo)(t),id:t.id,avatar:(0,r.toMusicAuthorAvatar)(t)}}},996331:(t,e,a)=>{a.d(e,{toMusicAuthorAvatar:()=>r});var i=a(397034);function r(t){const e=t.photo;return e?(0,i.mapBaseImagesToAudioImage)(e):null}},863840:(t,e,a)=>{a.d(e,{MusicLyrics:()=>u});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=(0,r._)("_identity"),d=(0,r._)("_service");class u{get data(){return(0,i._)(this,d)[d].get((0,i._)(this,n)[n])}get isExist(){return(0,i._)(this,d)[d].hasLyrics((0,i._)(this,n)[n])}ensure(){return(0,i._)(this,d)[d].ensure((0,i._)(this,n)[n])}constructor(t){Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),(0,i._)(this,n)[n]=t.identity,(0,i._)(this,d)[d]=t.service,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"data",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"isExist",null)},898950:(t,e,a)=>{a.d(e,{MusicAudioOwning:()=>u});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=(0,r._)("_getHasOwnedStateFallback"),d=(0,r._)("_service");class u{get ownerId(){return(0,i._)(this,d)[d].ownerId}get hasOwned(){return!!((0,i._)(this,d)[d].get(this.identity)??(null==(0,i._)(this,n)[n]?void 0:(0,i._)(this,n)[n].call(this)))}get isOwned(){return(0,i._)(this,d)[d].isOwned(this.identity)}get isDeleted(){return(0,i._)(this,d)[d].isDeleted(this.identity)}get isPending(){return(0,i._)(this,d)[d].checkPending(this.identity)}add(t){if(!this.trackCode)throw new Error("trackCode required");return(0,i._)(this,d)[d].add(this.identity,{...t,trackCode:this.trackCode})}delete(t){return(0,i._)(this,d)[d].delete(this.identity,t)}restore(t){return(0,i._)(this,d)[d].restore(this.identity,t)}constructor(t){Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),this.identity=t.identity,this.trackCode=t.trackCode,(0,i._)(this,d)[d]=t.service,(0,i._)(this,n)[n]=t.getHasOwnedStateFallback??null,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"hasOwned",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"isOwned",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"isDeleted",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],u.prototype,"isPending",null)},261122:(t,e,a)=>{a.d(e,{PodcastEpisodeProvider:()=>y});var i=a(331635),r=a(327813),s=a(132028),o=a(213586),n=a(828075),d=a(274181),u=a(968789),c=a(704456),p=a(766904),l=a(86222),_=a(279169);class y extends n.AudioContextableEntityMultiton{createContextualFromAPI(t,e){const a=t.track_code;if(!a)throw new Error("trackCode is not defined in source");const i={...e,trackCode:a};return this.episodeContext.set(t.id,i),this.createFromAPI(t).attachContext(i)}createFromAPI(t){return this.create({identity:this.toEntityIdentity((0,p.toPodcastAudioIdentityData)(t)),data:(0,l.toPodcastEpisodeData)(t),state:(0,_.toPodcastEpisodeState)(t)})}async ensure(t){const e=this.get(t);return e||this.fetch(t)}async ensureContext(t){const e=this.get(t);if(e){const a=this.getEpisodeContextual(t);return a||e}return this.fetchContext(t)}getEpisodeContextual(t){const e=this.get(t),a=this.episodeContext.get(t.id);return e&&a?e.attachContext(a):null}async fetch(t){const e=await this.podcastsApi.getEpisode({episode_id:t.id,owner_id:t.ownerId});return this.createFromAPI(e)}async fetchContext(t){const e=await this.podcastsApi.getEpisode({episode_id:t.id,owner_id:t.ownerId});return this.createContextualFromAPI(e,{})}constructEntity(t,e){return new d.PodcastEpisode({...t,context:e,favoritesService:this.favoritesService})}setState(t,e){const{isFavorite:a}=e;void 0!==a&&this.favoritesService.setState(t,a)}getContextKey(t){return`${t.list?.identity.fullId??""}/${t.trackCode}`}toEntityIdentity(t){return new u.PodcastAudioIdentity(t)}constructor(t,e){super(),this.podcastsApi=t,this.favoritesService=e,this.episodeContext=new Map,(0,r.makeObservable)(this)}}y=(0,i.__decorate)([s.scope.global(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[void 0===o.PodcastsApi?Object:o.PodcastsApi,void 0===c.PodcastAudioFavoritesService?Object:c.PodcastAudioFavoritesService])],y)},318447:(t,e,a)=>{a.d(e,{toPodcastAudioCover:()=>s});var i=a(35215);const r={h:50,f:100,d:120,b:240,e:160,c:320,a:640,x:1400};function s(t,e){const a=[];let s,o,n;if(!t||!t.sizes)return null;s=t.sizes;for(const{src:t,url:e,type:d}of s)o=t||e,n=r[d],(0,i.isNumber)(n)&&o&&a.push({src:o,width:n,height:n});return{sizes:a,mainColor:e}}},86222:(t,e,a)=>{a.d(e,{toPodcastEpisodeData:()=>u});var i=a(42503),r=a(639653),s=a(267871),o=a(766904),n=a(318447);function d(t,e){const{podcast_info:{cover:a,restriction_button:r,is_donut:s}={},main_color:d}=e;return{...(0,i.toAudioData)(e),type:t,identity:(0,o.toPodcastAudioIdentityData)(e),duration:e.duration,cover:(0,n.toPodcastAudioCover)(a,d),isDonatorsExclusive:s??!1,restrictionActionRawData:r,apiAudio:e}}function u(t){const{date:e,podcast_info:{description:a}={}}=t;return{...d(r.AudioType.PodcastEpisode,t),description:a,releaseDate:e?(0,s.toAudioDate)(e):null,apiAudio:t}}},766904:(t,e,a)=>{a.d(e,{toPodcastAudioIdentityData:()=>r});var i=a(382902);function r(t){const e=(0,i.toOwnedAudioIdentityData)(t);return{...e,podcastId:e.ownerId}}},279169:(t,e,a)=>{function i(t){return{isFavorite:t.podcast_info?.is_favorite}}a.d(e,{toPodcastEpisodeState:()=>i})},895587:(t,e,a)=>{a.d(e,{AudioRepository:()=>h});var i=a(434518),r=a(763812),s=a(331635),o=a(327813),n=a(132028),d=a(346675),u=a(213586),c=a(70148),p=a(481183),l=(0,r._)("_eventsEmitter"),_=(0,r._)("_createAudioFetchedEvent"),y=(0,r._)("_createPlaylistFetchedEvent"),m=(0,r._)("_createLyricsFetchedEvent");class h{async audioGetById(t,e){const a=await this.audioApi.getById(t,e);return(0,o.runInAction)((()=>{for(const e of a){const a=(0,i._)(this,_)[_]("audio.getById",{audio:e,urlType:"snippet"===t.url_type?"music_snippet":"default",ref:t.ref??null});(0,i._)(this,l)[l].emit("audioFetched",a)}return a}))}async audioGetAudiosByArtist(t,e){const a=await this.audioApi.getAudiosByArtist(t,e),r="audio.getAudiosByArtist";return(0,o.runInAction)((()=>{for(const e of a.items){const a=(0,i._)(this,_)[_](r,{audio:e,urlType:"snippet"===t.type?"music_snippet":"default",ref:null});(0,i._)(this,l)[l].emit("audioFetched",a)}for(const t of a.groups??[])(0,i._)(this,l)[l].emit("groupFetched",{group:t,method:r});for(const t of a.profiles??[])(0,i._)(this,l)[l].emit("userFetched",{user:t,method:r});return a}))}async audioGetRecommendations(t,e){const a=await this.audioApi.getRecommendations(t,e);return(0,o.runInAction)((()=>{for(const t of a.items){const e=(0,i._)(this,_)[_]("audio.getRecommendations",{audio:t,urlType:"default",ref:null});(0,i._)(this,l)[l].emit("audioFetched",e)}return a}))}async audioGetAudioPreviewUrl(t,e){const a=c.OwnedIdentity.fromRawId(t.audio_id),r=await this.audioApi.getAudioPreviewUrl(t,e);return(0,o.runInAction)((()=>((0,i._)(this,l)[l].emit("getAudioPreviewUrlResponse",{identity:a,params:t,response:r}),r)))}async podcastsGetEpisode(t,e){const a=await this.podcastsApi.getEpisode(t,e);return(0,o.runInAction)((()=>{const e=a,r=(0,i._)(this,_)[_]("podcasts.getEpisode",{audio:e,urlType:"default",ref:t.ref??null});return(0,i._)(this,l)[l].emit("audioFetched",r),a}))}async getPlaylistByIdExtended(t,e){const a=await this.audioApi.getPlaylistByIdExtended(t,e),r="audio.getPlaylistById";return(0,o.runInAction)((()=>{const{playlist:e}=a,s=(0,i._)(this,y)[y](r,{playlist:e,ref:t.ref??null});this.context.eventsEmitter.emit("playlistFetched",s);for(const t of a.groups??[])(0,i._)(this,l)[l].emit("groupFetched",{group:t,method:r});for(const t of a.profiles??[])(0,i._)(this,l)[l].emit("userFetched",{user:t,method:r});return a}))}async getPlaylists(t,e){const a=await this.audioApi.getPlaylists(t,e),r="audio.getPlaylists";return(0,o.runInAction)((()=>{for(const t of a.items){const e=(0,i._)(this,y)[y](r,{playlist:t,ref:null});this.context.eventsEmitter.emit("playlistFetched",e)}for(const t of a.groups??[])(0,i._)(this,l)[l].emit("groupFetched",{group:t,method:r});for(const t of a.profiles??[])(0,i._)(this,l)[l].emit("userFetched",{user:t,method:r});return a}))}async podcastsGetEpisodes(t,e){const a=await this.podcastsApi.getEpisodes(t,e),r="podcasts.getEpisodes";return(0,o.runInAction)((()=>{for(const e of a.items){const a=(0,i._)(this,_)[_](r,{audio:e,urlType:"default",ref:t.ref??null});(0,i._)(this,l)[l].emit("audioFetched",a)}for(const t of a.groups??[])(0,i._)(this,l)[l].emit("groupFetched",{group:t,method:r});for(const t of a.profiles??[])(0,i._)(this,l)[l].emit("userFetched",{user:t,method:r});return a}))}async audioGetLyrics(t,e){const a=await this.audioApi.getLyrics(t,e);return(0,o.runInAction)((()=>{const t=(0,i._)(this,m)[m]("audio.getLyrics",{lyrics:a});return(0,i._)(this,l)[l].emit("lyricsFetched",t),a}))}constructor(t,e,a){Object.defineProperty(this,l,{get:g,set:void 0}),Object.defineProperty(this,_,{value:v}),Object.defineProperty(this,y,{value:A}),Object.defineProperty(this,m,{value:b}),this.audioApi=t,this.podcastsApi=e,this.context=a}}function g(){return this.context.eventsEmitter}function v(t,e){const{audio:a}=e;return{identity:new c.OwnedIdentity({id:a.id,ownerId:a.owner_id,accessKey:a.access_key}),audio:a,urlType:e.urlType,ref:e.ref,method:t}}function A(t,e){const{playlist:a,ref:i}=e;return{identity:new c.OwnedIdentity({id:a.id,ownerId:a.owner_id,accessKey:a.access_key}),playlist:a,ref:i,method:t}}function b(t,e){const{lyrics:a}=e;return{lyrics:a,method:t}}h=(0,s.__decorate)([n.scope.global(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===d.AudioApi?Object:d.AudioApi,void 0===u.PodcastsApi?Object:u.PodcastsApi,void 0===p.AudioInternalContext?Object:p.AudioInternalContext])],h)},765966:(t,e,a)=>{a.d(e,{Emitter:()=>s});var i=a(327813),r=a(584053);class s extends r.Emitter{constructor(t){super(t),(0,i.makeObservable)(this,{emit:i.action})}}},595980:(t,e,a)=>{a.d(e,{PageVisibility:()=>n});var i=a(331635),r=a(327813),s=a(939661),o=a(132028);class n{get isVisible(){return this._isVisible}get visibility(){return this.isVisible}constructor(){this.setVisibility=(0,r.action)((t=>{this._isVisible=t})),this._observer=s.PageVisibilityObserver.ensure(),this._isVisible=this._observer.visibility,(0,r.makeObservable)(this),this._observer.on("change",this.setVisibility)}}(0,i.__decorate)([r.observable,(0,i.__metadata)("design:type",Boolean)],n.prototype,"_isVisible",void 0),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"isVisible",null),(0,i.__decorate)([r.computed,(0,i.__metadata)("design:type",void 0),(0,i.__metadata)("design:paramtypes",[])],n.prototype,"visibility",null),n=(0,i.__decorate)([o.scope.platform(),(0,i.__metadata)("design:type",Function),(0,i.__metadata)("design:paramtypes",[])],n)},213586:(t,e,a)=>{a.d(e,{PodcastsApi:()=>o});var i=a(331635),r=a(641569),s=a(132028);class o extends r.ApiNamespace{get namespace(){return"podcasts"}constructor(...t){super(...t),this.getPodcast=this.makeMethod("getPodcast"),this.getPodcasts=this.makeMethod("getPodcasts"),this.getEpisodes=this.makeMethod("getEpisodes"),this.getEpisode=this.makeMethod("getEpisode"),this.deleteEpisode=this.makeMethod("deleteEpisode"),this.restoreEpisode=this.makeMethod("restoreEpisode"),this.getGroupInfo=this.makeMethod("getGroupInfo"),this.subscribe=this.makeMethod("subscribe"),this.unsubscribe=this.makeMethod("unsubscribe")}}o=(0,i.__decorate)([s.scope.global()],o)},740782:(t,e,a)=>{a.d(e,{AudioEventItemType:()=>i});var i=function(t){return t.DISLIKES_ADD_DISLIKE="add_dislike",t.DISLIKES_REMOVE_DISLIKE="remove_dislike",t}({})},148542:(t,e,a)=>{a.d(e,{isAccessRawId:()=>r});var i=a(724913);function r(t){return i.ACCESS_RAW_ID_REGEXP.test(t)}}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/web/chunks/a911dc35.2736d440.js")}catch(t){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/web/chunks/a911dc35.2736d440.js",t),t}