try{(self.webpackChunkvk=self.webpackChunkvk||[]).push([[86966],{878925:(t,e,i)=>{i.d(e,{t:()=>n});var n=function(t){return t.Default="default",t.Kids="kids",t}({})},421150:(t,e,i)=>{i.d(e,{y:()=>s});var n=i(878925);class s{getRef(t){return t??null}enrichFetchParams(t){return{...t,ref:t.ref?t.ref:""}}constructor(){this.type=n.t.Default,this.searchScreenRef="search_music_service"}}},101128:(t,e,i)=>{i.d(e,{h:()=>d});var n=i(434518),s=i(763812),r=i(331635),o=i(327813),a=i(741441),l=i(386004),p=(0,s._)("_entityProvider");class d extends a.s{get title(){return this.langs.getLang("audio_music_playlist_delete_action_label")}get hint(){return this.langs.getLang("audio_music_playlist_delete_action_hint")}constructor(t){super({...t,type:l.e.Delete}),Object.defineProperty(this,p,{writable:!0,value:void 0}),this.isDeleted=!1,this.handleDelete=async()=>{await(0,n._)(this,p)[p].delete(this.identity),(0,o.h5)((()=>{this.isDeleted=!0}))},(0,n._)(this,p)[p]=t.entityProvider,(0,o.Gn)(this)}}(0,r.Cg)([o.sH],d.prototype,"isDeleted",void 0),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",void 0),(0,r.Sn)("design:paramtypes",[])],d.prototype,"title",null),(0,r.Cg)([o.$Z,(0,r.Sn)("design:type",void 0),(0,r.Sn)("design:paramtypes",[])],d.prototype,"hint",null),(0,r.Cg)([o.XI],d.prototype,"handleDelete",void 0)},628425:(t,e,i)=>{i.d(e,{K:()=>d});var n=i(434518),s=i(763812),r=i(331635),o=i(327813),a=i(741441),l=i(386004),p=(0,s._)("_entityProvider");class d extends a.s{get title(){return this.langs.getLang("audio_delete_pl_from_club_menu_item")}constructor(t){super({...t,type:l.e.DeleteFromGroup}),Object.defineProperty(this,p,{writable:!0,value:void 0}),this.isDeleted=!1,this.handleDelete=async()=>{await(0,n._)(this,p)[p].delete(this.identity),(0,o.h5)((()=>{this.isDeleted=!0}))},this.group=t.group,(0,n._)(this,p)[p]=t.entityProvider,(0,o.Gn)(this)}}(0,r.Cg)([o.sH],d.prototype,"isDeleted",void 0),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",void 0),(0,r.Sn)("design:paramtypes",[])],d.prototype,"title",null),(0,r.Cg)([o.XI],d.prototype,"handleDelete",void 0)},677868:(t,e,i)=>{i.d(e,{Z:()=>o});var n=i(327813),s=i(741441),r=i(386004);class o extends s.s{get title(){return this.langs.getLang("audio_add_pl_to_club_menu_item")}constructor(t){super({...t,type:r.e.OpenAddingToGroup}),(0,n.Gn)(this)}}},672159:(t,e,i)=>{i.d(e,{c:()=>o});var n=i(327813),s=i(741441),r=i(386004);class o extends s.s{get title(){return this.langs.getLang("audio_music_playlist_edit_action_label")}get hint(){return this.langs.getLang("audio_music_playlist_edit_action_hint")}constructor(t){super({...t,type:r.e.OpenEditing}),(0,n.Gn)(this)}}},586450:(t,e,i)=>{i.d(e,{J:()=>o});var n=i(327813),s=i(741441),r=i(386004);class o extends s.s{get title(){return"UMA"}constructor(t){super({...t,type:r.e.OpenUMA}),(0,n.Gn)(this)}}},320584:(t,e,i)=>{i.d(e,{f:()=>a});var n=i(331635),s=i(327813),r=i(741441),o=i(386004);class a extends r.s{get title(){return this.langs.getLang("audio_music_playlist_share_action_label")}get hint(){return this.langs.getLang("audio_music_playlist_share_action_hint")}constructor(t){super({...t,type:o.e.Share}),(0,s.Gn)(this)}}(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],a.prototype,"title",null),(0,n.Cg)([s.$Z,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],a.prototype,"hint",null)},741441:(t,e,i)=>{i.d(e,{s:()=>a});var n=i(331635),s=i(327813),r=i(228909),o=i(144046);class a extends o.d{get key(){return`${this.type}/${this.identity.fullId}`}get identity(){return new r._(this.data.identity)}constructor(t){super(t),this.type=t.type,this.data=t.data,this.langs=t.langs,(0,s.Gn)(this)}}(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],a.prototype,"key",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type","undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity),(0,n.Sn)("design:paramtypes",[])],a.prototype,"identity",null)},484658:(t,e,i)=>{i.d(e,{b:()=>Ht});var n=i(434518),s=i(763812),r=(0,s._)("_service");class o{has(t){return(0,n._)(this,r)[r].has(t)}checkToggling(t){return(0,n._)(this,r)[r].checkToggling(t)}async add(t){await(0,n._)(this,r)[r].add(t)}async remove(t){await(0,n._)(this,r)[r].remove(t)}async toggle(t,e){await(0,n._)(this,r)[r].toggle(t,e)}constructor(t){Object.defineProperty(this,r,{writable:!0,value:void 0}),(0,n._)(this,r)[r]=t.service}}var a=(0,s._)("_musicService"),l=(0,s._)("_provideItemsService");class p{provideAudiosEditor(t){const e=(0,n._)(this,l)[l](t.data);return new o({service:e})}constructor(t){Object.defineProperty(this,l,{value:d}),Object.defineProperty(this,a,{writable:!0,value:void 0}),(0,n._)(this,a)[a]=t.musicService}}function d(t){return(0,n._)(this,a)[a].playlistItemsServices.provide(t.identity,{ref:null})}var u=i(331635),g=i(327813),y=i(228909),c=i(725308),h=i(741441),_=i(386004),v=(0,s._)("_service");class m extends h.s{get title(){return this.isActive?this.langs.getLang("audio_music_playlist_make_undiscoverable_action_label"):this.langs.getLang("audio_music_playlist_make_discoverable_action_label")}get hint(){return this.isActive?this.langs.getLang("audio_music_playlist_make_undiscoverable_action_hint"):this.langs.getLang("audio_music_playlist_make_discoverable_action_hint")}get isActive(){return this.data.isDiscoverable}get isPending(){return super.isPending||(0,n._)(this,v)[v].isWriting}async execute(){await(0,n._)(this,v)[v].edit({isDiscoverable:!this.isActive})}constructor({service:t,...e}){super({...e,type:_.e.ToggleDiscoverable}),Object.defineProperty(this,v,{writable:!0,value:void 0}),(0,n._)(this,v)[v]=t,(0,g.Gn)(this)}}(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],m.prototype,"title",null),(0,u.Cg)([g.$Z,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],m.prototype,"hint",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],m.prototype,"isActive",null),(0,u.Cg)([g.$Z,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],m.prototype,"isPending",null),(0,u.Cg)([g.$Z,(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[]),(0,u.Sn)("design:returntype",Promise)],m.prototype,"execute",null);var S=(0,s._)("_href");class f extends h.s{get title(){return this.langs.getLang("global_open")}get href(){return(0,n._)(this,S)[S]}constructor(t){super({...t,type:_.e.Open}),Object.defineProperty(this,S,{writable:!0,value:void 0}),(0,n._)(this,S)[S]=t.href,(0,g.Gn)(this)}}(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],f.prototype,"title",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],f.prototype,"href",null);var b=(0,s._)("_service");class w extends h.s{get title(){return this.isActive?this.langs.getLang("audio_music_playlist_remove_mm_action_label"):this.langs.getLang("audio_music_playlist_add_mm_action_label")}get isActive(){return(0,n._)(this,b)[b].isFollowed(this.identity)}get isPending(){return super.isPending||(0,n._)(this,b)[b].checkPending(this.identity)}async execute(){this.isActive?await(0,n._)(this,b)[b].unfollow(this.followedIdentity):await(0,n._)(this,b)[b].follow(this.originalIdentity,{ref:null})}get originalIdentity(){const{identity:t,originalIdentity:e}=this.data;return(0,n._)(this,b)[b].getOriginalIdentity(t)??e??t}get followedIdentity(){const{identity:t,followedIdentity:e}=this.data;return(0,n._)(this,b)[b].getFollowedIdentity(this.originalIdentity)??e??t}constructor({service:t,...e}){super({...e,type:_.e.ToggleFollowing}),Object.defineProperty(this,b,{writable:!0,value:void 0}),(0,n._)(this,b)[b]=t,(0,g.Gn)(this)}}(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],w.prototype,"title",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],w.prototype,"isActive",null),(0,u.Cg)([g.$Z,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],w.prototype,"isPending",null),(0,u.Cg)([g.$Z,(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[]),(0,u.Sn)("design:returntype",Promise)],w.prototype,"execute",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],w.prototype,"originalIdentity",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],w.prototype,"followedIdentity",null);var C=(0,s._)("_entityProvider");class E extends h.s{get title(){return this.langs.getLang("audio_music_playlist_add_mm_action_label")}get hint(){return this.langs.getLang("audio_music_playlist_add_mm_action_hint")}get isActive(){return this.hasCopy}get isDisabled(){return this.isActive}async execute(){if(this.hasCopy)throw new Error("Already copied");const t=new y._(this.data.identity);await(0,n._)(this,C)[C].copyToMyMusic(t,{ref:null}),(0,g.h5)((()=>{this.hasCopy=!0}))}constructor({entityProvider:t,...e}){super({...e,type:_.e.CreateOwningCopy}),Object.defineProperty(this,C,{writable:!0,value:void 0}),this.hasCopy=!1,(0,n._)(this,C)[C]=t,(0,g.Gn)(this)}}(0,u.Cg)([g.sH],E.prototype,"hasCopy",void 0),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],E.prototype,"title",null),(0,u.Cg)([g.$Z,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],E.prototype,"hint",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],E.prototype,"isActive",null),(0,u.Cg)([g.$Z,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],E.prototype,"isDisabled",null),(0,u.Cg)([g.$Z,(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[]),(0,u.Sn)("design:returntype",Promise)],E.prototype,"execute",null);var P=(0,s._)("_entity"),O=(0,s._)("_channel");class I extends h.s{get title(){return this.isActive?this.langs.getLang("audio_music_playlist_pause_action_label"):this.langs.getLang("audio_music_playlist_play_action_label")}get isActive(){return this.isPlaying}get isPending(){return!!super.isPending||(0,n._)(this,O)[O].isPending&&this.isCurrentInQueue}async execute(){return this.togglePlay()}togglePlay(){const t=(0,n._)(this,O)[O];return this.isPlaying?t.pause():this.isPaused?t.resume():t.playAudioList((0,n._)(this,P)[P])}get isPlaying(){return(0,n._)(this,O)[O].playing&&this.isCurrentInQueue}get isPaused(){return(0,n._)(this,O)[O].paused&&this.isCurrentInQueue}get isCurrentInQueue(){const t=(0,n._)(this,O)[O].currentListIdentity;return!!t&&t.fullId===this.identity.fullId}constructor({entity:t,channel:e,...i}){super({...i,type:_.e.TogglePlaying}),Object.defineProperty(this,P,{writable:!0,value:void 0}),Object.defineProperty(this,O,{writable:!0,value:void 0}),(0,n._)(this,P)[P]=t,(0,n._)(this,O)[O]=e,(0,g.Gn)(this)}}(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],I.prototype,"title",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],I.prototype,"isActive",null),(0,u.Cg)([g.$Z,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],I.prototype,"isPending",null),(0,u.Cg)([g.$Z,(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[]),(0,u.Sn)("design:returntype",Promise)],I.prototype,"execute",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],I.prototype,"isPlaying",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],I.prototype,"isPaused",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Boolean),(0,u.Sn)("design:paramtypes",[])],I.prototype,"isCurrentInQueue",null);var W=(0,s._)("_entity"),j=(0,s._)("_channel");class x extends h.s{get title(){return this.langs.getLang("audio_audioplayer_toggle_shuffle_action_label")}get isActive(){return(0,n._)(this,j)[j].shuffled}async execute(){(0,n._)(this,j)[j].toggleShuffled(),(0,n._)(this,j)[j].isCurrentListInQueue(this.identity)||await(0,n._)(this,j)[j].playAudioList((0,n._)(this,W)[W])}constructor({entity:t,channel:e,...i}){super({...i,type:_.e.ToggleShuffled}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,j,{writable:!0,value:void 0}),(0,n._)(this,W)[W]=t,(0,n._)(this,j)[j]=e,(0,g.Gn)(this)}}(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],x.prototype,"title",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],x.prototype,"isActive",null),(0,u.Cg)([g.$Z,(0,u.Sn)("design:type",Function),(0,u.Sn)("design:paramtypes",[]),(0,u.Sn)("design:returntype",Promise)],x.prototype,"execute",null);var A=i(320584),G=(0,s._)("_href"),L=(0,s._)("_clipboard"),D=(0,s._)("_notifications");class k extends h.s{get title(){return this.langs.getLang("audio_music_playlist_copy_url_href_action_label")}get hint(){return this.langs.getLang("audio_music_playlist_copy_url_href_action_hint")}async execute(){await(0,n._)(this,L)[L].copy((0,n._)(this,G)[G]),(0,n._)(this,D)[D].notify((()=>({message:{text:this.langs.getLang("audio_copy_audio_link_notification")}})))}constructor({href:t,clipboard:e,notifications:i,...s}){super({...s,type:_.e.CopyPageURL}),Object.defineProperty(this,G,{writable:!0,value:void 0}),Object.defineProperty(this,L,{writable:!0,value:void 0}),Object.defineProperty(this,D,{writable:!0,value:void 0}),(0,n._)(this,G)[G]=t,(0,n._)(this,L)[L]=e,(0,n._)(this,D)[D]=i,(0,g.Gn)(this)}}var F=i(672159),T=i(101128),M=i(586450),$=i(677868),Z=i(628425);const N=["album"];var U=(0,s._)("_langs"),R=(0,s._)("_channel"),B=(0,s._)("_musicService"),H=(0,s._)("_audioGroups"),Q=(0,s._)("_platformConfig"),K=(0,s._)("_notifications"),z=(0,s._)("_entityProvider"),X=(0,s._)("_overrides"),q=(0,s._)("_isUmaSupported"),J=(0,s._)("_isPlayable"),V=(0,s._)("_getHref");class Y{provideOpen({data:t,viewContext:e,...i}){const s=(0,n._)(this,X)[X]?.[_.e.Open];if(s)return s(t,e,i.onExecuted);const r=new y._(t.identity);return new f({data:t,langs:(0,n._)(this,U)[U],href:(0,n._)(this,V)[V](r,t),...i})}provideToggleFollowing({data:t,...e}){if(!t.permissions.follow)return null;const i=(0,n._)(this,B)[B].playlistsFollowing;return new w({data:t,service:i,langs:(0,n._)(this,U)[U],...e})}provideCreateOwningCopy({data:t,...e}){return t.permissions.saveAsCopy?new E({data:t,entityProvider:(0,n._)(this,z)[z],langs:(0,n._)(this,U)[U],...e}):null}provideToggleDiscoverable({data:t,...e}){if(!t.permissions.edit)return null;const i=new y._(t.identity),s=(0,n._)(this,B)[B].playlistEditingServices.provide(i);return new m({data:t,service:s,langs:(0,n._)(this,U)[U],...e})}provideTogglePlaying({data:t,entity:e,...i}){return(0,n._)(this,J)[J](t)?new I({data:t,entity:e,langs:(0,n._)(this,U)[U],channel:(0,n._)(this,R)[R],...i}):null}provideToggleShuffled({data:t,entity:e,...i}){return(0,n._)(this,J)[J](t)?new x({data:t,entity:e,langs:(0,n._)(this,U)[U],channel:(0,n._)(this,R)[R],...i}):null}provideShare({data:t,...e}){if(!t.permissions.share)return null;const i=(0,n._)(this,X)[X]?.[_.e.Share];return i?i(t,e.onExecuted):new A.f({data:t,langs:(0,n._)(this,U)[U],...e})}provideCopyPageURL({data:t,...e}){const i=new y._(t.identity),s=`${(0,n._)(this,Q)[Q].locationOrigin}${(0,n._)(this,V)[V](i,t)}`;return new k({data:t,langs:(0,n._)(this,U)[U],href:s,clipboard:(0,n._)(this,Q)[Q].clipboard,notifications:(0,n._)(this,K)[K],...e})}provideOpenEditing({data:t,...e}){if(!t.permissions.edit)return null;const i=(0,n._)(this,X)[X]?.[_.e.OpenEditing];return i?i(t,e.onExecuted):new F.c({data:t,langs:(0,n._)(this,U)[U],...e})}provideDelete({data:t,...e}){if(!t.permissions.delete)return null;const i=(0,n._)(this,X)[X]?.[_.e.Delete];return i?i(t,(0,n._)(this,z)[z],e.onExecuted):new T.h({data:t,langs:(0,n._)(this,U)[U],entityProvider:(0,n._)(this,z)[z],...e})}provideOpenUMA({data:t,...e}){if(!(0,n._)(this,q)[q](t))return null;const i=(0,n._)(this,X)[X]?.[_.e.OpenUMA];return i?i(t,e.onExecuted):new M.J({data:t,langs:(0,n._)(this,U)[U],...e})}provideOpenAddingToGroup({data:t,...e}){if(!this.hasEditableGroups)return null;const i=(0,n._)(this,X)[X]?.[_.e.OpenAddingToGroup];return i?i(t,e.onExecuted):new $.Z({data:t,langs:(0,n._)(this,U)[U],...e})}provideDeleteFromGroup({data:t,...e}){if(!this.hasEditableGroups||!c.z.isGroupId(t.identity.ownerId))return null;const i=(0,n._)(this,H)[H].get(c.z.convertOwnerIdToGroupId(t.identity.ownerId));if(!i||!i.permissions.editMusic)return null;const s=(0,n._)(this,X)[X]?.[_.e.DeleteFromGroup];return s?s(t,i,(0,n._)(this,z)[z],e.onExecuted):new Z.K({data:t,langs:(0,n._)(this,U)[U],entityProvider:(0,n._)(this,z)[z],group:i,...e})}get hasEditableGroups(){return(0,n._)(this,H)[H].editable.groups.some((t=>t.hasMusicSection&&t.permissions.editMusic))}constructor({langs:t,channel:e,musicService:i,audioGroups:s,platformConfig:r,notifications:o,entityProvider:a,overrides:l}){Object.defineProperty(this,q,{value:tt}),Object.defineProperty(this,J,{value:et}),Object.defineProperty(this,V,{value:it}),Object.defineProperty(this,U,{writable:!0,value:void 0}),Object.defineProperty(this,R,{writable:!0,value:void 0}),Object.defineProperty(this,B,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),Object.defineProperty(this,Q,{writable:!0,value:void 0}),Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:void 0}),(0,n._)(this,U)[U]=t,(0,n._)(this,R)[R]=e,(0,n._)(this,B)[B]=i,(0,n._)(this,H)[H]=s,(0,n._)(this,Q)[Q]=r,(0,n._)(this,K)[K]=o,(0,n._)(this,z)[z]=a,(0,n._)(this,X)[X]=l,(0,g.Gn)(this)}}function tt(t){return!!(0,n._)(this,B)[B].userPermissions.permissions?.viewAudioMetaInfo&&N.includes(t.type)}function et(t){return t.permissions.play&&t.audiosCount>0}function it(t,e){return"album"===e.type?`/music/album/${t.accessRawId}`:`/music/playlist/${t.accessRawId}`}(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Y.prototype,"hasEditableGroups",null);var nt=i(321171),st=i(426086),rt=i(53013);class ot{get key(){return this.ownerId}get ownerId(){return this.data.ownerId}get userId(){return this.ownerId}get title(){return[this.data.firstName,this.data.lastName].filter(Boolean).join(" ")}get avatar(){return(0,rt.Z)(this.data.avatar)}get href(){return["/",this.data.domain||`id${this.ownerId}`].join("")}constructor(t){this.type="user",this.data=t.data,(0,g.Gn)(this)}}(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],ot.prototype,"key",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],ot.prototype,"ownerId",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],ot.prototype,"userId",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],ot.prototype,"title",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],ot.prototype,"avatar",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],ot.prototype,"href",null);class at{get key(){return this.ownerId}get ownerId(){return this.data.ownerId}get groupId(){return c.z.convertOwnerIdToGroupId(this.ownerId)}get title(){return this.data.title}get avatar(){return(0,rt.Z)(this.data.avatar)}get href(){return["/",this.data.domain||`club${this.groupId}`].join("")}get isCurator(){return this.data.isCurator}constructor(t){this.type="group",this.data=t.data,(0,g.Gn)(this)}}(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],at.prototype,"key",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],at.prototype,"ownerId",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],at.prototype,"groupId",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],at.prototype,"title",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],at.prototype,"avatar",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],at.prototype,"href",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],at.prototype,"isCurator",null);var lt=i(798727),pt=i(129308),dt=i(421150),ut=i(185375);function gt(t){return{main:t?.main_artists?.map(ut.h)??[],feat:t?.featured_artists?.map(ut.h)??[],raw:t.main_artist}}const yt=[["photo_50",50],["photo_100",100],["photo_200",200],["photo_200_orig",200],["photo_400",400],["photo_400_orig",400],["photo_base",720]];function ct(t){const e=t.name;!function(t,e){if(null==t)throw new Error(`${e} required for create AudioGroupAuthorData`)}(e,"title");const i=t.screen_name??null,n="number"==typeof t.audio_curator_id;return{ownerId:c.z.convertGroupIdToOwnerId(t.id),domain:i,title:e,avatar:ht(t),isCurator:n}}function ht(t){if(!t)return null;const e=[];for(const[i,n]of yt){const s=t[i];s&&e.push({src:s,width:n,height:n})}return{sizes:e}}const _t=[["photo_50",50],["photo_100",100],["photo_200",200],["photo_200_orig",200],["photo_400",400],["photo_400_orig",400],["photo_base",720]];function vt(t){const e=t.first_name??null,i=t.last_name??null,n=t.domain??null;if(!e&&!i)throw new Error("firstName or lastName required for AudioUserOwnerData");return{ownerId:t.id,firstName:e,lastName:i,avatar:mt(t),domain:n}}function mt(t){if(!t)return null;const e=[];for(const[i,n]of _t){const s=t[i];s&&e.push({src:s,width:n,height:n})}return{sizes:e}}var St=(0,s._)("_source");class ft{get identity(){const t=(0,n._)(this,St)[St];return{id:t.id,ownerId:t.owner_id,accessKey:t.access_key}}get type(){const t=(0,n._)(this,St)[St].album?.type;if(!t)return"album";switch(t){case"album":default:return"album";case"ep":return"ep";case"collection":return"collection";case"single":return"single"}}get title(){return(0,n._)(this,St)[St].title}get genres(){const t=(0,n._)(this,St)[St].genres;return t?t.map((t=>{return{id:(e=t).id,name:e.name};var e})):null}get releaseYear(){return(0,n._)(this,St)[St].year??null}get authors(){return gt((0,n._)(this,St)[St])}constructor(t){Object.defineProperty(this,St,{writable:!0,value:void 0}),(0,n._)(this,St)[St]=t.source}}(0,u.Cg)([g.EW,(0,u.Sn)("design:type","undefined"==typeof OwnedIdentityData?Object:OwnedIdentityData),(0,u.Sn)("design:paramtypes",[])],ft.prototype,"identity",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",String),(0,u.Sn)("design:paramtypes",[])],ft.prototype,"title",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Object),(0,u.Sn)("design:paramtypes",[])],ft.prototype,"genres",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Object),(0,u.Sn)("design:paramtypes",[])],ft.prototype,"releaseYear",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type","undefined"==typeof IMusicAuthorsData?Object:IMusicAuthorsData),(0,u.Sn)("design:paramtypes",[])],ft.prototype,"authors",null);var bt=i(866258),wt=i(734295),Ct=i(276230);function Et(t){const e=t.audio_chart_info?.state;switch(e){case 0:return"new_release";case 1:return"no_changes";case 2:return"moved_up";case 3:return"moved_down";case 4:return"state_crown";default:return null}}var Pt=(0,s._)("_source"),Ot=(0,s._)("_ownersSources");class It{get type(){switch((0,n._)(this,Pt)[Pt].type){case"album":return"album";case"chat":return"chat";default:return"ugc"}}get identity(){return new y._({id:(0,n._)(this,Pt)[Pt].id,ownerId:(0,n._)(this,Pt)[Pt].owner_id,accessKey:(0,n._)(this,Pt)[Pt].access_key})}get originalIdentity(){const{original:t}=(0,n._)(this,Pt)[Pt];return t?new y._({id:t.playlist_id,ownerId:t.owner_id,accessKey:t.access_key}):null}get followedIdentity(){const{followed:t}=(0,n._)(this,Pt)[Pt];return t?new y._({id:t.playlist_id,ownerId:t.owner_id,accessKey:t.access_key}):null}get title(){return(0,n._)(this,Pt)[Pt].title}get subtitle(){return(0,n._)(this,Pt)[Pt].subtitle??null}get description(){return(0,n._)(this,Pt)[Pt].description}get authors(){return gt((0,n._)(this,Pt)[Pt])}get owner(){const t=(0,n._)(this,Ot)[Ot];return t?t.user?{type:"user",data:vt(t.user)}:t.group?{type:"group",data:ct(t.group)}:null:null}get cover(){return function(t){const e=t.photo;if(!e)return null;const i=t.main_color;return{...(0,Ct.V)(e,i),key:"cover"}}((0,n._)(this,Pt)[Pt])}get thumbs(){return function(t){const e=t.thumbs;return e?e.map((t=>({...(0,Ct.V)(t),key:"thumb"}))):null}((0,n._)(this,Pt)[Pt])}get album(){return"album"!==this.type?null:new ft({source:(0,n._)(this,Pt)[Pt]})}get audiosCount(){return(0,n._)(this,Pt)[Pt].count}get playsCount(){return(0,n._)(this,Pt)[Pt].plays}get chartInfo(){return(0,n._)(this,Pt)[Pt].audio_chart_info?{state:Et((0,n._)(this,Pt)[Pt]),position:(0,n._)(this,Pt)[Pt].audio_chart_info?.position??null}:null}get updatedAt(){return new Date(1e3*(0,n._)(this,Pt)[Pt].update_time)}get createdAt(){return new Date(1e3*(0,n._)(this,Pt)[Pt].create_time)}get isCurator(){return(0,n._)(this,Pt)[Pt].is_curator??this.isCuratorOwner}get isCuratorOwner(){const{owner:t}=this;return!(!t||"group"!==t.type||!t.data.isCurator)}get isExclusive(){return(0,n._)(this,Pt)[Pt].exclusive??!1}get isDiscoverable(){return!(0,n._)(this,Pt)[Pt].no_discover}get legal(){return{isExplicit:(0,n._)(this,Pt)[Pt].is_explicit??!1,isForeignAgent:!1}}get permissions(){return{play:(0,n._)(this,Pt)[Pt].permissions?.play??!1,share:(0,n._)(this,Pt)[Pt].permissions?.share??!1,edit:(0,n._)(this,Pt)[Pt].permissions?.edit??!1,follow:(0,n._)(this,Pt)[Pt].permissions?.follow??!1,delete:(0,n._)(this,Pt)[Pt].permissions?.delete??!1,saveAsCopy:(0,n._)(this,Pt)[Pt].permissions?.save_as_copy??!1}}get flagsContext(){return(0,bt.P)((0,n._)(this,Pt)[Pt].flags_context??0)}constructor(t){Object.defineProperty(this,Pt,{writable:!0,value:void 0}),Object.defineProperty(this,Ot,{writable:!0,value:void 0}),(0,n._)(this,Pt)[Pt]=t.source,(0,n._)(this,Ot)[Ot]=t.owners??null}}(0,u.Cg)([g.EW,(0,u.Sn)("design:type","undefined"==typeof TMusicPlaylistType?Object:TMusicPlaylistType),(0,u.Sn)("design:paramtypes",[])],It.prototype,"type",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],It.prototype,"identity",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],It.prototype,"originalIdentity",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],It.prototype,"followedIdentity",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",String),(0,u.Sn)("design:paramtypes",[])],It.prototype,"title",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Object),(0,u.Sn)("design:paramtypes",[])],It.prototype,"subtitle",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",String),(0,u.Sn)("design:paramtypes",[])],It.prototype,"description",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type","undefined"==typeof IMusicAuthorsData?Object:IMusicAuthorsData),(0,u.Sn)("design:paramtypes",[])],It.prototype,"authors",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Object),(0,u.Sn)("design:paramtypes",[])],It.prototype,"owner",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Object),(0,u.Sn)("design:paramtypes",[])],It.prototype,"cover",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Object),(0,u.Sn)("design:paramtypes",[])],It.prototype,"thumbs",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Number),(0,u.Sn)("design:paramtypes",[])],It.prototype,"audiosCount",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Number),(0,u.Sn)("design:paramtypes",[])],It.prototype,"playsCount",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],It.prototype,"chartInfo",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type","undefined"==typeof Date?Object:Date),(0,u.Sn)("design:paramtypes",[])],It.prototype,"updatedAt",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type","undefined"==typeof Date?Object:Date),(0,u.Sn)("design:paramtypes",[])],It.prototype,"createdAt",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Boolean),(0,u.Sn)("design:paramtypes",[])],It.prototype,"isCurator",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],It.prototype,"isCuratorOwner",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Boolean),(0,u.Sn)("design:paramtypes",[])],It.prototype,"isExclusive",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Boolean),(0,u.Sn)("design:paramtypes",[])],It.prototype,"isDiscoverable",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type","undefined"==typeof IAudioDataLegal?Object:IAudioDataLegal),(0,u.Sn)("design:paramtypes",[])],It.prototype,"legal",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type","undefined"==typeof IMusicPlaylistPermissions?Object:IMusicPlaylistPermissions),(0,u.Sn)("design:paramtypes",[])],It.prototype,"permissions",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0===wt.w?Object:wt.w),(0,u.Sn)("design:paramtypes",[])],It.prototype,"flagsContext",null);var Wt=(0,s._)("_data"),jt=(0,s._)("_entity"),xt=(0,s._)("_provider"),At=(0,s._)("_viewContext"),Gt=(0,s._)("_callbacks");class Lt{get open(){const t=(0,n._)(this,Gt)[Gt]?.onOpen;return(0,n._)(this,xt)[xt].provideOpen({data:(0,n._)(this,Wt)[Wt],viewContext:(0,n._)(this,At)[At],onExecuted:t})}get toggleFollowing(){const t=(0,n._)(this,Gt)[Gt]?.onToggleFollowing;return(0,n._)(this,xt)[xt].provideToggleFollowing({data:(0,n._)(this,Wt)[Wt],onExecuted:t})}get createOwningCopy(){const t=(0,n._)(this,Gt)[Gt]?.onCreateOwningCopy;return(0,n._)(this,xt)[xt].provideCreateOwningCopy({data:(0,n._)(this,Wt)[Wt],onExecuted:t})}get toggleDiscoverable(){const t=(0,n._)(this,Gt)[Gt]?.onToggleDiscoverable;return(0,n._)(this,xt)[xt].provideToggleDiscoverable({data:(0,n._)(this,Wt)[Wt],onExecuted:t})}get togglePlaying(){const t=(0,n._)(this,Gt)[Gt]?.onTogglePlaying;return(0,n._)(this,xt)[xt].provideTogglePlaying({data:(0,n._)(this,Wt)[Wt],entity:(0,n._)(this,jt)[jt],onExecuted:t})}get toggleShuffled(){const t=(0,n._)(this,Gt)[Gt]?.onToggleShuffled;return(0,n._)(this,xt)[xt].provideToggleShuffled({data:(0,n._)(this,Wt)[Wt],entity:(0,n._)(this,jt)[jt],onExecuted:t})}get share(){const t=(0,n._)(this,Gt)[Gt]?.onShare;return(0,n._)(this,xt)[xt].provideShare({data:(0,n._)(this,Wt)[Wt],onExecuted:t})}get copyPageURL(){const t=(0,n._)(this,Gt)[Gt]?.onCopyPageURL;return(0,n._)(this,xt)[xt].provideCopyPageURL({data:(0,n._)(this,Wt)[Wt],onExecuted:t})}get openEditing(){const t=(0,n._)(this,Gt)[Gt]?.onOpenEditing;return(0,n._)(this,xt)[xt].provideOpenEditing({data:(0,n._)(this,Wt)[Wt],onExecuted:t})}get delete(){const t=(0,n._)(this,Gt)[Gt]?.onDelete;return(0,n._)(this,xt)[xt].provideDelete({data:(0,n._)(this,Wt)[Wt],onExecuted:t})}get openUMA(){const t=(0,n._)(this,Gt)[Gt]?.onOpenUMA;return(0,n._)(this,xt)[xt].provideOpenUMA({data:(0,n._)(this,Wt)[Wt],onExecuted:t})}get openAddingToGroup(){const t=(0,n._)(this,Gt)[Gt]?.onOpenAddingToGroup;return(0,n._)(this,xt)[xt].provideOpenAddingToGroup({data:(0,n._)(this,Wt)[Wt],onExecuted:t})}get deleteFromGroup(){const t=(0,n._)(this,Gt)[Gt]?.onDeleteFromGroup;return(0,n._)(this,xt)[xt].provideDeleteFromGroup({data:(0,n._)(this,Wt)[Wt],onExecuted:t})}constructor({data:t,entity:e,provider:i,callbacks:s,viewContext:r}){Object.defineProperty(this,Wt,{writable:!0,value:void 0}),Object.defineProperty(this,jt,{writable:!0,value:void 0}),Object.defineProperty(this,xt,{writable:!0,value:void 0}),Object.defineProperty(this,At,{writable:!0,value:void 0}),Object.defineProperty(this,Gt,{writable:!0,value:void 0}),(0,n._)(this,Gt)[Gt]=null,(0,n._)(this,Wt)[Wt]=t,(0,n._)(this,jt)[jt]=e,(0,n._)(this,xt)[xt]=i,(0,n._)(this,At)[At]=r,s&&((0,n._)(this,Gt)[Gt]=s),(0,g.Gn)(this)}}(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Lt.prototype,"open",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Lt.prototype,"toggleFollowing",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Lt.prototype,"createOwningCopy",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Lt.prototype,"togglePlaying",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Lt.prototype,"toggleShuffled",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Lt.prototype,"share",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Lt.prototype,"copyPageURL",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Lt.prototype,"openEditing",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Lt.prototype,"delete",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Lt.prototype,"openUMA",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Lt.prototype,"openAddingToGroup",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",void 0),(0,u.Sn)("design:paramtypes",[])],Lt.prototype,"deleteFromGroup",null);var Dt=(0,s._)("_langs"),kt=(0,s._)("_channel"),Ft=(0,s._)("_albumFactory"),Tt=(0,s._)("_albumActionsCallbacks"),Mt=(0,s._)("_viewContext");class $t{get type(){return this.data.type}get key(){const{entity:t}=this;return`${t.identity.fullId}/${t.context.ref}`}get identity(){return this.data.identity}get authors(){const{entity:t}=this;if(t.type===nt.b.MusicAlbumPlaylist)return new pt.W({data:this.data.authors});const e=this.data.owner;if(!e)return null;switch(e.type){case"user":return new pt.W({data:{main:[new ot({data:e.data})]}});case"group":return new pt.W({data:{main:[new at({data:e.data})]}})}}get cover(){return(0,rt.Z)(this.data.cover)}get thumbs(){const t=this.data.thumbs;return t?t.map((t=>new st.w(t))):null}get album(){const t=this.data.album;return t?(0,n._)(this,Ft)[Ft].create({data:t,actionsCallbacks:(0,n._)(this,Tt)[Tt]}):null}get audiosCount(){return this.data.audiosCount}get pageHref(){const{entity:t}=this,{accessRawId:e}=t.identity;return"album"===this.type?`/music/album/${e}`:`/music/playlist/${e}`}get legalNoticeLines(){return this.data.legal?(0,lt.N)((0,n._)(this,Dt)[Dt],this.data.legal):null}get typeLabel(){return this.album?.typeLabel?this.album.typeLabel:"chat"===this.type?(0,n._)(this,Dt)[Dt].getLang("audio_music_chat_playlist_type_label"):(0,n._)(this,Dt)[Dt].getLang("audio_music_playlist_subtitle")}get curatorLabel(){return this.data.isCurator?(0,n._)(this,Dt)[Dt].getLang("audio_music_ugc_group_playlist_curator_label"):null}get isPlaying(){return this.isCurrentInQueue&&(0,n._)(this,kt)[kt].playing}get isPaused(){return this.isCurrentInQueue&&(0,n._)(this,kt)[kt].paused}get isEmpty(){return this.entity.isEmpty}get canPlay(){return!this.isEmpty}async ensureData(){await Promise.all([this.entity.ensureItems(),this.entity.ensureExtendedData()])}get isCurrentInQueue(){const t=(0,n._)(this,kt)[kt].currentListIdentity;return!!t&&t.fullId===this.entity.identity.fullId}constructor({entity:t,langs:e,channel:i,albumFactory:s,owners:r,featuresProvider:o,actionsProvider:a,actionsCallbacks:l,albumActionsCallbacks:p,viewContext:d}){Object.defineProperty(this,Dt,{writable:!0,value:void 0}),Object.defineProperty(this,kt,{writable:!0,value:void 0}),Object.defineProperty(this,Ft,{writable:!0,value:void 0}),Object.defineProperty(this,Tt,{writable:!0,value:void 0}),Object.defineProperty(this,Mt,{writable:!0,value:void 0}),this.entity=t,(0,n._)(this,Dt)[Dt]=e,(0,n._)(this,kt)[kt]=i,(0,n._)(this,Ft)[Ft]=s,(0,n._)(this,Mt)[Mt]=d??new dt.y,(0,n._)(this,Tt)[Tt]=p??null,this.data=new It({source:t.data.source.playlist,owners:r}),this.actions=new Lt({entity:t,data:this.data,provider:a,callbacks:l,viewContext:(0,n._)(this,Mt)[Mt]}),this.audiosEditor=o.provideAudiosEditor({data:this.data}),(0,g.Gn)(this)}}(0,u.Cg)([g.EW,(0,u.Sn)("design:type","undefined"==typeof TMusicPlaylistType?Object:TMusicPlaylistType),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"type",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",String),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"key",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type","undefined"==typeof IMusicPlaylistIdentity?Object:IMusicPlaylistIdentity),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"identity",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Object),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"authors",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Object),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"cover",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Object),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"thumbs",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Object),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"album",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Number),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"audiosCount",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",String),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"pageHref",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Object),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"legalNoticeLines",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",String),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"typeLabel",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Object),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"curatorLabel",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Boolean),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"isPlaying",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Boolean),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"isPaused",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Boolean),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"isEmpty",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Boolean),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"canPlay",null),(0,u.Cg)([g.EW,(0,u.Sn)("design:type",Boolean),(0,u.Sn)("design:paramtypes",[])],$t.prototype,"isCurrentInQueue",null);var Zt=(0,s._)("_langs"),Nt=(0,s._)("_channel"),Ut=(0,s._)("_featuresProvider"),Rt=(0,s._)("_actionsProvider"),Bt=(0,s._)("_albumFactory");class Ht{create(t){return new $t({entity:t.entity,langs:(0,n._)(this,Zt)[Zt],channel:(0,n._)(this,Nt)[Nt],albumFactory:(0,n._)(this,Bt)[Bt],owners:t.owners,featuresProvider:(0,n._)(this,Ut)[Ut],actionsProvider:(0,n._)(this,Rt)[Rt],actionsCallbacks:t.actionsCallbacks,albumActionsCallbacks:t.albumActionsCallbacks,viewContext:t.viewContext})}constructor(t){Object.defineProperty(this,Zt,{writable:!0,value:void 0}),Object.defineProperty(this,Nt,{writable:!0,value:void 0}),Object.defineProperty(this,Ut,{writable:!0,value:void 0}),Object.defineProperty(this,Rt,{writable:!0,value:void 0}),Object.defineProperty(this,Bt,{writable:!0,value:void 0}),(0,n._)(this,Zt)[Zt]=t.langs,(0,n._)(this,Nt)[Nt]=t.channel,(0,n._)(this,Bt)[Bt]=t.albumFactory,(0,n._)(this,Ut)[Ut]=new p({musicService:t.musicService}),(0,n._)(this,Rt)[Rt]=new Y({langs:(0,n._)(this,Zt)[Zt],overrides:t.audioConfig.musicPlaylistActionOverrides??null,channel:t.channel,musicService:t.musicService,audioGroups:t.audioGroups,entityProvider:t.entityProvider,platformConfig:t.audioConfig,notifications:t.notifications})}}},194257:(t,e,i)=>{i.d(e,{K:()=>S});var n=i(331635),s=i(327813),r=i(42107),o=i(414618),a=i(434518),l=i(763812),p=(0,l._)("_params"),d=(0,l._)("_fetchNext");class u{get isFetched(){const{count:t}=this;return null!=t&&(t>=this.items.length||this.wasEmptyResponse)}get isPending(){return!!this.fetching}async ensureAll(){this.fetching&&await this.fetching;let t=0;for(;!this.isFetched;){if(t++,t>10)throw new Error("[LongListCache] Too many iterations");await this.fetchNext(this.maxLimit)}return[...this.items]}async fetchNext(t){return this.isFetched?[]:(this.fetching||(this.fetching=(0,a._)(this,d)[d](t).finally((()=>{(0,s.h5)((()=>{this.fetching=null}))}))),this.fetching)}get maxLimit(){const t=(0,a._)(this,p)[p];return t.maxLimit??t.limit}constructor(t){Object.defineProperty(this,d,{value:g}),Object.defineProperty(this,p,{writable:!0,value:void 0}),this.items=[],this.fetching=null,this.count=null,this.wasEmptyResponse=!1,(0,a._)(this,p)[p]=t,(0,s.Gn)(this)}}async function g(t=(0,a._)(this,p)[p].limit){const e=(0,a._)(this,p)[p],{maxLimit:i}=this,n=Math.min(t,i),r=await e.fetch({limit:n,offset:this.items.length});return(0,s.h5)((()=>(this.count=r.count,r.items.length?this.items=[...this.items,...r.items]:this.wasEmptyResponse=!0,r.items)))}(0,n.Cg)([s.sH.shallow,(0,n.Sn)("design:type",Array)],u.prototype,"items",void 0),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],u.prototype,"isFetched",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],u.prototype,"isPending",null),(0,n.Cg)([s.sH.ref,(0,n.Sn)("design:type",Object)],u.prototype,"fetching",void 0),(0,n.Cg)([s.sH,(0,n.Sn)("design:type",Object)],u.prototype,"count",void 0),(0,n.Cg)([s.sH],u.prototype,"wasEmptyResponse",void 0),(0,n.Cg)([s.XI,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",Promise)],u.prototype,"ensureAll",null),(0,n.Cg)([s.XI,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[Number]),(0,n.Sn)("design:returntype",Promise)],u.prototype,"fetchNext",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],u.prototype,"maxLimit",null);var y=(0,l._)("_audioApi"),c=(0,l._)("_toAudioGroup"),h=(0,l._)("_cache"),_=(0,l._)("_fetchGroups");class v{get groups(){return(0,a._)(this,h)[h].items}ensure(){return(0,a._)(this,h)[h].ensureAll()}constructor({audioApi:t,toAudioGroup:e}){Object.defineProperty(this,_,{value:m}),Object.defineProperty(this,y,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,h,{writable:!0,value:void 0}),(0,a._)(this,y)[y]=t,(0,a._)(this,c)[c]=e,(0,a._)(this,h)[h]=new u({fetch:t=>(0,a._)(this,_)[_](t),limit:100,maxLimit:100}),(0,s.Gn)(this)}}async function m({limit:t,offset:e}){const i=await(0,a._)(this,y)[y].getEditableGroups({limit:t,offset:e});return(0,s.h5)((()=>{const t=i.items.map((t=>(0,a._)(this,c)[c](t)));return{count:i.count,items:t}}))}(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],v.prototype,"groups",null),(0,n.Cg)([s.XI,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[]),(0,n.Sn)("design:returntype",void 0)],v.prototype,"ensure",null);class S{get(t){return this.cache.get(t)}setFromAPI(t){const e=function(t){const{permissions:e}=t;return{id:t.group_id,title:t.title,hasMusicSection:t.has_music_section,permissions:{editMusic:e.edit_music}}}(t);return this.cache.set(e.id,e),e}constructor(t){this.cache=new Map,this.editable=new v({audioApi:t,toAudioGroup:t=>this.setFromAPI(t)}),(0,s.Gn)(this)}}(0,n.Cg)([s.sH.shallow],S.prototype,"cache",void 0),(0,n.Cg)([s.XI,(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",["undefined"==typeof AudioGroupInfo?Object:AudioGroupInfo]),(0,n.Sn)("design:returntype",void 0)],S.prototype,"setFromAPI",null),S=(0,n.Cg)([r.z8.global(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[void 0===o.B?Object:o.B])],S)}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/core_spa/chunks/86966.c5a78d04.js")}catch(t){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/core_spa/chunks/86966.c5a78d04.js",t),t}