try{(self.webpackChunkvk=self.webpackChunkvk||[]).push([[28254],{632701:(_,e,t)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 3.9c-1.06 0-2.07.2-3 .57a.9.9 0 1 1-.66-1.67A9.88 9.88 0 0 1 12 2.1a9.9 9.9 0 0 1 9.9 9.9 9.88 9.88 0 0 1-.7 3.66.9.9 0 1 1-1.67-.66A8.1 8.1 0 0 0 12 3.9Z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M11.13 7a.9.9 0 0 1 .9-.9 5.9 5.9 0 0 1 5.87 5.85.9.9 0 0 1-1.8.02 4.1 4.1 0 0 0-4.07-4.07.9.9 0 0 1-.9-.9ZM5 19a9.87 9.87 0 0 0 7 2.9c2.41 0 4.62-.86 6.33-2.3l1.13 1.14a.9.9 0 0 0 1.28-1.28L4.54 3.26a.9.9 0 1 0-1.28 1.28L4.4 5.66A9.86 9.86 0 0 0 2.1 12 9.87 9.87 0 0 0 5 19Zm-1.1-7c0 2.24.9 4.26 2.37 5.73A8.07 8.07 0 0 0 12 20.1c1.91 0 3.67-.66 5.06-1.77l-1.57-1.57A5.88 5.88 0 0 1 12 17.9a5.88 5.88 0 0 1-4.17-1.73A5.88 5.88 0 0 1 6.1 12a5.88 5.88 0 0 1 1.14-3.49L5.67 6.94A8.06 8.06 0 0 0 3.9 12Zm4 0a4.1 4.1 0 0 0 1.2 2.9 4.08 4.08 0 0 0 2.9 1.2c.8 0 1.56-.23 2.2-.64l-1.65-1.64c-.66.2-1.4.01-1.9-.48a1.92 1.92 0 0 1-.47-1.89L8.54 9.81A4.08 4.08 0 0 0 7.9 12Z" clip-rule="evenodd"/></svg>',name:"live_disable_outline_24"}}t.d(e,{A:()=>o})},592465:(_,e,t)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M5 5a9.87 9.87 0 0 1 7-2.9A9.87 9.87 0 0 1 19 5a9.87 9.87 0 0 1 2.9 7 9.87 9.87 0 0 1-2.9 7 9.87 9.87 0 0 1-7 2.9A9.87 9.87 0 0 1 5 19a9.87 9.87 0 0 1-2.9-7A9.87 9.87 0 0 1 5 5Zm7-1.1c-2.24 0-4.26.9-5.73 2.37A8.07 8.07 0 0 0 3.9 12c0 2.24.9 4.26 2.37 5.73A8.07 8.07 0 0 0 12 20.1a8.07 8.07 0 0 0 5.73-2.37A8.07 8.07 0 0 0 20.1 12c0-2.24-.9-4.26-2.37-5.73A8.07 8.07 0 0 0 12 3.9Z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M7.83 7.83A5.88 5.88 0 0 1 12 6.1c1.63 0 3.1.66 4.17 1.73A5.88 5.88 0 0 1 17.9 12a5.88 5.88 0 0 1-1.73 4.17A5.88 5.88 0 0 1 12 17.9a5.88 5.88 0 0 1-4.17-1.73A5.88 5.88 0 0 1 6.1 12c0-1.63.66-3.1 1.73-4.17ZM12 7.9a4.08 4.08 0 0 0-2.9 1.2A4.08 4.08 0 0 0 7.9 12a4.1 4.1 0 0 0 1.2 2.9 4.08 4.08 0 0 0 2.9 1.2 4.08 4.08 0 0 0 2.9-1.2 4.08 4.08 0 0 0 1.2-2.9 4.08 4.08 0 0 0-1.2-2.9A4.08 4.08 0 0 0 12 7.9Z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M13.34 10.66a1.9 1.9 0 0 0-2.68 0 1.9 1.9 0 0 0 0 2.68 1.9 1.9 0 0 0 2.68 0 1.9 1.9 0 0 0 0-2.68Z" clip-rule="evenodd"/></svg>',name:"live_outline_24"}}t.d(e,{i:()=>o})},492492:(_,e,t)=>{function o(){return{icon:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M12 2.1c.68 0 1.33.1 1.95.27a.9.9 0 0 1-.5 1.73A5.1 5.1 0 0 0 12 3.9c-2.9 0-5 2.31-5.1 5.5v1.83c0 .8-.34 1.38-1.06 2.15l-.72.75c-.54.57-.72.88-.72 1.2 0 .19.01.29.06.38.1.2.38.37 1.1.39h12.7c.82 0 1.16-.17 1.28-.4.04-.1.06-.2.06-.37 0-.32-.18-.63-.72-1.2l-.55-.57-.26-.27a6.8 6.8 0 0 1-.22-.25.9.9 0 1 1 1.4-1.15c.07.1.15.19.26.3l.38.4c1.08 1.09 1.51 1.72 1.51 2.74 0 .44-.05.79-.27 1.2-.43.83-1.3 1.31-2.62 1.36l-.25.01h-1.88v.03c-.63 2.38-2.14 3.67-4.38 3.67-2.24 0-3.75-1.3-4.37-3.67v-.03h-1.9c-1.48 0-2.46-.5-2.9-1.41-.19-.4-.23-.72-.23-1.16 0-.96.38-1.57 1.31-2.55l.47-.47.24-.26c.31-.35.45-.58.48-.76V9.63C5.1 5.38 7.99 2.1 12 2.1zm2.5 15.8h-5c.45 1.32 1.24 1.9 2.5 1.9s2.05-.58 2.5-1.9zm4.96-13.64a.9.9 0 1 1 1.28 1.28l-4.2 4.2a.9.9 0 0 1-1.28 0l-2-2a.9.9 0 1 1 1.28-1.28l1.36 1.37z" fill="currentColor" fill-rule="nonzero"/></g></svg>',name:"notification_check_outline_24"}}t.d(e,{X:()=>o})},35682:(_,e,t)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2.1c4.02 0 6.9 3.28 6.9 7.53v1.6c0 .23.2.53.72 1.08l.27.27c1.08 1.1 1.51 1.73 1.51 2.75 0 .44-.05.79-.27 1.2-.45.88-1.42 1.37-2.87 1.37h-1.9c-.64 2.33-2.14 3.6-4.36 3.6-2.25 0-3.75-1.3-4.37-3.67l.02.07H5.74c-1.5 0-2.47-.5-2.9-1.41-.2-.4-.24-.72-.24-1.16 0-1.02.43-1.65 1.51-2.75l.27-.27c.53-.55.72-.85.72-1.08v-1.6C5.1 5.38 7.99 2.1 12 2.1Zm2.47 15.8H9.53c.46 1.25 1.25 1.8 2.47 1.8 1.22 0 2.01-.55 2.47-1.8ZM12 3.9c-2.96 0-5.1 2.43-5.1 5.73v1.6c0 .85-.39 1.46-1.23 2.33l-.28.29c-.75.75-.99 1.11-.99 1.48 0 .19.01.29.06.38.1.22.43.39 1.28.39h12.52c.82 0 1.16-.17 1.28-.4.05-.1.06-.2.06-.37 0-.37-.24-.73-.99-1.48l-.28-.29c-.84-.87-1.23-1.48-1.23-2.33v-1.6c0-3.3-2.13-5.73-5.1-5.73Z"/></svg>',name:"notification_outline_24"}}t.d(e,{l:()=>o})},656303:(_,e,t)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2.1c4.17 0 6.9 3.45 6.9 7.53v1.6c0 .25.15.54.58 1 .47.49 1.01.93 1.4 1.5.32.48.53 1.04.52 1.7a.9.9 0 1 1-1.8-.05c.02-.81-.93-1.4-1.43-1.92-.47-.5-1.07-1.23-1.07-2.23v-1.6c0-3.31-2.13-5.73-5.1-5.73-1 0-1.88.27-2.62.73a.9.9 0 0 1-.96-1.52A6.67 6.67 0 0 1 12 2.1Zm4.35 15.8c-.63 2.33-2.13 3.6-4.35 3.6s-3.72-1.27-4.35-3.6H5.74c-1.5 0-2.47-.5-2.9-1.41-.2-.4-.24-.72-.24-1.16 0-1.3.94-2.16 1.78-3.02.53-.55.72-.85.72-1.08 0-1.5-.04-2.97.46-4.4l-2.3-2.3a.9.9 0 1 1 1.28-1.27l16.2 16.2a.9.9 0 1 1-1.28 1.28l-2.83-2.84h-.28Zm-6.82 0h4.94c-.46 1.25-1.25 1.8-2.47 1.8-1.22 0-2.01-.55-2.47-1.8ZM6.9 11.23c0-.97-.06-1.97.12-2.93l7.8 7.8H5.75c-.85 0-1.18-.17-1.28-.39-.34-.7.52-1.44.93-1.86.72-.73 1.51-1.52 1.51-2.62Z" clip-rule="evenodd"/></svg>',name:"notification_slash_outline_24"}}t.d(e,{O:()=>o})},614648:(_,e,t)=>{function o(){return{icon:'<svg xmlns="http://www.w3.org/2000/svg" width="28" height="28" fill="currentColor" viewBox="0 0 28 28"><path d="M14 3.5h.12a1 1 0 0 1-.12 2h-.22C10.5 5.63 8 8.45 8 12.08v1.83c0 .93-.38 1.61-1.21 2.59l-.28.33c-.76.88-1.01 1.3-1.01 1.76 0 .22.02.35.07.46.12.26.49.45 1.43.45h14c.91 0 1.29-.2 1.42-.46a.94.94 0 0 0 .08-.45v-.21a1 1 0 0 1 2 .12v.09c0 .5-.06.89-.3 1.36-.5.99-1.58 1.55-3.2 1.55h-2.6C17.73 23.77 16.2 25 14 25s-3.73-1.24-4.4-3.5H7c-1.67 0-2.76-.57-3.24-1.6-.21-.45-.26-.81-.26-1.31 0-1.11.42-1.83 1.5-3.07l.26-.31c.54-.64.74-1 .74-1.3v-1.83C6 7.3 9.47 3.5 14 3.5Zm2.28 18h-4.56C12.17 22.54 12.9 23 14 23s1.83-.46 2.28-1.5Z"/><path fill-rule="evenodd" d="M22 3a6 6 0 1 0 0 12 6 6 0 0 0 0-12Zm2.78 4.22a.75.75 0 0 0-1.06 0l-2.47 2.47-.97-.97a.75.75 0 1 0-1.06 1.06l1.5 1.5a.75.75 0 0 0 1.06 0l3-3a.75.75 0 0 0 0-1.06Z" clip-rule="evenodd"/></svg>',name:"notification_check_outline_28"}}t.d(e,{P:()=>o})},518037:(_,e,t)=>{function o(){return{icon:'<svg width="28" height="28" viewBox="0 0 28 28" xmlns="http://www.w3.org/2000/svg"><g id="notifications_28__Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd"><g id="notifications_28__notification_outline_28"><path d="M0 0h28v28H0z"/><path d="M14 3.5c4.54 0 8 3.8 8 8.58v1.83c0 .3.2.66.73 1.3l.27.3c1.07 1.25 1.5 1.96 1.5 3.08 0 .5-.06.89-.3 1.36-.5 1-1.58 1.55-3.2 1.55h-2.6C17.73 23.76 16.2 25 14 25c-2.21 0-3.73-1.24-4.4-3.5H7c-1.67 0-2.76-.57-3.24-1.6-.21-.45-.26-.81-.26-1.31 0-1.12.42-1.83 1.5-3.07l.26-.31c.54-.64.74-1 .74-1.3v-1.83C6 7.3 9.47 3.5 14 3.5Zm2.28 18h-4.56A2.25 2.25 0 0 0 14 23c1.1 0 1.83-.46 2.28-1.5ZM14 5.5c-3.38 0-6 2.86-6 6.58v1.83c0 .92-.38 1.61-1.21 2.59l-.28.33c-.76.88-1.01 1.3-1.01 1.76 0 .22.02.34.07.46.12.26.49.45 1.43.45h14c.91 0 1.29-.2 1.42-.46a.94.94 0 0 0 .08-.45c0-.46-.25-.88-1-1.76l-.3-.33c-.82-.98-1.2-1.66-1.2-2.6v-1.82c0-3.72-2.61-6.58-6-6.58Z" id="notifications_28__Icon-Color" fill="currentColor" fill-rule="nonzero"/></g></g></svg>',name:"notifications_28"}}t.d(e,{A:()=>o})},940506:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _shared_audioplayer_AudioPlayerAdapter_audioTuple_audioTupleToAudioObject__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(618290),_shared_audio_enums__WEBPACK_IMPORTED_MODULE_47__=__webpack_require__(342443),_web_audio_player_track_drawAudio__WEBPACK_IMPORTED_MODULE_48__=__webpack_require__(13095),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(111198),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(956905),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(326107),_web_lib_feature_boxes_writeMessageBox__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(989645),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(719273),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(407721),_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(178009),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(928363),_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(547214),_lib_feature_entries_showPhoto__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(33556),_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(424700),_lib_message_box__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(917128),_web_utils_isWidget__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(796319),_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(214578),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(126607),_lib_debug_tools__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(405546),_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(2096),_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(419299),_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(450653),_lib_scroll_utils__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(605114),_lib_video__WEBPACK_IMPORTED_MODULE_45__=__webpack_require__(513530),_lib_fx__WEBPACK_IMPORTED_MODULE_46__=__webpack_require__(890043),_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(799835),_icons_desktop__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(35682),_icons_desktop__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(492492),_icons_desktop__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(518037),_icons_desktop__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(614648),_icons_desktop__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(656303),_icons_desktop__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(592465),_icons_desktop__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(632701),_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(942600),_web_page_page_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(915285),_web_photos_photo_restriction_blur_global_state__WEBPACK_IMPORTED_MODULE_50__=__webpack_require__(663506),_shared_user_user_env__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(9467),_web_page_promo_owner_buttons__WEBPACK_IMPORTED_MODULE_49__=__webpack_require__(652432),_shared_lib_nav_helpers__WEBPACK_IMPORTED_MODULE_41__=__webpack_require__(67571),_web_components_ui_gallery_constants__WEBPACK_IMPORTED_MODULE_44__=__webpack_require__(416781),_shared_groups_constants__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(715040),_shared_post_stats_tmr_feed_view__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(847315),_web_video_constants__WEBPACK_IMPORTED_MODULE_42__=__webpack_require__(120193),_shared_production_stats_types__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(377399),_web_feed_stats_view_context__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(438575),_shared_feed_adblock_protection_attributes_hider__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(831152),_shared_feed_feed_utils__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(554490),_web_feed_feed_common__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(602882),_web_lib_audience_research__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(378643),_spa_shared_post_helpers__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(623384),_spa_shared_feed_utils_isSpaEnabled__WEBPACK_IMPORTED_MODULE_43__=__webpack_require__(575705);const LS_KEY={posts_seen:"posts_seen",posts_seen_modules:"posts_seen_modules",posts_sent:"posts_sent",posts_extras:"posts_extras"};(0,_web_utils_isWidget__WEBPACK_IMPORTED_MODULE_0__.p)()||(0,_web_page_page_utils__WEBPACK_IMPORTED_MODULE_1__.I5)();const Page={_adBlockSeenStorage:{},_postsClearTimeoutsCalls:0,initUploadForImagePaste:function(txtEl,addMedia,blob){window.stManager.add([window.jsc("web/upload.js")],(function(){addMedia.menu&&addMedia.menu.activate();const uploadEl=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ce)("div",{className:"post_upload_wrap fl_r",innerHTML:'<div id="page_field_upload" class="post_upload"></div>'});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.$p)(uploadEl,txtEl);const uploadData=window.wkcur?wkcur.wallUploadOpts:cur.wallUploadOpts;if(void 0!==addMedia.clipboardImageUploadIndex)Upload.onFileApiSend(addMedia.clipboardImageUploadIndex,[blob]);else{const composer=txtEl&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.p)(txtEl,"composer"),composerOpts=composer&&composer.options&&composer.options.media&&composer.options.media.options||{},limit=composerOpts&&composerOpts.limit||2;addMedia.clipboardImageUploadIndex=Upload.init((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.yQ)(uploadEl),uploadData.url,uploadData.params,{file_name:"photo",file_size_limit:26214400,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_input:null,accept:"image/jpeg,image/png",file_match:uploadData.opts.ext_re,lang:uploadData.opts.lang,wiki_editor:0,onUploadStart:function(_,e){const t=void 0!==_.ind?_.ind:_,o=Upload.options[t];"form"==Upload.types[t]&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vo)("file",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("choose_photo_upload")).disabled=!0),"fileApi"==Upload.types[t]&&(cur.notStarted&&(cur.preventBoxHide||boxQueue.hideLast(),delete cur.notStarted),o.multi_progress&&this.onUploadProgress(_,0,0))},onUploadComplete:function(info,res){let params;const i=void 0!==info.ind?info.ind:info,fileName=(info.fileName?info.fileName:info).replace(/[&<>"']/g,"");try{params=eval("("+res+")")}catch(_){params=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_3__.fromQueryString)(res)}params.photos?ajax.post("al_photos.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.X)({act:"choose_uploaded"},params),{onDone:function(_,e){e.uploadNum=i,addMedia.chooseMedia("photo",_,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.X)(e,{upload_ind:i+"_"+fileName}))},onFail:function(){}}):Upload.onUploadError(info)},onUploadProgress:function(_,e,t){const o=void 0!==_.ind?_.ind:_;if("fileApi"==Upload.types[o]){const s=(cur.attachMediaIndexes||{})[o];if(void 0===s||s&&cur.addMedia[s].chosenMedia||cur.imMedia){const s={loaded:e,total:t};_.fileName&&(s.fileName=_.fileName.replace(/[&<>"']/g,"")),addMedia.showMediaProgress("photo",o,s)}}},onUploadError:WallUpload.uploadFailed,onCheckServerFailed:function(){delete cur.uploadInited,WallUpload.hide()},onUploadCompleteAll:function(_){"form"==Upload.types[_]&&Upload.embed(_)},onCheckComplete:function(_){Upload.types[_]="fileApi",Upload.onFileApiSend(_,[blob])},customShowProgress:function(){},multiple:1,multi_progress:1,max_files:limit,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:uploadData.opts.server,error:uploadData.opts.default_error,error_hash:uploadData.opts.error_hash})}}))},buildMediaLinkEl:function(_,e){return'<div class="page_media_link_url '+(e?"page_market_owner_link":"")+'">'+(e?"":'<div class="page_media_link_icon"></div>')+'<div class="page_media_link_text">'+_+"</div></div>"},showManyPhoto:function(_,e,t,o){const s=[];return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.__)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(_).childNodes,(function(_,e){const t=(e&&e.getAttribute&&e.getAttribute("onclick")).match(/'(-?\d+_\d+)'\s*,\s*'([a-f0-9]{18})'/i);t&&s.push(t[1]+"/"+t[2])})),o.additional={draft_photos:s.join(";")},(0,_lib_feature_entries_showPhoto__WEBPACK_IMPORTED_MODULE_6__.c)(e,t,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.X)(o,{queue:1}))},inviteToGroupByMessage:function(_,e,t,o,s){const n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(e));return(0,_web_lib_feature_boxes_writeMessageBox__WEBPACK_IMPORTED_MODULE_7__.z)(_,o,{params:{onMessageSend:function(_){ajax.post("/al_page.php",{act:"a_invite_by_message",mid:_,gid:t,hash:s},{onDone:function(_,t,o){if(0===t){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.b9)("page_block_group_invite_friends");if(_)return _.remove(),void(0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.kI)().hide()}o&&(e.outerHTML=o),_&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(n,"group_box_row_collapsable")&&n.remove()}})}}}),!1},inviteToGroup:function(_,e,t,o,s){const n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(_),r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(_)),a=function(_){const o=_?1:0,r=_?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("friends_cancel_event_invite"):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("friends_send_event_invite");n.innerHTML='<a onclick="return page.inviteToGroup(this, '+e+", "+t+", "+o+", '"+s+"')\">"+r+"</a>",n.invited_value=o};return o?(ajax.post("/al_page.php",{act:"a_cancel_invite",mid:t,gid:e,hash:s}),a(0)):(ajax.post("/al_page.php",{act:"a_invite",mid:t,gid:e,hash:s},{onDone:function(_,e){if(!_){a(0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)(n);const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vo)("error",r),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.se)('<div class="page_members_box_error msg"><div class="msg_text">'+e+"</div></div>");_?r.replaceChild(t,_):r.insertBefore(t,r.firstChild)}_&&1===n.invited_value&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(r,"group_box_row_collapsable")&&r.remove()}}),a(1)),!1},moneyTransferBox:function(_,e){let t={to_id:cur.oid,from:e};"own_profile"!==e&&"own_profile_tt"!==e||(t.to_id=0,t.tab="link"),Promise.all([__webpack_require__.e(26645),__webpack_require__.e(60867),__webpack_require__.e(50905),__webpack_require__.e("langs/core_spa/money_transfer")]).then(__webpack_require__.bind(__webpack_require__,960867)).then((({MoneyTransfer:_})=>{_.showMoneyTransferBox(t,{},(_=>(setTimeout((0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.NL)((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("global_error"),_).hide,2e3),!0)))})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.TL)(_)},showMoreActions:function(_){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vo)("page_actions_more",_.parentElement);e&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.WU)(e))},onSubscriptionItemOnClick:function(_,e,t,o,s){const n=!Number(_.dataset.act),r=_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.isPageActionCell(_),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(_,"redesigned-group-main-action");t&&Page.toggleSubscription(_,t,e,0,"page",(function(e,t){if(r&&_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.update(_,{icon:n?(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_13__.l)().icon:(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_14__.X)().icon,label:n?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("groups_notifications_on"):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("groups_notifications_set_up")}),a){const e=_.querySelector(".redesigned-group-main-action__icon");e&&(e.innerHTML=n?(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_15__.A)().icon:(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_16__.P)().icon)}_.dataset.act=String(t)})),o&&Page.toggleLiveSubscription(_,o,n?0:1,e,(function(){}),!0),s&&Page.togglePodcastsSubscription(_,s,n?0:1,e,(function(){}),!0)},toggleSubscription:function(_,e,t,o,s,n,r){const a=parseInt((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"act"))?1:0,d={onDone:e=>{if(n)n(e,a?0:1,_);else{const t=_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.isPageActionCell(_),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(_,"ui_actions_menu_item");if(t)_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.update(_,{icon:a?(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_17__.O)().icon:(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_13__.l)().icon,label:e});else if(o){const e=_.querySelector(".redesigned-group-main-action__icon");e&&(e.innerHTML=a?(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_15__.A)().icon:(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_16__.P)().icon)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.p7)("span",_),e);_.setAttribute("data-act",a?0:1)}}};r||(d.showProgress=()=>Page.actionsDropdownLock(_),d.hideProgress=()=>Page.actionsDropdownUnlock(_));const l=_ instanceof HTMLElement?(0,_web_feed_feed_common__WEBPACK_IMPORTED_MODULE_18__.J8)(_):null;ajax.post("al_wall.php",{act:"a_toggle_posts_subscription",subscribe:a?1:0,oid:o||cur.oid,hash:e,source:s,track_code:l},d),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.TL)(t)},toggleLiveSubscription:function(_,e,t,o,s,n){void 0!==cur.toggleLiveSubscriptionAct&&(t=cur.toggleLiveSubscriptionAct),ajax.post("al_video.php?act=a_subscribe_live",{subscribe:t?1:0,owner_id:cur.oid,hash:e},{onDone:e=>{cur.toggleLiveSubscriptionAct=!t,s?s(e):_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.isPageActionCell(_)?_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.update(_,{icon:cur.toggleLiveSubscriptionAct?(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_19__.i)().icon:(0,_icons_desktop__WEBPACK_IMPORTED_MODULE_20__.A)().icon,label:e}):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.p7)("span",_),e)},showProgress:()=>Page.actionsDropdownLock(_),hideProgress:()=>Page.actionsDropdownUnlock(_)}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.TL)(o)},togglePodcastsSubscription:function(_,e,t,o,s,n){void 0!==cur.togglePodcastsSubscriptionAct&&(t=cur.togglePodcastsSubscriptionAct),ajax.post("al_wall.php",{act:"a_toggle_podcasts_subscription",subscribe:t?1:0,owner_id:cur.oid,hash:e},{onDone:function(e){cur.togglePodcastsSubscriptionAct=!t,s?s(e):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)(_,e)},showProgress:()=>!n&&Page.actionsDropdownLock(_),hideProgress:()=>!n&&Page.actionsDropdownUnlock(_)}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.TL)(o)},showMessagesFromCommunityTooltip:function(_){const e=Number(_.getAttribute("data-tooltip-state")),t=_.getAttribute("data-tooltip-text");void 0===cur.toggleMessagesFromCommunityAct&&0===e&&(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_21__.DK)(_,{text:t,dir:"auto",shift:[4,-3]})},toggleMessagesFromCommunity:function(_,e,t,o){const s=_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.isPageActionCell(_),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(_,"ui_actions_menu_item");void 0!==cur.toggleMessagesFromCommunityAct&&(t=cur.toggleMessagesFromCommunityAct),ajax.post("al_groups.php",{act:"a_toggle_messages_from_community",allow:t?1:0,oid:cur.oid,hash:e},{onDone:function(e,o){if(cur.toggleMessagesFromCommunityAct=!t,s&&_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.update(_,{label:e,icon:o}),n){const t=_.querySelector(".ui_actions_menu_item_icon");t.innerHTML=o,_.innerText="",_.append(t),_.append(e)}},showProgress:function(){if(s)return _&&_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.lock(_)},hideProgress:function(){if(s)return _&&_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.unlock(_)}}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.TL)(o)},showPageMembers:function(_,e,t){return(0,_web_page_page_utils__WEBPACK_IMPORTED_MODULE_1__.DO)(e,t,_)},showHiddenMembersBoxInfo:()=>(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.NL)((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("groups_hidden_members_message_box_title"),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("groups_hidden_members_message_box_content")),showPageVideos:function(_,e){return cur.viewAsBox?(cur.viewAsBox(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.TL)(_)):!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("al_video.php?act=a_choose_video_box",{review:1,to_id:e},{cache:1,grey:1})},showPageAudios:function(_,e){return cur.viewAsBox?(cur.viewAsBox(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.TL)(_)):!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("/al_audio.php?act=audios_box",{oid:e},{cache:1,params:{width:638}},_)},ownerPhoto:function(_,e,t={}){e||(e={});const o={stat:["owner_photo.css",window.jsc("web/owner_photo.js")],...t};(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("al_page.php",{act:"owner_photo_box",oid:_||cur.oid,gid:e.gid},o)},openAvatarForm:_web_page_page_utils__WEBPACK_IMPORTED_MODULE_1__.Q,ownerAvatarUpload:_web_page_page_utils__WEBPACK_IMPORTED_MODULE_1__.wr,ownerAvatarEdit:_web_page_page_utils__WEBPACK_IMPORTED_MODULE_1__.lW,ownerAvatarSelect:function(_){Page.openAvatarForm({act:"owner_avatar_select",list:cur.pvListId||"",photo:_})},ownerCrop:function(_,e,t={}){const o={stat:["owner_photo.css",window.jsc("web/owner_photo.js")],...t};(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("al_page.php",{hash:e,act:"owner_photo_crop",oid:_||cur.oid},o)},ownerPhotoEffects:_web_page_page_utils__WEBPACK_IMPORTED_MODULE_1__.gM,uploadOwnerCover:function(_){return!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("al_page.php",{act:"owner_photo_box",oid:_||cur.oid,cover:1},{stat:["owner_photo.css",window.jsc("web/owner_photo.js")]})},editOwnerCover:function(_){(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("al_page.php",{act:"owner_cover_crop",oid:_||cur.oid},{stat:["owner_photo.css",window.jsc("web/owner_photo.js")]})},deleteOwnerCover:function(_,e,t,o=_shared_groups_constants__WEBPACK_IMPORTED_MODULE_22__.jr){t||(t=cur.shareSetOwnPhoto);const s=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_23__.z2)("redesign_web_group_feature")?(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("groups_delete_cover_confirm_new"):(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("groups_delete_cover_confirm");(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.NL)({title:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("groups_delete_cover_title")},s,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("global_delete"),(function(s){ajax.post("al_page.php",{act:"owner_cover_remove",oid:_,hash:e,from:cur.module,"x-source":o},{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.UG)(s),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.XB)(s),onDone:()=>{(0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.kI)().hide(),t()}})}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("global_cancel"))},editPhoto:function(_){cur.hideOther(),(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("al_page.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.X)(_||{},{act:"a_edit_photo"}),{params:{bodyStyle:"padding: 16px 7px"},stat:[window.jsc("web/tagger.js"),"tagger.css"]})},deletePhoto:function(_,e){cur.hideOther();const t=(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.NL)({title:(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("global_warning")},(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("sure_delete_photo"),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("global_delete"),(function(){ajax.post("al_page.php",{act:"a_delete_photo",hash:e,oid:_},{showProgress:t.showProgress,hideProgress:t.hideProgress})}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("global_cancel"))},shareCurrent:function(){let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vo)("current_audio",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("page_current_info"));return _||nav.reload(),_=_.getAttribute("data-audio"),_||nav.reload(),_=_.split("_"),(_.length<3||"s"!=_[2].substr(0,1))&&nav.reload(),!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("like.php",{act:"publish_box",object:"audio"+_[0]+"_"+_[1],list:_[2]+(_[3]&&"h"==_[3].charAt(0)?"_"+_[3]:"")},{stat:[window.jsc("web/page.js"),"page.css",window.jsc("web/wide_dd.js"),"wide_dd.css",window.jsc("web/sharebox.js")]})},playCurrent:function(_,e){const t=_.parentNode;return Page.playLive(e,{showProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.Rh)(t)},hideProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.Cv)(t)}})},playLive:function(_,e){(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_25__.MW)().playLive(_,e)},audioStatusUpdate:function(_){const e=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.WJ)("currinfo_audio"),t=(0,_web_audioplayer_getAudioPlayer__WEBPACK_IMPORTED_MODULE_25__.MW)();let o=(0,_shared_audioplayer_AudioPlayerAdapter_audioTuple_audioTupleToAudioObject__WEBPACK_IMPORTED_MODULE_26__.F)(t.getCurrentAudioLs());ajax.post("al_audio.php",{act:"toggle_status",hash:_,exp:e,id:o?o.fullId:"",oid:vk.id},{onDone:function(_,e){vk.id==cur.oid&&_&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)("current_info",_),t.setStatusExportInfo(e,!0))},onFail:()=>!0})},audioListenersOver:function(_,e){(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_21__.DK)(_,{url:"al_audio.php",params:{act:"listeners_tt",oid:e},slide:15,shift:[24,10,10],ajaxdt:100,showdt:400,hidedt:200,asrtl:1,dir:"auto",typeClass:"audio_tt",appendParentCls:"scroll_fix_wrap"})},showAudioListeners:function(_,e){function t(){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("listeners_more_link"),e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("listeners_more_link_trigger");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.zN)(e)&&boxLayerWrap.scrollHeight-500<boxLayerWrap.scrollTop+boxLayerWrap.offsetHeight&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)(e),_.click())}return e.cancelBubble=!0,cur.audioListenersOnDone={onHide:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.Nn)(window.boxLayerWrap,"scroll",t)},onDone:function(_,e){__webpack_require__._dG("audioListenersOffset",0),e?(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.W2)(window.boxLayerWrap,"scroll",t):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.re)("listeners_more_link"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.re)("listeners_more_link_trigger"))}},!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("/al_audio.php",{act:"listeners_box",oid:_},(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.X)(cur.audioListenersOnDone,{cache:1}))},moreAudioListeners:function(_){__webpack_require__._dG("audioListenersOffset",50);const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vo)("fans_rows"),t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("listeners_more_link");ajax.post("/al_audio.php",{act:"listeners_box",oid:_,offset:window.audioListenersOffset},{onDone:function(_,o){const s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ce)("div",{innerHTML:_});for(let _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.yQ)(s);_;_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.yQ)(s))e.appendChild(_);if(o){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("listeners_more_link_trigger");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.WU)(_)}else(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.re)(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.re)("listeners_more_link_trigger")},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.UG.pbind(t),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.XB.pbind(t)})},postsUnseen:function(_){window._postsExtras||__webpack_require__._dG("_postsExtras",{});const e=Date.now();let t=!1;for(const o in _)for(const s in _[o]){if("module"==s||"index"==s||"q"==s||"block"==s||"trackCode"===s||"hash"===s)continue;const _=window._postsExtras[s];_&&-1==_.diff&&(_.diff=e-_.start,t=!0)}t&&Page.postsClearTimeouts()},postsSeen:function(_){if(!vk.id||!_.length)return;window._postsSeenModules||__webpack_require__._dG("_postsSeenModules",{}),window._postsExtras||__webpack_require__._dG("_postsExtras",{});const e=Date.now(),t=Page._adBlockSeenStorage;let o;for(const s in _){const n=Page.getPostModuleCode(_[s].module?_[s].module:""),r=_[s].index,a=_[s].q,d=_[s].block;let l=_[s].trackCode;const c=_[s].codes&&Object.keys(_[s].codes).length;_[s].hash&&!window._postsViewHash&&__webpack_require__._dG("_postsViewHash",_[s].hash);const E=["module","index","q","hash","block","trackCode","codes"];for(const u in _[s]){if(E.includes(u))continue;const p=_[s][u],b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("post"+u);if(c&&(l=_[s].codes[u]||l),(0,_shared_feed_feed_utils__WEBPACK_IMPORTED_MODULE_27__.Vb)()&&l&&!c){if(!(b&&_web_feed_stats_view_context__WEBPACK_IMPORTED_MODULE_28__.b.getItemType(b)===_shared_production_stats_types__WEBPACK_IMPORTED_MODULE_29__.k.ADS||"string"==typeof u&&u?.startsWith?.("ad_")))continue}if(window._postsSeenModules[u]=n,u in t||(t[u]=!(!b||!(0,_shared_feed_adblock_protection_attributes_hider__WEBPACK_IMPORTED_MODULE_30__.WN)(b,"ad-view"))),!t[u]){const _=window._postsSeen[u],e=window._postsSaved[u];if(-1==e||-1==_||1==p&&(e||_))continue}const P=b?.querySelector("._post_content")??void 0,{width:h,height:D}=(0,_web_page_page_utils__WEBPACK_IMPORTED_MODULE_1__.Ef)(P,!0,(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_23__.z2)("feed_wall_use_full_post_height_analytics_web"));if(window._postsSeen[u]=p,o=p,window._postsExtras[u]={start:e,diff:-1,index:r,q:a,block:d,postHeight:D,postWidth:h,viewportHeight:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.xm)(),session_id:cur.feed_session_id?cur.feed_session_id:"na",trackCode:l},Wall.triggerAdStat(u,_[s].long?"impression_long":"impression"),(0,_shared_post_stats_tmr_feed_view__WEBPACK_IMPORTED_MODULE_31__.s)(),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_23__.AW)("feed_audience_research")&&!(0,_shared_feed_feed_utils__WEBPACK_IMPORTED_MODULE_27__.Vb)()){const e=(0,_shared_feed_feed_utils__WEBPACK_IMPORTED_MODULE_27__._H)(b);e?.urls?.length&&(0,_web_lib_audience_research__WEBPACK_IMPORTED_MODULE_32__.L)().send({urls:e.urls,events:e.events,surface:(0,_spa_shared_post_helpers__WEBPACK_IMPORTED_MODULE_33__.x)(_[s].module??cur?.screen??cur?.module)})}}}o&&Page.postsClearTimeouts()},postsClearTimeouts:function(){clearTimeout(window._postsSaveTimer),clearTimeout(window._postsSendTimer),++Page._postsClearTimeoutsCalls<10?(__webpack_require__._dG("_postsSaveTimer",setTimeout(Page.postsSave,2500)),__webpack_require__._dG("_postsSendTimer",setTimeout(Page.postsSend,5e3))):(Page._postsClearTimeoutsCalls=0,Page.postsSave(),Page.postsSend())},postsSave:function(){if(!_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.checkVersion()||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Im)(window._postsSeen))return window._postsSeen;const _=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.get(LS_KEY.posts_sent)||{},e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.get(LS_KEY.posts_seen)||{},t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.get(LS_KEY.posts_seen_modules)||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.get(LS_KEY.posts_extras)||{},s=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),n=Page._adBlockSeenStorage;let r;window._postsExtras||__webpack_require__._dG("_postsExtras",{});const a={};for(const d in window._postsSeen){const l=window._postsSeen[d];window._postsExtras[d]&&(o[d]={diff:window._postsExtras[d].diff,index:window._postsExtras[d].index,q:window._postsExtras[d].q,session_id:window._postsExtras[d].session_id?window._postsExtras[d].session_id:"na",postHeight:window._postsExtras[d].postHeight,postWidth:window._postsExtras[d].postWidth,viewportHeight:window._postsExtras[d].viewportHeight,block:window._postsExtras[d].block,trackCode:window._postsExtras[d].trackCode},delete window._postsExtras[d],a[d]=d);const c=d.split("_");"ad"!==c[0]&&"adsite"!==c[0]&&"posthashtag"!==c[0]&&"block"!==c[0]&&(c[0]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Jk)(c[0]),c[1]&&"postId"==c[1].substr(0,1)||(c[1]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Jk)(c[1])));const E=(_[c[0]]||{})[c[1]],u=c&&"block"===c[0]&&4===(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Jk)(c[1]);c[0]!=vk.id&&(u||n[d]||!E||-1==l&&E>0)&&(e[c[0]]||(e[c[0]]={},delete t[d]),(!e[c[0]][c[1]]||-1==l&&e[c[0]][c[1]]>0)&&(r=e[c[0]][c[1]]=s*l??0,t[d]=window._postsSeenModules[d])),window._postsSaved[d]=l}return __webpack_require__._dG("_postsSeen",{}),__webpack_require__._dG("_postsSeenModules",{}),r&&(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.set(LS_KEY.posts_seen,e),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.set(LS_KEY.posts_seen_modules,t),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.set(LS_KEY.posts_extras,o)),window._postsSeen},cleanUpPostsSeen(_,e){for(let t of Object.keys(_))e[t]&&delete _[t]},getPostModuleCode:function(_){switch(_){case"feed":return"f";case"public":case"group":case"groups":return"c";case"profile":return"p";case"wall":return"w";case"wall_top":return"tw";case"feed_search":return"s";case"feed_news_recent":case"feed_news":return"rf";case"feed_comments":case"feed_comments_top":case"feed_comments_recent":return"n";case"wall_donut":return"gd";case"feed_news_top":return"tf";case"feed_recommended":case"feed_recommended_recent":return"d";case"feed_recommended_top":return"e";case"feed_other":return"o";case"feed_friends":case"feed_friends_recent":return"rr";case"feed_friends_top":return"tr";case"feed_podcasts":case"feed_podcasts_top":case"feed_podcasts_recent":return"h";case"feed_groups":case"feed_groups_recent":return"rg";case"feed_groups_top":return"tg";case"feed_videos":case"feed_videos_recent":return"rv";case"feed_videos_top":return"tv";case"feed_photos":case"feed_photos_recent":return"rp";case"feed_photos_top":return"tp";case"feed_list_recent":return"rl";case"feed_list_top":return"tl";case"groups_ads_promoted_post":return"ag";case"public_ads_promoted_post":return"ap";default:return"u"}},postsSend:function(){let _={},e={},t={};if(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.checkVersion())_=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.get(LS_KEY.posts_seen)||{},e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.get(LS_KEY.posts_seen_modules)||{},t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.get(LS_KEY.posts_extras)||{};else{const e=Page.postsSave();for(const t in e){const o=e[t],s=t.split("_");"ad"!==s[0]&&"posthashtag"!==s[0]&&(s[0]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Jk)(s[0]),"p"!=s[1].substr(0,1)&&(s[1]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Jk)(s[1]))),_[s[0]]||(_[s[0]]={}),(!_[s[0]][s[1]]||-1==o&&_[s[0]][s[1]]>0)&&(_[s[0]][s[1]]=o)}}let o=[],s=[];for(const n in _){const r=[];for(const o in _[n]){const a=n+"_"+o,d=e[a]||"",l=t[a];let c="s"==d&&l&&l.q?l.q:"";c=c.replace(/[,;:]/g,"");const E=l&&l.session_id?l.session_id:"na";let u="";l&&"ad"!==n&&"posthashtag"!==n&&(u=":"+[l.diff,l.index,E,c||"",l.block||"",l.trackCode||"",a||""].join(":"),u=u.replace(/:+$/,"")),l&&l.postHeight&&s.push([a,l.postHeight,l.viewportHeight,l.postWidth??0].join(":")),r.push(d+(_[n][o]>0?o:-o)+u)}r.length&&o.push(n+"_"+r.join(","))}if(!o.length)return;if(!vk.id)return Page.postsClear();const n={act:"seen",data:o.join(";"),meta:s.join(";")};window._postsViewHash&&(n.hash=window._postsViewHash),ajax.post("al_page.php",n,{onDone:function(){if(!_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.checkVersion())return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.X)(window._postsSaved,window._postsSeen);const e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.get(LS_KEY.posts_seen)||{},t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.get(LS_KEY.posts_sent)||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.get(LS_KEY.posts_seen_modules)||{};for(const s in _){let n;for(n in _[s])t[s]||(t[s]={}),-1!=t[s][n]&&(t[s][n]=_[s][n]),(e[s]||{})[n]&&(delete e[s][n],delete o[s+"_"+n]);e[s]&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Im)(e[s])&&(delete e[s],delete o[s+"_"+n])}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.set(LS_KEY.posts_seen,e),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.set(LS_KEY.posts_sent,t),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.set(LS_KEY.posts_seen_modules,o),clearTimeout(window._postsCleanTimer),__webpack_require__._dG("_postsCleanTimer",setTimeout(Page.postsClean,1e4))}})},postsClean:function(){if(window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle)return(0,_lib_debug_tools__WEBPACK_IMPORTED_MODULE_35__.cY)("waiting ls clean.."),clearTimeout(window._postsCleanTimer),void __webpack_require__._dG("_postsCleanTimer",setTimeout(Page.postsClean,1e4));(0,_lib_debug_tools__WEBPACK_IMPORTED_MODULE_35__.cY)("cleaning ls..");const _=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.get(LS_KEY.posts_seen)||{};for(const t in e){for(const o in e[t]){const s=e[t][o];_-(s>0?s:-s)>24&&delete e[t][o]}(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Im)(e[t])&&delete e[t]}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.set(LS_KEY.posts_sent,e),Wall.cleanAdsEvents()},postsClear:function(){_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.set(LS_KEY.posts_seen,{}),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.set(LS_KEY.posts_extras,{}),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_34__.u.set(LS_KEY.posts_sent,{}),__webpack_require__._dG("_postsSaved",{}),__webpack_require__._dG("_postsSeen",{}),__webpack_require__._dG("_postsSeenModules",{}),__webpack_require__._dG("_postsExtras",{}),Wall.setAdsEvents({})},showContacts:function(_,e,t){(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("/al_page.php",{act:"a_get_contacts",oid:_,edit:e},{noEval:!0}).setOptions({onHideAttempt:function(){return cur.reloadAfterClose&&(t?t():(nav.reload({noscroll:!0}),cur.reloadAfterClose=!1)),!0}})},showContactTT:function(_,e){(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_21__.DK)(_,{text:()=>e,slideX:15,className:"pedit_tt",hasover:1,shift:[-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.YC)(_)[0]-10,-15,-15],dir:"left",appendParentCls:"scroll_fix_wrap",onCreate:function(){_.tt&&setTimeout(_.tt.hide,3e3)}})},editContact:function(_,e,t,o){const s=(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("al_page.php",{act:"a_edit_contact_box",mid:e,oid:_});return s.setButtons((0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("global_save"),(function(n){function r(){const r={act:"a_add_contact",mid:e,oid:_,boxhash:s.boxhash};r.hash=t,t||(r.hash=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("group_contact_hash").value),r.title=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)("group_contact_position"),r.phone=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)("group_contact_phone"),r.email=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)("group_contact_email"),e||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("group_contact_memlink")||(r.page=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)("group_contact_memlink"),r.page||r.phone||r.email)?ajax.post("al_page.php",r,{onDone:function(e,t){s.hide();const n=(0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.kI)();n?(n.content(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("public_contacts_list")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("public_contacts_list").sorter&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("public_contacts_list").sorter.destroy(),n.execInline(s.boxhash),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.L$)("group_add_contact",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("public_contacts_list").childNodes.length<30)):Page.showContacts(_,1,o)},onFail:function(_){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("group_contact_error"))return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("group_contact_error").innerHTML=_,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.WU)("group_contact_error_wrap"),!0},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.UG)(n),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.XB)(n)}):s.hide()}cur.reloadAfterClose=!0,e||cur.lastContact==(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)("group_contact_memlink")?r():Page.searchContact(_,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)("group_contact_memlink"),r)}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("global_cancel")),!1},searchContact:function(_,e,t){if(!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_36__.Bq)(e))return cur.lastContact="",void(t&&t());e!=cur.lastContact&&ajax.post("al_page.php",{act:"a_search_contact",oid:_,page:e},{onDone:function(_,o,s,n){cur.lastContact=e,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("group_contact_name").innerHTML=s,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("group_contact_image").innerHTML=o,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("group_contact_hash").value=n,_?t?t():(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)("group_contact_error_wrap"):((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.h6)("group_contact_memlink","",!0),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)("group_contact_error_wrap"))}})},deleteContact:function(oid,mid,hash){return cur.reloadAfterClose=!0,ajax.post("al_page.php",{act:"a_delete_contact",oid,mid,hash},{onDone:function(res,script){const box=(0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.kI)();if(box.content(res),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("public_contacts_list")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("public_contacts_list").sorter&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("public_contacts_list").sorter.destroy(),script)try{eval(script)}catch(_){(0,_lib_debug_tools__WEBPACK_IMPORTED_MODULE_35__.fY)(_,script)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.L$)("group_add_contact",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("public_contacts_list").childNodes.length<30)}}),!1},reorderContacts:function(_,e,t,o,s){const n=t.id.replace("group_contact_cell",""),r=(o&&o.id||"").replace("group_contact_cell",""),a=(s&&s.id||"").replace("group_contact_cell","");cur.reloadAfterClose=!0,ajax.post("/al_page.php",{act:"a_reorder_contacts",oid:_,mid:n,before:r,after:a,hash:e})},initStatusEditable:function(_){if(_.emojiInited)return!1;_.emojiInited=!0,window.stManager.add([window.jsc("web/emoji.js"),"notifier.css"],(function(){Emoji.init(_,{ttDiff:-48,rPointer:!0,controlsCont:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(_),noStickers:!0,forceEnterSend:!0,ref:"status",onSend:Page.infoSave,checkEditable:function(){const e=Emoji.editableVal(_);e.length>140&&(Emoji.val(_,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.uH)(e.substr(0,140))),Emoji.editableFocus(_,!1,!0))}})}))},infoEdit:function(_){if(cur.viewAsBox)return cur.viewAsBox();const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("current_info").tt;e&&e.hide&&e.hide({fasthide:!0}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.WU)("currinfo_editor","currinfo_fake"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)("currinfo_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.zN)("currinfo_app")&&!cur.ciApp?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.WU)("currinfo_audio"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)("currinfo_app")):cur.ciApp&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)("currinfo_audio"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.WU)("currinfo_app"));const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("current_info").firstChild,o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("currinfo_input"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.p7)("a",t);if(Page.initStatusEditable(o,cur.infoOld),cur.infoEditing="my_current_info"==t.className,cur.infoEditing){let _=s?s.innerHTML:t.innerHTML;_=_.replace(/<img[^>]+alt="([^"]+)"[^>]*>/g,"$1"),cur.infoOld=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_36__.Bq)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.uH)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_36__._e)(_)))}else cur.infoOld="";return window.Emoji?(Emoji.val(o,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_36__.Jo)(cur.infoOld)),Emoji.editableFocus(o,!1,!0,!0)):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)(o,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_36__.Jo)(cur.infoOld)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.aE)(o)),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.W2)(window,"keydown",Page.infoKeydown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.W2)(document,"mousedown",Page.infoMousedown),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("currinfo_save").onclick=Page.infoSave,!1},infoCancel:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)("currinfo_editor","currinfo_fake"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.WU)("currinfo_wrap"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Au)("currinfo_save","currinfo_cancel"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.Nn)(window,"keydown",Page.infoKeydown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.Nn)(document,"mousedown",Page.infoMousedown),cur.ciApp=!1},infoShowShare:function(){if(cur.viewAsBox)return cur.viewAsBox();const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("current_info"),e=(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("groups_share_current_info");(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_21__.DK)(_,{content:'<div class="content"><div class="checkbox">'+e+"</div></div>",className:"share_tt",init:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.W2)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vo)("checkbox",_.tt.container),"click",(function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.kv)(this),ajax.post("al_page.php",{act:"share_currinfo",hash:cur.options.info_hash,oid:cur.oid,checked:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.WJ)(this)},{onDone:Wall.receive})}))},toup:!1,showdt:0,slide:10,shift:[6,8,8],dir:"auto",hidedt:200,onClean:function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Au)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vo)("checkbox",_.tt.container))}})},infoKeydown:function(_){_.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__._.ESC&&Page.infoCancel()},infoMousedown:function(_){let e=_.target;for(;e.parentNode;){if("currinfo_editor"==e.id)return;e=e.parentNode}Page.infoCancel()},infoSave:function(){if(cur.viewAsBox)return cur.viewAsBox();const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("currinfo_input");let e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_36__.Bq)((window.Emoji?Emoji.editableVal:_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)(_)).replace(/\n/g," ");if(e==cur.infoOld||e==(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_36__.Jo)(cur.infoOld))return Page.infoCancel();e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_36__.Bq)(e).substr(0,140),ajax.post("al_page.php",{act:"current_info",oid:cur.oid,info:e,hash:cur.options.info_hash},{onDone:function(){const _=e?"my":"no",t=e?'<span class="current_text">'+Emoji.emojiToHTML(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),!0)+"</span>":(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("change_current_info");(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("current_info").innerHTML=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("currinfo_fake").innerHTML='<span class="'+_+'_current_info">'+t+"</span>",Page.infoCancel();const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("current_info"),s=o.tt;s&&s.el&&(s.destroy(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.Nn)(o,"mouseover")),e&&((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.W2)(o,"mouseover",Page.infoShowShare),Page.infoShowShare())},onFail:function(_){if(!_)return!0},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.UG.pbind("currinfo_save"),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.XB.pbind("currinfo_save"),stat:[window.jsc("web/tooltips.js"),"tooltips.css",window.jsc("web/emoji.js")]})},showGifBox:function(_,e,t,o,s,n,r={}){n&&(n.ctrlKey||n.metaKey||n.shiftKey)||((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.TL)(n),(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("docs.php",{act:"show_box",access_key:r?.accessKey,doc_id:_,doc_owner_id:e,post_id:t,post_owner_id:o,hash:s},{stat:[window.jsc("web/docs.js"),"docs.css"],params:{white:!0,hideButtons:!0},onDone:function(_,e){if(!vk.widget){if((0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.kI)().setOptions({width:e.width+50}),cur.gifAdded&&cur.gifAdded[e.doc]){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vo)("docs_gif_box_add_"+e.doc);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.rL)(_,"button_action_light_add","button_action_light_done"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)(_,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("wall_doc_added_short"))}const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vo)("page_doc_photo_href",(0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.kI)().bodyNode);Page.showGif(_)}}}))},showGif:function(_,e,t){if(e&&(e.ctrlKey||e.metaKey))return!0;const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(_),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(o),n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.yQ)(_);cur.gifAdded=cur.gifAdded||{},(cur.activeGif&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(cur.activeGif))===s||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(cur.activeGif),"page_gif_large")&&!t)&&Page.hideGif(cur.activeGif,!1);const r=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"doc"),a=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"hash"),d=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"add-txt")||"",l=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"add-hash"),c=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"share-txt")||"",E=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"post"),u=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"reply"),p=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"preview"),b=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"width"),P=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"height"),h=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"thumb"),D=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(o,"page_gif_large"),M=!e;let w,O=!0;p||(O=!1);const m=_.href+"&wnd=1&module="+cur.module;O?(w=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ce)("video",{autoplay:!0,muted:!0,loop:"loop",poster:h,src:m+"&mp4=1",className:"pages_gif_img page_gif_big"},{width:b?b+"px":void 0,height:P?P+"px":void 0,background:D?"transparent url("+h+") no-repeat 0 0":"",backgroundSize:"cover"}),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.CF)(w,"webkit-playsinline",""),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_37__.T.ipad&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.CF)(w,"controls","")):w=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ce)("img",{src:m,className:"pages_gif_img"},{visibility:"hidden"});const g=a?'<div class="page_gif_share" onmouseover="showTooltip(this, {text: \''+c+"', black: 1, shift: [7, 6, 6], toup: 0, needLeft: 1})\" onclick=\"return Page.shareGif(this, '"+r+"', '"+a+'\', event)"><div class="page_gif_share_icon"></div></div>':"",f=l?'<div class="page_gif_add" onmouseover="return Page.overGifAdd(this, \''+d+"', '"+r+"', event);\" onclick=\"return Page.addGif(this, '"+r+"', '"+a+"', '"+l+'\', event);"><div class="page_gif_add_icon"></div></div>':"",A=g||f?'<div class="page_gif_actions">'+g+f+"</div>":"",C='<div class="page_gif_progress_icon" style="display:none;">'+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.rs)(vk.pr_tpl,{id:"",cls:""})+"</div>",L=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ce)("a",{href:_.href,className:"page_gif_preview"+(cur.gifAdded[r]?" page_gif_added":""),innerHTML:C+A,onclick:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.TL},{backgroundImage:O?"":((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gd)(n,"backgroundImage")||"").replace(/"/g,"'"),backgroundSize:O?"":((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.gd)(n,"backgroundSize")||"").replace(/"/g,"'"),width:b?b+"px":void 0,height:P?P+"px":void 0}),I=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.yQ)(L);L.appendChild(w),cur.activeGif=L,o.insertBefore(L,_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)(_);let T,v=!1;const B=function(){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.YC)(w);(_[0]||_[1])&&(clearInterval(T),delete w.onload,delete w.onloadeddata,v=!0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)(I),L.style.background="",L.setAttribute("onclick","return Page.hideGif(this, event);"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.iQ)(w,"page_gif_big"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.iQ)(L,"page_gif_loaded"),b&&(w.style.width=b+"px"),P&&(w.style.height=P+"px"),w.style.visibility="",(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_38__.Jx)("gif_play",0,O?"mp4":"gif",M?1:0))};e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.WU)(I):setTimeout((function(){v||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.WU)(I)}),300),O?w.onloadeddata=B:(T=setInterval(B,10),w.onload=B),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(o,"playing",1);const R=M?"autoplay":"manual",W=cur.module||"other",U=E?"post":u?"reply":"";if((0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_38__.Jx)("gif_show",R,W,U),E){const _=E.split("_"),e=_[0],t=_[1];(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_38__.Jx)("show_post_gif",1,e,t)}return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.TL)(e)},hideGif:function(_,e){if(e&&(e.ctrlKey||e.metaKey))return!0;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(_),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.qA)(_);return t.removeAttribute("data-playing"),e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vy)(t,"page_gif_autoplay"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.re)(_),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.WU)(o),delete cur.activeGif,!1},overGifAdd:function(_,e,t,o){return cur.gifAdded=cur.gifAdded||{},cur.gifAdded[t]&&!(e=cur.gifAdded[t].tooltip)||(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_21__.DK)(_,{text:e,black:1,shift:[7,6,6],toup:0,needLeft:1}),!1},addGif:function(_,e,t,o,s){if(cur.viewAsBox)return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.jo)(s),cur.viewAsBox();cur.gifAdded=cur.gifAdded||{},(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Gv)(_.tt)&&_.tt.hide();const n=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(_,"button_action_light");return cur.gifAdded[e]?ajax.post("docs.php",{act:"a_delete",oid:vk.id,did:cur.gifAdded[e].did,hash:cur.gifAdded[e].hash},{onDone:function(){if(n)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.rL)(_,"button_action_light_done","button_action_light_add"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)(_,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("wall_doc_add_short"));else{const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Q3)("page_gif_large",_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vy)(e,"page_gif_added"),_.tt&&_.tt.el&&_.tt.destroy()}delete cur.gifAdded[e]}}):((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.iQ)(_,"page_gif_adding"),ajax.post("docs.php",{act:"a_add",doc:e,hash:t,add_hash:o},{onDone:function(t,o,s,r){if((0,_lib_box_utils__WEBPACK_IMPORTED_MODULE_8__.Xv)(t),n)(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.rL)(_,"button_action_light_add","button_action_light_done"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)(_,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("wall_doc_added_short"));else{const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Q3)("page_gif_large",_)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(_);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.iQ)(e,"page_gif_added"),_.tt&&_.tt.el&&_.tt.destroy()}cur.gifAdded[e]={tooltip:o,did:s[0],hash:r}}})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.TL)(s)},shareGif:function(_,e,t,o){return cur.viewAsBox?((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.jo)(o),cur.viewAsBox()):((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Gv)(_.tt)&&_.tt.hide(),(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("like.php",{act:"publish_box",object:"doc"+e,list:t},{stat:[window.jsc("web/wide_dd.js"),"wide_dd.css",window.jsc("web/sharebox.js")]}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.TL)(o))},initGifAutoplay:function(){if(cur.gifAutoplayScrollHandler||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_37__.T.mobile||cur.viewAsBox)return;const{viewportHeight:_,viewportMiddle:e,activeSpace:t}=(0,_web_page_page_utils__WEBPACK_IMPORTED_MODULE_1__.Mg)();let o=(0,_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_39__.s)((function(){const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.uk)("page_gif_autoplay");if(!o.length)return;const s=e-t/2,n=e+t/2;let r,a,d,l=o.length-1,c=-1;if(cur.activeGif){const t=cur.activeGif.getBoundingClientRect();if(t.top>s&&t.bottom<n){if(t.top<e&&t.bottom>e)return;const s=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.qh)(o,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(cur.activeGif)),n=Math.min(Math.abs(_/2-t.top),Math.abs(_/2-t.bottom));r={el:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(cur.activeGif),distanceToMiddle:n},s>-1&&(l=s,c=Math.abs(_/2-t.top)<Math.abs(_/2-t.bottom)?-1:1)}else(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.RV)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(cur.activeGif),o)&&Page.hideGif(cur.activeGif)}for(;a=o[l];){const e=a.getBoundingClientRect(),t=e.width&&e.height&&e.top>s&&e.bottom<n;if(t&&0==l&&(0,_lib_scroll_utils__WEBPACK_IMPORTED_MODULE_40__.t)()<300){r={el:a,distanceToMiddle:d};break}if(t){if(d=Math.min(Math.abs(_/2-e.top),Math.abs(_/2-e.bottom)),r&&d>r.distanceToMiddle)break;r={el:a,distanceToMiddle:d}}l+=c}if(r&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.yQ)(r.el)!==cur.activeGif){Page.showGif((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.yQ)(r.el));let _,e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.qh)(o,r.el)+1;for(;_=o[e++];){const e=_.getBoundingClientRect();if(e.width&&e.height){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ce)("video",{src:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.yQ)(_).href+"&wnd=1&mp4=1",preload:"auto"});break}}}}),50);cur.gifAutoplayScrollHandler=o,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.W2)(window,"scroll",o),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.W2)(window,"resize",o),o(),(0,_shared_lib_nav_helpers__WEBPACK_IMPORTED_MODULE_41__.w)((()=>{(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.Nn)(window,"scroll",o),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.Nn)(window,"resize",o),o=null,delete cur.gifAutoplayScrollHandler}))},initVideoAutoplay:function(){if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_37__.T.mobile||cur.videoAutoplayScrollHandler)return void("feed"===cur.module&&(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_38__.Jx)("feed_init_video_autoplay",cur.videoAutoplayScrollHandler?"already_init":"bad_browser"));const isMessagePage="im"===cur.module;let chatHeader,chatWrapperUiScroll,chatHeaderHeight,chatInputBox,lastScroll,directionUp,lastAutoPlayVideo,chatHeaderBottom,chatInputBoxTop;if("feed"===cur.module)(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_38__.Jx)("feed_init_video_autoplay","good_browser");else if(isMessagePage){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vo)("_im_chat_body_abs");chatHeader=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vo)("im-page--chat-header"),chatWrapperUiScroll=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.p)(_,"ui-scroll"),chatHeaderHeight=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.YC)(chatHeader)[1],chatInputBox=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vo)("im-chat-input"),lastScroll=0,directionUp=!0,lastAutoPlayVideo=null}const canPlayHls=window.MediaSource&&MediaSource.isTypeSupported&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),noHlsMaxDuration=300,fixedHeaderHeight=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.YC)("page_header")[1];let scrollHandler=(0,_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_39__.s)((function(_,e){if(layers.visible||window.mvcur&&mvcur.mvShown||nav.objLoc.z||_getFullscreenElement()||window.Calls&&window.Calls.isInActiveCall)return;let t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.uk)("page_video_autoplayable");const o=t.length,s=document.querySelector(".BlockVideosForYou");if(!o&&!s)return;if(e&&cur.videoInlinePlayer&&!cur.videoInlinePlayer.isAutoplay())return;const n=document.body.scrollHeight-fixedHeaderHeight,{viewportHeight:r,viewportMiddle:a,activeSpace:d,percentForAutoplay:l}=(0,_web_page_page_utils__WEBPACK_IMPORTED_MODULE_1__.Mg)();let c,E,u;if(isMessagePage?(u=cur.imClassicInterface?n-(r+(0,_lib_scroll_utils__WEBPACK_IMPORTED_MODULE_40__.t)()):chatWrapperUiScroll.api.data.scrollBottom,directionUp=u>=lastScroll,lastScroll=u,(e||u&&directionUp)&&(t=t.reverse()),c=a-d/2,E=u<100?r:c+d,cur.imClassicInterface?(chatHeaderBottom=chatHeader.getBoundingClientRect().top+chatHeaderHeight,chatInputBoxTop=chatInputBox.getBoundingClientRect().top):(chatHeaderBottom=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Uz)(chatHeader)[1]+chatHeaderHeight,chatInputBoxTop=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Uz)(chatInputBox)[1]),c<chatHeaderBottom&&(c=chatHeaderBottom),E>chatInputBoxTop&&(E=chatInputBoxTop)):(u=(0,_lib_scroll_utils__WEBPACK_IMPORTED_MODULE_40__.t)(),(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_23__.z2)("feed_redesign2024_new_logic_for_video_autoplay_web")?(E=r+fixedHeaderHeight,c=fixedHeaderHeight):(c=u<300?fixedHeaderHeight:a-d/2,E=c+d)),s){const _=s.getBoundingClientRect(),e=_.top>c&&_.bottom<E;window.dispatchEvent(new CustomEvent(_web_video_constants__WEBPACK_IMPORTED_MODULE_42__.bo.VIEW_BLOCK,{detail:{viewed:e}}))}if(!o)return;const p=cur.videoInlinePlayer;if(p){const _=p.isAutoplay();let e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.QK)("post",p.el),"ad-view");(0,_spa_shared_feed_utils_isSpaEnabled__WEBPACK_IMPORTED_MODULE_43__.y)()&&(e=p.el?.closest('[data-testid="post"]')?.dataset?.ad);const t=p.el.getBoundingClientRect();let o=t.top>c&&t.bottom<E;if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_23__.z2)("feed_redesign2024_new_logic_for_video_autoplay_web")){const _=Math.abs(t.bottom-t.top)*l;o=t.top>c&&t.top+_<E}if(!e&&_||(o=t.bottom>c&&t.bottom<E||t.top>c&&t.top<E),p.el.closest(`.${_web_components_ui_gallery_constants__WEBPACK_IMPORTED_MODULE_44__.Q7}, .attachmentCarousel`)&&(o=o&&(0,_web_page_page_utils__WEBPACK_IMPORTED_MODULE_1__.XF)(p.el,t)),_&&p.onViewport(o),o){if(_&&"paused"===p.getState()&&p.play(),"ended"!==p.getState())return}else(_&&!p.isActiveLive()||p.isShortVideo()&&!p.isActiveLive()&&(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_23__.z2)("clips_fix_autoplay_legacy"))&&p.pause()}let b=o;for(e&&lastAutoPlayVideo&&(b=t.indexOf(lastAutoPlayVideo));b--;){const _=t[b],e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(_,"VideoRestriction");if(!canPlayHls&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Jk)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"duration"))>noHlsMaxDuration||e)continue;const o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"loading"),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"playing");let n=(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_23__.z2)("post_adblock_protection_promo")?(0,_shared_feed_adblock_protection_attributes_hider__WEBPACK_IMPORTED_MODULE_30__.WN)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.QK)("post",_),"ad-view"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.QK)("post",_),"ad-view");(0,_spa_shared_feed_utils_isSpaEnabled__WEBPACK_IMPORTED_MODULE_43__.y)()&&(n=_?.closest('[data-testid="post"]')?.dataset?.ad);let r=(s?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.qA)(_):_).getBoundingClientRect();if(r.width&&r.height||!_.parentElement||(r=_.parentElement.getBoundingClientRect()),!r.width||!r.height)continue;let a=r.top>c&&r.bottom<E;if((0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_23__.z2)("feed_redesign2024_new_logic_for_video_autoplay_web")){const _=Math.abs(r.bottom-r.top)*l;a=r.top>c&&r.top+_<E}if(n&&!p&&(a=r.bottom>c&&r.bottom<E||r.top>c&&r.top<E),_.closest(`.${_web_components_ui_gallery_constants__WEBPACK_IMPORTED_MODULE_44__.Q7}, .attachmentCarousel`)&&(a=a&&(0,_web_page_page_utils__WEBPACK_IMPORTED_MODULE_1__.XF)(_,r)),a){if(!s&&!o){const e=_getVideoParams(_),t=Date.now();lastAutoPlayVideo=_,(0,_lib_video__WEBPACK_IMPORTED_MODULE_45__.showInlineVideo)(e.video,e.list,{autoplay:1,no_progress:1,cache:1,addParams:e},!1,_),(0,_shared_lib_statlogs__WEBPACK_IMPORTED_MODULE_38__.Jx)("page_show_inline_video",Date.now()-t),cur.videoAutoplayStat={video:e.video,launched:Date.now(),preloaded:_isPreloaded(e.video)}}break}if(!isMessagePage&&r.top<=c)break}let P=b+1;if(isMessagePage){if(!u)return;P=b-1}do{const _=t[P];if(_&&(canPlayHls||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Jk)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(_,"duration"))<=noHlsMaxDuration)){const e=_getVideoParams(_);_isPreloaded(e.video)||(0,_lib_video__WEBPACK_IMPORTED_MODULE_45__.loadInlineVideo)(e,_onVideoDataLoaded,!0);break}}while(++P<o&&!isMessagePage)}),50);function _getVideoParams(thumb){let videoRawId,listId,options;const showInlineParamsMatch=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.CF)(thumb,"onclick")?.match(/show(?:Inline)?Video\((.+)\)/);if(showInlineParamsMatch){const paramsStr=showInlineParamsMatch[1];try{[videoRawId,listId,options]=eval("["+paramsStr+"]")}catch(_){}}return videoRawId||(videoRawId=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(thumb,"video"),listId=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(thumb,"list")),options=options||{},(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_4__.X)(options.addParams,{mt:thumb.dataset.mtId,video:videoRawId,list:listId,ad_data:(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_23__.z2)("post_adblock_protection_promo")?(0,_shared_feed_adblock_protection_attributes_hider__WEBPACK_IMPORTED_MODULE_30__.WN)(thumb,"ad-data"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(thumb,"ad-data"),ad_block_id:(0,_shared_user_user_env__WEBPACK_IMPORTED_MODULE_23__.z2)("post_adblock_protection_promo")?(0,_shared_feed_adblock_protection_attributes_hider__WEBPACK_IMPORTED_MODULE_30__.WN)(thumb,"ad-block-id"):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(thumb,"ad-block-id"),post_id:options.addParams?.post_id||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.QK)("post",thumb),"post-id")||thumb?.closest('[data-testid="post"]')?.dataset?.postId,stretch_vertical:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Jk)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(thumb,"stretch-vertical")),autoplay_sound:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.Jk)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(thumb,"autoplay-sound")),autoplay:1,from_autoplay:1,module:options.module||currentModule(),promo_post_hash:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.r0)(thumb,"promo-post-hash")})}function _isPreloaded(_){let e=!1;return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_5__.__)(window.ajaxCache,(function(t,o){if(0===t.indexOf("/al_video.php?act=video_box")&&t.indexOf("&video="+_)>0)return e=!0,!1})),e}function _onVideoDataLoaded(_,e){}function _getFullscreenElement(){return document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}cur.videoAutoplayScrollHandler=scrollHandler,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.W2)(window,"scroll",scrollHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.W2)(window,"resize",scrollHandler),isMessagePage&&!cur.imClassicInterface&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.W2)(window,"imScroll",scrollHandler),scrollHandler(),(0,_shared_lib_nav_helpers__WEBPACK_IMPORTED_MODULE_41__.w)((()=>{(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.Nn)(window,"scroll",scrollHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.Nn)(window,"resize",scrollHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_11__.Nn)(window,"imScroll",scrollHandler),scrollHandler=null,delete cur.videoAutoplayScrollHandler}))},actionsDropdown:function(_,e){_||!e?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.WU)(_):e()},actionsDropdownHide:function(_,e,t){if(1===e)return t&&t(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)(_);clearTimeout(cur.actDdHide),cur.actDdHide=setTimeout((function(){(0,_lib_fx__WEBPACK_IMPORTED_MODULE_46__.Xn)(_,200,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD.pbind("page_actions_sublist")),t&&t()}),150)},actionsDropdownUnhide:function(){clearTimeout(cur.actDdHide)},actionsDropdownLocked:function(_){if(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)(_))return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(_,"page_actions_item_lock")},lockTimeout:null,resetLockTimeout:null,actionsDropdownLock:function(_){(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)(_))&&(_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.isPageActionCell(_)?_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.lock(_):(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)(_))&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(_,"page_actions_item")&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(_,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),Page.resetLockTimeout=!1,Page.lockTimeout=setTimeout((function(){if(!Page.resetLockTimeout){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.p)(_,"inner",_.innerHTML),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.iQ)(_,"page_actions_item_lock");const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ce)("div",{className:"page_actions_item_lock_text"});(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.q_)(e,_.innerHTML),_.appendChild(e),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.Rh)(_)}}),500)))},actionsDropdownUnlock:function(_){_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)(_),_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.isPageActionCell(_)?_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_12__.g.unlock(_):(Page.resetLockTimeout=!0,(_=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)(_))&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(_,"page_actions_item")&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(_,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vy)(_,"page_actions_item_lock"),_.innerHTML=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.p)(_,"inner")))},actionsPreloadFeedLists:function(el,sh){ajax.post("al_feed.php",{act:"a_get_lists_by_item",item_id:cur.oid},{onDone:function(html,js){if(sh&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("page_actions_wrap")){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(el).appendChild((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.se)(html),el);try{eval(js)}catch(_){(0,_lib_debug_tools__WEBPACK_IMPORTED_MODULE_35__.fY)(_,js)}}},cache:1})},feedListsDDShow:function(){const _=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("page_actions_item_lists");if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.iQ)(_,"page_actions_item_unfolded"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.ge)("page_actions_sublist"))return clearTimeout(cur.feedListsDDHide),void(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.WU)("page_actions_sublist");let e=[];for(const _ in cur.options.feedLists){let t=cur.options.feedLists[_];t.length>20&&(t=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_36__.Bq)(t.substr(0,18))+"..."),e.push('<a id="page_feed_item'+_+'" class="page_actions_item page_actions_subitem'+(cur.options.feedListsSet&&cur.options.feedListsSet[_]?" checked":"")+'" onclick="Page.feedListsCheck(this, '+_+');">'+t+"</a>")}e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.se)('<div id="page_actions_sublist" onmouseover="Page.feedListsDDShow();">'+e.join("")+"</div>"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.Vu)(_).appendChild(e)},feedListsDDHide:function(){clearTimeout(cur.feedListsDDHide),cur.feedListsDDHide=setTimeout((function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.jD)("page_actions_sublist"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vy)("page_actions_item_lists","page_actions_item_unfolded")}),150)},feedListsCheck:function(_,e){const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.nB)(_,"checked");t?(cur.options.feedListsSet[e]=0,cur.options.feedListsChanges[e]=-1):(cur.options.feedListsSet[e]=1,cur.options.feedListsChanges[e]=1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.p1)(_,"checked",!t),cur.feedListsTO&&clearTimeout(cur.feedListsTO);const o=[];for(const _ in cur.options.feedListsChanges)o.push(cur.options.feedListsChanges[_]*_);o.length&&(cur.feedListsTO=setTimeout((function(){ajax.post("al_feed.php",{act:"a_toggle_lists",item_id:cur.oid,lists_ids:o.join(","),hash:cur.options.feedListsHash},{onDone:function(){cur.options.feedListsChanges={}}})})))},addAudioPreview:function(_,e){return e[_shared_audio_enums__WEBPACK_IMPORTED_MODULE_47__.Ot.AUDIO_ITEM_INDEX_CONTEXT]="attach_preview",(0,_web_audio_player_track_drawAudio__WEBPACK_IMPORTED_MODULE_48__.drawAudio)(e,"inlined")},ownerButtonClick:function(_,e,t,o){return(0,_web_page_promo_owner_buttons__WEBPACK_IMPORTED_MODULE_49__.gZ)(_,e,t,o)},showLoginBox:()=>((0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.rL)("al_login.php",{act:"box"}),!1),showUnblurBox(_,e,t,o,s){let n=(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_10__.NL)({title:_},e,(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("photos_restriction_button_watch"),(function(_){Page.unblurPhoto(t,o,_,(function(){n.hide(),s&&s()}))}),(0,_shared_lib_langs__WEBPACK_IMPORTED_MODULE_9__.Xo)("global_cancel"))},unblurPhoto(_,e,t,o){ajax.post("al_photos.php",{act:"unblur",photo_raw:_,hash:e},{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.UG)(t),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_24__.XB)(t),onDone:function(e,t){let s=[];if(s=e?document.querySelectorAll(".PhotosRestriction--blur, .PostPhotoRestriction--blur, .PostPhotoRestriction--blurWithText"):document.querySelectorAll(`.PhotosRestriction--blur[data-photo-id='${_}'], .PostPhotoRestriction--blur[data-photo-id='${_}'], .PostPhotoRestriction--blurWithText[data-photo-id='${_}']`),s.forEach((function(e){const o=e.getAttribute("data-photo-id"),s=parseInt(e.getAttribute("data-restriction-type"));if(o===_||Array.isArray(t)&&t.includes(s)){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vy)(e,"PhotosRestriction--blur"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vy)(e,"PostPhotoRestriction--blur"),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vy)(e,"PostPhotoRestriction--blurWithText");const _=e.querySelector(".PostPhotoRestriction__blurTitle"),t=e.querySelector(".PostPhotoRestriction__blurButton");_&&_.parentNode.removeChild(_),t&&t.parentNode.removeChild(t)}})),(0,_web_photos_photo_restriction_blur_global_state__WEBPACK_IMPORTED_MODULE_50__.zf)(_),cur.pvPhoto&&cur.pvCurData&&cur.pvCurData.photoRaw===_){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_2__.vy)(cur.pvPhoto,"ZPhotosRestriction--blur");const _=cur.pvPhoto.querySelector(".ZPhotosRestriction__title"),e=cur.pvPhoto.querySelector(".ZPhotosRestriction__text"),t=cur.pvPhoto.querySelector(".ZPhotosRestriction__button");_&&_.parentNode.removeChild(_),e&&e.parentNode.removeChild(e),t&&t.parentNode.removeChild(t),cur.pvCurData.restrictionBlur=!1,window.Photoview&&window.Photoview.doShow()}o&&o()}})}},__WEBPACK_DEFAULT_EXPORT__=Page},735181:(_,e,t)=>{t.d(e,{ZQ:()=>a,s8:()=>r});var o=t(164797),s=t(850013),n=t(377399);function r(_,e){_&&e&&o.F.logEvent({track_code:_,ref:e,item:s.Cq.WALL_ITEM},n.k.OPEN_AUDIO)}function a(_){return["feed_news_top","feed_top"].includes(_)?"feed_top":["feed_news_recent","feed_recent","feed"].includes(_)?"feed_recent":["feed_comments","feed_comments_top","feed_comments_recent","comments"].includes(_)?"feed_comments":["feed_recommended_top","feed_recommended_recent","feed_recommendations","feed_suggestions","recommended"].includes(_)?"feed_recommended":"other"}},19929:(_,e,t)=>{t.d(e,{M:()=>s,S:()=>o});const o={up:{visible:.35,invisible:.65},down:{visible:.35,invisible:.65}},s=0},849665:(_,e,t)=>{t.d(e,{w:()=>s});var o=t(973650);class s{resetTime(){this._startView=-1,this._endView=-1}setSeenState(){this.state="seen",this._endView=Date.now(),this._duration=this._endView-this._startView,this.onEndViewCallback?.(this)}setVisibleState(){this.state="visible",this._startView=Date.now(),this.onStartViewCallback?.(this)}setInvisibleState(){this.state="invisible",this.resetTime()}updateBlockStatsSeen(){this._isBlockStatsSeen=!0}updateVisibility(_){"visible"===this.state&&"invisible"===_?this.setSeenState():"invisible"===this.state&&"visible"===_?this.setVisibleState():"reset"===_?this.setInvisibleState():"visible"===this.state&&"forceEndView"===_&&this.setSeenState()}calculateVisibility({viewPortData:_,scrollDirection:e,clientHeight:t}){const s=this._el?.getBoundingClientRect();if(!s)return this;const{isVisible:n}=(0,o.n5)(s,_,e,t,"seen"===this.state);return this.updateVisibility(n?"visible":"invisible"),this}calcRect(){const{width:_,height:e}=this._el.getBoundingClientRect();this._height=e,this._width=_}getState(){return this.state}get startView(){return this._startView}get endView(){return this._endView}get el(){return this._el}get duration(){return this._duration}get width(){return this._width}get height(){return this._height}get id(){return this._id}get postRawId(){return this._postId}get index(){return this._index}get trackCode(){return this._trackCode}get screen(){return this._screen}get itemType(){return this._itemType}get block(){return this._block}get long(){return this._long}get hash(){return this._hash}get adView(){return this._adView}get isBlockStatsSeen(){return this._isBlockStatsSeen}get isAdsPostClicked(){return this._isAdsPostClicked}get audienceResearchData(){return this._audienceResearchData}constructor(_,e){this._startView=-1,this._endView=-1,this.state="invisible",this._postBoundingClientRect=_.getBoundingClientRect(),this._el=_,this._width=this._postBoundingClientRect.width,this._height=this._postBoundingClientRect.height,this._id=e.id,this._postId=e.postId,this._index=e.index,this._trackCode=e.trackCode,this._screen=e.screen,this._itemType=e.itemType,this._audienceResearchData=e.audienceResearchData,this._block=e.block,this._adView=e.adView,this._hash=e.hash,this._isBlockStatsSeen=!1,this._isAdsPostClicked=!1,this.onStartViewCallback=e.onStartView,this.onEndViewCallback=e.onEndView}}},973650:(_,e,t)=>{t.d(e,{S4:()=>n,n5:()=>s});var o=t(19929);function s(_,e,t,s,n=!1){return function(_,e,t,o=1){const s=t-e.bottomMenuHeight-e.headerHeight,n=_.top>=e.headerHeight,r=_.bottom<=s,a={isVisible:!0,visiblePostPart:1};if(n&&r)return a;const d=t<_.bottom?_.bottom-t:0,l=_.top<0?-_.top:0;if(d>0&&l>0)return a;const c=_.height-d-l,E=c*_.width,u=_.height*_.width,p=E/u;return{isVisible:p>=o,visiblePostPart:p}}(_,e,s,(r=n,a=t,o.S[a][r?"invisible":"visible"]));var r,a}function n(_){return String(1e3*_)}},715040:(_,e,t)=>{t.d(e,{eM:()=>s,jr:()=>n,vg:()=>o});const o={USER:0,MODERATOR:1,EDITOR:2,ADMINISTRATOR:3,HOST:4,EVENT_CREATOR:5,CREATOR:6,PSEUDO_LEVEL_ADVERTISER:100},s="settings",n="other"},976813:(_,e,t)=>{t.d(e,{M:()=>s,d:()=>o});const o={audio_click:"audio_click",click:"click",click_deeplink:"click_deeplink",click_post_link:"click_post_link",click_post_owner:"click_post_owner",click_pretty_card:"click_pretty_card",closed_by_user:"closed_by_user",hide:"hide",impression:"impression",impression_pretty_card:"impression_pretty_card",like_post:"like_post",load:"load",playback_started:"playback_started",playback_paused:"playback_paused",playback_resumed:"playback_resumed",playback_completed:"playback_completed",playhead_reached_value:"playhead_reached_value",playhead_viewability_value:"playhead_viewability_value",render:"render",share_post:"share_post",show_off:"show_off",video_fullscreen_off:"video_fullscreen_off",video_fullscreen_on:"video_fullscreen_on",video_pause:"video_pause",video_play:"video_play",video_play_100:"video_play_100",video_resume:"video_resume",video_start:"video_start",video_volume_off:"video_volume_off",video_volume_on:"video_volume_on",viewability_duration:"viewability_duration",viewability_measurable:"viewability_measurable",viewability_unmeasurable:"viewability_unmeasurable",viewin:"viewin",volume_off:"volume_off",volume_on:"volume_on",error:"error"},s="._ads_block_data_w"},847315:(_,e,t)=>{t.d(e,{s:()=>r});var o=t(513151);const s=6,n="tmrPostViewEnabledAllPosts";function r(){(function(){const _=window.cur,e=_?.[n];if(e)return!0;return!1})()&&(0,o.Tw)(s)}},164797:(_,e,t)=>{t.d(e,{F:()=>r});var o=t(35332),s=t(17697),n=t(528854);const r=new class{logEvent(_,e){const t={type:o.X.TYPE_FEED_INTERACTION_ITEM,[o.X.TYPE_FEED_INTERACTION_ITEM]:_},s={type:e};this.clickStatCollector.logEvent(t,s)}constructor(){this.productStatCollector=new s.H,this.clickStatCollector=new n.M(this.productStatCollector)}}},557961:(_,e,t)=>{function o({sizes:_,filter:e}){return _.filter((_=>e.includes(_.type))).reduce(((_,e)=>(e.url&&(_[e.type]=e.url,_[e.type+"_"]=[e.url,e.width,e.height]),_)),{})}t.d(e,{H:()=>o})},508584:(_,e,t)=>{t.d(e,{ej:()=>d,fV:()=>a,hh:()=>l,tN:()=>c});var o=t(602882),s=t(735181),n=t(214578),r=t(419299);function a({isAudioChanged:_,attachElement:e}){if(!_||!e)return;const t=(0,o.J8)(e),n=(0,o.at)();(0,s.s8)(t,n)}function d(_){return"Post/ownerLinkClick"!==_?.getAttribute("data-task-click")&&!_?.closest(".PostActivityCaption, .PostActivityBar")&&!_?.closest(".ui_actions_menu_item")}const l=(_,e,t)=>{let o=document.getElementById("show_more_link"),s=o?.offsetTop??0;o&&!o.seen&&s>=e&&s<e+t&&(o.seen=Date.now(),(0,r.Jx)("feed_load_more_seen",(0,n.Zx)(o),_))};function c(_){return{asc:"sort_oldest",desc:"sort_latest",smart:"sort_popular"}[_]}},438575:(_,e,t)=>{t.d(e,{b:()=>w});var o=t(602882),s=t(508584),n=t(377399),r=t(342196),a=t(849665),d=t(19929),l=t(847315),c=t(852631),E=t(618728),u=t(976813),p=t(9467),b=t(323018),P=t(831152);var h=t(554490),D=t(623384),M=t(378643);class w{static new(){return new w}static getItemType(_){return((_,e=u.M)=>{if(!(_&&_ instanceof HTMLElement))return!1;const t=(0,p.z2)("post_adblock_protection_promo")?b.h.getInstance().lookupSelector(e):e;return _.matches(t)||(0,P.t9)(_)})(_)?n.k.ADS:n.k.POST}static getPostWithMeta(_){return _.id?.startsWith("feed_repost")?_.firstElementChild:_}cleanUpEventHandlers(){for(let _ of Object.values(this.eventHandlersCleanupFunctions))_()}isAllowedPost(_){return!Boolean((0,r.Ty)(_.el,".FeedBlockWrap"))}extractIdsFromPost(){return null}createObservingPost(_,e,t){const s=w.getPostWithMeta(_)??_,n=(0,o.J8)(s),r=(0,o.at)(),d=(0,h._H)(s);return new a.w(_,{el:_,id:_.id,postId:s.getAttribute("data-post-id"),audienceResearchData:d,index:e,trackCode:n,screen:t?.screen??r,itemType:w.getItemType(s),onEndView:_=>{t?.onEndView?.(_)},onStartView:_=>{t?.onStartView?.(_)}})}onViewStarted(_){_&&_.itemType===n.k.POST&&(0,l.s)()}onViewEnded(_){_&&this.isFeedAudienceResearchEnabled&&this.audienceResearchService?.send({urls:_.audienceResearchData?.urls,events:_.audienceResearchData?.events,surface:(0,D.x)(_.screen)})}get isFeedAudienceResearchEnabled(){return(0,p.AW)("feed_audience_research")}onScroll(_,e){let t=(0,o.at)();(0,s.hh)(t,e,_)}onFlushSeenPost(){}onNav(){this.cleanUpEventHandlers()}getFeedPosts(){return(0,c.Wz)("#feed_rows")}initPostModalHandler(_){const e=(0,E.Ih)(_);this.eventHandlersCleanupFunctions.wkview_close=()=>{e()}}constructor(){this.eventHandlersCleanupFunctions={},this.audienceResearchService=(0,M.L)(),this.isPostModalOpened=(0,E.MQ)(),this.selectors={postSelector:".feed_row > div"},this.intersectionThreshold=d.S.down.visible,this.shouldCheckAdStartIntersecting=!0}}},852631:(_,e,t)=>{t.d(e,{Wz:()=>c,Rh:()=>l});var o=t(178009),s=t(326107),n=t(602882),r=t(831152);const a=_=>_.getAttribute("data-post-track-code");var d=t(9467);const l=_=>{if(!(_ instanceof HTMLElement))return{};let e=(0,s.qh)((0,o.Vu)(_).children,_),t=_.firstElementChild;if(!(t instanceof HTMLElement))return{};for(;t&&t.id.startsWith("moat");)t=(0,o.qA)(t);if(!(t instanceof HTMLElement))return{};let l,c,E,u=/^post(-?\d+_\d+)$/,p={};if("ads_feed_placeholder"===t.id)return p;const b=window.cur,P=(0,d.z2)("feed_add_track_code_to_repost_view_stats");p={module:(0,n.qE)(b.module,b.section,b.subsection),index:e},P&&(p.codes={}),"feed"===b.module&&"search"===b.section&&(p.q=b.q);let h=(0,r.WN)(t,"ad-view");h&&(p["ad_"+h]=1);let D=t.getAttribute("post_view_hash");D&&(p.hash=D);let M=a(t);if("block_"===t.id.substr(0,6)){p[t.id]=1,p.block=t.id.substr(6);let _=(0,o.CF)(t,"data-contain");_&&_.split(",").forEach((function(_){const e=_.split(":");p[e[0]]=(0,s.Jk)(e[1])||1}))}else if(c=t.id.match(u))p[c[1]]=1;else if(c=t.id.match(/^post(adsite.*)$/))p[c[1]]=1;else if(l=t.className,c=l.match(/feed_reposts_wrap(-?\d+_\d+)/)){if(E=(0,o.yQ)(t),(0,o.nB)((0,o.yQ)(E),"post_copy")&&(p[c[1]]=-1),(c=(0,o.yQ)(E)?.id.match(u))&&(p[c[1]]=1),E.firstElementChild&&P&&(p.codes[c[1]]=a(E.firstElementChild)),(0,o.zN)(E=(0,o.qA)(E)))for(E=(0,o.yQ)(E);E;E=(0,o.qA)(E))(c=E?.id.match(u))&&(p[c[1]]=1,P&&(p.codes[c[1]]=a(E)))}else if(c=l.match(/feed_repost(-?\d+_\d+)/)){if(E=(0,o.yQ)(t),!E)return p;(0,o.nB)(E,"post_copy")&&(p[c[1]]=-1),(c=E.id.match(u))&&(p[c[1]]=1),!M&&P&&(M=a(E))}else{let _=t.id;if((0,o.nB)(t,"post_photos")){E=(0,o.vo)("post_image",t,"a");const e=E?.querySelector?.("[data-post-id]")?.getAttribute("data-post-id");e&&(c=e.match(/^(-?\d+_p?\d+)$/),c&&(_=c[1]))}p[_]=1}return!M||h&&!(0,d.z2)("feed_ad_post_view_track_code_enabled")||(p.trackCode=M),p};((_,e)=>{let t,o=!1})((()=>(0,o.ge)("page_header").offsetHeight),(_=>!!_));const c=_=>document.querySelectorAll(`${_} .feed_row`)},915285:(_,e,t)=>{t.d(e,{Ef:()=>f,Mg:()=>A,I5:()=>L,XF:()=>g,Q:()=>h,lW:()=>M,wr:()=>D,gM:()=>O,YS:()=>w,DO:()=>P,kH:()=>m});var o=t(956905),s=t(917128),n=t(178009),r=t(2096),a=t(799835),d=t(877791),l=t(33556),c=t(978642);const E=_=>{if(!_)return{width:0,height:0};const e=_.getBoundingClientRect();return{width:e.width,height:e.height}};var u=t(9467),p=t(843165),b=t(70556);function P(_,e,t,n={}){return window.cur.viewAsBox?(window.cur.viewAsBox(),(0,o.TL)(t)):!(0,s.fi)("al_page.php",{act:"box",oid:_,tab:e},{cache:1,params:{...n}},t)}function h(_,e,t,o,l,c){(0,n.WU)(window.boxLayerBG),(0,n.WU)(window.boxLoader),(0,n.WU)(window.boxLayerWrap),(0,r.PO)(window.boxLoader),d.R.post("al_page.php",_,{onDone:function(_,r){(0,n.jD)(window.boxLayerBG),(0,n.jD)(window.boxLoader),(0,n.jD)(window.boxLayerWrap),r?(0,s.NL)((0,a.Xo)("global_error"),r):_.isNft?window.handleEditNftAvatar(_,e,!0,t):window.initOwnerAvatarEditForm({..._,source:c},e,!0,t,o,l)},onFail:function(_){return"string"==typeof _&&(0,r.Xv)(_),(0,n.jD)(window.boxLayerBG),(0,n.jD)(window.boxLoader),(0,n.jD)(window.boxLayerWrap),!0}})}function D(_,e,t,o,s,n,r){h({act:"owner_avatar_upload",oid:_,without_publish:o},e,t,s,n,r)}function M(_,e,t){h({act:"owner_avatar_edit",oid:_,hash:e},t)}function w(){return(0,s.rL)("al_login.php",{act:"box"}),!1}function O(_,e,t){const o="album"+e+"_0/rev",s=window.cur||{};!window.cur.pvData||window.cur.pvShown&&window.cur.pvListId==o||(0,c.ur)(e),(0,l.c)(_,o,{additional:{open_pe:1,pe_no_copy:1},loader:1,onHide:function(){s.pvEditorSaved&&(t?t():window.nav.reload())}})}const m=_=>{[document.querySelector("#top_profile_link img"),document.querySelector("#top_vkconnect_link img")].forEach((e=>{e&&(e.src=_)}))},g=(_,e)=>{const t=_.closest(".FeedVideosForYou")||_.closest(".PrimaryAttachmentCarousel, .attachmentCarousel"),o=_.closest(".ui_gallery_item, .attachmentCarousel__slide");if(!t||!o)return!1;const s=t.querySelectorAll(".ui_gallery_item, .attachmentCarousel__slide"),n=Array.from(s).indexOf(o),r=t.getBoundingClientRect(),a=r.x+(.3+.4*n/s.length)*r.width;return e.x<a&&a<e.x+e.width},f=(_,e=!0,t=!1)=>{if(!_)return{width:0,height:0};const o=_.querySelector(".post_replies_header")??void 0,s=_.querySelector(".replies")??void 0,n=E(_),r=E(o),a=E(s),d=t?n.height:n.height-r.height-a.height;return{width:e?Math.ceil(n.width):n.width,height:e?Math.ceil(d):d}},A=()=>{const _=(0,n.YC)("page_header")[1],e=(window.innerHeight||document.documentElement.clientHeight)-_,t=_+e/2,o=(0,u.z2)("feed_extra_long_attachments_autoplay")?1e3:800,s=Math.min(e,o);let r=100;return(0,u.z2)("feed_redesign2024_new_logic_for_video_autoplay_web")&&(r=Math.min(100,Math.max((0,u.Ct)("feed_redesign2024_percent_of_video_in_viewport_for_autoplay")||100,50))/100),{viewportHeight:e,viewportMiddle:t,activeSpace:s,percentForAutoplay:r}},C="feed-redesign-v3-scroll-restoration-value",L=()=>{const _=(0,b.R)("feed_scroll_restoration_console_debug","FEED_SCROLL_RESTORATION");_("initFeedManualScrollRestoration"),"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual"),window.nav.addInterseptingNavigationHandler((e=>{_(`initFeedManualScrollRestoration key is set ${C}`),p.Dq.setItem(C,e.opts.postId)})),window.addEventListener("popstate",(()=>{""!==window.location.pathname&&"/feed"!==window.location.pathname&&"/al_feed.php"!==window.location.pathname||(window.cur.__isPopstateForFeedScroll=!0,_("initFeedManualScrollRestoration popstate in feed"),window.addEventListener("react-container-loading-ended",(()=>{const e=p.Dq.getItem(C),t=document.querySelector(`#feed_wall #post${e}`);_("react-container-loading-ended event",t),t?.scrollIntoView({block:"center"}),p.Dq.removeItem(C),window.cur.__isPopstateForFeedScroll=!1}),{once:!0}))}))}},652432:(_,e,t)=>{t.d(e,{VB:()=>a,gZ:()=>d,rx:()=>r});var o=t(956905),s=t(257263),n=t(457735);const r=new Set(["internal","internal_hidden"]),a=new Set(["open_url","open_vkapp"]);function d(_,e,t,r){if((0,o.XT)(t))return;r&&(0,s.bl)({name:"owner_button_app_click",value:r});if("open_url"===_.type){if(_.is_internal&&_.open_in_layer){const e=window.nav.fromStr(_.url),t=e[0].replace("/","");return delete e[0],void(0,n.u)({w:t},null,null,{ads_params:e})}return window.nav.go(e,t)}return!1}},796319:(_,e,t)=>{t.d(e,{p:()=>s});var o=t(161933);const s=()=>(0,o.p4)()},618728:(_,e,t)=>{function o(){const _=window.wkcur.wkBox,e=window.wkcur.wkContent;return{wkBox:_,wkContent:e,wkContentText:e.firstElementChild,wkRight:window.wkcur.wkRight}}t.d(e,{Ih:()=>n,MQ:()=>s,r7:()=>o});const s=()=>!!window.cur.wallLayer,n=_=>{const e=()=>{_()};return window.addEventListener("wkview_close",e),()=>{window.removeEventListener("wkview_close",e)}}},427325:(_,e,t)=>{t.d(e,{N:()=>a});var o=t(331635),s=t(327813),n=t(819300),r=t(42107);class a{get ownerGroup(){return this._ownerGroup}get isLoadingOwnerGroup(){return this._isLoadingOwnerGroup}[r.zr](){this.fetchGroupsByIdsController?.abort("destroy")}constructor(_){this.groupsProvider=_,this._ownerGroup=null,this._isLoadingOwnerGroup=!1,this.fetchGroupsByIdsController=null,this.ensureFetchGroup=async _=>{this.groupsProvider.getGroup(_)||(this._isLoadingOwnerGroup=!0,this.fetchGroupsByIdsController=new AbortController,await this.groupsProvider.fetchGroupsByIds({groupIds:[_],fields:["photo_100","members_count"]},{signal:this.fetchGroupsByIdsController.signal})),(0,s.h5)((()=>{this._ownerGroup=this.groupsProvider.getGroup(_)??null,this._isLoadingOwnerGroup=!1}))},(0,s.l_)(this)}}a=(0,o.Cg)([r.z8.transient(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[void 0===n.s?Object:n.s])],a)},798865:(_,e,t)=>{t.d(e,{v:()=>v});var o=t(221020),s=t(356035),n=t(265231),r=t(505174),a=t(213220),d=t(414108),l=t(946918),c=t(42107),E=t(331635),u=t(327813),p=t(78023),b=t(909589),P=t(651253);class h{ensureData(){return this.fetchPromise||(this.fetchPromise=this.fetchCommentGroupsInfo()),this.fetchPromise}async fetchCommentGroupsInfo(){try{const _=await this.accountApi.getCommentGroups({});return(0,u.h5)((()=>{this._data=_})),_}catch(_){if(_ instanceof Error)return void this.errorLogger.log(_);this.errorLogger.log(new Error("Fail to fetch account comment groups"))}}get data(){return this._data}constructor(_,e){this.accountApi=_,this.errorLogger=e,this._data=null,this.fetchPromise=void 0,(0,u.l_)(this)}}h=(0,E.Cg)([c.z8.global(),(0,E.Sn)("design:type",Function),(0,E.Sn)("design:paramtypes",[void 0===b.y?Object:b.y,void 0===P.v?Object:P.v])],h);var D=t(41914),M=t(916533),w=t(725308),O=t(931198),m=t(427325);class g{[c.Ts](){this.initAccountInfo(),this.setDefaultAuthor()}async initAccountInfo(){const _=await this.accountInfoService.ensure({fields:["community_comments"],shouldSyncCachedData:!0});await this.accountProfileInfoService.ensureData(),this.props.current.hasOtherGroups&&_.community_comments&&await this.accountCommentGroupsService.ensureData()}get userData(){const _=this.accountProfileInfoService.data;return _?{id:_.id,link:(0,O.D)(_),name:`${_.first_name} ${_.last_name}`,avatar:_.photo_200??""}:null}get groupsData(){const _=this.accountCommentGroupsService.data;if(_?.items?.length){const e=this.getOwnerDataService.ownerGroup;return _.items.filter((_=>_.id!==e?.id)).map((_=>({id:w.z.convertGroupIdToOwnerId(_.id),avatar:_.photo_100??"",name:_.name??"",link:(0,O.D)(_)})))}return null}get authorsList(){const _=[];this.userData&&_.push(this.userData);const e=this.getOwnerDataService.ownerGroup;return e&&this.isGroupAsAuthorAvailable()&&e.name&&_.push({id:w.z.convertGroupIdToOwnerId(e.id),avatar:e.photo_100??"",name:e.name,link:(0,O.D)(e)}),this.props.current.hasOtherGroups&&this.groupsData&&_.push(...this.groupsData),_}get currentUserId(){return this.authService.userId}get selectedAuthorId(){return this._selectedAuthorId}get selectedAuthor(){const _=this.authorsList.find((_=>_.id===this.selectedAuthorId));return _||null}isGroupAsAuthorAvailable(){return Boolean(this.getOwnerDataService.ownerGroup&&"number"==typeof this.getOwnerDataService.ownerGroup.admin_level&&this.getOwnerDataService.ownerGroup.admin_level>1)}constructor(_,e,t,o,s,n){this.authService=_,this.accountProfileInfoService=e,this.accountCommentGroupsService=t,this.accountInfoService=o,this.getOwnerDataService=s,this.props=n,this._selectedAuthorId=0,this.selectAuthorId=_=>{this._selectedAuthorId=_,this.props.current.onSelectAuthorId?.(_)},this.setDefaultAuthor=async()=>{await this.getOwnerDataService.ensureFetchGroup(this.props.current.communityGroupId),this.getOwnerDataService.ownerGroup&&this.isGroupAsAuthorAvailable()&&!this.props.current.userByDefault?this.selectAuthorId(w.z.convertGroupIdToOwnerId(this.getOwnerDataService.ownerGroup.id)):this.authService.userId&&this.selectAuthorId(this.authService.userId)},(0,u.l_)(this)}}g=(0,E.Cg)([c.z8.transient(),(0,E.Sn)("design:type",Function),(0,E.Sn)("design:paramtypes",[void 0===M.u?Object:M.u,void 0===p.W?Object:p.W,void 0===h?Object:h,void 0===D.m?Object:D.m,void 0===m.N?Object:m.N,void 0===c.Ji?Object:c.Ji])],g);const{Provider:f,useModel:A}=(0,c.Qd)(g,{initInEffect:!1});var C=t(815287),L=t(865940);const I=(0,s.P)((function({children:_,authorsList:e,selectedAuthor:t,onSelectAuthorId:s}){const[n,a]=(0,C.useState)(!1);return(0,o.Y)(L.v,{width:280,trigger:"click",onShownChange:a,content:(0,o.Y)(o.FK,{children:e.map((_=>(0,o.Y)(L.v.Item,{keepOpen:!0,selected:t.id===_.id,onClick:()=>s(_.id),before:(0,o.Y)(r.e,{size:28,src:_.avatar,alt:""}),"data-testid":"comment-author-item","data-author-id":_.id,children:_.name},_.id)))}),"data-testid":"comment-select-author",children:_({isShown:n})})})),T=(0,s.P)((function(){const _=(0,l.B)(),{selectedAuthor:e,userData:t,authorsList:s,selectAuthorId:c,props:E}=A();return e?s.length>1?(0,o.Y)(n.g.Avatar,{hasHover:!1,src:e.avatar,disabled:E.current.disabled,"data-testid":"comment-author-avatar","data-selected-author-id":e.id,alt:"",size:E.current.avatarSize,children:!E.current.disabled&&(0,o.Y)(I,{authorsList:s,selectedAuthor:e,onSelectAuthorId:c,children:({isShown:e})=>(0,o.Y)(r.e.Overlay,{visibility:e?"always":"on-hover",theme:"dark","aria-label":_.getLang("communityreview_comment_input_select_author"),children:E.current.avatarSize&&E.current.avatarSize<28?(0,o.Y)(a.k,{}):(0,o.Y)(d.v,{})})})}):t?.avatar?(0,o.Y)(n.g.Avatar,{src:t.avatar,href:t.link,"aria-label":t.name,disabled:E.current.disabled,alt:"","data-testid":"comment-author-avatar",size:E.current.avatarSize}):null:null})),v=(0,c.jn)(f,T)},671502:(_,e,t)=>{function o(){const{clientWidth:_,clientHeight:e}=document.documentElement;return{width:_,height:e}}t.d(e,{M:()=>o})},685860:(_,e,t)=>{t.d(e,{Y:()=>s});var o=t(671502);function s(_,e=50,t=null,s){const n=t?t.left:0,r=t?t.top:0;let a=(0,o.M)();const d=_.getBoundingClientRect(),l=function(_){const{width:e,height:t}=_.getBoundingClientRect();return e&&t?{width:e,height:t}:{width:_.offsetWidth,height:_.offsetHeight}}(_),c=l.width*e/100,E=l.height*e/100;if(s){if(s.width>a.width)return!1;if(s.height>a.height)return!1;a=s}return!(d.left+l.width<n+c)&&(!(d.left+c>a.width)&&(!(d.top+l.height<r+E)&&!(d.top+E>a.height)))}},41914:(_,e,t)=>{t.d(e,{m:()=>d});var o=t(331635),s=t(327813),n=t(909589),r=t(916533),a=t(42107);class d{async fetch({fields:_=[],shouldSyncCachedData:e},t){const o=e&&this.cache?.fields?.size?Array.from(new Set([..._,...this.cache?.fields])):_,n={fields:o.join(",")},r=this.accountApi.getInfoWithPrefetch(n,t),a=await r;return(0,s.h5)((()=>{this.cache={data:a,fields:new Set(o),userId:this.authService.ensureUserId()}})),a}async ensure({fields:_=[],shouldSyncCachedData:e},t){if(this.cache?.userId===this.authService.ensureUserId()){if(this.cache.fields.size&&_.length?new Set([...this.cache.fields,..._]).size===this.cache.fields.size:!this.cache.fields.size)return this.cache.data}return this.fetch({fields:_,shouldSyncCachedData:e},t)}async changeMultipleFields(_,e){const t=Object.keys(_).filter((e=>void 0!==_[e])),o=await Promise.allSettled(t.map((t=>this.accountApi.setInfo({name:t,value:_[t]},e)))),s=o.reduce(((_,e)=>("fulfilled"===e.status&&_++,_)),0);if(!s)throw new Error("Settings could not be applied",{cause:o});return s!==o.length&&console.warn("Not all of settings were successfully applied",o),o}constructor(_,e){this.accountApi=_,this.authService=e,this.cache=null,(0,s.l_)(this)}}d=(0,o.Cg)([a.z8.container(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[void 0===n.y?Object:n.y,void 0===r.u?Object:r.u])],d)},264643:(_,e,t)=>{t.d(e,{L:()=>r});var o=t(331635),s=t(42107),n=t(289375);class r{logBaseEvent({event:_,ownerId:e,itemId:t,screen:o}){this.productionStats.send({screen:o,type:"type_view",type_view:{item:{type:"market_item",id:t,owner_id:e},type:"type_market_view",type_market_view:_}})}viewItem({itemId:_,ownerId:e,screen:t,searchQueryId:o,itemIdx:s,referrerItemId:n,referrerOwnerId:r,trafficSource:a,referrerItemType:d,refSource:l}){this.logBaseEvent({screen:t,ownerId:e,itemId:_,event:{type:"type_market_view_item",item_id:_,owner_id:e,search_query_id:o,referrer_item_id:n,referrer_owner_id:r,item_idx:s,traffic_source:a,referrer_item_type:d,ref_source:l}})}viewItemMedia({itemId:_,ownerId:e,screen:t,media:o,sourceUrl:s,previousScreen:n,refSource:r,fomoLabels:a,context_content:d,parent_context_content:l}){this.logBaseEvent({screen:t,ownerId:e,itemId:_,event:{previous_screen:n,source_url:s,ref_source:r,type:"type_market_view_item_media",type_market_view_item_media:{media:o,fomo_labels:a,context_content:d,parent_context_content:l}}})}constructor(_){this.productionStats=_}}r=(0,o.Cg)([s.z8.container(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[void 0===n.X?Object:n.X])],r)},830443:(_,e,t)=>{t.d(e,{O:()=>l});var o=t(434518),s=t(763812),n=t(327813),r=(0,s._)("_isDestroyed"),a=(0,s._)("_disposers"),d=(0,s._)("_assertNotDestroyed");class l{reaction(_,e,t){(0,o._)(this,d)[d]();const s=(0,n.mJ)(_,e,t);return(0,o._)(this,a)[a].add(s),this}autorun(_,e){(0,o._)(this,d)[d]();const t=(0,n.fm)(_,e);return(0,o._)(this,a)[a].add(t),this}dispose(){for(const _ of(0,o._)(this,a)[a])_();(0,o._)(this,a)[a].clear()}destroy(){this.dispose(),(0,o._)(this,r)[r]=!0}constructor(){Object.defineProperty(this,d,{value:c}),Object.defineProperty(this,r,{writable:!0,value:void 0}),Object.defineProperty(this,a,{writable:!0,value:void 0}),(0,o._)(this,r)[r]=!1,(0,o._)(this,a)[a]=new Set}}function c(){if((0,o._)(this,r)[r])throw new Error("ReactionsAggregator is destroyed")}},404636:(_,e,t)=>{t.d(e,{EZ:()=>n,Eu:()=>r});var o=t(815287);const s=(0,o.createContext)(0),n=s.Provider,r=()=>{const _=(0,o.useContext)(s);return{level:_,isFirstLevel:_<=1}}}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/core_spa/chunks/28254.bec28d97.js")}catch(_){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/core_spa/chunks/28254.bec28d97.js",_),_}