try{(self.webpackChunkvk=self.webpackChunkvk||[]).push([[27255],{113570:(t,e,i)=>{i.d(e,{EY:()=>d});var n=i(209051),s=i(648536),r=i(799609),o=i(684574),a=i(170774);function d(t){const{duration:e}=t,i=function(t){const{legal_notices_type:e}=t;return(0,n.O)(e??0)}(t),s=t?.podcast_info?.plays;return{identity:(0,r.z)(t),title:t.title,cover:c(t),url:t.url||null,isExplicit:i.isExplicit,legal:i,authors:(0,a.YC)(t),duration:Number.isFinite(e)?e:void 0,isBlocked:u(t),plays:Number.isFinite(s)?s:void 0}}function c(t){const e=t.album?.thumb??t?.thumb,i=t.album?.main_color||t.main_color;return e?(0,s.X)(e,i):null}function u({dmca_blocked:t,content_restricted:e}){return!!t||(0,o.E)(e)&&0!==e}},799609:(t,e,i)=>{function n(t){return{id:t.id,ownerId:t.owner_id,accessKey:t.access_key}}i.d(e,{z:()=>n})},320366:(t,e,i)=>{i.d(e,{h:()=>n});var n=function(t){return t.MusicTrack="music_track",t.MusicSnippet="music_snippet",t.PodcastEpisode="podcast_episode",t.Radio="radio",t}({})},170774:(t,e,i)=>{i.d(e,{YC:()=>s,ue:()=>r});var n=i(986609);function s(t){return{main:t?.main_artists?.map(r)??[],feat:t?.featured_artists?.map(r)??[],raw:t.artist}}function r(t){return{name:t.name,avatar:o(t)}}function o(t){const e=t.photo;return e?(0,n._0)(e):null}},585666:(t,e,i)=>{i.d(e,{f:()=>c});var n=i(434518),s=i(763812),r=i(331635),o=i(327813),a=i(682941),d=(0,s._)("_makeCachedDataGetter");class c{get(t,e){const i=this.getEntityKey(t,e);let n=this.entities.get(i);if(n)return n;if(!e)return;const s=this.data.get(t);if(s){const r=this.constructEntity(this.makeEntityParams(t,s),e);n=r,this.entities.set(i,r)}return n}getStrict(t,e){const i=this.get(t,e);if(!i)throw new Error("Entity not created or lost cache");return i}create(t,e){const{identity:i,data:n}=t;if(this.setState(i,t.state),this.data.set(i,n),e){const e=this.constructEntity(this.makeEntityParams(i,n));this.entities.set(this.getEntityKey(t.identity),e)}const s=this.constructEntity(this.makeEntityParams(i,n),e);return this.entities.set(this.getEntityKey(t.identity,e),s),s}getEntityKey(t,e){const i=e&&this.getContextKey(e);return`${t.fullId}${i??""}`}makeEntityParams(t,e){return{identity:t,getData:(0,n._)(this,d)[d](t,e),attachContext:e=>this.getStrict(t,e)}}constructor(){Object.defineProperty(this,d,{value:u}),this.entities=new Map,this.data=new a.W,(0,o.Gn)(this)}}function u(t,e){let i=e;return()=>{let e=this.data.get(t);return e&&(i=e),e??i}}(0,r.Cg)([o.sH],c.prototype,"entities",void 0),(0,r.Cg)([o.sH],c.prototype,"data",void 0),(0,r.Cg)([o.XI,(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",["undefined"==typeof CreateParams?Object:CreateParams,"undefined"==typeof Context?Object:Context]),(0,r.Sn)("design:returntype",Object)],c.prototype,"create",null)},986609:(t,e,i)=>{function n(t,e){return{sizes:s(t),mainColor:e}}function s(t){return t.length?t.map(r):[]}function r(t){return{width:t.width,height:t.height,src:t.url}}i.d(e,{_0:()=>n})},209051:(t,e,i)=>{function n(t){return{isExplicit:!!(2&t),isForeignAgent:!!(4&t)}}i.d(e,{O:()=>n})},667260:(t,e,i)=>{i.d(e,{f:()=>h});var n=i(434518),s=i(763812),r=i(331635),o=i(327813);function a(t){return`${t.width}x${t.height}`}function d(t){return[t.main.map((({name:t})=>t)).filter(Boolean).join(", "),t.feat.map((({name:t})=>t)).filter(Boolean).join(", ")].filter(Boolean).join(" . feat ")||t.raw}var c=(0,s._)("_identity"),u=(0,s._)("_context"),p=(0,s._)("_getData"),l=(0,s._)("_attachContext");class h{get identity(){return(0,n._)(this,c)[c]}get context(){return(0,n._)(this,u)[u]}attachContext(t){const e=(0,n._)(this,l)[l];if(!e)throw new Error("Audio is not contextable");return e(t)}get data(){return(0,n._)(this,p)[p]()}get type(){return this.data.type}get url(){return this.data.url}get title(){return this.data.title}get cover(){return this.data.cover}get isExplicit(){return this.data.isExplicit}get legal(){return this.data.legal}get authors(){return this.data.authors}get duration(){return this.data.duration}get plays(){return this.data.plays}get isBlocked(){return this.data.isBlocked}get mediaMetadata(){const{authors:t,cover:e}=this;return{title:this.title,artist:t&&d(t),artwork:e?(i=e,i.sizes.map((t=>({sizes:a(t),src:t.src})))):[]};var i}getContextStrict(){const{context:t}=this;if(!t)throw new Error("Audio is not contextual");return t}constructor(t){Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),(0,n._)(this,c)[c]=t.identity,(0,n._)(this,u)[u]=t.context??null,(0,n._)(this,p)[p]=t.getData,(0,n._)(this,l)[l]=t.attachContext,(0,o.Gn)(this)}}(0,r.Cg)([o.EW,(0,r.Sn)("design:type",void 0),(0,r.Sn)("design:paramtypes",[])],h.prototype,"data",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],h.prototype,"type",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],h.prototype,"url",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],h.prototype,"title",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],h.prototype,"cover",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],h.prototype,"isExplicit",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],h.prototype,"legal",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],h.prototype,"authors",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],h.prototype,"duration",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],h.prototype,"plays",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",Object),(0,r.Sn)("design:paramtypes",[])],h.prototype,"isBlocked",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type","undefined"==typeof MediaMetadataInit?Object:MediaMetadataInit),(0,r.Sn)("design:paramtypes",[])],h.prototype,"mediaMetadata",null)},315076:(t,e,i)=>{i.d(e,{w:()=>r});var n=i(331635),s=i(327813);class r{get isPending(){return this.toggleService.pending.has(this.identity)}get state(){return!!this.toggleService.state.get(this.identity)}activate(...[t]){return this.toggleService.activate(this.identity,t)}deactivate(...[t]){return this.toggleService.deactivate(this.identity,t)}toggle(t,e){return this.toggleService.toggle(this.identity,t,e)}constructor(t,e){this.identity=t,this.toggleService=e,(0,s.Gn)(this)}}(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],r.prototype,"isPending",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],r.prototype,"state",null)},104325:(t,e,i)=>{i.d(e,{c:()=>g});var n=i(331635),s=i(327813),r=i(228909),o=i(667260),a=i(434518),d=i(763812),c=(0,d._)("_identity"),u=(0,d._)("_service");class p{get data(){return(0,a._)(this,u)[u].get((0,a._)(this,c)[c])}get isExist(){return(0,a._)(this,u)[u].hasLyrics((0,a._)(this,c)[c])}ensure(){return(0,a._)(this,u)[u].ensure((0,a._)(this,c)[c])}constructor(t){Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,a._)(this,c)[c]=t.identity,(0,a._)(this,u)[u]=t.service,(0,s.Gn)(this)}}(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],p.prototype,"data",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],p.prototype,"isExist",null);var l=i(791115),h=i(315076);class y{create(t){return new l.w({identity:this.identity,trackCode:this.trackCode,service:this.service.get(t)})}constructor(t){this.identity=t.identity,this.trackCode=t.trackCode,this.service=t.service}}class g extends o.f{get subtitle(){return this.data.subtitle}get album(){return this.data.album}get hasLyrics(){return this.data.hasLyrics}get rightholderMarks(){return this.data.rightholderMarks}get apiAudio(){return this.data.apiAudio}get releaseAudioIdentity(){const t=this.data.releaseAudioIdentity;return t&&new r._(t)}get mediaMetadata(){return{...super.mediaMetadata,album:this.album?.title}}get releaseAudio(){const t=this.releaseAudioIdentity;return t?this.trackProvider.get(t)??null:null}get originalAudio(){if(this.releaseAudio)return this.releaseAudio;if(!this.isMine)return null;const t=this.service.myMusic.getSource(this.identity);return t?this.trackProvider.get(t)??null:null}get isMine(){return this.myMusic.isOwned}get specialProject(){return this.data.specialProject}constructor(t){super(t);const{identity:e}=this,{service:i}=t,n=this.context?.trackCode??null;this.trackProvider=t.trackProvider,this.service=i,this.myMusic=new l.w({identity:e,trackCode:n,service:i.myMusic,getHasOwnedStateFallback:()=>this.data.apiAudio.like}),this.groupsMusic=new y({identity:e,trackCode:n,service:i.groupMusicServices}),this.dislike=new h.w(e,i.dislikes),this.lyrics=new p({identity:e,service:i.lyrics}),(0,s.Gn)(this)}}(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],g.prototype,"subtitle",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],g.prototype,"album",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],g.prototype,"hasLyrics",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],g.prototype,"rightholderMarks",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",Object),(0,n.Sn)("design:paramtypes",[])],g.prototype,"apiAudio",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",Object),(0,n.Sn)("design:paramtypes",[])],g.prototype,"releaseAudioIdentity",null),(0,n.Cg)([s.$Z,(0,n.Sn)("design:type","undefined"==typeof MediaMetadataInit?Object:MediaMetadataInit),(0,n.Sn)("design:paramtypes",[])],g.prototype,"mediaMetadata",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",Object),(0,n.Sn)("design:paramtypes",[])],g.prototype,"releaseAudio",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",Object),(0,n.Sn)("design:paramtypes",[])],g.prototype,"originalAudio",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],g.prototype,"isMine",null),(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],g.prototype,"specialProject",null)},72332:(t,e,i)=>{i.d(e,{L:()=>o});var n=i(331635),s=i(327813),r=i(104325);class o extends r.c{get isFocusTrack(){return this.data.isFocusTrack}constructor(t){super(t),(0,s.Gn)(this)}}(0,n.Cg)([s.EW,(0,n.Sn)("design:type",void 0),(0,n.Sn)("design:paramtypes",[])],o.prototype,"isFocusTrack",null)},627255:(t,e,i)=>{i.d(e,{E:()=>w});var n=i(434518),s=i(763812),r=i(331635),o=i(327813),a=i(42107),d=i(444155),c=i(228909),u=i(144819),p=i(432320),l=i(585666),h=i(799609),y=i(710231),g=i(72332),m=i(990126),f=i(630769),v=i(715280);function _(t){let e=(0,v.i)(t);return e??(e=(0,h.z)(t)),{hasLyrics:t.has_lyrics,liked:t.like,disliked:t.dislike,originalIdentity:e}}var S=(0,s._)("_corruptedIdentities"),E=(0,s._)("_setMyMusicState");class w extends l.f{get corruptedIdentities(){return(0,n._)(this,S)[S]}createContextualFromAPI(t,e){const i=t.track_code;if(!i)throw new Error("trackCode is not defined in source");return this.createFromAPI(t).attachContext({...e,trackCode:i})}createFromAPI(t){return this.create({identity:new c._((0,h.z)(t)),data:(0,f.qF)(t),state:_(t)})}isFetchingAudio(t){return this.pendingEntities.has(this.toEntityIdentity(t))}async ensure(t){const e=this.get(t);return e||this.fetch(t)}async fetch(t){const[e]=await this.fetchMany([t]);if(!e)throw y.v.createNotFoundError("Server did not return the audio");return e}async fetchMany(t){if(!t.length)return[];try{this.markPending(t);const e=await this.repository.audioGetById({audios:t.map(u.yP).join(",")});return(0,o.h5)((()=>{const i=e.map((t=>this.createFromAPI(t)));return this.unmarkPending(t),i}))}catch(e){throw this.unmarkPending(t),e}}async ensureMany(t){let e=[];const i=[],n=[];for(const i of t){const t=this.get(i);t?e.push(t):n.push(i)}if(!n.length)return e;await this.fetchMany(n),e=[];for(const n of t){const t=this.get(n);t?e.push(t):(console.warn(`Audio ${n.fullId} not found in audio.getById response`),i.push(n))}return this.markCorrupted(i),e}constructEntity(t,e){return new g.L({...t,context:e,trackProvider:this,service:this.service})}setState(t,e){const{hasLyrics:i,disliked:s}=e;(0,n._)(this,E)[E](t,e),void 0!==i&&this.service.lyrics.setHasLyrics(t,i),void 0!==s&&this.service.dislikes.setState(t,s)}getContextKey(t){return`${t.list?.identity.fullId??""}/${t.trackCode}`}toEntityIdentity(t){return new c._(t)}markPending(t){t.forEach((t=>this.pendingEntities.add(t)))}unmarkPending(t){t.forEach((t=>this.pendingEntities.delete(t)))}markCorrupted(t){t.forEach((t=>(0,n._)(this,S)[S].add(t)))}constructor(t,e){super(),Object.defineProperty(this,E,{value:b}),Object.defineProperty(this,S,{writable:!0,value:void 0}),this.repository=t,this.service=e,this.pendingEntities=new d.S,(0,n._)(this,S)[S]=new d.S,(0,o.Gn)(this)}}function b(t,e){const{liked:i,originalIdentity:n}=e,{myMusic:s}=this.service;let r;void 0!==i&&(r=this.toEntityIdentity(n),s.setState(r,t,i))}(0,r.Cg)([o.XI,(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,r.Sn)("design:returntype",Promise)],w.prototype,"ensure",null),(0,r.Cg)([o.XI,(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,r.Sn)("design:returntype",Promise)],w.prototype,"fetch",null),(0,r.Cg)([o.XI,(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Object]),(0,r.Sn)("design:returntype",Promise)],w.prototype,"fetchMany",null),(0,r.Cg)([o.XI,(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Object]),(0,r.Sn)("design:returntype",Promise)],w.prototype,"ensureMany",null),(0,r.Cg)([o.XI,(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Object]),(0,r.Sn)("design:returntype",void 0)],w.prototype,"markPending",null),(0,r.Cg)([o.XI,(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Object]),(0,r.Sn)("design:returntype",void 0)],w.prototype,"unmarkPending",null),(0,r.Cg)([o.XI,(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[Object]),(0,r.Sn)("design:returntype",void 0)],w.prototype,"markCorrupted",null),w=(0,r.Cg)([a.z8.global(),(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[void 0===p.J?Object:p.J,void 0===m.v?Object:m.v])],w)},630769:(t,e,i)=>{i.d(e,{yL:()=>y,ct:()=>h,qF:()=>l});var n=i(113570),s=i(320366),r=i(170774),o=i(161412);function a(t){return{main:t.main_artists?.map(d)??[],feat:t.featured_artists?.map(d)??[],raw:t.artist}}function d(t){return{...(0,r.ue)(t),id:t.id,avatar:(0,o.T)(t)}}var c=i(715280);function u(t,e){return{...(0,n.EY)(e),type:t,hasLyrics:e.has_lyrics??!1,authors:a(e),album:g(e),duration:e.duration,subtitle:e.subtitle??"",releaseAudioIdentity:(0,c.i)(e),rightholderMarks:e.rightholder_marks??[],apiAudio:e,specialProject:p(e.special_project_id)}}function p(t){return t?{id:t}:null}function l(t){return{...u(s.h.MusicTrack,t),isFocusTrack:t.is_focus_track??!1}}function h(t,e){return{...u(s.h.MusicSnippet,t),clip:e??null}}function y(t){return t?.clip_from&&t?.clip_to?{to:t.clip_to,from:t.clip_from}:null}function g(t){const{album:e}=t;return e?{id:e.id,ownerId:e.owner_id,title:e.title}:null}},715280:(t,e,i)=>{i.d(e,{i:()=>r});var n=i(961829),s=i(452200);function r(t){const{release_audio_id:e}=t;return e&&(0,n.e)(e)?(0,s.v)(e):null}},161412:(t,e,i)=>{i.d(e,{T:()=>s});var n=i(986609);function s(t){const e=t.photo;return e?(0,n._0)(e):null}},791115:(t,e,i)=>{i.d(e,{w:()=>c});var n=i(434518),s=i(763812),r=i(331635),o=i(327813),a=(0,s._)("_getHasOwnedStateFallback"),d=(0,s._)("_service");class c{get ownerId(){return(0,n._)(this,d)[d].ownerId}get hasOwned(){return!!((0,n._)(this,d)[d].get(this.identity)??(null==(0,n._)(this,a)[a]?void 0:(0,n._)(this,a)[a].call(this)))}get isOwned(){return(0,n._)(this,d)[d].isOwned(this.identity)}get isDeleted(){return(0,n._)(this,d)[d].isDeleted(this.identity)}get isPending(){return(0,n._)(this,d)[d].checkPending(this.identity)}add(t){if(!this.trackCode)throw new Error("trackCode required");return(0,n._)(this,d)[d].add(this.identity,{...t,trackCode:this.trackCode})}delete(t){return(0,n._)(this,d)[d].delete(this.identity,t)}restore(t){return(0,n._)(this,d)[d].restore(this.identity,t)}constructor(t){Object.defineProperty(this,a,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),this.identity=t.identity,this.trackCode=t.trackCode,(0,n._)(this,d)[d]=t.service,(0,n._)(this,a)[a]=t.getHasOwnedStateFallback??null,(0,o.Gn)(this)}}(0,r.Cg)([o.EW,(0,r.Sn)("design:type",void 0),(0,r.Sn)("design:paramtypes",[])],c.prototype,"hasOwned",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",void 0),(0,r.Sn)("design:paramtypes",[])],c.prototype,"isOwned",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",void 0),(0,r.Sn)("design:paramtypes",[])],c.prototype,"isDeleted",null),(0,r.Cg)([o.EW,(0,r.Sn)("design:type",void 0),(0,r.Sn)("design:paramtypes",[])],c.prototype,"isPending",null)},432320:(t,e,i)=>{i.d(e,{J:()=>_});var n=i(434518),s=i(763812),r=i(331635),o=i(327813),a=i(42107),d=i(414618),c=i(768641),u=i(228909),p=i(275860);class l extends p.v{constructor(t){super(t),(0,o.Gn)(this,{emit:o.XI})}}var h=i(651253);class y{constructor(t){this.eventsEmitter=new l({catchListener:e=>{t.log(e)}})}}y=(0,r.Cg)([a.z8.global(),(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[void 0===h.v?Object:h.v])],y);var g=(0,s._)("_eventsEmitter"),m=(0,s._)("_createAudioFetchedEvent"),f=(0,s._)("_createPlaylistFetchedEvent"),v=(0,s._)("_createLyricsFetchedEvent");class _{async audioGetById(t,e){const i=await this.audioApi.getById(t,e);return(0,o.h5)((()=>{for(const e of i){const i=(0,n._)(this,m)[m]("audio.getById",{audio:e,urlType:"snippet"===t.url_type?"music_snippet":"default",ref:t.ref??null});(0,n._)(this,g)[g].emit("audioFetched",i)}return i}))}async audioGetAudiosByArtist(t,e){const i=await this.audioApi.getAudiosByArtist(t,e),s="audio.getAudiosByArtist";return(0,o.h5)((()=>{for(const e of i.items){const i=(0,n._)(this,m)[m](s,{audio:e,urlType:"snippet"===t.type?"music_snippet":"default",ref:null});(0,n._)(this,g)[g].emit("audioFetched",i)}for(const t of i.groups??[])(0,n._)(this,g)[g].emit("groupFetched",{group:t,method:s});for(const t of i.profiles??[])(0,n._)(this,g)[g].emit("userFetched",{user:t,method:s});return i}))}async audioGetRecommendations(t,e){const i=await this.audioApi.getRecommendations(t,e);return(0,o.h5)((()=>{for(const t of i.items){const e=(0,n._)(this,m)[m]("audio.getRecommendations",{audio:t,urlType:"default",ref:null});(0,n._)(this,g)[g].emit("audioFetched",e)}return i}))}async audioGetAudioPreviewUrl(t,e){const i=u._.fromRawId(t.audio_id),s=await this.audioApi.getAudioPreviewUrl(t,e);return(0,o.h5)((()=>((0,n._)(this,g)[g].emit("getAudioPreviewUrlResponse",{identity:i,params:t,response:s}),s)))}async podcastsGetEpisode(t,e){const i=await this.podcastsApi.getEpisode(t,e);return(0,o.h5)((()=>{const e=i,s=(0,n._)(this,m)[m]("podcasts.getEpisode",{audio:e,urlType:"default",ref:t.ref??null});return(0,n._)(this,g)[g].emit("audioFetched",s),i}))}async getPlaylistByIdExtended(t,e){const i=await this.audioApi.getPlaylistByIdExtended(t,e),s="audio.getPlaylistById";return(0,o.h5)((()=>{const{playlist:e}=i,r=(0,n._)(this,f)[f](s,{playlist:e,ref:t.ref??null});this.context.eventsEmitter.emit("playlistFetched",r);for(const t of i.groups??[])(0,n._)(this,g)[g].emit("groupFetched",{group:t,method:s});for(const t of i.profiles??[])(0,n._)(this,g)[g].emit("userFetched",{user:t,method:s});return i}))}async getPlaylists(t,e){const i=await this.audioApi.getPlaylists(t,e),s="audio.getPlaylists";return(0,o.h5)((()=>{for(const t of i.items){const e=(0,n._)(this,f)[f](s,{playlist:t,ref:null});this.context.eventsEmitter.emit("playlistFetched",e)}for(const t of i.groups??[])(0,n._)(this,g)[g].emit("groupFetched",{group:t,method:s});for(const t of i.profiles??[])(0,n._)(this,g)[g].emit("userFetched",{user:t,method:s});return i}))}async podcastsGetEpisodes(t,e){const i=await this.podcastsApi.getEpisodes(t,e),s="podcasts.getEpisodes";return(0,o.h5)((()=>{for(const e of i.items){const i=(0,n._)(this,m)[m](s,{audio:e,urlType:"default",ref:t.ref??null});(0,n._)(this,g)[g].emit("audioFetched",i)}for(const t of i.groups??[])(0,n._)(this,g)[g].emit("groupFetched",{group:t,method:s});for(const t of i.profiles??[])(0,n._)(this,g)[g].emit("userFetched",{user:t,method:s});return i}))}async audioGetLyrics(t,e){const i=await this.audioApi.getLyrics(t,e);return(0,o.h5)((()=>{const t=(0,n._)(this,v)[v]("audio.getLyrics",{lyrics:i});return(0,n._)(this,g)[g].emit("lyricsFetched",t),i}))}constructor(t,e,i){Object.defineProperty(this,g,{get:S,set:void 0}),Object.defineProperty(this,m,{value:E}),Object.defineProperty(this,f,{value:w}),Object.defineProperty(this,v,{value:b}),this.audioApi=t,this.podcastsApi=e,this.context=i}}function S(){return this.context.eventsEmitter}function E(t,e){const{audio:i}=e;return{identity:new u._({id:i.id,ownerId:i.owner_id,accessKey:i.access_key}),audio:i,urlType:e.urlType,ref:e.ref,method:t}}function w(t,e){const{playlist:i,ref:n}=e;return{identity:new u._({id:i.id,ownerId:i.owner_id,accessKey:i.access_key}),playlist:i,ref:n,method:t}}function b(t,e){const{lyrics:i}=e;return{lyrics:i,method:t}}_=(0,r.Cg)([a.z8.global(),(0,r.Sn)("design:type",Function),(0,r.Sn)("design:paramtypes",[void 0===d.B?Object:d.B,void 0===c.M?Object:c.M,void 0===y?Object:y])],_)},768641:(t,e,i)=>{i.d(e,{M:()=>o});var n=i(331635),s=i(820282),r=i(42107);class o extends s.S{get namespace(){return"podcasts"}constructor(...t){super(...t),this.getPodcast=this.makeMethod("getPodcast"),this.getPodcasts=this.makeMethod("getPodcasts"),this.getEpisodes=this.makeMethod("getEpisodes"),this.getEpisode=this.makeMethod("getEpisode"),this.deleteEpisode=this.makeMethod("deleteEpisode"),this.restoreEpisode=this.makeMethod("restoreEpisode"),this.getGroupInfo=this.makeMethod("getGroupInfo"),this.subscribe=this.makeMethod("subscribe"),this.unsubscribe=this.makeMethod("unsubscribe")}}o=(0,n.Cg)([r.z8.global()],o)}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/core_spa/chunks/27255.74d4c7cd.js")}catch(t){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/core_spa/chunks/27255.74d4c7cd.js",t),t}