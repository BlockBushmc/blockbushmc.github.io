try{(self.webpackChunkvkweb=self.webpackChunkvkweb||[]).push([[53958],{335700:(t,e,i)=>{i.r(e),i.d(e,{UIGallery:()=>u,UI_GALLERY_CLASSNAME:()=>l.UI_GALLERY_CLASSNAME,UI_GALLERY_CONTENT_CLASSNAME:()=>l.UI_GALLERY_CONTENT_CLASSNAME,UI_GALLERY_INNER_CLASSNAME:()=>l.UI_GALLERY_INNER_CLASSNAME,uiGetGallery:()=>c});var s=i(558137),o=i(898848),a=i(939646),r=i(972332),n=i(478752),_=i(754866),l=i(15614);const d=(0,s.makeSharedState)("ui-gallery",(()=>({galleries:{},incIndex:0})),{version:0});function c(t){const e=(0,_.domData)((0,_.ge)(t),"gallery-id");return e&&d().galleries[e]}class u{_checkSizesAndUpdate(){return 0!==this._width&&0!==this._itemWidth||(this._width=Math.round((0,_.getSize)(this._el)[0]),this._itemWidth=(0,_.getSize)(this._items[0])[0],this._itemFullWidth=this._itemWidth+this._itemOffset),!(0===this._width||0===this._itemWidth)}_initScroll(){(this._opts.scrollX||this._opts.scrollY)&&(this._opts.isModernTransitionsEnabled||(0,r.addEvent)(this._innerCont,"DOMMouseScroll wheel",this._onWheelScroll.bind(this)))}_initArrows(){this._opts.noArrows?(0,_.addClass)(this._el,"ui_gallery_no_arrows"):(this._leftArrow=(0,_.geByClass1)("ui_gallery__arrow_left",this._el),this._rightArrow=(0,_.geByClass1)("ui_gallery__arrow_right",this._el),this._arrowWidth=(0,_.getSize)(this._leftArrow)[0],this._opts.isModernTransitionsEnabled?((0,r.addEvent)(this._leftArrow,"click",this._slide.bind(this,-1,void 0,{eventName:"arrow"})),(0,r.addEvent)(this._rightArrow,"click",this._slide.bind(this,1,void 0,{eventName:"arrow"}))):((0,r.addEvent)(this._leftArrow,"click",this._legacySlide.bind(this,-1,void 0,{eventName:"arrow"})),(0,r.addEvent)(this._rightArrow,"click",this._legacySlide.bind(this,1,void 0,{eventName:"arrow"}))),(0,r.addEvent)(this._leftArrow,"mouseover",this._onArrowMouseOver.bind(this,"left")),(0,r.addEvent)(this._leftArrow,"mouseout",this._onArrowMouseOut.bind(this)),(0,r.addEvent)(this._rightArrow,"mouseover",this._onArrowMouseOver.bind(this,"right")),(0,r.addEvent)(this._rightArrow,"mouseout",this._onArrowMouseOut.bind(this)))}_onWheelScroll(t){let e;if("wheel"==t.type)if(Math.abs(t.deltaY)>Math.abs(t.deltaX)){if(!this._opts.scrollY)return;e=-t.deltaY}else{if(!this._opts.scrollX)return;e=-t.deltaX}else if(void 0!==t.wheelDeltaY){if(!this._opts.scrollY)return;e=t.wheelDeltaY}else if(void 0!==t.wheelDelta)e=t.wheelDelta;else{if(!t.detail||1!==t.axis)return;e=-t.detail}e=this._scroll.rtlSame?-e:e,Math.abs(e)>=120&&(e=74*Math.max(-1,Math.min(1,e))),this._innerCont.scrollLeft-=e,this._checkItemsAfterScroll(this._innerCont.scrollLeft),(0,r.cancelEvent)(t)}_getScrollParams(){this._opts.shouldCheckGalleryViewed&&this._checkSizesAndUpdate();const t=this._width-2*this._arrowWidth,e=this._itemFullWidth>t;return{isItemBiggerThanWidth:e,scrollDistance:e?this._itemFullWidth:t}}_legacySlide(t,e,i){const{scrollDistance:s,isItemBiggerThanWidth:o}=this._getScrollParams();let n=this._innerCont.scrollLeft+(this._scroll.rtlSame?-t:t)*s;const l=this._innerCont.scrollWidth-this._width;this._scroll.negative?(n=Math.min(n,0),n=Math.abs(n)):n=Math.max(0,n),n=Math.min(l,n);const d=this._scroll.negative||this._scroll.rtlSame?-t:t;if(d>0&&n<l){n=Math.floor(n/this._itemFullWidth)*this._itemFullWidth}else if(d<0&&n>0){n=(o?Math.ceil(n/this._itemFullWidth):Math.floor(n/this._itemFullWidth))*this._itemFullWidth}if(this._opts.isFullSizeSlide&&(n=(this._visible.left+t)*this._itemFullWidth),0===n||n===l){const e=this._innerCont.scrollWidth;(0,_.addClass)(this._inner,"ui_gallery__inner_shift_instant"),this._onArrowMouseOut(),n&&(n+=t*(this._innerCont.scrollWidth-e))}this._scroll.negative&&(n=-n),(0,a.animate)(this._innerCont,{scrollLeft:n},{duration:Math.abs(this._innerCont.scrollLeft-n)+50,transition:a.Fx.Transitions.easeOutCubic}),this._checkItemsAfterScroll(n),setTimeout((()=>(0,_.removeClass)(this._inner,"ui_gallery__inner_shift_instant")),0),this._opts?.onSlide?.(t,{eventName:i?.eventName}),e&&(0,r.cancelEvent)(e)}_updateShift(t){let e=this._shift+t;const i=this._inner.scrollWidth-this._inner.clientWidth;e>i&&(e=i),e<0&&(e=0),this._shift=e}_slide(t,e,i){const{scrollDistance:s}=this._getScrollParams();this._updateShift(t*s),this._inner.style.transform=`translate3d(${-1*this._shift}px, 0, 0)`,this._checkItemsAfterScroll(this._shift),this._opts?.onSlide?.(t,{eventName:i?.eventName}),e&&(0,r.cancelEvent)(e)}_checkItemsAfterScroll(t,e){if(this._scroll.negative&&(t=Math.abs(t)),(!this._opts.shouldCheckGalleryViewed||this._visible.isGalleryViewed)&&(!this._opts.shouldCheckGalleryViewed||this._checkSizesAndUpdate())){if(this._opts.markOutside||this._opts.onViewItem){const i=this._itemWidth/3,s=(this._scroll.backward?this._inner.scrollWidth-this._width-t:t)-this._scrollOffset,o=t&&Math.floor(s/this._itemFullWidth),a=o*this._itemFullWidth+2*i;let r;r=this._scroll.backward?t+this._width<this._inner.scrollWidth-a:t>a;const l=Math.min(this._items.length-1,Math.floor((s+this._width)/this._itemFullWidth)),d=l*this._itemFullWidth+2*i;let c;if(c=this._scroll.backward?t>this._inner.scrollWidth-d:t+this._width<d,this._opts.onViewItem){const t=r?Math.min(this._items.length-1,o+1):o,i=c?Math.max(0,l-1):l;if(e||t!==this._visible.left||i!==this._visible.right){for(let s=t;s<=i;s++)(this._visible.left<0||e&&!(0,n.inArray)(this._items[s],this._visible.items)||s<this._visible.left||s>this._visible.right)&&this._opts.onViewItem(this._items[s],s);this._visible.left=t,this._visible.right=i,this._visible.items=this._items.slice(t,i+1)}}this._opts.markOutside&&(e?((0,_.geByClass)("ui_gallery_item_outside",this._inner).forEach((t=>{(0,_.removeClass)(t,"ui_gallery_item_outside")})),this._outside.left=-1,this._outside.right=-1):((o!==this._outside.left||!r)&&this._outside.left>=0&&((0,_.removeClass)(this._items[this._outside.left],"ui_gallery_item_outside"),this._outside.left=-1),(l!==this._outside.right||!c)&&this._outside.right>=0&&((0,_.removeClass)(this._items[this._outside.right],"ui_gallery_item_outside"),this._outside.right=-1)),r&&o!==this._outside.left&&((0,_.addClass)(this._items[o],"ui_gallery_item_outside"),this._outside.left=o),c&&l!==this._outside.right&&((0,_.addClass)(this._items[l],"ui_gallery_item_outside"),this._outside.right=l))}if(!this._opts.noArrows){const e=t>0,i=t+this._width<this._inner.scrollWidth;(0,_.toggleClass)(this._leftArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?i:e),(0,_.toggleClass)(this._rightArrow,"ui_gallery__arrow_visible",this._scroll.rtl&&!this._scroll.backward?e:i)}(!this._scroll.backward&&this._inner.scrollWidth-t-this._width<1e3||this._scroll.backward&&t<1e3)&&this._onLoadMore()}}_onArrowMouseOver(t){this._inner.classList.add(`ui_gallery__inner_shift_${t}`)}_onArrowMouseOut(){this._inner.classList.remove("ui_gallery__inner_shift_left"),this._inner.classList.remove("ui_gallery__inner_shift_right")}_onLoadMore(){!this._opts.onLoadMore||this._loadingMore||this._finised||(this._loadingMore=!0,this._opts.onLoadMore(this._items.length))}addMore(t,e){t=t||[],this.addItems(t),this._finised=!!e||!t.length,this._loadingMore=!1}addItems(t,e){if((t=t||[]).length){const i=e>=0&&e<this._items.length?this._items[e]:null;t.forEach((t=>{i?(0,_.domInsertBefore)(t,i):this._inner.appendChild(t)})),this.refresh()}}destroy(){(0,r.removeEvent)(this._innerCont),(0,r.removeEvent)(this._leftArrow),(0,r.removeEvent)(this._rightArrow),(0,_.domData)(this._el,"gallery-id",null),delete d().galleries[this._id],this._opts.onDestroy&&this._opts.onDestroy(),(0,_.re)(this._el)}removeItem(t){return(0,o.isNumeric)(t)&&(t=this._items[t]),!(!t||!(0,n.inArray)(t,this._items))&&((0,_.re)(t),this.refresh(),this._items.length||this.destroy(),!0)}refresh(){this._width=Math.round((0,_.getSize)(this._el)[0]),this._items=(0,_.geByClass)("ui_gallery_item",this._el),this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}scrollToDirection(t){this._opts.isModernTransitionsEnabled?this._slide(t,void 0,{eventName:"bullet"}):this._legacySlide(t,void 0,{eventName:"bullet"})}getItems(){return this._items}getVisibleItems(){return this._visible.items.map(((t,e)=>[t,this._visible.left+e]))}setGalleryViewed(){this._visible.isGalleryViewed=!0,this._checkItemsAfterScroll(this._innerCont.scrollLeft)}constructor(t,e){if(!t)throw new Error("No element was provided for UIGallery");if(!(t=(0,_.ge)(t)).classList.contains(l.UI_GALLERY_CLASSNAME))throw new Error("Provided incorrect element for UIGallery");const i=c(t);if(i)return i;this._opts=(0,n.extend)({markOutside:!1,scrollY:!0,scrollX:!0,noArrows:!1,isFullSizeSlide:!1,isModernTransitionsEnabled:!1},e),this._id=d().incIndex,d().incIndex+=1,this._el=t,this._width=Math.round((0,_.getSize)(this._el)[0]),this._items=(0,_.geByClass)("ui_gallery_item",this._el),this._itemWidth=(0,_.getSize)(this._items[0])[0],this._itemOffset=(0,n.intval)((0,_.getStyle)(this._items[0],vk.rtl?"marginLeft":"marginRight")),this._scrollOffset=(0,n.intval)((0,_.getStyle)(this._items[0],"marginLeft")),this._itemFullWidth=this._itemWidth+this._itemOffset,this._innerCont=(0,_.geByClass1)(l.UI_GALLERY_CONTENT_CLASSNAME,this._el),this._inner=(0,_.geByClass1)(l.UI_GALLERY_INNER_CLASSNAME,this._el),this._opts.isModernTransitionsEnabled&&(this._shift=0,this._inner.classList.add("ui_gallery__inner--withTransitions")),this._scroll=function(){const t={rtl:!1,backward:!1,delta:1,negative:!1,rtlSame:!1};if(!vk.rtl)return t;if(!cur._scrollInfo){const e=(0,_.se)('<div style="position: fixed; left: -1000px; width: 0; overflow: scroll">x</div>'),i=document.querySelector("#content");i?.appendChild(e);const s=e.scrollLeft;t.rtl=vk.rtl,t.backward=s>0,e.scrollLeft=1e3,t.delta=e.scrollLeft===s?-1:1,t.negative=!t.backward&&t.delta<0,t.rtlSame=t.rtl&&!t.backward&&!t.negative,(0,_.re)(e),cur._scrollInfo=t}return cur._scrollInfo}(),this._loadingMore=!1,this._finised=!1,this._visible={left:-1,right:-1,items:[],isGalleryViewed:!1},this._outside={left:-1,right:-1,timer:null},this._initScroll(),this._initArrows(),(0,_.domData)(this._el,"gallery-id",this._id),d().galleries[this._id]=this,this._checkItemsAfterScroll(this._innerCont.scrollLeft,!0)}}},586573:(t,e,i)=>{i.r(e),i.d(e,{UiScroll:()=>d,default:()=>c});var s=i(330882),o=i(898848),a=i(478752),r=i(754866),n=i(972332),_=i(939646),l=i(97639);class d{init(){if(this.options.stopScrollPropagation&&this.fixBlocker(),!this.inited){if(!this.el.container.scrollWidth||this.disabled)return;this.fixSize(!0),this.options.autoresize&&this.startResizeListening(),this.options.global||cur.destroy.push(this.destroy.bind(this)),this.inited=!0}return this.update(!0),this.api}addEvent(t,e,i,s){return this.removeEvents.push([t,e,i]),(0,n.addEvent)(t,e,i,void 0,void 0,s?{passive:!0}:void 0),i}destroy(){if(this.disabled=!0,this.fixSize(),this.animation&&this.animation.stop(),this.moreTimeout&&clearTimeout(this.moreTimeout),this.dragstopHandler&&(0,n.removeEvent)(document,"mouseup contextmenu",this.dragstopHandler),this.dragHandler&&(0,n.removeEvent)(document,"mousemove",this.dragHandler),(0,a.each)(this.removeEvents,(function(t,e){n.removeEvent.apply(null,e)})),this.el.overflow.parentNode==this.el.container){const t=(0,r.cf)();for(;this.el.content.firstChild;)t.appendChild(this.el.content.firstChild);this.el.container.appendChild(t)}return(0,r.removeData)(this.el.container,"ui-scroll"),this.el.container.className=this.el.container.className.replace(/\bui_scroll_.+?\b/g," "),(0,a.each)(this.removeElements,(function(t,e){(0,r.re)(e)})),this.el.container.scrollTop=this.api.data.scrollTop,delete this.el.container.__uiScroll__,this.api}updateAbove(t){if((0,a.isFunction)(t)){this.animation&&this.animation.stop();const e=this.el.outer.scrollHeight-this.el.outer.scrollTop-this.el.overflow.offsetHeight;t(),this.el.outer.scrollTop=this.el.outer.scrollHeight-this.el.overflow.offsetHeight-e}return this.api}updateBelow(t){if((0,a.isFunction)(t)){this.animation&&this.animation.stop();const e=this.options.preserveEdgeBelow&&this.api.data.scrollBottom<=this.options.preserveEdgeBelowThreshold;t(),e&&this.scrollBottom(!1)}return this.api}fixBlocker(){s.browser.chrome&&!this.options.noForceReFlow&&this.forceReFlow(),this.el.blocker.scrollTop=this.blockerScrollTop}forceReFlow(){this.el.blocker.style.display="inline-block",this.el.blocker.offsetHeight,this.el.blocker.style.display=""}fixSize(t){this.options.native||(t&&null==this.fixSizeDefault&&(this.fixSizeDefault=this.el.container.style.width),(0,r.setStyle)(this.el.container,"width",t?(0,r.getSize)(this.el.container,!0)[0]||this.fixSizeDefault||"":this.fixSizeDefault||""))}emitEvent(t){this.disabled||this.inited&&this.emitter.emitEvent(t,[this.api])}static scrollEventDelta(t){let e=0;const i=void 0!==t.deltaMode?t.deltaMode:"MozMousePixelScroll"==t.type?0:1;return"wheel"==t.type?e=t.deltaY:void 0!==t.wheelDeltaX&&void 0!==t.wheelDeltaY?(e=1/40*-t.wheelDeltaY,s.browser.mac&&s.browser.opera&&(e*=.1)):void 0!==t.wheelDelta?e=1/40*-t.wheelDelta:t.detail&&2===t.axis&&(e=t.detail),e*(1==i?15:2==i?450:1)}isScrollEventUnused(t){return d.scrollEventDelta(t)>0?!this.api.data.scrollBottom:!this.api.data.scrollTop}resize(t){if(!t&&this.options.preserveEdgeBelow){const e=this.options.preserveEdgeBelow&&this.api.data.scrollBottom<=this.options.preserveEdgeBelowThreshold;this.update(!0)&&(this.emitEvent("resize"),e&&this.scrollBottom(),this.options.stopScrollPropagation&&!t&&this.fixBlocker())}else this.update(!0)&&(this.options.stopScrollPropagation&&!t&&this.fixBlocker(),this.emitEvent("resize"))}disable(t){return this.disabled=!!t,t?(this.animation&&this.animation.stop(),this.fixSize()):(this.fixSize(!0),this.options.stopScrollPropagation&&this.fixBlocker(),this.update(!0)),(0,r.toggleClass)(this.el.container,"ui_scroll_disabled",this.disabled),this.api}dragstart(t){if(!(this.disabled||this.dragging||this.options.native))return t||(t=window.event),this.dragging=!0,this.animation&&this.animation.stop(),this.options.reversed&&(this.noMore=!0),(0,n.addEvent)(document,"mouseup contextmenu",this.dragstartHandler=this.dragstop.bind(this)),(0,n.addEvent)(document,"mousemove",this.dragHandler=this.drag.bind(this)),this.dragScroll=this.options.reversed?this.api.data.scrollBottom:this.api.data.scrollTop,this.dragY=t.screenY,(0,n.cancelEvent)(t),this.emitEvent("dragstart"),this.api}dragstop(t){if(!this.disabled&&this.dragging&&!this.options.native){if(t||(t=window.event),this.dragging=!1,this.dragstopHandler&&(0,n.removeEvent)(document,"mouseup contextmenu",this.dragstopHandler),this.dragHandler&&(0,n.removeEvent)(document,"mousemove",this.dragHandler),(0,r.setStyle)(document.body,"cursor",""),(0,r.removeClass)(this.el.container,"ui_scroll_dragging"),this.dragged)this.noMore&&(this.noMore=!1,this.more());else{this.options.reversed&&(this.noMore=!0);const e=(t.pageY-(0,r.getXY)(this.el.barOuter)[1]-this.barInnerHeight/2)*(Math.max(this.options.minContentHeight,this.api.data.scrollHeight)-this.api.data.viewportHeight)/(this.barOuterHeight-this.barInnerHeight);this.scrollTop(!1,e,0,function(){this.noMore&&(this.noMore=!1,this.more())}.bind(this))}return this.dragged=!1,t&&"contextmenu"!==t.type&&(0,n.cancelEvent)(t),this.emitEvent("dragstop"),this.api}}drag(t){if(this.disabled||!this.dragging||this.options.native)return;t||(t=window.event);const e=(t.screenY-this.dragY)*(this.api.data.scrollHeight/this.el.barOuter.scrollHeight);return this.el.outer.scrollTop=this.options.reversed?this.el.outer.scrollHeight-this.el.overflow.offsetHeight-this.dragScroll+e:this.dragScroll+e,this.dragged||(this.dragged=!0,(0,r.setStyle)(document.body,"cursor","pointer"),(0,r.addClass)(this.el.container,"ui_scroll_dragging")),(0,n.cancelEvent)(t),this.emitEvent("drag"),this.api}scroll(t,e,i){return this.animation&&this.animation.stop(),this.el.outer.scrollTop==t&&this.update(!0),e?(e="number"!=typeof e||!isFinite(e)||e%1?300:Math.abs(e),this.animation=new _.Fx.Base({scrollTop:this.el.outer.scrollTop},{transition:_.Fx.Transitions.easeOutCubic,onStep:function(t){this.el.outer.scrollTop=t.scrollTop}.bind(this),duration:e,onComplete:(0,a.isFunction)(i)?i.pbind(this.api):void 0}).start({scrollTop:this.el.outer.scrollTop},{scrollTop:t})):(this.el.outer.scrollTop=t,(0,a.isFunction)(i)&&i(this.api)),this.api}scrollTop(t,e,i,s){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),!this.disabled&&!this.dragging)return this.scroll((0,a.intval)(e),i,s)}scrollBottom(t,e,i,s){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),!this.disabled&&!this.dragging)return this.scroll(this.el.outer.scrollHeight-this.el.overflow.offsetHeight-(0,a.intval)(e),i,s)}scrollBy(t,e,i){if(!this.disabled&&!this.dragging)return this.scroll(this.el.outer.scrollTop+(0,a.intval)(t),e,i)}scrollIntoView(t,e,i,s){if(t&&this.options.stopScrollPropagation&&this.fixBlocker(),(e=(0,l.getScrollElement)(e))&&e.compareDocumentPosition&&e.compareDocumentPosition(this.el.content)&Node.DOCUMENT_POSITION_CONTAINS){const t=(0,r.getXY)(e)[1],o=(0,r.getXY)(this.el.overflow)[1],n=(0,r.getSize)(e)[1];if(t<=o&&t+n>=o+this.api.data.viewportHeight||t>=o&&t+n<=o+this.api.data.viewportHeight)(0,a.isFunction)(s)&&(i?setTimeout(s.bind(this.api),0):s(this.api));else if(n>this.api.data.viewportHeight||t<o)this.scrollTop(!1,t-o+this.api.data.scrollTop-(this.options.shadows?(0,r.getSize)(this.el.shadowTop)[1]:0),i,s);else{const e=this.options.shadows?(0,r.getSize)(this.el.shadowBottom)[1]:0;this.scrollTop(!1,t-o+this.api.data.scrollTop+n-this.api.data.viewportHeight+e,i,s)}}return this.api}update(t){let e,i;this.el.container&&!this.el.container.updateScroll&&(this.el.container.updateScroll=this.update.bind(this,!1));const s=this.el.outer.scrollTop;if(this.inited&&!this.disabled&&(t&&(e=this.el.inner.offsetHeight,this.api.data.viewportHeight!==(this.api.data.viewportHeight=this.el.overflow.offsetHeight)||this.api.data.scrollHeight!==e)||this.api.data.scrollTop!==s)){if(t&&(this.api.data.scrollHeight=e),this.api.data.scrollTop=Math.max(0,Math.min(this.api.data.scrollHeight-this.api.data.viewportHeight,Math.max(0,s))),this.api.data.scrollBottom=Math.max(0,this.api.data.scrollHeight-this.api.data.scrollTop-this.api.data.viewportHeight),!this.options.native){if(e=Math.max(this.options.minContentHeight,this.api.data.scrollHeight),i=e<=this.api.data.viewportHeight,!i){const i=this.el.barOuter.offsetHeight;(t||this.barOuterHeight!==i)&&(this.barOuterHeight=i,this.barInnerHeight=Math.max(this.options.barMinHeight,this.barOuterHeight*this.api.data.viewportHeight/e),this.el.barInner.style.height=this.barInnerHeight+"px"),(0,l.nextFrame)((()=>{const t=(this.barOuterHeight-this.barInnerHeight)*this.api.data.scrollTop/(e-this.api.data.viewportHeight);this.el.barInner.style.transform=`translateY(${t}px)`}))}this.options.shadows&&(this.shadowTop!=(this.api.data.scrollTop&&!i)&&(0,r.toggleClass)(this.el.container,"ui_scroll_shadow_top_visible",this.shadowTop=this.api.data.scrollTop&&!i),this.shadowBottom!=(this.api.data.scrollBottom&&!i)&&(0,r.toggleClass)(this.el.container,"ui_scroll_shadow_bottom_visible",this.shadowBottom=this.api.data.scrollBottom&&!i)),this.unnecessary!==i&&((0,r.toggleClass)(this.el.container,"ui_scroll_unnecessary",i),this.unnecessary=i,this.options.stopScrollPropagation&&this.fixBlocker(),i&&this.barInnerHeight&&this.barOuterHeight&&(0,l.nextFrame)(function(t){this.el.barInner.style.height=100*this.barInnerHeight/this.barOuterHeight+"%";const i=(this.barOuterHeight-this.barInnerHeight)*this.api.data.scrollTop/(e-this.api.data.viewportHeight)*100/this.barInnerHeight;this.el.barInner.style.transform=`translateY(${i}%)`}.bind(this)))}return this.emitEvent("update"),(!this.options.reversed||s>=0)&&this.more(),!0}return!1}more(){const t=this.options.reversed?this.api.data.scrollTop:this.api.data.scrollBottom,e=null!==this.options.onmoreThreshold?this.options.onmoreThreshold:2*this.api.data.viewportHeight;!this.noMore&&t<=e&&this.emitEvent("more")}constructor(t,e){if(!(t=(0,l.getScrollElement)(t)))throw new Error("uiScroll container is undefined");t.__uiScroll__&&t.__uiScroll__.destroy(),this.options=(0,a.extend)({global:!1,native:!1,theme:"default",reversed:!1,autoresize:!0,preserveEdgeBelow:!1,barMinHeight:30,preserveEdgeBelowThreshold:20,stopScrollPropagation:!0,stopScrollPropagationAlways:!1,minContentHeight:0,onmoreThreshold:null,hidden:!1,shadows:!1,scrollElements:[],onresize:null,onscroll:null,onscrollstart:null,onscrollstop:null,ondrag:null,ondragstart:null,ondragstop:null,onupdate:null,onmore:null,noForceReFlow:!1},e),this.options.native&&(this.options.shadows=!1),s.browser.mobile&&(this.options.stopScrollPropagation=!1),(0,o.isArray)(this.options.scrollElements)||(this.options.scrollElements=[]),this.removeEvents=[],this.removeElements=[],this.dragging=!1,this.dragged=!1,this.released=!0,this.noMore=!1,this.dragY=null,this.dragScroll=null,this.shadowTop=!1,this.shadowBottom=!1,this.unnecessary=!1,this.disabled=!1,this.stopped=!0,this.stoppedTimeout=null,this.fixSizeDefault=null,this.animation=null,this.barOuterHeight=null,this.barInnerHeight=null,this.currentFrame=null,this.blockerScrollTop=500,this.emitter=new EventEmitter,(0,a.isFunction)(this.options.onresize)&&this.emitter.addListener("resize",this.options.onresize),(0,a.isFunction)(this.options.onscroll)&&this.emitter.addListener("scroll",this.options.onscroll),(0,a.isFunction)(this.options.onscrollstart)&&this.emitter.addListener("scrollstart",this.options.onscrollstart),(0,a.isFunction)(this.options.onscrollstop)&&this.emitter.addListener("scrollstop",this.options.onscrollstop),(0,a.isFunction)(this.options.ondrag)&&this.emitter.addListener("drag",this.options.ondrag),(0,a.isFunction)(this.options.ondragstart)&&this.emitter.addListener("dragstart",this.options.ondragstart),(0,a.isFunction)(this.options.ondragstop)&&this.emitter.addListener("dragstop",this.options.ondragstop),(0,a.isFunction)(this.options.onupdate)&&this.emitter.addListener("update",this.options.onupdate),(0,a.isFunction)(this.options.onmore)&&this.emitter.addListener("more",this.options.onmore),this.el={container:t,overflow:(0,r.ce)("div",{className:"ui_scroll_overflow"}),outer:(0,r.ce)("div",{className:"ui_scroll_outer"},{margin:this.options.stopScrollPropagation?this.blockerScrollTop+"px 0":void 0}),inner:(0,r.ce)("div",{className:"ui_scroll_inner tt_noappend"}),shadowTop:(0,r.ce)("div",{className:"ui_scroll_shadow_top"}),shadowBottom:(0,r.ce)("div",{className:"ui_scroll_shadow_bottom"}),content:(0,r.ce)("div",{className:"ui_scroll_content clear_fix"}),barContainer:(0,r.ce)("div",{className:"ui_scroll_bar_container"}),barOuter:(0,r.ce)("div",{className:"ui_scroll_bar_outer"}),barInner:(0,r.ce)("div",{className:"ui_scroll_bar_inner"})},(0,r.data)(this.el.container,"ui-scroll",this),(0,r.attr)(this.el.content,"data-testid","ui_scroll_content");const i=(0,r.cf)(),_=["ui_scroll_container"];for((0,a.each)((0,o.isArray)(this.options.theme)?this.options.theme:(0,a.trim)(this.options.theme+"").split(/\s+/),(function(t,e){e&&_.push("ui_scroll_"+e+"_theme")})),(0,r.addClass)(this.el.container,_.join(" ")),this.options.hidden&&(0,r.addClass)(this.el.container,"ui_scroll_hidden");this.el.container.firstChild;)this.el.content.appendChild(this.el.container.firstChild);if(this.el.outer.appendChild(this.el.inner),this.el.inner.appendChild(this.el.content),this.options.stopScrollPropagation?(this.el.blocker=(0,r.ce)("div",{className:"ui_scroll_blocker"}),this.addEvent(this.el.blocker,"scroll",this.fixBlocker.bind(this),!0),this.el.blocker.appendChild(this.el.outer),this.el.overflow.appendChild(this.el.blocker)):this.el.overflow.appendChild(this.el.outer),i.appendChild(this.el.overflow),this.options.native?(0,r.addClass)(this.el.container,"ui_scroll_native"):(this.el.barOuter.appendChild(this.el.barInner),this.el.barContainer.appendChild(this.el.barOuter),i.appendChild(this.el.barContainer),this.options.shadows&&(this.el.overflow.appendChild(this.el.shadowTop),this.el.overflow.appendChild(this.el.shadowBottom)),s.browser.mobile||this.options.scrollElements.push(this.el.barContainer)),this.options.autoresize){const t=(0,l.addResizeSensor)(this.el.inner,this.resize.bind(this,!0)),e=(0,l.addResizeSensor)(this.el.overflow,this.resize.bind(this,!1));this.removeElements.push(t[0]),this.removeElements.push(e[0]),this.startResizeListening=function(){t[1](),e[1]()}}this.removeElements.push(this.el.overflow,this.el.barContainer),this.el.container.appendChild(i),this.options.reversed&&(this.el.outer.scrollTop=this.el.outer.scrollHeight),this.el.container.__uiScroll__=this.api={container:this.el.container,scroller:this.el.outer,content:this.el.content,emitter:this.emitter,ondragstart:this.dragstart.bind(this),ondragstop:this.dragstop.bind(this),ondrag:this.drag.bind(this),destroy:this.destroy.bind(this),disable:this.disable.bind(this,!0),enable:this.disable.bind(this,!1),scrollTop:this.scrollTop.bind(this,!0),scrollBottom:this.scrollBottom.bind(this,!0),scrollBy:this.scrollBy.bind(this),scrollIntoView:this.scrollIntoView.bind(this,!0),update:this.init.bind(this),updateAbove:this.updateAbove.bind(this),updateBelow:this.updateBelow.bind(this),data:{scrollTop:null,scrollBottom:null,scrollHeight:null,viewportHeight:null}},this.init();const c="onwheel"in this.el.outer?"wheel":void 0!==document.onmousewheel?"mousewheel":s.browser.mozilla?"MozMousePixelScroll":"DOMMouseScroll";return this.addEvent(this.el.container,c,function(t){this.animation&&this.animation.stop(),!this.disabled&&this.options.stopScrollPropagation&&(this.unnecessary?this.options.stopScrollPropagationAlways&&(0,n.cancelEvent)(t):this.isScrollEventUnused(t)?(0,n.cancelEvent)(t):(0,n.stopEvent)(t))}.bind(this),!this.options.stopScrollPropagation),this.options.native||this.addEvent(this.el.barContainer,"mousedown",this.dragstart.bind(this)),(0,a.each)(this.options.scrollElements,function(t,e){this.addEvent(e,c,function(t){this.disabled||this.unnecessary||(this.scrollBy(d.scrollEventDelta(t)),!this.options.stopScrollPropagation&&this.isScrollEventUnused(t)||(0,n.cancelEvent)(t))}.bind(this))}.bind(this)),this.options.reversed&&this.addEvent(this.el.container,"mousedown touchstart pointerdown",function(t){this.released=!1,this.noMore=!0;const e=this.addEvent(document,"mouseup contextmenu touchend pointerup",function(t){(0,n.removeEvent)(document,"mouseup contextmenu touchend pointerup",e),this.released=!0,this.noMore&&this.stopped&&!this.dragging&&(this.noMore=!1,this.more())}.bind(this))}.bind(this)),this.addEvent(this.el.outer,"scroll",function(){this.update()&&(this.stopped?(this.stopped=!1,this.emitEvent("scrollstart")):this.options.native||!1!==this.stopped||(this.stopped=0,(0,r.addClass)(this.el.container,"ui_scroll_scrolled")),this.emitEvent("scroll"),this.stoppedTimeout&&clearTimeout(this.stoppedTimeout),this.stoppedTimeout=setTimeout(function(){this.stopped||(this.stopped=!0,this.options.native||(0,r.removeClass)(this.el.container,"ui_scroll_scrolled"),this.emitEvent("scrollstop"),this.noMore&&this.released&&!this.dragging&&(this.noMore=!1,this.more()))}.bind(this),200))}.bind(this)),this.api}}d.addResizeSensor=l.addResizeSensor;const c=d},97639:(t,e,i)=>{i.d(e,{addResizeSensor:()=>c,getScrollElement:()=>d,nextFrame:()=>l});var s=i(478752),o=i(754866),a=i(330882);let r;const n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||(t=>setTimeout(t,1)),_=window.cancelAnimationFrame||window.cancelRequestAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;function l(t){r&&_(r),r=n(t)}function d(t){return(0,s.isString)(t)&&"_"===t[0]?(0,o.geByClass1)(t):(0,o.ge)(t)}function c(t,e){if((t=d(t))&&(0,s.isFunction)(e)){if(a.browser.msie9||a.browser.opera&&a.browser.version<13){let r=!1,n=!1;const _=(0,o.ce)("object",{type:"text/html",className:"ui_scroll_resize_object",data:"about:blank",onload:function(){n=!0,r&&i()}});function i(){if(!_.contentDocument)return setTimeout(i,100);_.contentDocument.defaultView.removeEventListener("resize",e),_.contentDocument.defaultView.addEventListener("resize",e),e()}return t.appendChild(_),t.__resizeSensor__=[_,function(){r=!0,n&&i()}]}{const l=(0,o.ce)("div",{className:"ui_scroll_resize_sensor"}),c=(0,o.ce)("div",{className:"ui_scroll_resize_sensor ui_scroll_resize_expand"}),u=(0,o.ce)("div",{className:"ui_scroll_resize_sensor ui_scroll_resize_shrink"}),h=(0,o.ce)("div"),p=(0,o.ce)("div");let m=null;return c.appendChild(h),u.appendChild(p),l.appendChild(c),l.appendChild(u),t.appendChild(l),t.__resizeSensor__=[l,c.onscroll=u.onscroll=function(){const i=(t.offsetWidth||1e4)+10,s=(t.offsetHeight||1e4)+10;h.style.width=i+"px",h.style.height=s+"px",c.scrollLeft=i,c.scrollTop=s,u.scrollLeft=i,u.scrollTop=s,m!==(m=i+" "+s)&&e()}]}}}},257168:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var _web_lib_dom__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(754866),_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(749284),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(478752),_web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(250598),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(972332),_web_legacy_ui_ui_tabs__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(693488),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(330882),_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(237625),_web_lib_scroll_utils__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(692543);const SEARCH_FOCUSED_CLASS="search_focused",uiSearch={destroy:function(t){const e=uiSearch.getFieldEl(t);uiSearch.stopEvents(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeData)(e)},getWrapEl:function(t){return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domClosest)("_wrap",t)},getFieldEl:function(t){return t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)("_field",t)?t:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domByClass)(uiSearch.getWrapEl(t),"_field")},stopEvents:function(t){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers")||[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)(e,(function(t,e){e.stop()}))},startEvents:function(t){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers")||[];(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)(e,(function(t,e){e.stop(),e.start()}))},init:function(el,options){if(!el)return;if(el=uiSearch.getFieldEl(el),!el)return;const wrapEl=uiSearch.getWrapEl(el),delayedInitOptions=!options&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options");if(delayedInitOptions){const evalScript="(function() { return "+delayedInitOptions+" })()";try{const initOptions=eval(evalScript);initOptions?.suggester?.useCatalogSuggest?setTimeout((()=>(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options",null)),0):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(wrapEl,"init-options",null),uiSearch.init(el,initOptions)}catch(t){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(t,evalScript)}return}if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"inited"))return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"inited",1);const onKeyDown=uiSearch.onKeyDown.pbind(el),onBuffer=function(t){if("input"===t.type&&_shared_lib_browser__WEBPACK_IMPORTED_MODULE_6__.browser.msie){const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(el);if(t===((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(el,"prev-value")||""))return;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(el,"prev-value",t)}setTimeout(uiSearch.onChanged.pbind(el,!1,t),0)};(0,_web_lib_input_utils__WEBPACK_IMPORTED_MODULE_1__.placeholderInit)(el),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"opts",options);const onFocus=t=>{if(options.focusedModifierTargetSelector){const t=document.querySelector(options.focusedModifierTargetSelector);t?.classList.add(SEARCH_FOCUSED_CLASS)}options.onFocus?.(t)},onBlur=t=>{if(options.focusedModifierTargetSelector){const t=document.querySelector(options.focusedModifierTargetSelector);t?.classList.remove(SEARCH_FOCUSED_CLASS)}options.onBlur?.(t)};let mainHandler;if(options.suggester)options.suggester.useCatalogSuggest=!!options?.suggester?.useCatalogSuggest,options.suggester.useCatalogSuggest||(options.suggester.instance=new Suggester(el,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.extend)(options.suggester,{type:options.suggester.type,historyItems:!!options.suggester.history&&options.suggester.historyItems,onSearch:function(t,e,i,s,o){t||(options.allowFiltersForEmpty||uiSearch.removeAllFilters(el),uiSearch.hideProgress(el)),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(wrapEl,"ui_search_field_empty",!t),uiSearch.handleAriaAttributes(wrapEl,t),options.onChange&&options.onChange.call(el,t,e,i,s,o)}}))),mainHandler={start:function(){onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"focus",onFocus)},stop:function(){onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"focus",onFocus)}};else{const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_ui_search_button_search",wrapEl);options?.searchButtonTestId&&t.setAttribute("data-testid",options.searchButtonTestId);const e=function(t){uiSearch.onEnter(el,t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(el)};mainHandler={start:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"keydown",onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"paste cut input",onBuffer),onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(el,"focus",onFocus),t&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(t,"click",e)},stop:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"keydown",onKeyDown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"paste cut input",onBuffer),onBlur&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"blur",onBlur),onFocus&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(el,"focus",onFocus),t&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent)(t,"click",e)}}}if(mainHandler.start(),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(el,"eventHandlers",[mainHandler]),options.params){const content=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.se)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(options.params.html)),newOptions=options?.suggester?.useCatalogSuggest?{forceSide:"bottom",setPos:()=>({left:"auto",top:"52px"})}:{};options.paramsTooltip=new _web_lib_element_tooltip__WEBPACK_IMPORTED_MODULE_3__.ElementTooltip((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_ui_search_params_button",wrapEl),{appendTo:wrapEl,content,autoShow:!1,customShow:!0,shift:options.params.shift?options.params.shift:0,offset:[0,-2],...newOptions}),options.paramsTooltip.build(),options?.suggester?.useCatalogSuggest&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(options.paramsTooltip._ttel,{right:0}),setTimeout((function(){(function initScript(){try{eval(options.params.script)}catch(t){(0,_web_lib_debug_tools__WEBPACK_IMPORTED_MODULE_7__.logEvalError)(t,options.params.script)}}).call(el)}))}options.fixed&&uiSearch.setFixed(el),options.noAutoDestroy||cur.destroy.push(uiSearch.stopEvents.pbind(el)),uiSearch.initFilters(el,options),(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.isFunction)(options.onInit)&&options.onInit(el,options)},getOptions:function(t){let e;if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(t,"_field"))e=t;else{const i=uiSearch.getWrapEl(t);e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("_field",i)}return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"opts")||{}},toggleParameters:function(t){const e=uiSearch.getOptions(t);e.paramsTooltip&&e.paramsTooltip.toggle()},hideParameters:function(t){const e=uiSearch.getOptions(t);e&&e.paramsTooltip&&e.paramsTooltip.hide()},saveHistorySearch:function(t,e,i,s,o,a){e||(e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(t));const r=uiSearch.getOptions(t);r.suggester&&r.suggester.instance&&r.suggester.instance.saveHistoryItem(e,i,s,o,a)},onEnter:function(t,e){t=uiSearch.getFieldEl(t);const i=uiSearch.getOptions(t),s=t.getValue?t.getValue():t.value;return i.onEnter&&i.onEnter(t,s,e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e)},onKeyDown:function(t,e){if(cur.preventInputActions&&-1!=[_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.RETURN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.ESC,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.DOWN,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.UP].indexOf(e.keyCode))return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e);if(e.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.RETURN)return uiSearch.onEnter(t,e);if(e.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.KEY.ESC){const i=!!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(t);return uiSearch.reset(t,!1,e),!i||(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.cancelEvent)(e)}setTimeout.pbind(uiSearch.onChanged.pbind(t,!1,e),0)},onChanged:function(t,e,i){t=uiSearch.getFieldEl(t);const s=uiSearch.getOptions(t),o=uiSearch.getWrapEl(t),a=t.getValue?t.getValue():t.value;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(o,"ui_search_field_empty",!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(a)),uiSearch.handleAriaAttributes(o,a),a||s.allowFiltersForEmpty||uiSearch.removeAllFilters(t),e||s.onChange&&s.onChange.call(t,a,i)},focus:function(t){t=uiSearch.getFieldEl(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(t)},reset:function(t,e,i){t=uiSearch.getFieldEl(t);const s=uiSearch.getOptions(t),o=uiSearch.getWrapEl(t);(t.getValue?t.getValue():t.value)?((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.val)(t,""),uiSearch.onChanged(t,e,i),e||s.onEnter&&s.onEnter(t,""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.elfocus)(t)):s.in_tabs&&_web_legacy_ui_ui_tabs__WEBPACK_IMPORTED_MODULE_5__.default.hideSearch(o),window.tooltips&&tooltips.destroyAll()},showProgress:function(t){t=uiSearch.getFieldEl(t);const e=uiSearch.getWrapEl(t);(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(e,"ui_search_loading");const i=t.getValue?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(t.getValue()):t.value;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(e,"ui_search_field_empty",!i),uiSearch.handleAriaAttributes(e,i)},hideProgress:function(t){t=uiSearch.getFieldEl(t);const e=uiSearch.getWrapEl(t);if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"ui_search_loading"),t){const i=t.getValue?(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(t.getValue()):t.value;(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(e,"ui_search_field_empty",!i),uiSearch.handleAriaAttributes(e,i)}},handleAriaAttributes:function(t,e){const i=t.querySelector(".ui_search_controls"),s=!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.trim)(e);i?.setAttribute("aria-hidden",s)},scrollResize:function(t){if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_6__.browser.mobile)return;t=uiSearch.getFieldEl(t);const e=uiSearch.getWrapEl(t),i=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(e),s=e&&e.classList.contains("ui_search_fixed"),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)(cur.uiSearchPageBlock)||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.gpeByClass)("page_block",t),a=vk.staticheader?Math.max(0,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_header"))[1]-scrollNode.scrollTop):(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_header"))[1];let r;const n=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isAncestor)(e,boxLayerWrap);if(!e||!i||!n&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.gpeByClass)("scroll_fix",e)||t.ignoreFixed&&!s||!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isVisible)(i))return;if(n?(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(i,!0)[1]<0:(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(i,!0)[1]<a){const n=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.intval)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getStyle)(e.classList.contains("ui_search_new")?e:t,"width"));!s&&n&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(i,"height",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(e)[1]),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,"width",n),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClass)(e,"ui_search_fixed"));const _=Math.min(0,Math.max(-document.body.scrollLeft,document.body.clientWidth-(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.ge)("page_layout"))[0]));if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{marginLeft:_}),o){const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getXY)(o)[1]+(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.getSize)(o)[1]-(0,_web_lib_scroll_utils__WEBPACK_IMPORTED_MODULE_8__.scrollGetY)()-t.offsetHeight;r=Math.min(a,Math.max(-t.offsetHeight,i)),r!==cur.lastUISearchPos&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,"top",r),cur.lastUISearchPos=r)}}else s&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(i,"height",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{top:"",marginLeft:""}),cur.lastUISearchPos=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"ui_search_fixed"))},setStatic:function(t){t.ignoreFixed=!0;const e=uiSearch.getWrapEl(t),i=e&&(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domPN)(e);e&&i&&((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(i,"height",""),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.setStyle)(e,{top:"",marginLeft:""}),cur.lastUISearchPos=!1,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"ui_search_fixed"))},setFixed:function(t){if(t.ignoreFixed=!1,!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"resizeEventHandler")){const e=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.isAncestor)(t,boxLayerWrap)?boxLayerWrap:window,i=uiSearch.scrollResize.pbind(t),s={stop:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent.pbind(e,"scroll",i),start:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent.pbind(e,"scroll",i)};(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers",((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers")||[]).concat([s])),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"resizeEventHandler",!0),s.start()}uiSearch.scrollResize(t)},initFilters:function(t,e){if(!t)return;const i=uiSearch.getWrapEl(t),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_search_fltr_control",i),o={start:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(s,"click",(function(t){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(s,"shown")&&!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(t.target,"ui_search_fltr_control")||a(s)})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(s,"mouseover",(function(){if(!(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(s,"shown"))return;const t=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer");t&&(clearTimeout(t),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer",0)),a(s,!0)})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(s,"mouseout",(function(){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer",setTimeout((function(){a(s,!1),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"hidetimer",0)}),200))}))},stop:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.removeEvent.pbind(s,"click mouseover mouseout")};function a(t,e){(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.toggleClass)(t,"shown",e)}(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers",((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"eventHandlers")||[]).concat([o])),o.start();const r=uiSearch._getFiltersPane(t);(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_4__.addEvent)(r,"click",(function(e){if((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(e.target,"token_title")||(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hasClass)(e.target,"token_del")){const i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.gpeByClass)("token",e.target),s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.domData)(i,"id");uiSearch.removeFilter(t,s)}}))},removeAllFilters:function(t){const e=uiSearch._getFiltersPane(t),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"cur_filters");(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.extend)({},i),(function(e){uiSearch.removeFilter(t,e,!0)}))},toggleFilter:function(t,e,i,s){s?uiSearch.addFilter(t,e,i):uiSearch.removeFilter(t,e)},addFilter:function(t,e,i){if(!e||!i)return;const s=uiSearch._getFiltersPane(t),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"cur_filters")||{};o[e]=i,(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"cur_filters",o);const a=uiSearch.getOptions(t);a.onFiltersChanged&&a.onFiltersChanged(o),uiSearch._renderFilters(t)},removeFilter:function(t,e,i){const s=uiSearch._getFiltersPane(t),o=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"cur_filters")||{};if(o[e]){delete o[e],(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(s,"cur_filters",o);const a=uiSearch.getOptions(t);a.onFilterRemoved&&a.onFilterRemoved(e,t,i),a.onFiltersChanged&&a.onFiltersChanged(o),uiSearch._renderFilters(t)}},_getFiltersPane:function(t){const e=uiSearch.getWrapEl(t)||t;return(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_search_filters_pane",e)},_renderFilters:function(t){clearTimeout((0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"renderFiltersTO")),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(t,"renderFiltersTO",setTimeout(uiSearch._doRenderFilters.pbind(t)))},_doRenderFilters:function(t){const e=uiSearch._getFiltersPane(t),i=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.data)(e,"cur_filters")||{},s=(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.geByClass1)("ui_search_filters",e);if(s)if((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.isEmpty)(i))(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.removeClass)(e,"expanded"),setTimeout((function(){s.innerHTML="",(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.hide)(e)}),200);else{(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.show)(e),(0,_web_lib_dom__WEBPACK_IMPORTED_MODULE_0__.addClassDelayed)(e,"expanded");const t=[],o={};let a=0;(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.each)(i,(function(e,i){let s=!1,r=!1,n=e.match(/(.*?)_([^_]+)$/);const _=n&&n[2]||!1;n=n&&n[1]||!1,n&&(void 0!==o[n]&&"from"===_?r=o[n]:void 0!==o[n]&&(s=o[n]+1),o[n]=a);const l=`<div class="token" id="token${e}" data-id="${e}">\n                         <div class="token_title">${(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.replaceEntities)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_2__.clean)(i))}</div>\n                         <div class="token_del"></div>\n                       </div>`;!1!==r?t.splice(r,0,l):!1!==s?t.splice(s,0,l):t.push(l),a++})),s.innerHTML=t.join("")}}},__WEBPACK_DEFAULT_EXPORT__=uiSearch},693488:(t,e,i)=>{i.d(e,{default:()=>c});var s=i(754866),o=i(478752),a=i(330882),r=i(972332),n=i(740342),_=i(335700),l=i(342018);const d={initTabs:function(t,e,i=!0){if(a.browser.msie&&(0,o.intval)(a.browser.version)<10)return;if(a.browser.opera&&(0,o.intval)(a.browser.version)<15)return;if((0,s.hasClass)(t,"ui_tabs_sliding"))return;const r=(0,s.getSize)(e)[0],n=e.offsetLeft,_=(0,s.geByClass1)("_ui_tabs_slider",t);if(_&&!(0,s.domData)(t,"inited")){const t={width:r+"px",marginLeft:n};(0,s.setStyle)(_,t)}i&&d.tryInitTabsScroll(t)},tryInitTabsScroll:function(t){const e=t.querySelector(".js-tabs-scroll:not(.js-tabs-scroll-inited)");if(!e)return;e.classList.add("js-tabs-scroll-inited");const i=new _.UIGallery(e,{scrollY:!1}),s=(0,n.debounce)((()=>{i.refresh()}),200);window.addEventListener("resize",s),(0,l.pushNavDestroy)((()=>{i.destroy(),window.removeEventListener("resize",s)}))},tryInit:function(t,e=!0){if((0,s.domData)(t,"inited"))return;const i=(0,s.geByClass1)("ui_tab_group_sel",t)||(0,s.geByClass1)("ui_tab_sel",t);i&&d.initTabs(t,i,e),(0,s.domData)(t,"inited",1)},goTab:function(t,e,i,o=!1){if((0,r.checkEvent)(e))return!0;const a=(0,s.gpeByClass)("ui_tabs",t);return!(!i&&(0,s.geByClass1)("ui_tab_sel",a)==t)&&(d.switchTab(t),d.showProgress(a),nav.go(t,e,{tab:t,noframe:o}))},switchTab:function(t,e){let i=(0,s.gpeByClass)("ui_tabs",t);const a=(0,s.geByClass1)("ui_tab_sel",i);let r=null,n=null;const _=(0,s.hasClass)(a,"ui_tab_group_item")?n=(0,s.gpeByClass)("ui_tab_group",a):a,l=(0,s.hasClass)(t,"ui_tab_group_item")?r=(0,s.gpeByClass)("ui_tab_group",t):t;if(t!=a){if(t!=l&&(d.toggleGroup(l,!1),d.resetLabel(l,t)),_){d.initTabs(i,_),e=e||{};const t=(0,s.geByClass1)("_ui_tabs_slider",i);if(t){e.noAnim||l===_||((0,s.addClass)(i,"ui_tabs_sliding"),clearTimeout(cur.tabSlidingTO),cur.tabSlidingTO=setTimeout(s.removeClass.pbind(i,"ui_tabs_sliding"),300));const a=(0,o.intval)(t.style.marginLeft),r={width:(0,s.getSize)(l)[0]+"px"};r[cssTransformProp]="translateX("+(l.offsetLeft-a)+"px)",(0,s.setStyle)(t,r)}a!=_&&l!=_&&d.resetLabel(_),_!=a&&(0,s.removeClass)(_,"ui_tab_group_sel"),(0,s.removeClass)(a,"ui_tab_sel"),"tab"===(0,s.attr)(a,"role")&&(0,s.attr)(a,"aria-selected","false")}if(l!=t&&(0,s.addClass)(l,"ui_tab_group_sel"),(0,s.addClass)(t,"ui_tab_sel"),n&&(0,s.removeClass)(n,"ui_tab_hide_separator"),"tab"===(0,s.attr)(t,"role")&&(0,s.attr)(t,"aria-selected","true"),r){i=(0,s.geByClass1)("ui_tab_group_items",r,"div").children;let t=null;(0,o.each)(i,(function(e,i){"SPAN"===i.tagName?t=i:(0,s.hasClass)((0,s.domFC)(i),"ui_tab_sel")||(0,s.hasClass)(i,"unshown")||(t=null)})),t&&(0,s.addClass)(r,"ui_tab_hide_separator")}}return!1},resetLabel:function(t,e){const i=(0,s.geByClass1)("ui_tab_group_label",t,"span");i&&(i.innerHTML=(e||i).getAttribute("data-default-label"))},toggleGroup:function(t,e){const i=(0,s.data)(t,"visibletimer");i&&clearTimeout(i),(0,s.data)(t,"visibletimer",setTimeout(s.toggleClass.pbind(t,"visible",e),e?0:100)),(0,s.toggleClass)(t,"shown",e)},showGroup:function(t){const e=(0,s.data)(t,"hidetimer");e&&(clearTimeout(e),(0,s.data)(t,"hidetimer",0)),d.toggleGroup(t,!0)},hideGroup:function(t){(0,s.data)(t,"hidetimer")||(0,s.data)(t,"hidetimer",setTimeout((function(){d.toggleGroup(t,!1),(0,s.data)(t,"hidetimer",0)}),200))},showProgress:function(t){(0,s.hasClass)(t,"ui_tabs")||(t=(0,s.gpeByClass)("ui_tabs",t)),(0,s.addClass)(t,"ui_tabs_loading")},hideProgress:function(t){(0,s.hasClass)(t,"ui_tabs")||(t=(0,s.gpeByClass)("ui_tabs",t)),(0,s.removeClass)(t,"ui_tabs_loading")},showSearch:function(t,e){if(cur.viewAsBox)return cur.viewAsBox();if((0,r.checkEvent)(e))return!0;const i=(0,s.gpeByClass)("ui_tabs",t),o=(0,s.domByClass)(i,"_field");return(0,s.addClass)(i,"ui_tabs_search_opened"),uiSearch.focus(o),!1},hideSearch:function(t,e){if((0,r.checkEvent)(e))return!0;const i=(0,s.gpeByClass)("ui_tabs",t);return(0,s.removeClass)(i,"ui_tabs_search_opened"),!1},scrollToActiveTab(t){const e=document.querySelector(`#${t}`);if(!e)return;const i=e.querySelector(".ui_tab_sel, .ui_tab_group_sel"),s=e.querySelector(`.${_.UI_GALLERY_CONTENT_CLASSNAME}`);if(!i||!s)return;const o=i.offsetLeft,a=o+i.offsetWidth,r=s.scrollLeft,n=s.clientWidth,l=r+n,d=o-20,c=a+20;d<r?s.scrollTo({left:d}):c>l&&s.scrollTo({left:c-n})},showSort(){const t=document.querySelector(".js-ui_tab_sort_wrap");t&&t.classList.remove("ui_tab_search_wrap_hidden")},hideSort(){const t=document.querySelector(".js-ui_tab_sort_wrap");t&&t.classList.add("ui_tab_search_wrap_hidden")}},c=d},625451:(t,e,i)=>{i.d(e,{makeStrictContext:()=>o});var s=i(296540);function o({name:t,defaultValue:e}){const i=(0,s.createContext)(e);function o(){const e=(0,s.useContext)(i);if(void 0===e)throw new Error(`Value for ${t}Context must be defined before call useContext`);return e}return i.displayName=`${t}Context`,o.displayName=`use${i.displayName}`,{Context:i,useContext:o}}},977131:(t,e,i)=>{var s=i(474848),o=i(296540),a=i(456921),r=i(999948),n=i(661119),_=i(891480);(0,a.observer)((t=>{const[e]=(0,o.useState)((()=>{const e=new r.AudioCatalogMusicMixBlockModel;return e.setMix({type:_.AudioListType.MusicMix,identity:{id:t.id},title:t.title,backgroundAnimationUrl:t.backgroundAnimationUrl,description:t.description}),e}));return(0,s.jsx)(n.AudioCatalogMusicMixBlockComponent,{...t,loading:e.loading,playing:e.isPlaying,onTogglePlayClick:()=>{e.togglePlay()}})}))},508781:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockApplication:()=>n});var s=i(474848),o=i(865708),a=i(800127),r=i(753261);const n=({needShowOnboarding:t,...e})=>(0,s.jsx)(o.AppRootProvider,{children:(0,s.jsx)(r.AudioCatalogMusicMixBlockContext.Provider,{value:{needShowOnboarding:t||!1},children:(0,s.jsx)(a.AudioCatalogMusicMixBlockEffector,{...e})})})},996374:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockComponent:()=>d});var s=i(474848),o=i(351118),a=i(296540),r=i(720836),n=i(624948),_=i(213879),l=i(460650);function d({id:t,backgroundAnimationUrl:e,description:i,header:d,style:c,playing:u,loading:h,onTogglePlayClick:p}){const{width:m,height:g}=(0,a.useMemo)((()=>{switch(c){case"default":return{width:910,height:248};case"secondary":return{width:870,height:208}}}),[c]);return(0,s.jsxs)("div",{className:(0,o.classNames)(l.default.root,l.default[c]),children:[(0,s.jsx)("div",{className:l.default.wrap,children:(0,s.jsx)(r.Placeholder,{mode:"default"===c?"default":"overlay",icon:(0,s.jsx)(_.AudioCatalogMusicMixBlockStateButtonContainer,{state:u?"play":"pause",loading:h&&!u,ariaLabelPlay:"play",ariaLabelPause:"pause",style:c,onClick:p}),header:d,children:i})}),(0,s.jsx)(n.Lottie,{options:{width:m,height:g,lazyLoading:!0,loop:!0,upscale:!0,autoplay:!1,group:t,animationUrl:e},play:u})]})}},135822:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockComponent:()=>s.AudioCatalogMusicMixBlockComponent});var s=i(996374)},993926:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButton:()=>h});var s=i(474848),o=i(296540),a=i(202350),r=i(271036),n=i(723723),_=i(700272),l=i(33443),d=i(309481);const c={play:l.Icon28Pause,pause:d.Icon28Play};function u({state:t,loading:e,style:i,onClick:o,ariaLabelPlay:l,ariaLabelPause:d}){const u=c[t],h="play"===t?l:d;return(0,s.jsx)(a.RoundedGroup.Item,{mode:"default"===i?"shadow":"overlay",children:(0,s.jsx)(r.IconButton,{className:(0,n.getColorClass)("color_icon_primary"),onClick:o,"aria-label":h,children:e?(0,s.jsx)(_.Spinner,{size:"regular"}):(0,s.jsx)(u,{})})})}const h=(0,o.memo)(u)},726564:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButton:()=>s.AudioCatalogMusicMixBlockStateButton});var s=i(993926)},661119:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockComponent:()=>s.AudioCatalogMusicMixBlockComponent,AudioCatalogMusicMixBlockStateButton:()=>o.AudioCatalogMusicMixBlockStateButton});var s=i(135822),o=i(726564)},252552:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButtonContainer:()=>l});var s=i(474848),o=i(753261),a=i(661119),r=i(296540),n=i(852227);const _=n.AudioCatalogMusicMixEmitter.ensure();function l(t){const{needShowOnboarding:e}=(0,o.useAudioCatalogMusicMixBlockContext)(),[i,l]=(0,r.useState)(e),d=()=>{i?_.emit(n.AudioCatalogMusicMixBlockEventType.AudioRecomsOnboardingShowRequested,{onHideOnboarding:()=>{l(!1),t.onClick?.()}}):t.onClick?.()};return i?(0,s.jsx)(a.AudioCatalogMusicMixBlockStateButton,{...t,state:"pause",loading:!1,onClick:d}):(0,s.jsx)(a.AudioCatalogMusicMixBlockStateButton,{...t,onClick:d})}},213879:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockStateButtonContainer:()=>s.AudioCatalogMusicMixBlockStateButtonContainer});var s=i(252552)},753261:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockContext:()=>o,useAudioCatalogMusicMixBlockContext:()=>a});var s=i(625451);const{Context:o,useContext:a}=(0,s.makeStrictContext)({name:"AudioCatalogMusicMixBlockContext",defaultValue:{needShowOnboarding:!1}})},520708:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEffector:()=>n});var s=i(474848),o=i(293721),a=i(661119),r=i(938255);function n({id:t,blockId:e,backgroundAnimationUrl:i,description:n,header:_,title:l,style:d}){const c=(0,o.useUnit)(r.audioCatalogVkMixBlockService.$isPlaying),u=(0,o.useUnit)(r.audioCatalogVkMixBlockService.playAudioMixFx),h=(0,o.useUnit)(r.audioCatalogVkMixBlockService.$loading);return(0,s.jsx)(a.AudioCatalogMusicMixBlockComponent,{id:t,backgroundAnimationUrl:i,description:n,header:_,style:d,playing:c,loading:h,onTogglePlayClick:()=>{u({id:t,blockId:e,title:l})}})}},800127:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEffector:()=>s.AudioCatalogMusicMixBlockEffector});var s=i(520708)},235393:(t,e,i)=>{i.d(e,{createAudioCatalogVkMixBlockService:()=>c});var s=i(32489),o=i(630082),a=i(380948),r=i(297420),n=i(679937),_=i(346671),l=i(803111),d=i(540462);function c(){const t=(0,s.createDomain)("audio/audioPage/catalog/VkMixBlockService"),e=(0,l.ensureAudioPlayerService)(),i=t.createEvent(),c=(0,s.restore)(i,null),u=(0,o.equals)(e.$currentPlaylist.map((t=>t?.getType?.())),n.PLAYLIST_TYPE_VKMIX),h=(0,a.and)(e.$isPlaying,u),p=(0,s.attach)({source:[h],effect:async([t],{id:s,title:o,blockId:a})=>{const r=await e.getCurrentPlaylistFx();if(!t&&!r||!t&&r?.getType()!==n.PLAYLIST_TYPE_VKMIX)try{const t=new n.AudioMixPlaylist({id:s,blockId:a,title:o,items:[],context:n.PLAYLIST_CONTEXT_VKMIX});await t.ensureAt(0);const r=new _.AudioMixPlaylistAdapter(t),l=r.getAudioAt(0);if(!l)throw new Error("First audio in VK Mix not found");i(t),await e.playFx({audio:l,playlist:r,context:n.PLAYLIST_CONTEXT_VKMIX})}catch(t){throw new Error("Failed to initialize VK Mix playlist")}else!t&&r?.getType()===n.PLAYLIST_TYPE_VKMIX&&r?e.playFx():e.pauseFx()}}),m=(0,a.and)(p.pending,(0,r.not)(h)),g=(0,s.attach)({source:c,effect(t){if(!t)throw new Error("Mix not exists");t.launchSession()}}),b=(0,s.attach)({source:c,effect(t){if(!t)throw new Error("Mix not exists");t.breakSession()}});return(0,s.sample)({clock:u,filter:t=>!!(0,d.partConfigEnabled)("frontend.audio_recom_playlists_starts_with_last_played_audio_web")&&t,target:g}),(0,s.sample)({clock:u,filter:t=>!!(0,d.partConfigEnabled)("frontend.audio_recom_playlists_starts_with_last_played_audio_web")&&!t,target:b}),{$isPlaying:h,$loading:m,playerService:e,playAudioMixFx:p}}},938255:(t,e,i)=>{i.d(e,{audioCatalogVkMixBlockService:()=>s});const s=(0,i(235393).createAudioCatalogVkMixBlockService)()},113203:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixEmitter:()=>a});var s=i(584053),o=i(558137);class a extends s.Emitter{constructor(){super()}}a.ensure=(0,o.makeSharedState)("AudioCatalogMusicMixEmitter",(()=>new a),{version:1})},556506:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEventType:()=>s});var s=function(t){return t.AudioRecomsOnboardingShowRequested="audioRecomsOboardingShowRequested",t}({})},852227:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockEventType:()=>s.AudioCatalogMusicMixBlockEventType,AudioCatalogMusicMixEmitter:()=>o.AudioCatalogMusicMixEmitter});var s=i(556506),o=i(113203)},502722:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockApplication:()=>s.AudioCatalogMusicMixBlockApplication,AudioCatalogMusicMixBlockEventType:()=>o.AudioCatalogMusicMixBlockEventType,AudioCatalogMusicMixEmitter:()=>o.AudioCatalogMusicMixEmitter});i(977131);var s=i(508781),o=i(852227)},675058:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockModel:()=>d});var s=i(327813),o=i(559167),a=i(983567),r=i(785684),n=i(392358),_=i(540462),l=i(319756);class d{setMix(t){const e=(0,_.partConfigEnabled)("frontend.audio_recom_playlists_starts_with_last_played_audio_web"),{mixProvider:i}=this;this._mix=i.get(t.identity)??i.create(t,{isSessionFeatureEnabled:e}),this.ap.subscribe(n.AudioPlayerEventType.PLAYLIST_CHANGED,(()=>{(0,_.partConfigEnabled)("frontend.audio_recom_playlists_starts_with_last_played_audio_web")&&this._mix&&(this.isMixInQueue?this._mix.launchSession():this._mix.breakSession())}))}get mix(){return this._mix}ensureMix(){const{mix:t}=this;if(!t)throw new Error("MusicMix is not defined");return t}get loading(){return!1}get isPlaying(){return this.isMixInQueue&&this.ap.isPlaying()}get isPaused(){return this.isMixInQueue&&!this.ap.isPlaying()}get isMixInQueue(){const{mixAdapter:t}=this,e=this.ap.getCurrentPlaylist();return!(!e||!t)&&e.getType()===t.type}async togglePlay(){const{ap:t}=this;this.isPlaying?t.pause():this.isPaused?t.resume():this.play()}async play(){const t=this.ensureMix(),{mixAdapter:e}=this;if(!e)throw new Error("MusicMix adapter is not defined");await t.ensureAt(0);const i=e.getAudioAt(t.length-1);if(!i)throw new Error("Last audio in VK Mix not found");await this.ap.playList({audio:i,playlist:e,context:e.context})}get mixAdapter(){const{mix:t}=this;return t&&new r.MusicMixAdapter(t)}constructor(){this.ap=(0,a.getAudioPlayer)(),this.mixProvider=(0,l.ensureDIRootWebContainer)().resolve(o.MusicMixProvider),this._mix=null,(0,s.makeAutoObservable)(this)}}},999948:(t,e,i)=>{i.d(e,{AudioCatalogMusicMixBlockModel:()=>s.AudioCatalogMusicMixBlockModel});var s=i(675058)},481183:(t,e,i)=>{i.d(e,{AudioInternalContext:()=>n});var s=i(331635),o=i(132028),a=i(765966),r=i(955060);class n{constructor(t){this.eventsEmitter=new a.Emitter({catchListener:e=>{t.log(e)}})}}n=(0,s.__decorate)([o.scope.global(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===r.ErrorLogger?Object:r.ErrorLogger])],n)},42503:(t,e,i)=>{i.d(e,{toAudioData:()=>_});var s=i(885528),o=i(549515),a=i(382902),r=i(35215),n=i(276719);function _(t){const{duration:e}=t,i=function(t){const{legal_notices_type:e}=t;return(0,s.bitmaskToAudioLegal)(e??0)}(t),o=t?.podcast_info?.plays;return{identity:(0,a.toOwnedAudioIdentityData)(t),title:t.title,cover:l(t),url:t.url||null,isExplicit:i.isExplicit,legal:i,authors:(0,n.toAudioDataAuthors)(t),duration:Number.isFinite(e)?e:void 0,isBlocked:d(t),plays:Number.isFinite(o)?o:void 0}}function l(t){const e=t.album?.thumb??t?.thumb,i=t.album?.main_color||t.main_color;return e?(0,o.mapAudioPhotoToAudioImage)(e,i):null}function d({dmca_blocked:t,content_restricted:e}){return!!t||(0,r.isNumber)(e)&&0!==e}},382902:(t,e,i)=>{function s(t){return{id:t.id,ownerId:t.owner_id,accessKey:t.access_key}}i.d(e,{toOwnedAudioIdentityData:()=>s})},276719:(t,e,i)=>{i.d(e,{artistToAudioDataAuthorInfo:()=>a,toAudioDataAuthors:()=>o});var s=i(397034);function o(t){return{main:t?.main_artists?.map(a)??[],feat:t?.featured_artists?.map(a)??[],raw:t.artist}}function a(t){return{name:t.name,avatar:r(t)}}function r(t){const e=t.photo;return e?(0,s.mapBaseImagesToAudioImage)(e):null}},828075:(t,e,i)=>{i.d(e,{AudioContextableEntityMultiton:()=>l});var s=i(434518),o=i(763812),a=i(331635),r=i(327813),n=i(70916),_=(0,o._)("_makeCachedDataGetter");class l{get(t,e){const i=this.getEntityKey(t,e);let s=this.entities.get(i);if(s)return s;if(!e)return;const o=this.data.get(t);if(o){const a=this.constructEntity(this.makeEntityParams(t,o),e);s=a,this.entities.set(i,a)}return s}getStrict(t,e){const i=this.get(t,e);if(!i)throw new Error("Entity not created or lost cache");return i}create(t,e){const{identity:i,data:s}=t;if(this.setState(i,t.state),this.data.set(i,s),e){const e=this.constructEntity(this.makeEntityParams(i,s));this.entities.set(this.getEntityKey(t.identity),e)}const o=this.constructEntity(this.makeEntityParams(i,s),e);return this.entities.set(this.getEntityKey(t.identity,e),o),o}getEntityKey(t,e){const i=e&&this.getContextKey(e);return`${t.fullId}${i??""}`}makeEntityParams(t,e){return{identity:t,getData:(0,s._)(this,_)[_](t,e),attachContext:e=>this.getStrict(t,e)}}constructor(){Object.defineProperty(this,_,{value:d}),this.entities=new Map,this.data=new n.ObservableIdentityMap,(0,r.makeObservable)(this)}}function d(t,e){let i=e;return()=>{let e=this.data.get(t);return e&&(i=e),e??i}}(0,a.__decorate)([r.observable],l.prototype,"entities",void 0),(0,a.__decorate)([r.observable],l.prototype,"data",void 0),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof CreateParams?Object:CreateParams,"undefined"==typeof Context?Object:Context]),(0,a.__metadata)("design:returntype",Object)],l.prototype,"create",null)},397034:(t,e,i)=>{function s(t,e){return{sizes:o(t),mainColor:e}}function o(t){return t.length?t.map(a):[]}function a(t){return{width:t.width,height:t.height,src:t.url}}i.d(e,{mapBaseImagesToAudioImage:()=>s})},473512:(t,e,i)=>{function s(t){return t.sizes.map((t=>({sizes:o(t),src:t.src})))}function o(t){return`${t.width}x${t.height}`}i.d(e,{toMediaImages:()=>s})},466707:(t,e,i)=>{i.d(e,{Audio:()=>h});var s=i(434518),o=i(763812),a=i(331635),r=i(327813),n=i(473512),_=i(221592),l=(0,o._)("_identity"),d=(0,o._)("_context"),c=(0,o._)("_getData"),u=(0,o._)("_attachContext");class h{get identity(){return(0,s._)(this,l)[l]}get context(){return(0,s._)(this,d)[d]}attachContext(t){const e=(0,s._)(this,u)[u];if(!e)throw new Error("Audio is not contextable");return e(t)}get data(){return(0,s._)(this,c)[c]()}get type(){return this.data.type}get url(){return this.data.url}get title(){return this.data.title}get cover(){return this.data.cover}get isExplicit(){return this.data.isExplicit}get legal(){return this.data.legal}get authors(){return this.data.authors}get duration(){return this.data.duration}get plays(){return this.data.plays}get isBlocked(){return this.data.isBlocked}get mediaMetadata(){const{authors:t,cover:e}=this;return{title:this.title,artist:t&&(0,_.stringifyAudioAuthors)(t),artwork:e?(0,n.toMediaImages)(e):[]}}getContextStrict(){const{context:t}=this;if(!t)throw new Error("Audio is not contextual");return t}constructor(t){Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),(0,s._)(this,l)[l]=t.identity,(0,s._)(this,d)[d]=t.context??null,(0,s._)(this,c)[c]=t.getData,(0,s._)(this,u)[u]=t.attachContext,(0,r.makeObservable)(this)}}(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"data",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"type",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"url",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"title",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"cover",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"isExplicit",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"legal",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"authors",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"duration",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"plays",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",Object),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"isBlocked",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type","undefined"==typeof MediaMetadataInit?Object:MediaMetadataInit),(0,a.__metadata)("design:paramtypes",[])],h.prototype,"mediaMetadata",null)},221592:(t,e,i)=>{function s(t){return[t.main.map((({name:t})=>t)).filter(Boolean).join(", "),t.feat.map((({name:t})=>t)).filter(Boolean).join(", ")].filter(Boolean).join(" . feat ")||t.raw}i.d(e,{stringifyAudioAuthors:()=>s})},942539:(t,e,i)=>{i.d(e,{AudioEntityToggle:()=>a});var s=i(331635),o=i(327813);class a{get isPending(){return this.toggleService.pending.has(this.identity)}get state(){return!!this.toggleService.state.get(this.identity)}activate(...[t]){return this.toggleService.activate(this.identity,t)}deactivate(...[t]){return this.toggleService.deactivate(this.identity,t)}toggle(t,e){return this.toggleService.toggle(this.identity,t,e)}constructor(t,e){this.identity=t,this.toggleService=e,(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],a.prototype,"isPending",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],a.prototype,"state",null)},306338:(t,e,i)=>{i.d(e,{MusicAudio:()=>c});var s=i(331635),o=i(327813),a=i(70148),r=i(466707),n=i(863840),_=i(898950),l=i(942539),d=i(340615);class c extends r.Audio{get subtitle(){return this.data.subtitle}get album(){return this.data.album}get hasLyrics(){return this.data.hasLyrics}get rightholderMarks(){return this.data.rightholderMarks}get apiAudio(){return this.data.apiAudio}get releaseAudioIdentity(){const t=this.data.releaseAudioIdentity;return t&&new a.OwnedIdentity(t)}get mediaMetadata(){return{...super.mediaMetadata,album:this.album?.title}}get releaseAudio(){const t=this.releaseAudioIdentity;return t?this.trackProvider.get(t)??null:null}get originalAudio(){if(this.releaseAudio)return this.releaseAudio;if(!this.isMine)return null;const t=this.service.myMusic.getSource(this.identity);return t?this.trackProvider.get(t)??null:null}get isMine(){return this.myMusic.isOwned}get specialProject(){return this.data.specialProject}constructor(t){super(t);const{identity:e}=this,{service:i}=t,s=this.context?.trackCode??null;this.trackProvider=t.trackProvider,this.service=i,this.myMusic=new _.MusicAudioOwning({identity:e,trackCode:s,service:i.myMusic,getHasOwnedStateFallback:()=>this.data.apiAudio.like}),this.groupsMusic=new d.MusicAudioGroupsMusic({identity:e,trackCode:s,service:i.groupMusicServices}),this.dislike=new l.AudioEntityToggle(e,i.dislikes),this.lyrics=new n.MusicLyrics({identity:e,service:i.lyrics}),(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"subtitle",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"album",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"hasLyrics",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"rightholderMarks",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"apiAudio",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"releaseAudioIdentity",null),(0,s.__decorate)([o.override,(0,s.__metadata)("design:type","undefined"==typeof MediaMetadataInit?Object:MediaMetadataInit),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"mediaMetadata",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"releaseAudio",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",Object),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"originalAudio",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"isMine",null),(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],c.prototype,"specialProject",null)},340615:(t,e,i)=>{i.d(e,{MusicAudioGroupsMusic:()=>o});var s=i(898950);class o{create(t){return new s.MusicAudioOwning({identity:this.identity,trackCode:this.trackCode,service:this.service.get(t)})}constructor(t){this.identity=t.identity,this.trackCode=t.trackCode,this.service=t.service}}},930671:(t,e,i)=>{i.d(e,{MusicTrack:()=>r});var s=i(331635),o=i(327813),a=i(306338);class r extends a.MusicAudio{get isFocusTrack(){return this.data.isFocusTrack}constructor(t){super(t),(0,o.makeObservable)(this)}}(0,s.__decorate)([o.computed,(0,s.__metadata)("design:type",void 0),(0,s.__metadata)("design:paramtypes",[])],r.prototype,"isFocusTrack",null)},247512:(t,e,i)=>{i.d(e,{MusicMix:()=>m});var s=i(434518),o=i(763812),a=i(331635),r=i(327813),n=(0,o._)("_audioApi"),_=(0,o._)("_audioProvider"),l=(0,o._)("_identity"),d=(0,o._)("_context"),c=(0,o._)("_getData"),u=(0,o._)("_attachContext"),h=(0,o._)("_ensureAbsIndex"),p=(0,o._)("_fetchAtByNext");class m{get identity(){return(0,s._)(this,l)[l]}get context(){return(0,s._)(this,d)[d]}get isSessionLaunched(){return this.state.isSessionLaunched}get isEmpty(){return!1}get head(){return this.items}get data(){return(0,s._)(this,c)[c]()}get length(){return this.items.length}get type(){return this.data.type}get title(){return this.data.title}get description(){return this.data.description}get backgroundAnimationUrl(){return this.data.backgroundAnimationUrl}audioAt(t){return this.items.at(t)}audioAtStrict(t){const e=this.audioAt(t);if(!e)throw new Error("Audio not found");return e}async fetchAt(t,e){return(0,s._)(this,p)[p](t,e)}async fetchNext(t=1){const e=(await(0,s._)(this,n)[n].getStreamMixAudios({mix_id:this.identity.id,count:t,...this.isSessionFeatureEnabled?{append:this.isSessionLaunched?1:0}:{}})).map((t=>(0,s._)(this,_)[_].createContextualFromAPI(t,{list:this})));return this.items.push(...e),e}async ensureAt(t){const e=(0,s._)(this,h)[h](t);let i=this.audioAt(e);return i||this.fetchAt(e,{prefetch:!0})}attachContext(t){const e=(0,s._)(this,u)[u];if(!e)throw new Error("Audio is not contextable");return e(t)}launchSession(){if(0===this.length)throw new Error("Music mix session cannot be launched if there are no tracks in the mix");this.state.isSessionLaunched=!0}breakSession(){this.clearItems(),this.state.isSessionLaunched=!1}clearItems(){this.items.length=0}constructor(t){Object.defineProperty(this,h,{value:g}),Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),Object.defineProperty(this,l,{writable:!0,value:void 0}),Object.defineProperty(this,d,{writable:!0,value:void 0}),Object.defineProperty(this,c,{writable:!0,value:void 0}),Object.defineProperty(this,u,{writable:!0,value:void 0}),Object.defineProperty(this,p,{writable:!0,value:void 0}),this.items=[],this.state={isSessionLaunched:!1},(0,s._)(this,p)[p]=function(t,e={}){const{name:i}=e;let s=!1;return async(...e)=>{try{if(s)throw new Error("Async loop call detected"+(i?` for async ${i}`:""));s=!0;const o=t(...e);return o.finally((()=>{s=!1})),o}finally{s=!1}}}((async(t,{range:e=0}={})=>{const i=b(this,t),s=this.audioAt(i),o=i+e+1-this.length;if(s&&o<=0)return s;const[a]=await this.fetchNext(o);if(!a)throw new Error("fetchNext have not return audios");return a})),(0,s._)(this,n)[n]=t.audioApi,(0,s._)(this,_)[_]=t.audioProvider,(0,s._)(this,l)[l]=t.identity,(0,s._)(this,d)[d]=t.context,(0,s._)(this,c)[c]=t.getData,(0,s._)(this,u)[u]=t.attachContext,this.isSessionFeatureEnabled=t.isSessionFeatureEnabled??!1,(0,r.makeObservable)(this)}}function g(t){return b(this,t)}function b(t,e){const i=function(t,e){return e<0?t+e:e}(t.length,e);if(!function(t,e){return e>=0&&e<=t.length}(t,i))throw new Error("Index is out of range");return i}(0,a.__decorate)([r.observable.deep,(0,a.__metadata)("design:type","undefined"==typeof IMusicMixState?Object:IMusicMixState)],m.prototype,"state",void 0),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"description",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],m.prototype,"backgroundAnimationUrl",null),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],m.prototype,"launchSession",null),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],m.prototype,"breakSession",null),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[]),(0,a.__metadata)("design:returntype",void 0)],m.prototype,"clearItems",null)},158400:(t,e,i)=>{i.d(e,{MusicTrackProvider:()=>M});var s=i(434518),o=i(763812),a=i(331635),r=i(327813),n=i(132028),_=i(74270),l=i(70148),d=i(873900),c=i(895587),u=i(828075),h=i(382902),p=i(23975),m=i(930671),g=i(587029),b=i(269230),E=i(528697),y=(0,o._)("_corruptedIdentities"),f=(0,o._)("_setMyMusicState");class M extends u.AudioContextableEntityMultiton{get corruptedIdentities(){return(0,s._)(this,y)[y]}createContextualFromAPI(t,e){const i=t.track_code;if(!i)throw new Error("trackCode is not defined in source");return this.createFromAPI(t).attachContext({...e,trackCode:i})}createFromAPI(t){return this.create({identity:new l.OwnedIdentity((0,h.toOwnedAudioIdentityData)(t)),data:(0,b.toMusicTrackData)(t),state:(0,E.toMusicAudioStateData)(t)})}isFetchingAudio(t){return this.pendingEntities.has(this.toEntityIdentity(t))}async ensure(t){const e=this.get(t);return e||this.fetch(t)}async fetch(t){const[e]=await this.fetchMany([t]);if(!e)throw p.AudioError.createNotFoundError("Server did not return the audio");return e}async fetchMany(t){if(!t.length)return[];try{this.markPending(t);const e=await this.repository.audioGetById({audios:t.map(d.getIdentityAccessRawId).join(",")});return(0,r.runInAction)((()=>{const i=e.map((t=>this.createFromAPI(t)));return this.unmarkPending(t),i}))}catch(e){throw this.unmarkPending(t),e}}async ensureMany(t){let e=[];const i=[],s=[];for(const i of t){const t=this.get(i);t?e.push(t):s.push(i)}if(!s.length)return e;await this.fetchMany(s),e=[];for(const s of t){const t=this.get(s);t?e.push(t):(console.warn(`Audio ${s.fullId} not found in audio.getById response`),i.push(s))}return this.markCorrupted(i),e}constructEntity(t,e){return new m.MusicTrack({...t,context:e,trackProvider:this,service:this.service})}setState(t,e){const{hasLyrics:i,disliked:o}=e;(0,s._)(this,f)[f](t,e),void 0!==i&&this.service.lyrics.setHasLyrics(t,i),void 0!==o&&this.service.dislikes.setState(t,o)}getContextKey(t){return`${t.list?.identity.fullId??""}/${t.trackCode}`}toEntityIdentity(t){return new l.OwnedIdentity(t)}markPending(t){t.forEach((t=>this.pendingEntities.add(t)))}unmarkPending(t){t.forEach((t=>this.pendingEntities.delete(t)))}markCorrupted(t){t.forEach((t=>(0,s._)(this,y)[y].add(t)))}constructor(t,e){super(),Object.defineProperty(this,f,{value:v}),Object.defineProperty(this,y,{writable:!0,value:void 0}),this.repository=t,this.service=e,this.pendingEntities=new _.ObservableIdentitySet,(0,s._)(this,y)[y]=new _.ObservableIdentitySet,(0,r.makeObservable)(this)}}function v(t,e){const{liked:i,originalIdentity:s}=e,{myMusic:o}=this.service;let a;void 0!==i&&(a=this.toEntityIdentity(s),o.setState(a,t,i))}(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,a.__metadata)("design:returntype",Promise)],M.prototype,"ensure",null),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",["undefined"==typeof IMusicAudioIdentity?Object:IMusicAudioIdentity]),(0,a.__metadata)("design:returntype",Promise)],M.prototype,"fetch",null),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",Promise)],M.prototype,"fetchMany",null),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",Promise)],M.prototype,"ensureMany",null),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],M.prototype,"markPending",null),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],M.prototype,"unmarkPending",null),(0,a.__decorate)([r.action,(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[Object]),(0,a.__metadata)("design:returntype",void 0)],M.prototype,"markCorrupted",null),M=(0,a.__decorate)([n.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===c.AudioRepository?Object:c.AudioRepository,void 0===g.MusicService?Object:g.MusicService])],M)},269230:(t,e,i)=>{i.d(e,{toMusicSnippetClip:()=>c,toMusicSnippetData:()=>d,toMusicTrackData:()=>l});var s=i(42503),o=i(639653),a=i(67259),r=i(887229);function n(t,e){return{...(0,s.toAudioData)(e),type:t,hasLyrics:e.has_lyrics??!1,authors:(0,a.toMusicAudioDataAuthors)(e),album:u(e),duration:e.duration,subtitle:e.subtitle??"",releaseAudioIdentity:(0,r.toReleaseMusicAudioIdentityData)(e),rightholderMarks:e.rightholder_marks??[],apiAudio:e,specialProject:_(e.special_project_id)}}function _(t){return t?{id:t}:null}function l(t){return{...n(o.AudioType.MusicTrack,t),isFocusTrack:t.is_focus_track??!1}}function d(t,e){return{...n(o.AudioType.MusicSnippet,t),clip:e??null}}function c(t){return t?.clip_from&&t?.clip_to?{to:t.clip_to,from:t.clip_from}:null}function u(t){const{album:e}=t;return e?{id:e.id,ownerId:e.owner_id,title:e.title}:null}},528697:(t,e,i)=>{i.d(e,{toMusicAudioStateData:()=>a});var s=i(382902),o=i(887229);function a(t){let e=(0,o.toReleaseMusicAudioIdentityData)(t);return e??(e=(0,s.toOwnedAudioIdentityData)(t)),{hasLyrics:t.has_lyrics,liked:t.like,disliked:t.dislike,originalIdentity:e}}},887229:(t,e,i)=>{i.d(e,{toReleaseMusicAudioIdentityData:()=>a});var s=i(187966),o=i(768035);function a(t){const{release_audio_id:e}=t;return e&&(0,s.isAnyRawId)(e)?(0,o.parseRawId)(e):null}},67259:(t,e,i)=>{i.d(e,{toMusicAudioDataAuthors:()=>a});var s=i(276719),o=i(996331);function a(t){return{main:t.main_artists?.map(r)??[],feat:t.featured_artists?.map(r)??[],raw:t.artist}}function r(t){return{...(0,s.artistToAudioDataAuthorInfo)(t),id:t.id,avatar:(0,o.toMusicAuthorAvatar)(t)}}},996331:(t,e,i)=>{i.d(e,{toMusicAuthorAvatar:()=>o});var s=i(397034);function o(t){const e=t.photo;return e?(0,s.mapBaseImagesToAudioImage)(e):null}},863840:(t,e,i)=>{i.d(e,{MusicLyrics:()=>l});var s=i(434518),o=i(763812),a=i(331635),r=i(327813),n=(0,o._)("_identity"),_=(0,o._)("_service");class l{get data(){return(0,s._)(this,_)[_].get((0,s._)(this,n)[n])}get isExist(){return(0,s._)(this,_)[_].hasLyrics((0,s._)(this,n)[n])}ensure(){return(0,s._)(this,_)[_].ensure((0,s._)(this,n)[n])}constructor(t){Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),(0,s._)(this,n)[n]=t.identity,(0,s._)(this,_)[_]=t.service,(0,r.makeObservable)(this)}}(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],l.prototype,"data",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],l.prototype,"isExist",null)},898950:(t,e,i)=>{i.d(e,{MusicAudioOwning:()=>l});var s=i(434518),o=i(763812),a=i(331635),r=i(327813),n=(0,o._)("_getHasOwnedStateFallback"),_=(0,o._)("_service");class l{get ownerId(){return(0,s._)(this,_)[_].ownerId}get hasOwned(){return!!((0,s._)(this,_)[_].get(this.identity)??(null==(0,s._)(this,n)[n]?void 0:(0,s._)(this,n)[n].call(this)))}get isOwned(){return(0,s._)(this,_)[_].isOwned(this.identity)}get isDeleted(){return(0,s._)(this,_)[_].isDeleted(this.identity)}get isPending(){return(0,s._)(this,_)[_].checkPending(this.identity)}add(t){if(!this.trackCode)throw new Error("trackCode required");return(0,s._)(this,_)[_].add(this.identity,{...t,trackCode:this.trackCode})}delete(t){return(0,s._)(this,_)[_].delete(this.identity,t)}restore(t){return(0,s._)(this,_)[_].restore(this.identity,t)}constructor(t){Object.defineProperty(this,n,{writable:!0,value:void 0}),Object.defineProperty(this,_,{writable:!0,value:void 0}),this.identity=t.identity,this.trackCode=t.trackCode,(0,s._)(this,_)[_]=t.service,(0,s._)(this,n)[n]=t.getHasOwnedStateFallback??null,(0,r.makeObservable)(this)}}(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],l.prototype,"hasOwned",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],l.prototype,"isOwned",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],l.prototype,"isDeleted",null),(0,a.__decorate)([r.computed,(0,a.__metadata)("design:type",void 0),(0,a.__metadata)("design:paramtypes",[])],l.prototype,"isPending",null)},559167:(t,e,i)=>{i.d(e,{MusicMixProvider:()=>c});var s=i(331635),o=i(327813),a=i(132028),r=i(70916),n=i(346675),_=i(843161),l=i(247512),d=i(158400);class c{get(t){return this.entities.get(this.toEntityIdentity(t))}create(t,{isSessionFeatureEnabled:e=!1}={}){const i=this.toEntityIdentity(t.identity);this.entitiesData.set(i,t);const s=new l.MusicMix({identity:i,getData:this.makeCachedDataGetter(i,t),audioApi:this.audioApi,audioProvider:this.trackProvider,isSessionFeatureEnabled:e,context:{ref:null}});return this.entities.set(s.identity,s),s}toEntityIdentity(t){return new _.SingleIdentity(t)}makeCachedDataGetter(t,e){let i=e;return()=>{let e=this.entitiesData.get(t);return e&&(i=e),e??i}}constructor(t,e){this.audioApi=t,this.trackProvider=e,this.entities=new r.ObservableIdentityMap,this.entitiesData=new r.ObservableIdentityMap,(0,o.makeAutoObservable)(this)}}c=(0,s.__decorate)([a.scope.global(),(0,s.__metadata)("design:type",Function),(0,s.__metadata)("design:paramtypes",[void 0===n.AudioApi?Object:n.AudioApi,void 0===d.MusicTrackProvider?Object:d.MusicTrackProvider])],c)},895587:(t,e,i)=>{i.d(e,{AudioRepository:()=>g});var s=i(434518),o=i(763812),a=i(331635),r=i(327813),n=i(132028),_=i(346675),l=i(213586),d=i(70148),c=i(481183),u=(0,o._)("_eventsEmitter"),h=(0,o._)("_createAudioFetchedEvent"),p=(0,o._)("_createPlaylistFetchedEvent"),m=(0,o._)("_createLyricsFetchedEvent");class g{async audioGetById(t,e){const i=await this.audioApi.getById(t,e);return(0,r.runInAction)((()=>{for(const e of i){const i=(0,s._)(this,h)[h]("audio.getById",{audio:e,urlType:"snippet"===t.url_type?"music_snippet":"default",ref:t.ref??null});(0,s._)(this,u)[u].emit("audioFetched",i)}return i}))}async audioGetAudiosByArtist(t,e){const i=await this.audioApi.getAudiosByArtist(t,e),o="audio.getAudiosByArtist";return(0,r.runInAction)((()=>{for(const e of i.items){const i=(0,s._)(this,h)[h](o,{audio:e,urlType:"snippet"===t.type?"music_snippet":"default",ref:null});(0,s._)(this,u)[u].emit("audioFetched",i)}for(const t of i.groups??[])(0,s._)(this,u)[u].emit("groupFetched",{group:t,method:o});for(const t of i.profiles??[])(0,s._)(this,u)[u].emit("userFetched",{user:t,method:o});return i}))}async audioGetRecommendations(t,e){const i=await this.audioApi.getRecommendations(t,e);return(0,r.runInAction)((()=>{for(const t of i.items){const e=(0,s._)(this,h)[h]("audio.getRecommendations",{audio:t,urlType:"default",ref:null});(0,s._)(this,u)[u].emit("audioFetched",e)}return i}))}async audioGetAudioPreviewUrl(t,e){const i=d.OwnedIdentity.fromRawId(t.audio_id),o=await this.audioApi.getAudioPreviewUrl(t,e);return(0,r.runInAction)((()=>((0,s._)(this,u)[u].emit("getAudioPreviewUrlResponse",{identity:i,params:t,response:o}),o)))}async podcastsGetEpisode(t,e){const i=await this.podcastsApi.getEpisode(t,e);return(0,r.runInAction)((()=>{const e=i,o=(0,s._)(this,h)[h]("podcasts.getEpisode",{audio:e,urlType:"default",ref:t.ref??null});return(0,s._)(this,u)[u].emit("audioFetched",o),i}))}async getPlaylistByIdExtended(t,e){const i=await this.audioApi.getPlaylistByIdExtended(t,e),o="audio.getPlaylistById";return(0,r.runInAction)((()=>{const{playlist:e}=i,a=(0,s._)(this,p)[p](o,{playlist:e,ref:t.ref??null});this.context.eventsEmitter.emit("playlistFetched",a);for(const t of i.groups??[])(0,s._)(this,u)[u].emit("groupFetched",{group:t,method:o});for(const t of i.profiles??[])(0,s._)(this,u)[u].emit("userFetched",{user:t,method:o});return i}))}async getPlaylists(t,e){const i=await this.audioApi.getPlaylists(t,e),o="audio.getPlaylists";return(0,r.runInAction)((()=>{for(const t of i.items){const e=(0,s._)(this,p)[p](o,{playlist:t,ref:null});this.context.eventsEmitter.emit("playlistFetched",e)}for(const t of i.groups??[])(0,s._)(this,u)[u].emit("groupFetched",{group:t,method:o});for(const t of i.profiles??[])(0,s._)(this,u)[u].emit("userFetched",{user:t,method:o});return i}))}async podcastsGetEpisodes(t,e){const i=await this.podcastsApi.getEpisodes(t,e),o="podcasts.getEpisodes";return(0,r.runInAction)((()=>{for(const e of i.items){const i=(0,s._)(this,h)[h](o,{audio:e,urlType:"default",ref:t.ref??null});(0,s._)(this,u)[u].emit("audioFetched",i)}for(const t of i.groups??[])(0,s._)(this,u)[u].emit("groupFetched",{group:t,method:o});for(const t of i.profiles??[])(0,s._)(this,u)[u].emit("userFetched",{user:t,method:o});return i}))}async audioGetLyrics(t,e){const i=await this.audioApi.getLyrics(t,e);return(0,r.runInAction)((()=>{const t=(0,s._)(this,m)[m]("audio.getLyrics",{lyrics:i});return(0,s._)(this,u)[u].emit("lyricsFetched",t),i}))}constructor(t,e,i){Object.defineProperty(this,u,{get:b,set:void 0}),Object.defineProperty(this,h,{value:E}),Object.defineProperty(this,p,{value:y}),Object.defineProperty(this,m,{value:f}),this.audioApi=t,this.podcastsApi=e,this.context=i}}function b(){return this.context.eventsEmitter}function E(t,e){const{audio:i}=e;return{identity:new d.OwnedIdentity({id:i.id,ownerId:i.owner_id,accessKey:i.access_key}),audio:i,urlType:e.urlType,ref:e.ref,method:t}}function y(t,e){const{playlist:i,ref:s}=e;return{identity:new d.OwnedIdentity({id:i.id,ownerId:i.owner_id,accessKey:i.access_key}),playlist:i,ref:s,method:t}}function f(t,e){const{lyrics:i}=e;return{lyrics:i,method:t}}g=(0,a.__decorate)([n.scope.global(),(0,a.__metadata)("design:type",Function),(0,a.__metadata)("design:paramtypes",[void 0===_.AudioApi?Object:_.AudioApi,void 0===l.PodcastsApi?Object:l.PodcastsApi,void 0===c.AudioInternalContext?Object:c.AudioInternalContext])],g)},765966:(t,e,i)=>{i.d(e,{Emitter:()=>a});var s=i(327813),o=i(584053);class a extends o.Emitter{constructor(t){super(t),(0,s.makeObservable)(this,{emit:s.action})}}},213586:(t,e,i)=>{i.d(e,{PodcastsApi:()=>r});var s=i(331635),o=i(641569),a=i(132028);class r extends o.ApiNamespace{get namespace(){return"podcasts"}constructor(...t){super(...t),this.getPodcast=this.makeMethod("getPodcast"),this.getPodcasts=this.makeMethod("getPodcasts"),this.getEpisodes=this.makeMethod("getEpisodes"),this.getEpisode=this.makeMethod("getEpisode"),this.deleteEpisode=this.makeMethod("deleteEpisode"),this.restoreEpisode=this.makeMethod("restoreEpisode"),this.getGroupInfo=this.makeMethod("getGroupInfo"),this.subscribe=this.makeMethod("subscribe"),this.unsubscribe=this.makeMethod("unsubscribe")}}r=(0,s.__decorate)([a.scope.global()],r)},624948:(t,e,i)=>{i.d(e,{Lottie:()=>n});var s=i(474848),o=i(351118),a=i(812153),r=i(206964);const n=({play:t,fallback:e,options:i,className:n,style:_,...l})=>{const{width:d,height:c}=i,{lottieContainerRef:u,lottieRendered:h}=(0,a.useLottie)({...i,className:r.default.canvas},{play:t});return(0,s.jsx)("div",{ref:u,...l,className:(0,o.classNames)(r.default.root,n),style:{..._,width:d??_?.width??"100%",height:c??_?.height??"100%"},children:(0,s.jsx)("div",{children:!h&&e})})}},460650:(t,e,i)=>{i.d(e,{default:()=>s});const s={root:"AudioCatalogMusicMixBlockComponent__root--lQTjG",default:"AudioCatalogMusicMixBlockComponent__default--1YtHi",secondary:"AudioCatalogMusicMixBlockComponent__secondary--vxx7z",description:"AudioCatalogMusicMixBlockComponent__description--Ogo5Z",wrap:"AudioCatalogMusicMixBlockComponent__wrap--7WZGX"}},206964:(t,e,i)=>{i.d(e,{default:()=>s});const s={root:"Lottie__root--VeNx2",canvas:"Lottie__canvas--zOhea"}}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/web/chunks/15047a58.a92179ca.js")}catch(t){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/web/chunks/15047a58.a92179ca.js",t),t}