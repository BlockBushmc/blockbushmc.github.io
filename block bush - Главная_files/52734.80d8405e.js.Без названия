try{(self.webpackChunkvk=self.webpackChunkvk||[]).push([[52734],{788179:(e,t,i)=>{i.d(t,{m:()=>d});var n=i(221020),s=i(356035),r=i(475118),a=i(189845),o=i(880414),c=i(413621),l=i(40522);const d=(0,s.P)((function({suggestedApps:e,isMvk:t,isLoading:i}){return i?(0,n.Y)(l.j,{isMvk:t}):e?(0,n.Y)(r.x,{"data-testid":"suggested_apps_list",columns:"dynamic",children:(0,n.Y)(r.x.HorizontalScroll,{children:e.map((e=>(0,n.Y)(a.F,{href:`/app${e.id}`,title:e.title,subtitle:!t&&e.genre,header:(0,n.Y)(o.b,{lines:2,children:e.title}),size:t?"m":"l",children:(0,n.Y)(c._,{size:t?88:128,src:e.icon_139,srcSet:`${e.icon_139}, ${e.icon_278} 2x`,alt:e.title})},e.id)))})}):null}))},40522:(e,t,i)=>{i.d(t,{j:()=>d});var n=i(221020),s=i(356035),r=i(652097),a=i(187233),o=i(475118),c=i(189845),l=i(46284);const d=(0,s.P)((function({isMvk:e}){return(0,n.Y)(a.i,{mode:"vertical",spacing:e?12:6,paddingTop:0,paddingBottom:0,children:(0,n.Y)(o.x,{columns:"dynamic",children:(0,n.Y)(o.x.HorizontalScroll,{children:(0,r.Kz)(6).map((t=>(0,n.Y)(c.F,{size:"dynamic",hasActive:!1,hasHover:!1,noPadding:!0,header:(0,n.Y)(l.E,{width:e?80:104,height:e?8:12}),subtitle:!e&&(0,n.Y)(l.E,{width:80,height:12}),children:(0,n.Y)(l.E,{width:e?88:128,height:e?88:128,borderRadius:10})},t)))})})})}))},934794:(e,t,i)=>{i.d(t,{v:()=>l});var n=i(331635),s=i(327813),r=i(42107),a=i(722934),o=i(675925),c=i(25313);class l{async getMaskedPhoneNumber(){const e=await this.accountInfoService.ensure({fields:["phone"]});return e?.phone}constructor(e,t,i){this.appsApi=e,this.appsModalService=t,this.accountInfoService=i,this.sendInstallRequest=({appId:e,hash:t,ref:i=0})=>this.appsApi.sendInstallRequest({app_id:e,fragment:t,ref:i}),this.openSendInstallRequestModal=async(e,t=!1)=>{const i=await this.getMaskedPhoneNumber();this.appsModalService.show({type:"SendLinkModal",data:{appId:e,isGame:t,phoneNumber:i},actions:{}})},(0,s.l_)(this)}}l=(0,n.Cg)([r.z8.global(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[void 0===a.V?Object:a.V,void 0===c.F?Object:c.F,void 0===o.T?Object:o.T])],l)},804288:(e,t,i)=>{i.d(t,{t:()=>p});var n=i(221020),s=i(187233),r=i(180329),a=i(638945),o=i(800687),c=i(423654),l=i(946918);const d="PolicyPanel__textWrap--chDD2",p=({legacyDocuments:e,isGame:t})=>{const{getLang:i}=(0,l.B)();return(0,n.Y)(s.i,{"data-testid":"app_policy_panel",mode:"vertical",paddingTop:16,paddingBottom:16,spacing:16,children:(0,n.Y)(s.i,{mode:"vertical",paddingTop:4,paddingBottom:4,spacing:4,children:(0,n.Y)(r.s,{justify:"center",children:(0,n.Y)(a.$j,{className:d,size:1,weight:"3",children:(0,n.Y)(o.I,{values:{link0:(0,n.Y)(c.N,{target:"_blank",href:e?.terms_link||"https://dev.vk.com/user-agreement"}),link1:(0,n.Y)(c.N,{target:"_blank",href:e?.policy_link||"https://dev.vk.com/privacy-policy"})},children:i(t?"apps_game_policy_text":"apps_policy_text")})})})})})}},120809:(e,t,i)=>{i.d(t,{m:()=>f});var n=i(221020),s=i(356035),r=i(418356),a=i(56471),o=i(423654),c=i(187233),l=i(893899),d=i(409698),p=i(946918),h=i(180329),u=i(638945),g=i(46284),_=i(708398);const m=({action:e,content:t})=>(0,n.FD)("div",{className:_.A.container,children:[(0,n.Y)(g.E,{width:428,height:241,borderRadius:10}),(0,n.FD)(h.s,{className:_.A.info,direction:"column",children:[(0,n.Y)(u.tW,{children:(0,n.Y)(g.E,{width:140})}),(0,n.Y)(u.hE,{className:_.A.title,level:"3",children:(0,n.Y)(g.E,{width:300})}),(0,n.Y)(u.tW,{children:(0,n.Y)(g.E,{width:240})}),!!t&&(0,n.Y)("div",{className:_.A.content,children:t}),!!e&&(0,n.Y)("div",{className:_.A.action,children:e})]})]}),v=()=>(0,n.Y)(c.i,{mode:"horizontal",spacing:8,children:(0,n.Y)(m,{content:(0,n.Y)(r.f,{photos:[{src:"",renderWrapper:e=>(0,n.Y)(g.E,{circle:!0,...e})}],children:(0,n.Y)(g.E,{width:140})}),action:(0,n.Y)(g.E,{width:140,height:36})})}),f=(0,s.P)((function({app:e,profiles:t,isLoading:i,isActionSecondary:s}){const{getLang:h}=(0,p.B)();if(i)return(0,n.Y)(v,{});if(!e)return null;const u=t?.friends?.length&&(0,n.Y)(r.f,{photos:t.friends.slice(0,3).map((({link:e,photo:t,name:i})=>({src:t??"",renderWrapper:t=>(0,n.Y)(a.f,{placement:"top",text:i,children:(0,n.Y)(o.N,{href:e,"aria-label":i,tabIndex:-1,...t})},i)}))),visibleCount:3,size:"m",children:t.text});return(0,n.Y)(c.i,{mode:"vertical",spacing:12,paddingTop:6,paddingBottom:12,children:(0,n.Y)(l.J,{href:`/app${e.id}`,src:e.banner_560??"",srcSet:`${e.banner_560}, ${e.banner_1120} 2x`,title:e.title,description:e.short_description,imageLinkAriaLabel:h("apps_run_game"),content:u||"",subhead:"",action:(0,n.Y)(d.$,{mode:s?"secondary":"primary",appearance:"positive",size:"l",href:`/app${e.id}`,children:h("apps_start_playing")})})})}))},55604:(e,t,i)=>{i.d(t,{$:()=>et});var n=i(221020),s=i(815287),r=i(356035),a=i(370633),o=i(187233),c=i(180329),l=i(42107),d=i(331635),p=i(327813),h=i(578345),u=i(54952),g=i(695554),_=i(221473),m=i(25313),v=i(645189),f=i(849645),I=i(722934),A=i(273193),S=i(651253);class Y{get isSupported(){return"getInstalledRelatedApps"in navigator}async isVkAppAndroidInstalled(){if(this.isSupported){const e=await navigator.getInstalledRelatedApps();return Object.values(e).some((e=>"com.vkontakte.android"===e.id))}return!1}}Y=(0,d.Cg)([l.z8.global()],Y);var y=i(338221),b=i(754694),w=function(e){return e.UNVERIFIED_SCREEN_ITEM="type_unverified_screen_item",e}({}),P=function(e){return e.UNVERIFIED_SCREEN="unverified_screen",e.UNVERIFIED_SCREEN_LAUNCH="unverified_screen_launch",e.UNVERIFIED_SCREEN_QUIT="unverified_screen_quit",e}({}),E=i(934794),L=i(970343);class k{get mediaContentHeight(){return this.areAllScreenshotsPortrait?k.PORTRAIT_HEIGHT:k.LANDSCAPE_HEIGHT}get videoContentWidth(){const e=this.props.current.promoVideo;return e?.width&&e?.height?this.mediaContentHeight*e.width/e.height:0}get videoConfig(){const e=this.props.current.promoVideo;if(!e)return;const{platformId:t}=this.metaData.get();return{videos:[{sources:(0,L.yE)(e),title:e.title??"",thumbUrl:this.bestPosterImage,duration:e.duration??0}],autoplay:!0,repeat:!0,muted:!0,statVKAppId:String(t)}}get screenshots(){return(this.props.current.screenshots??[]).map((e=>{const t=e.sizes?.find((({type:e})=>k.VALID_SCREENSHOT_SIZES.has(e)));if(!t)return null;const i=t.height>=t.width?k.PORTRAIT_HEIGHT:k.LANDSCAPE_HEIGHT;return{...t,height:i,width:t.width/(t.height/i)}})).filter((e=>Boolean(e)))}get bestPosterImage(){const e=this.props.current.promoVideo?.image;if(e?.length)return this.props.current.promoVideo?.image?.reduce(((e,t)=>{const i=e.width*e.height;return t.width*t.height>i?t:e}),e[0])?.url}get areAllScreenshotsPortrait(){return this.screenshots.every((e=>e.height>=e.width))}constructor(e,t,i){this.props=e,this.userEnv=t,this.metaData=i}}k.PORTRAIT_HEIGHT=300,k.LANDSCAPE_HEIGHT=206,k.VALID_SCREENSHOT_SIZES=new Set(["z","h","j","base"]);var N=function(e){return e.DOWNLOAD_WINDOWS_GAME="download_windows_game",e.INSTALL_IN_COMMUNITY="install_in_community",e.SEND_PUSH_INSTALL_LINK="send_push_install_link",e.SEND_SMS_INSTALL_LINK="send_sms_install_link",e.DOWNLOAD_GAME="download_game",e.LAUNCH_APPLICATION="launch_application",e}({});class D{async[l.Ts](){this.logScreenStats(),await Promise.all([this.checkInstalledRelatedApps(),this.getSimilarApps()])}get query(){return this.launchDataProvider.launchProps?.queryParams}get hash(){return this.launchDataProvider.launchProps?.location}get isSimilarAppsFetching(){return this._isSimilarAppsFetching}get similarApps(){return this._similarApps}get similarAppsBlockTitle(){return this.similarApps&&this.similarApps.length>1?this.langs.getLang("apps_suggested_apps_header"):this.isGame?this.langs.getLang("apps_suggested_game_header"):this.langs.getLang("apps_suggested_app_header")}get isNeedToShowPlaceholder(){return!this.props.current.screenshots?.length&&!this.groupInfo}get shown(){return this.props.current.shown}get appId(){return this.props.current.appId}get groupInfo(){return this.props.current.authorGroupInfo}get description(){return this.props.current.description}get needShowMoreText(){return(this.props.current.description?.length??0)>this.MAX_CHARACTERS_BEFORE_ELLIPSIS}get title(){return this.props.current.title}get appImage(){return this.props.current.appImage}get isUnverified(){return this.props.current.isUnverified}get isPlugin(){return this.props.current.isPlugin}get friends(){return this.props.current.friends}get isGame(){return this.props.current.isGame}get actionButton(){const{actionButton:e}=this.props.current;if(!e)return null;if(e.link)return e;const t={...e,handler:b.l},i=`Handler for action button with type '${e.type}' is not implemented`;switch(e.type){case N.DOWNLOAD_WINDOWS_GAME:console.error(i);break;case N.INSTALL_IN_COMMUNITY:t.handler=this.addToCommunity;break;case N.SEND_PUSH_INSTALL_LINK:t.handler=this.sendInstallRequest;break;case N.SEND_SMS_INSTALL_LINK:t.handler=this.openSendInstallRequestModal;break;case N.LAUNCH_APPLICATION:t.handler=this.install}return t}get authorGroupInfo(){return this.props.current.authorGroupInfo}get legalDocuments(){return this.props.current.legalDocuments}get downloadableGameAvailablePlatforms(){return this.props.current.downloadableGameAvailablePlatforms}get rights(){return this.props.current.rights||[]}get isActionInProgress(){return this._isActionInProgress}get genre(){return this.props.current.genre}get hasSimilarApps(){return this.props.current.hasSimilarApps}get isDownloadGame(){return this.actionButton?.type===N.DOWNLOAD_GAME}get onResized(){return this.props.current.onResized}get appData(){return this.launchDataProvider.appData}get isLayer(){return this.props.current.isLayer}get launchEventData(){return this.props.current.launchEventData}get actionPlaceholder(){return this.props.current.actionPlaceholder}get isUnverifiedAppBannerVisible(){return this.isUnverified&&!this.actionPlaceholder}get canOpenInNativeApp(){return this.actionButton?.type===N.SEND_PUSH_INSTALL_LINK}get isAndroid(){return/android (\d+)/i.test(navigator.userAgent)}get hasInstalledRelatedApps(){return this._hasInstalledRelatedApps}logScreenStats(){this.isUnverified&&this.sendUnverifiedScreenStats(P.UNVERIFIED_SCREEN)}logLaunchStats(){this.isUnverified&&this.sendUnverifiedScreenStats(P.UNVERIFIED_SCREEN_LAUNCH)}sendUnverifiedScreenStats(e){this.productionStats.send({type:"type_action",type_action:{type:w.UNVERIFIED_SCREEN_ITEM,[w.UNVERIFIED_SCREEN_ITEM]:{event_type:{event_type:e},mini_app_id:this.appId}}})}constructor(e,t,i,n,s,r,a,o,c,l,d,u,g){this.props=e,this.appsService=n,this.launchService=s,this.launchDataProvider=r,this.sendInstallLinkService=a,this.appsApi=o,this.langs=c,this.appsModalService=l,this.errorLogger=d,this.installedRelatedApps=u,this.productionStats=g,this.MAX_CHARACTERS_BEFORE_ELLIPSIS=200,this._isActionInProgress=!1,this._isSimilarAppsFetching=!1,this._hasInstalledRelatedApps=!1,this._similarApps=null,this.getSimilarApps=async()=>{if(this.hasSimilarApps){this._isSimilarAppsFetching=!0;try{const{similar_apps:e}=await this.appsApi.getSimilarAppsList({app_id:this.appId});(0,p.h5)((()=>{this._similarApps=e,this._isSimilarAppsFetching=!1}))}catch(e){(0,p.h5)((()=>{this._similarApps=null,this._isSimilarAppsFetching=!1}))}}},this.addToCommunity=async()=>{try{(0,p.h5)((()=>{this._isActionInProgress=!0}));const e=document.querySelector(`a[data-task-click="CommunityAppsSettings/add_app"][data-app-id="${this.appId}"]`),t=e?.onclick;if(t)return this.launchService.closeLayer(),void t();if(!this.appData)return void this.errorLogger.log(new Error("Unexpectedly no app data"),{metaData:{environment:"AppInstallScreen",breadcrumb:{data:{appId:this.appId}}}});const i=await this.appsApi.getGroupsList({app_id:this.appId});this.appsModalService.show({type:"AddToCommunityModal",data:{app:this.appData,groupsInfo:i},actions:{}})}finally{(0,p.h5)((()=>{this._isActionInProgress=!1}))}},this.sendInstallRequest=async()=>{try{(0,p.h5)((()=>{this._isActionInProgress=!0})),await this.sendInstallLinkService.sendInstallRequest({appId:this.appId,hash:this.hash,ref:(0,h.vs)(this.query?.ref)})}finally{(0,p.h5)((()=>{this._isActionInProgress=!1}))}},this.openSendInstallRequestModal=async()=>{try{(0,p.h5)((()=>{this._isActionInProgress=!0})),await this.sendInstallLinkService.openSendInstallRequestModal(this.appId,this.isGame)}finally{(0,p.h5)((()=>{this._isActionInProgress=!1}))}},this.install=async()=>{try{(0,p.h5)((()=>{this._isActionInProgress=!0})),await this.appsService.installApp({appId:this.appId,launchQueryData:this.query,quietInstall:!1,needSettings:this.props.current.needSettings,launchEventData:this.launchEventData}),await(this.props.current.onInstall?.()),this.logLaunchStats()}finally{(0,p.h5)((()=>{this._isActionInProgress=!1}))}},this.showAppFriendsModal=()=>{this.appsModalService.show({type:"AppFriendsModal",data:{appId:this.appId,isGame:this.isGame},actions:{}})},this.checkInstalledRelatedApps=async()=>{if(this.canOpenInNativeApp)try{const e=await this.installedRelatedApps.isVkAppAndroidInstalled();this.isAndroid&&e&&(0,p.h5)((()=>{this._hasInstalledRelatedApps=!0}))}catch{(0,p.h5)((()=>{this._hasInstalledRelatedApps=!1}))}},this.gallery=new k(e,t,i),(0,p.l_)(this)}}D=(0,d.Cg)([l.z8.transient(),(0,d.Sn)("design:type",Function),(0,d.Sn)("design:paramtypes",[void 0===l.Ji?Object:l.Ji,void 0===v.J?Object:v.J,void 0===f.e?Object:f.e,void 0===u.m?Object:u.m,void 0===g.z?Object:g.z,void 0===_.n?Object:_.n,void 0===E.v?Object:E.v,void 0===I.V?Object:I.V,void 0===A.Y?Object:A.Y,void 0===m.F?Object:m.F,void 0===S.v?Object:S.v,void 0===Y?Object:Y,void 0===y.X?Object:y.X])],D);const{Provider:C,useModel:R}=(0,l.Qd)(D,{initInEffect:!1});var T=i(339672),B=i(714593),M=i(809467);const F=({isMvk:e,actionPlaceholder:t})=>(0,n.Y)(o.i,{"data-testid":"install-screen-unsupported-platform-banner",mode:"vertical",spacing:e?16:20,paddingTop:12,paddingBottom:e?0:4,children:(0,n.Y)(T.N,{before:"mobile"===t?.icon?(0,n.Y)(B.V,{}):(0,n.Y)(M.X,{}),header:t?.title,text:t?.text})});var x=i(982444),z=i(946918);const O=({isMvk:e})=>{const{getLang:t}=(0,z.B)();return(0,n.FD)(o.i,{"data-testid":"install-screen-unverified-banner",mode:"vertical",spacing:e?16:20,paddingTop:12,paddingBottom:12,children:[(0,n.Y)(T.N,{header:null,mode:"negative",text:t("apps_unauthorized_service_warning_subtitle")}),e&&(0,n.Y)(x.K,{size:12})]})};var U=i(634164),W=i(405697),j=i(413621),G=i(225505),H=i(165051),V=i(355812),q=i(684059),$=i(192015),K=i(863753),J=i(201098);const Q=({before:e,text:t})=>e?(0,n.FD)(c.s,{style:{display:"inline-flex"},align:"center",margin:"none",children:[e,(0,n.Y)(x.K,{size:4,mode:"vertical"}),t]}):t,X={width:12,height:12},Z={linux:(0,n.Y)($.B,{...X}),macos:(0,n.Y)(K.b,{...X}),windows:(0,n.Y)(J.S,{...X})},ee=({platforms:e,isPlugin:t,genre:i})=>{const{getLang:s}=(0,z.B)(),r=e&&1===e.length?(0,n.Y)(Q,{before:Z[e[0].toLowerCase()],text:e[0]}):e?.join(", ");return(0,n.FD)(H.r,{separator:(0,n.Y)(V.O,{}),children:[r,t&&(0,n.Y)(Q,{before:(0,n.Y)(q.h,{}),text:s("platform_app_type_plugin_app")}),i]})};var te=i(800687),ie=i(423654),ne=i(418356),se=i(56471),re=i(638945),ae=i(772812);const oe=({isMobile:e,friends:t,onClick:i})=>{if(!t)return;const{friends_count:s,count:r,top_users:a,text:o}=t,c=o&&(0,n.Y)(te.I,{values:{friends_count:s,count:r,users_stack:"",link:(0,n.Y)(ie.N,{onClick:i})},children:o});return a?.length?(0,n.Y)(ne.f,{size:e?"l":"s",photos:a.map((e=>({src:e.photo,renderWrapper:t=>(0,n.Y)(se.f,{placement:"top",description:(0,n.Y)(re.tW,{children:e.name}),children:(0,n.Y)(ie.N,{href:e.link,"aria-label":e.name,tabIndex:-1,...t})},e.link)}))),direction:e?"column":void 0,children:c}):(0,n.Y)(re.tW,{className:(0,ae.I)("color_text_secondary"),children:c})};var ce=i(431941),le=i(624935);const de=({appId:e,size:t=100})=>{const i=(0,ce.K)(),s=`${window.location.origin}/app${e}${window.location.hash}`,r="dark"===i;return(0,n.Y)(le.r,{mode:r?"contrast":"transparent",text:s,size:t,options:{isShowLogo:!0}})};var pe=i(848659),he=i(782536),ue=i(409698),ge=i(22392),_e=i(916533),me=i(464229);class ve{get actionButton(){return this.props.current.actionButton}get isActionInProgress(){return this.props.current.isActionInProgress}get isDownloadGame(){return this.actionButton?.type===N.DOWNLOAD_GAME}get userId(){return this.authService.userId}get isAuthorized(){return this.authService.isAuthorized}constructor(e,t,i){this.authService=e,this.appsService=t,this.props=i,this.shareApp=({type:e="app",hash:t})=>{const{appId:i}=this.props.current,n=this.appsService.getAppState(i)?.appData,s=n?.groupId||this.userId;(0,me.G)("like.php",{act:"publish_box",object:`${e}${i}_${s}`,url_hash:t,layer:Boolean(n?.layer)})},(0,p.l_)(this)}}ve=(0,d.Cg)([l.z8.transient(),(0,d.Sn)("design:type",Function),(0,d.Sn)("design:paramtypes",[void 0===_e.u?Object:_e.u,void 0===u.m?Object:u.m,void 0===l.Ji?Object:l.Ji])],ve);const{Provider:fe,useModel:Ie}=(0,l.Qd)(ve,{initInEffect:!1});var Ae=i(705560),Se=i(377641),Ye=i(223681),ye=i(239352);const be=({type:e})=>{switch(e){case"install_in_community":return(0,n.Y)(Ae.F,{});case"launch_application":return(0,n.Y)(Se.Y,{});case"send_install_link":return(0,n.Y)(Ye.V,{});case"download_game":ye.W;default:return}},we=(0,r.P)((function(){const{actionButton:e,isActionInProgress:t,shareApp:i,isAuthorized:s,isDownloadGame:r}=Ie(),{getLang:a}=(0,z.B)(),{hash:o}=(0,ge.z)(),c=s&&!r;return(0,n.FD)(he.e,{children:[e&&(0,n.Y)(ue.$,{size:"m",mode:"primary",appearance:"accent",before:(0,n.Y)(be,{type:e?.type}),href:e?.link,onClick:e?.handler,loading:t,disabled:t||r,"data-testid":"install-screen-action-button",children:e.text}),c&&(0,n.Y)(ue.$,{size:"m",mode:"secondary",appearance:"accent",before:(0,n.Y)(pe.f,{}),"aria-label":a("global_share"),"data-testid":"install-screen-share-button",onClick:()=>i({hash:o}),children:!e&&a("apps_install_screen_share_button_text")})]})})),Pe=(0,l.jn)(fe,we);var Ee=i(685441),Le=i(933993),ke=i(849325);const Ne=(0,r.P)((function(){const{rights:e}=R(),{getLang:t}=(0,z.B)();if(e?.length)return(0,n.FD)(n.FK,{children:[(0,n.Y)(Ee.Y,{mode:"tertiary",children:t("apps_layer_access_header")}),(0,n.Y)(o.i,{paddingTop:0,children:(0,n.Y)(Le.C,{children:e.map(((e,t)=>(0,n.Y)(ke.v,{maxWidth:300,appearance:"secondary",children:(0,n.Y)(re.EY,{weight:"3",children:e.description.charAt(0).toUpperCase()+e.description.slice(1)})},t)))})})]})})),De="InstallScreenPlaceholder__placeholderRoot--wICWE",Ce="InstallScreenPlaceholder__placeholderRootUnverified--B4Kpg",Re=(0,r.P)((function({isUnverified:e}){const{getLang:t}=(0,z.B)(),{appId:i,appImage:s,genre:r,title:a,isPlugin:o,isGame:l,downloadableGameAvailablePlatforms:d,actionButton:p,isActionInProgress:h,friends:u,rights:g,actionPlaceholder:_,isUnverifiedAppBannerVisible:m}=R(),v=Boolean(g?.length);return(0,n.FD)(n.FK,{children:[_&&(0,n.Y)(F,{actionPlaceholder:_,isMvk:!1}),m&&(0,n.Y)(O,{isMvk:!1}),(0,n.FD)(c.s,{direction:"row",align:"stretch",justify:"center",noWrap:!0,className:(0,U.$)(De,{[Ce]:e}),children:[(0,n.FD)(c.s.Item,{flex:"grow",alignSelf:v?"start":"center",children:[(0,n.FD)(W.O,{stretched:!e&&!v,header:a,icon:(0,n.Y)(j._,{borderRadius:"l",src:s,size:96,alt:a}),action:(0,n.Y)(Pe,{appId:i,actionButton:p,isActionInProgress:h}),children:[(0,n.Y)(ee,{platforms:d,isPlugin:o,genre:r}),u&&(0,n.FD)(n.FK,{children:[(0,n.Y)(x.K,{size:12}),(0,n.Y)(oe,{friends:u})]})]}),(0,n.Y)(Ne,{})]}),!l&&(0,n.FD)(n.FK,{children:[(0,n.Y)(G.w,{direction:"vertical"}),(0,n.Y)(c.s.Item,{flexBasis:280,alignSelf:"center",flex:"shrink",children:(0,n.Y)(W.O,{icon:(0,n.Y)(de,{appId:i,size:128}),maxWidth:280,stretched:!0,children:t("vkapps_focus_camera_on_qr_code")})})]})]})]})}));var Te=i(401623);const Be=(0,r.P)((function(){const{appId:e,appImage:t,genre:i,title:s,friends:r,isPlugin:a,isGame:l,downloadableGameAvailablePlatforms:d,actionButton:p,isActionInProgress:h,showAppFriendsModal:u,isDownloadGame:g}=R(),_=!l&&!g;return(0,n.FD)(c.s,{direction:"row",align:"stretch",noWrap:!0,children:[(0,n.Y)(c.s.Item,{flex:"content",children:(0,n.Y)(c.s,{direction:"column",justify:"space-around",children:(0,n.FD)(c.s,{direction:"row",align:"center",justify:"space-between",children:[(0,n.Y)(Te.z,{before:(0,n.Y)(j._,{borderRadius:"l",src:t,size:72,alt:s}),title:s,caption:(0,n.Y)(ee,{platforms:d,isPlugin:a,genre:i}),bottom:(0,n.Y)(oe,{friends:r,onClick:u}),children:s}),(0,n.Y)(o.i,{children:(0,n.Y)(Pe,{appId:e,actionButton:p,isActionInProgress:h})})]})})}),(0,n.Y)(c.s,{direction:"row",align:"center",noWrap:!0,children:_&&(0,n.FD)(n.FK,{children:[(0,n.Y)(G.w,{direction:"vertical"}),(0,n.Y)(o.i,{paddingBottom:0,paddingTop:0,children:(0,n.Y)(de,{appId:e,size:100})})]})})]})}));var Me=i(575497),Fe=i(425426);const xe="InstallScreenVideoPlayer__installScreenVideoPlayer--EdFTN",ze="vk-video-player",Oe=(0,r.P)((function(){const e=(0,s.useRef)(null),{gallery:t}=R(),{mediaContentHeight:i,videoConfig:r,videoContentWidth:a}=t;return(0,s.useEffect)((()=>{const t=e.current;if(!t||!r)return;window.customElements.get(ze)||(0,Fe.aw)();const i=document.createElement(ze);return t.appendChild(i),i.initPlayer(r),()=>{i.remove()}}),[r]),r?(0,n.Y)("div",{className:xe,style:{minWidth:a,minHeight:i,height:i},ref:e}):null})),Ue=(0,r.P)((function(){const{gallery:e}=R(),{screenshots:t}=e;return!!t?.length&&(0,n.Y)(o.i,{mode:"vertical",paddingBottom:16,children:(0,n.Y)(a.Y.ExpandedContent,{children:(0,n.Y)(Me.o,{getScrollToLeft:e=>e-200,getScrollToRight:e=>e+200,children:(0,n.FD)(c.s,{direction:"row",noWrap:!0,gap:12,children:[(0,n.Y)(x.K,{size:8,mode:"vertical"}),(0,n.Y)(Oe,{}),t.map(((e,t)=>(0,n.Y)(j._,{keepAspectRatio:!0,heightSize:e.height,widthSize:e.width,borderRadius:"l",alt:"",src:e.url},t))),(0,n.Y)(x.K,{size:8,mode:"vertical"})]})})})})}));var We=i(788350);const je=(0,r.P)((function(){const{description:e}=R(),[t,i]=(0,s.useReducer)((e=>!e),!1),{getLang:r}=(0,z.B)();return(0,n.Y)(o.i,{paddingBottom:0,paddingTop:0,children:(0,n.Y)(o.i,{paddingBottom:0,paddingTop:0,children:(0,n.Y)(We.u,{lines:2,mode:"block",expanded:t,expandElement:(0,n.Y)(ie.N,{onClick:i,children:r("apps_install_screen_show_more_description")},"expand"),collapseElement:(0,n.Y)(ie.N,{onClick:i,children:r("apps_install_screen_hide_description")},"collapse"),children:e})})})}));var Ge=i(292184),He=i(505174),Ve=i(482199);const qe=(0,r.P)((function(){const{groupInfo:e,rights:t}=R(),{getLang:i,numeric:s}=(0,z.B)();return(0,n.Y)(o.i,{paddingTop:0,children:(0,n.FD)(c.s,{direction:"row",noWrap:!0,children:[e&&(0,n.FD)(c.s.Item,{flexBasis:"50%",children:[(0,n.Y)(Ee.Y,{mode:"tertiary",children:i("apps_goto_app_group")}),(0,n.Y)(Ge.T,{href:e.url,target:"_blank",before:(0,n.Y)(He.e,{alt:"",size:48,src:e.photo?.url}),subtitle:s(e?.members_count,i("groups_subscribed_members",!0)),title:e.name,badgeAfterTitle:(0,n.Y)(Ve.T,{color:"#447BBA"}),children:e.name})]}),!!t.length&&(0,n.Y)(c.s.Item,{flexBasis:"50%",children:(0,n.Y)(Ne,{})})]})})}));var $e=i(46284),Ke=i(40522),Je=i(788179),Qe=i(120809);const Xe=(0,r.P)((function(){const{similarApps:e,isGame:t,similarAppsBlockTitle:i,isSimilarAppsFetching:s}=R(),{getLang:r}=(0,z.B)();return(0,n.FD)(o.i,{children:[(0,n.Y)(G.w,{}),(0,n.FD)(a.Y,{mode:"plain",header:(0,n.Y)(Ee.Y,{mode:"primary",aside:!s&&(0,n.Y)(ie.N,{href:t?"/games":"/services",children:r("apps_vk_apps_show_all")}),children:s?(0,n.Y)($e.E,{width:140,height:16}):i}),children:[s&&(0,n.Y)(Ke.j,{isMvk:!1}),e&&!s&&(e.length>1?(0,n.Y)(Je.m,{suggestedApps:e,isMvk:!1}):(0,n.Y)(Qe.m,{app:e[0],profiles:e[0]?.friends_stack,isActionSecondary:!0}))]})]})})),Ze=(0,r.P)((function(){const{isUnverified:e,isNeedToShowPlaceholder:t,hasSimilarApps:i,onResized:r,isLayer:l,actionPlaceholder:d,isUnverifiedAppBannerVisible:p}=R();return(0,s.useEffect)((()=>{l&&r?.(800)}),[]),t?(0,n.Y)(Re,{isUnverified:e}):(0,n.FD)(a.Y,{mode:"plain",children:[d&&(0,n.Y)(F,{actionPlaceholder:d,isMvk:!1}),p&&(0,n.Y)(O,{isMvk:!1}),(0,n.Y)(o.i,{mode:"vertical",paddingTop:16,paddingBottom:8,spacing:8,children:(0,n.Y)(c.s,{direction:"column",children:(0,n.Y)(Be,{})})}),(0,n.Y)(Ue,{}),(0,n.Y)(je,{}),(0,n.Y)(qe,{}),i&&(0,n.Y)(Xe,{})]})})),et=(0,l.jn)(C,Ze)},464229:(e,t,i)=>{i.d(t,{G:()=>s});var n=i(917128);const s=(e,t,i)=>{window.boxLayerBG&&window.boxLayerWrap&&(window.boxLayerBG.style.zIndex="1100",window.boxLayerWrap.style.zIndex="1100"),(0,n.rL)(e,t,{...i,params:{...i?.params,onDestroy:()=>{window.boxLayerBG&&window.boxLayerWrap&&(window.boxLayerBG.style.zIndex="1000",window.boxLayerWrap.style.zIndex="1000"),i?.params?.onDestroy?.()}}})}},675925:(e,t,i)=>{i.d(t,{T:()=>c});var n=i(331635),s=i(327813),r=i(909589),a=i(651253),o=i(42107);class c{get isLoading(){return this._isLoading}async request(e,t){return this._isLoading=!0,this.abortController=new AbortController,this.accountApi[t?"getInfoWithPrefetch":"getInfo"](e,{signal:this.abortController?.signal})}async fetch(e={},t=!1){const i=this.fieldsToString(e.fields),n={fields:i};this.reset();try{const e=await this.request(n,t);return this.settingsMap.set(i,e),e}catch(e){const t=new Error("Fail to fetch account settings",{cause:e});this.errorLogger.log(t)}finally{this._isLoading=!1,this.requestMap.delete(i)}}async ensure(e={}){const t=this.fieldsToString(e.fields),i=this.requestMap.get(t);if(i)return i;const n=this.settingsMap.get(t);if(n)return n;const s=this.fetch(e);return this.requestMap.set(t,s),s}fieldsToString(e=[]){return e.sort().join(",")}reset(){this.settingsMap.clear(),this.requestMap.clear(),this._isLoading=!1,this.abortController?.abort()}constructor(e,t){this.accountApi=e,this.errorLogger=t,this.abortController=null,this._isLoading=!1,this.settingsMap=new Map,this.requestMap=new Map,(0,s.l_)(this)}}c=(0,n.Cg)([o.z8.container(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[void 0===r.y?Object:r.y,void 0===a.v?Object:a.v])],c)},221473:(e,t,i)=>{i.d(t,{n:()=>p});var n=i(331635),s=i(327813),r=i(42107),a=i(316460),o=i(819674),c=i(695554),l=i(16205),d=i(54952);class p{setLaunchId(e){if(this.launchId)throw new Error("LaunchId is already exist");this.launchId=e}setLaunchAppProps(e){this._launchProps=e}updateLaunchAppProps(e){if(!this._launchProps)throw new Error("LaunchProps is not set");Object.assign(this._launchProps,e)}get appData(){if(!this.launchProps)throw new Error("Launch props is not set");return this.appsService.getAppState(this.launchProps.appId)?.appData||null}get appDataUnsafe(){return this.launchProps&&this.appsService.getAppState(this.launchProps.appId)?.appData||null}get launchProps(){return this._launchProps}async getLaunchData(){if(!this.launchId)return null;if(this.launchWaiter)return this.launchWaiter.waitConnect;const{waitConnect:e,abort:t}=this.launchService.getLaunchWaiter(this.launchId);return this.launchWaiter={waitConnect:e,abort:t},e}getLaunchAbortTimeout(){return this.launchId?this.launchWaiter?.abort:null}get launchOptions(){return this.launchId?this.recordService.get(this.launchId)?.options:null}get sessionUuid(){return this._sessionUuid}ensureSessionUuid(){if(this._sessionUuid)return;const{session_uuid:e}=this._launchProps?.queryParams||{};this._sessionUuid=e&&(0,a.A)(e)?e:(0,o.A)()}constructor(e,t,i){this.launchService=e,this.recordService=t,this.appsService=i,this.launchId=null,this._launchProps=null,this._sessionUuid="",this.launchWaiter=null,(0,s.l_)(this)}}p=(0,n.Cg)([r.z8.container(),(0,n.Sn)("design:type",Function),(0,n.Sn)("design:paramtypes",[void 0===c.z?Object:c.z,void 0===l.E?Object:l.E,void 0===d.m?Object:d.m])],p)},578345:(e,t,i)=>{function n(e){try{return new URL(e).searchParams}catch{return new URLSearchParams}}i.d(t,{jr:()=>n,vs:()=>s});const s=e=>{const t=parseInt(e??"",10);return t&&Number.isFinite(t)?t:void 0}},624935:(e,t,i)=>{i.d(t,{r:()=>c});var n=i(221020),s=i(808911),r=i(815287),a=i(999051);const o=(0,r.lazy)((()=>(0,s.p)((async()=>({default:(await Promise.all([i.e(26645),i.e(72394),i.e("langs/core_spa/vkcom-kit-qr-code-base")]).then(i.bind(i,545256))).QRCodeBase}))))),c=({size:e,style:t,getRootRef:i,...s})=>(0,n.Y)(r.Suspense,{fallback:(0,n.Y)("div",{...s,style:{...t,height:e,width:e},ref:i,children:(0,n.Y)(a.y,{})}),children:(0,n.Y)(o,{...s,size:e,style:t,getRootRef:i})})},339672:(e,t,i)=>{i.d(t,{N:()=>f});var n=i(221020),s=i(892401),r=i(602775),a=i(204111),o=i(684797),c=i(634164),l=i(638945),d=i(962644);const p="vkitStatusBanner__root--gzaM9",h="vkitStatusBanner__before--iGAQC",u="vkitStatusBanner__after--oLNdU",g="vkitStatusBanner__text--FKbtv",_="vkitStatusBanner__actions--nE8xo",m="vkitStatusBanner__progress--LoRup",v={default:void 0,transparent:"vkitStatusBanner__rootModeTransparent--ChRbH",negative:"vkitStatusBanner__rootModeNegative--olBo6",warning:"vkitStatusBanner__rootModeWarning--CrOCo",positive:"vkitStatusBanner__rootModePositive--tqvtt"},f=({header:e,text:t,before:i,after:f,mode:I="default",actions:A,progress:S,className:Y,...y})=>{if(void 0===i)switch(I){case"negative":i=(0,n.Y)(s.g,{});break;case"warning":i=(0,n.Y)(r.A,{});break;case"positive":i=(0,n.Y)(a.c,{});break;default:i=(0,n.Y)(o.k,{})}return(0,n.FD)("div",{className:(0,c.$)(p,v[I],Y),...y,children:[void 0!==S&&(0,n.Y)(d.h,{className:m,style:{width:`${S}%`}}),i&&(0,n.Y)("div",{className:h,children:i}),(0,n.FD)("div",{children:[(0,n.Y)(l.$j,{Component:"div",weight:"2",children:e}),!!t&&(0,n.Y)(l.LE,{className:g,children:t}),!!A&&(0,n.Y)("div",{className:_,children:A})]}),f&&(0,n.Y)("div",{className:u,children:f})]})}},849325:(e,t,i)=>{i.d(t,{v:()=>m});var n=i(221020),s=i(634164),r=i(516427),a=i(638945),o=i(962644),c=i(880414),l=i(377803);const d=[l.A.colorAccentPurple.normal.value,l.A.colorAccentRed.normal.value,l.A.colorAccentGreen.normal.value,l.A.colorAccentOrange.normal.value,l.A.colorAccentRaspberryPink.normal.value,l.A.colorAccentViolet.normal.value,l.A.colorAccentBlue.normal.value],p=e=>{const t=Math.floor(Math.abs(e)%d.length);return d[t]},h="vkitTag__container--kSqzp",u="vkitTag__contrastBackground--C28yK",g="vkitTag__text--8uTWY",_={accent:"vkitTag__containerAccent--ZdByo",secondary:"vkitTag__containerSecondary--BCrw8"},m=({children:e,appearance:t,maxWidth:i=160,...l})=>{const d="number"==typeof t;return(0,n.FD)(r.SB4,{className:(0,s.$)(h,!d&&_[t]),style:{color:d?p(t):void 0},...l,children:[d&&(0,n.Y)(o.h,{className:u}),(0,n.Y)(c.b,{lines:1,Component:a.tW,className:g,style:{maxWidth:i},children:e})]})}},933993:(e,t,i)=>{i.d(t,{C:()=>r});var n=i(221020);const s="vkitTagGroup__content--1NIE8",r=({children:e})=>(0,n.Y)("div",{children:(0,n.Y)("div",{className:s,children:e})})}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/core_spa/chunks/52734.80d8405e.js")}catch(e){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/core_spa/chunks/52734.80d8405e.js",e),e}