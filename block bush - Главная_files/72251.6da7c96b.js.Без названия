try{(self.webpackChunkvk=self.webpackChunkvk||[]).push([[66332,72251],{312020:(e,t,i)=>{i.d(t,{$9:()=>S,CO:()=>u,FM:()=>_,FN:()=>y,IC:()=>c,ID:()=>b,JK:()=>m,LY:()=>d,Lw:()=>g,NK:()=>h,OQ:()=>r,Q7:()=>o,QO:()=>k,b2:()=>a,g8:()=>A,i9:()=>n,mG:()=>s,pw:()=>l,vh:()=>p,w4:()=>v});const s="5.95",o="VKWebAppActionDone",n={WEB:"web",MOBILE_WEB:"mobile-web"},r={UNKNOWN:1,MISSING_PARAM:2,OLD_MISSING_PARAM:100,CONNECTION_LOST:3,USER_DENIED:4,INVALID_PARAMS:5,UNSUPPORTED_PLATFORM:6,REQUESTS_LIMIT_REACHED:10,ACCESS_DENIED:11,CUSTOM:13,NO_ADS:20},a={ACCESS_DENIED:"Access denied",UNSUPPORTED_PLATFORM:"Unsupported platform",UNSUPPORTED_ACTION:"Unsupported action",NATIVE_APP_IS_NOT_INSTALLED:"VK client is not installed on device",USER_NOT_A_PRIVATE_GROUP_MEMBER:"User is not a member of the given private group",UNKNOWN_ERROR:"Unknown error",CONNECTION_LOST:"Connection lost",NETWORK_ERROR:"Network error",USER_DENIED:"User denied",INVALID_PARAMS:"Invalid params",NO_ADS:"No ads",ADS_ALREADY_PLAYED:"Ads already played",VK_PAY_DISABLED:"This app can't use VK Pay",SCROLL_SUBSCRIBER_ALREADY_EXIST:"Scroll subscriber already exist",SUBSCRIPTION_IS_ALREADY_CANCELLED:"Subscription is in invalid status: subscription is already cancelled",SURVEY_INIT_IN_PROGRESS:"Survey init in progress",SURVEY_ALREADY_INIT:"Survey already init",SURVEY_NO_MATCH:"Survey no match",SURVEY_USER_CANCEL:"Survey user cancel",ALREADY_IN_PROGRESS:"Already in progress",USER_IS_NOT_GROUP_ADMIN:"Only group admins have access to group tokens",DEVICE_CANT_GET_GEODATA:"Device can't get geodata",USER_DIDNT_ALLOWED_ACTION:"User didn't allowed"},d={CLIENT:"client_error",API:"api_error",AUTH:"auth_error"},c=["success","failed"],h=[6217559,7131443],l=[7512376],u=51707812,p=51459963,_=7644481,m=7929683,v=51528700,b=53670660,g=51903384,S={VKWebAppAddToCommunity:"add_to_community",VKWebAppAddToCommunityPreload:"get_groups_list",VKWebAppAddToFavorites:"add_to_favorites",VKWebAppAddToFavoritesPreload:"already_added_to_favorites",VKWebAppAddToMenu:"add_to_menu",VKWebAppAddToMenuPreload:"is_in_left_menu",VKWebAppGetCommunityToken:"get_community_token",VKWebAppGetCommunityTokenPreload:"get_community_preload_settings",VKWebAppGetAuthToken:"get_auth_token",VKWebAppGetAuthTokenPreload:"get_auth_token_info",VKWebAppGetPhoneNumber:"get_phone_number",VKWebAppGetPhoneNumberPreload:"already_get_phone_number",VKWebAppGetEmail:"get_email",VKWebAppGetEmailPreload:"already_get_email",VKWebAppGetFriends:"get_friends",VKWebAppOpenApp:"open_app",VKWebAppSendPayload:"send_payload",VKWebAppSendToClient:"send_to_client",VKWebAppSendToClientPreload:"get_open_in_native_permission",VKWebAppShowOrderBox:"order",VKWebAppShowSubscriptionBox:"subscription",VKWebAppShowLeaderBoardBox:"show_leader_board",VKWebAppShowLinkCardBox:"show_link_card",VKWebAppShowNftPaymentBox:"show_nft_pay_box",VKWebAppShowInviteBox:"invite_friends",VKWebAppShowStoryBox:"story_box",VKWebAppShowRequestBox:"send_request",VKWebAppShowRequestBoxPreload:"request_box_preload",VKWebAppClose:"close",VKWebAppGetSilentToken:"get_silent_token",VKWebAppOpenPayForm:"open_pay_form",VKWebAppAddToChat:"add_to_chat",VKWebAppTrackEvent:"track_event",VKWebAppCallStart:"call_start",VKWebAppCallJoin:"call_join",VKWebAppCallLeft:"call_left",VKWebAppCallFinished:"call_finished",VKWebAppCallGetStatus:"call_get_status",VKWebAppCallStartSharing:"call_start_sharing",VKWebAppCallStopSharing:"call_stop_sharing"},k="vk-sak-sdk",y=256,A=1},159008:(e,t,i)=>{i.d(t,{Ux:()=>c,_7:()=>d,fk:()=>r,pZ:()=>a,yq:()=>o,yz:()=>n});var s=i(312020);const o=(e,t="?",i=!1)=>Object.keys(e).reduce(((s,o,n)=>[s,0===n?t:"&",encodeURIComponent(o),"=",i&&Array.isArray(e[o])?e[o].map(encodeURIComponent).join(","):encodeURIComponent(e[o])].join("")),""),n=e=>{const t=e.match(/:\/\/(www[0-9]?\.)?(.[^/:]+)/i);return null!=t&&t.length>2&&"string"==typeof t[2]&&t[2].length>0?t[2].toLowerCase():null},r=e=>{if(cur.vkAppQueue){const t=Object.keys(cur.vkAppQueue).filter((t=>~t.indexOf(e)));if(t.length>0){const e=t[0];cur.vkAppQueue[e].destroyView(),delete cur.vkAppQueue[e]}}},a=e=>s.NK.includes(e);function d(e,t){const i=n(t),s=e.vkApp?e.vk_app_url:e.src,o=n(s);if(i!==o&&!c(e,i))throw Error(`Insecure method call from ${i}. Call must be from ${o}`);return!0}function c(e,t){if(!e.allowed_origin_regexp)return!1;return new RegExp(e.allowed_origin_regexp).test(t)}},704366:(e,t,i)=>{i.d(t,{K:()=>r});var s=i(860656),o=i(32489);function n(){return{onOrdData:(0,o.createDomain)("APPS_CONNECT/VKWebAppCustomMessage").createEvent()}}function r(){return(0,s.b)("static/js/modules/shared/apps_connect/handlers/VKWebAppCustomMessage/store.ts",n,{version:0})()}},750714:(e,t,i)=>{i.d(t,{W:()=>a});var s=i(685169);var o=i(512347),n=i(342443),r=i(545380);const a=e=>{if(!e)return null;const[t,i,a,c,h,l,u,,,,,,,p,,_,m,v,b,g,S,k,y,,A,C]=e,{urlHash:f}=(e=>{if(!e)return{};const[t,i,o,n,r,a,d]=e?.split(s.M);return{addHash:t,editHash:i,actionHash:o,deleteHash:n,replaceHash:r,urlHash:a,restoreHash:d}})(p),E=(0,o.x)(e),M=e[n.i4.LEGAL_NOTICES_TYPE],I=e[n.i4.RIGHTHOLDER_MARKS];return{access_key:A||f||"",ads:_,artist:h?(0,r.G)(h):"",id:t,owner_id:i,url:a,title:(0,r.G)(c),performer:(0,r.G)(h),duration:l,album_id:u,subtitle:(0,r.G)(m),main_artists:v?d(v):void 0,featured_artists:b?d(b):void 0,album:g?{owner_id:g[0],id:g[1],access_key:g[2],title:""}:void 0,track_code:S,content_restricted:k,album_part_number:y,audio_chart_info:C||void 0,dislike:E?.dislike??!1,legal_notices_type:M||void 0,rightholder_marks:I}};function d(e){return e.map((e=>({...e,name:e.name?(0,r.G)(e.name):""})))}},732793:(e,t,i)=>{i.d(t,{m:()=>o});var s=i(161933);const o=e=>{switch(e){case"at":return(0,s.hS)()?"@":"video/@";case"slash":return(0,s.hS)()?"/":"/video";case"doubleSlash":return(0,s.hS)()?"/":"/video/";case"backSlash":return(0,s.hS)()?"":"video/";case"prevSlash":return(0,s.hS)()?"":"/video";case"withoutSlash":return(0,s.hS)()?"":"video";case"author":return(0,s.hS)()?"/@":"/video/@";default:return""}}},435337:(e,t,i)=>{i.d(t,{Y:()=>n});var s=i(328911),o=i(497771);const n=async(e,t,i,n={})=>(0,o.uA)("video.get",{owner_id:e,videos:(0,s.o)({ownerId:e,itemId:t,externalId:i}),extended:1,...n})},833291:(e,t,i)=>{function s(e){const t=e.match(/^([a-z_]+)([0-9\-_]+)$/);if(!t)return null;const[,i,s]=t;return{objectType:i,objectId:s}}i.d(t,{HX:()=>r,L1:()=>s,W9:()=>a,cF:()=>n,eE:()=>h,f8:()=>c,ut:()=>o,xM:()=>d});const o=e=>`wall${e}`,n=e=>`wall_reply${e}`,r=e=>["video","video_comment"].includes(e),a=e=>["video","clip"].includes(e),d=e=>e?.querySelector(".like_button_count, ._like_button_count")??void 0,c=e=>e?.querySelector(".like_button_icon, ._like_button_icon")??void 0,h=e=>e.querySelector(".like_button_label, ._like_button_label")??void 0},313348:(e,t,i)=>{i.d(t,{j:()=>s});const s={like:"like",share:"share",views:"views",comment:"comment"}},787920:(e,t,i)=>{i.d(t,{S:()=>c});var s=i(159008),o=i(312020),n=i(799835),r=i(704366),a=i(181048),d=i(993838);const c=(e,t,i,c)=>{const h=c?{...e,service:c}:e,l=h?(0,s.yq)(h,"#"):"",u=(0,r.K)().onOrdData.watch((s=>{i?.isSnackbar&&(s?.is_ad&&!e?.is_ad?(0,a.td)({text:(0,n.Xo)("global_ads_wall_post_ord_mark_as_ads_added"),timeout:3e3,type:"ok28"}):!s?.is_ad&&e?.is_ad&&(0,a.td)({text:(0,n.Xo)("global_ads_wall_post_ord_mark_as_ads_removed"),timeout:3e3,type:"loudspeaker28"})),t(s,i?.ref),u()}));i=i||{};const p={...i,options:{...i.options||{}}},{onDestroy:_,onLoaded:m}=p.options;p.options.asBox?p.options.onDestroy=(...e)=>{_?.(...e),u()}:p.options.onLoaded=(...e)=>{m?.(...e),(0,d.OJ)((()=>u()))},window.showWiki?.({w:`app${o.CO}${l}`},p?.edit,p?.ev,p?.options)}},993838:(e,t,i)=>{function s(){return window.wkcur&&Array.isArray(window.wkcur._hide)?window.wkcur._hide:[]}function o(e){"function"==typeof e&&s().push(e)}function n(e){var t;t=s().filter((t=>t!==e)),window.wkcur&&(window.wkcur._hide=t)}i.d(t,{OJ:()=>o,vJ:()=>n})},946291:(e,t,i)=>{i.d(t,{AB:()=>_,Hp:()=>n,Kl:()=>h,Ln:()=>o,P4:()=>c,Qt:()=>s,VG:()=>d,aY:()=>p,fF:()=>r,kF:()=>a,mt:()=>u,xc:()=>l,yi:()=>m});const s=5e9,o="with_group_header",n="/market",r="9000",a="",d=0,c=999999999999,h=999999,l="MARKET_ITEM_REVIEW_CREATED",u="MARKET_ITEM_REVIEW_UPDATED",p="ecomm_market_items_for_review_delay_community",_=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;var m=function(e){return e[e.Self=1]="Self",e[e.CDEK=2]="CDEK",e[e.Boxberry=3]="Boxberry",e[e.DomesticPost=4]="DomesticPost",e[e.Courier=7]="Courier",e[e.OzonConfig=8]="OzonConfig",e}({})},20246:(e,t,i)=>{i.d(t,{X:()=>r,d:()=>a});var s=i(328911),o=i(946291),n=i(161933);function r({itemId:e,ownerId:t,seoSlug:i=""}){return`/market/product/${i??""}${t}-${e}`}function a({itemId:e,ownerId:t,adsLabel:i,platform:a,screen:d,refSource:c,refScreen:h,ref:l,type:u,withGroupHeader:p,seoSlug:_="",contextId:m,contextOwnerId:v,contextType:b,withAbsoluteUrl:g}){const S=e=>{const t=new URLSearchParams;return Object.entries(e).filter((([,e])=>void 0!==e)).forEach((([e,i])=>t.set(e,i))),t};if("mvk"===a){const o=(0,s.o)({itemId:e,ownerId:t}),r={ads_label:i,ref_source:c};return`${g?n.zU:""}/product${o}${S(r).toString()?`?${S(r)}`:""}`}const k={ref_source:c,ref_screen:h,ref:l,screen:d,ads_label:i,type:u,context_id:m?String(m):void 0,context_owner_id:v?String(v):void 0,context_type:b,...p&&{[o.Ln]:"1"}},y=`${g?n.zU:window.location.origin}${r({itemId:e,ownerId:t,seoSlug:_})}`,A=S(k).toString();return A?`${y}?${A}`:y}},310432:(e,t,i)=>{i.d(t,{h:()=>o});const s="vksport";function o(e){return(e??window.location.hostname).includes(s)}},238055:(e,t,i)=>{i.d(t,{Y:()=>E});var s=i(331635),o=i(42107),n=i(327813);var r=i(103509);const a={[r.Xb.Q_144P]:"144",[r.Xb.Q_240P]:"240",[r.Xb.Q_360P]:"360",[r.Xb.Q_480P]:"480",[r.Xb.Q_720P]:"720",[r.Xb.Q_1080P]:"1080",[r.Xb.Q_1440P]:"1440",[r.Xb.Q_2160P]:"2160",[r.Xb.Q_4320P]:"4320"};function d(e){return e&&a[e]?a[e]:0}class c{get statEventData(){return this.video?{context:this.context,e:"video_event",eventType:r.Gv.VIDEO,ov_id:this.video.data.united_video_id??"",ref:this.statsRef,track_code:this.video.data.track_code??"",ts:Math.trunc(Date.now()/1e3),video_id:this.video.rawId,feed_track_code:this.feedTrackCode}:null}get statPlayData(){if(!this.video||!this.isPlaying)return null;const e=function(){const{width:e,height:t}=window.screen;let i;if(window.screen.orientation?.type)i=window.screen.orientation.type;else{const e=window.orientation;i=0===e?"portrait-primary":180===e?"portrait-secondary":90===e?"landscape-primary":"landscape-secondary"}return{width:e,height:t,orientation:i}}();return{autoplay:this.autoplay?1:0,bitrate:this.videoMeta.videoBitrate??0,context:this.context,e:"video_play",eventType:r.Gv.PLAY,media_provider:this.videoMeta.videoFormat,ov_id:this.video.data.united_video_id??"",player_type:this.playerType,quality:"auto",ref:this.statsRef,speed:"normal",stall_count:this.videoStalled.stalledCount??0,stall_duration:this.videoStalled.stalledDuration??0,track_code:this.video.data.track_code??"",ts:Math.trunc(Date.now()/1e3),video_id:this.video.rawId,volume:this.isMuted?0:100,is_sub_enabled:0,cur_quality:d(this.videoMeta.curVideoQuality)||"unknown",screen_orientation:e.orientation.includes("portrait")?"portrait":"landscape",screen_pixels_h:e.height,screen_pixels_w:e.width,is_portrait_only:0,is_traffic_economy:0,network_type:"unknown",screen_crop:"unknown",screen_dpi:0,source:"clips",feed_track_code:this.feedTrackCode}}get timeSpentTracker(){return"inline"===this.playerType?this.timespent.playing:this.timespent.fullScreen}get playerHandlers(){return{onStalledChanged:this.onStalledChanged,onVideoCurQualityChanged:this.onVideoCurQualityChanged,onDurationChanged:this.onDurationChanged,onPositionChanged:this.onPositionChanged,onVideoFormatChanged:this.onVideoFormatChanged,onVideoBitrateChanged:this.onVideoBitrateChanged,onFirstBytes:this.onFirstBytes,onFirstFrame:this.onFirstFrame,onStarted:this.onStarted,onEnded:this.onEnded,onPlaying:this.onPlaying,onPaused:this.onPaused,onMutedChanged:this.onMutedChanged,onMuteInteraction:this.onMuteInteraction,onError:this.onError}}constructor(e,t=!0,i,s="carousel",o,a,c,h){this.video=e,this.autoplay=t,this.statsRef=i,this.playerType=s,this.track=o,this.dau=a,this.timespent=c,this.feedTrackCode=h,this.isMuted=!0,this.isPlaying=!1,this.lastTrackedPositions=[],this.context="",this.bufferedEvents=[],this.videoStalled={stalledCount:0,stalledDuration:0},this.stalledInterval=null,this.videoMeta={},this.onFirstBytes=e=>{this.statEventData&&this.bufferedEvents.push({...this.statEventData,event:"first_bytes",value:e})},this.onFirstFrame=e=>{this.statEventData&&this.bufferedEvents.push({...this.statEventData,event:"first_frame",value:e})},this.onStarted=()=>{this.lastTrackedPositions=[],this.onPlaying(),this.statPlayData&&(this.track.trackEvents([...this.bufferedEvents,{...this.statPlayData,position:"start",position_sec:0}]),this.bufferedEvents=[])},this.onPlaying=()=>{this.isPlaying||(this.isPlaying=!0,this.timeSpentTracker.start())},this.onPaused=()=>{this.isPlaying&&(this.isPlaying=!1,this.timeSpentTracker.end())},this.onMutedChanged=e=>{this.isMuted=e},this.onMuteInteraction=e=>{this.statEventData&&this.track.trackEvents([{...this.statEventData,event:"volume",value:e?"off":"on"}])},this.onPositionChanged=e=>{if(this.statPlayData&&void 0!==e&&void 0!==this.videoMeta.videoDuration){const t=function(e,t){const i=e/t*100,s=[];return e>=3&&s.push("3s"),e>=10&&s.push("10s"),i>=25&&s.push("25"),i>=50&&s.push("50"),i>=75&&s.push("75"),i>=95&&s.push("95"),i>=100&&s.push("100"),s}(e,this.videoMeta.videoDuration);if(!t.length||t.length===this.lastTrackedPositions.length)return;const i=t.filter((e=>!this.lastTrackedPositions.includes(e)));i.length&&this.track.trackEvents(i.map((t=>Object.assign({},this.statPlayData,{position:t,position_sec:Math.trunc(e)})))),this.lastTrackedPositions=[...t]}},this.onEnded=()=>{this.videoMeta.videoDuration&&this.onPositionChanged(this.videoMeta.videoDuration),this.dau.viewEvent()},this.onStalledChanged=e=>{e?(this.videoStalled.stalledCount+=1,this.stalledInterval=setInterval((()=>{this.videoStalled.stalledDuration+=1}),1e3)):this.stalledInterval&&clearInterval(this.stalledInterval)},this.onVideoCurQualityChanged=e=>{this.videoMeta.curVideoQuality=e},this.onDurationChanged=e=>{this.videoMeta.videoDuration=e},this.onVideoFormatChanged=e=>{this.videoMeta.videoFormat=e},this.onVideoBitrateChanged=e=>{this.videoMeta.videoBitrate=e?1e3*e:void 0},this.onError=(e,t)=>{this.video&&this.track.trackEvents([{eventType:r.Gv.VIDEO_ERROR,ref:"clips",host:t,provider:this.videoMeta.videoFormat??"",code:e.id,quality:d(this.videoMeta.curVideoQuality),is_auto_quality:1}])},this.context=this.statsRef===r.x.OWNER&&this.video?`profile:${this.video.data.owner_id}`:i,(0,n.l_)(this)}}var h=i(863516),l=i(90919);class u{increment(e){this.myTracker.ensureActivityCounter({activityId:e,timespentType:"screen",strict:!0}).increment()}viewEvent(){this.increment(h.f.ClipViewDAU)}publishEvent(){this.increment(h.f.ClipPublishDAU)}effectiveActiveUserEvent(e){e&&(0,n.h5)((()=>{this.viewedIds.add(e),!this.effectiveActiveUserEventSent&&this.viewedIds.size>=3&&(this.increment(h.f.ClipViewScrollDAU),this.effectiveActiveUserEventSent=!0)}))}constructor(e){this.myTracker=e,this.viewedIds=new Set,this.effectiveActiveUserEventSent=!1,(0,n.l_)(this)}}u=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===l.N?Object:l.N])],u);class p{start(){this.statTypes.forEach((e=>this.timespentCollector.start(e)))}end(){this.statTypes.forEach((e=>this.timespentCollector.end(e)))}constructor(e,t){this.timespentCollector=e,this.statTypes=t,(0,n.Gn)(this)}}var _=function(e){return e.SHORT_VIDEO_PLAYING="shortVideoPlayingTimespent",e.SHORT_VIDEO_SECTION="shortVideoSectionTimespent",e.SHORT_VIDEO_PLAYING_FULL_SCREEN="shortVideoPlayingFullScreenTimespent",e}({});const m={shortVideoPlayingTimespent:h.f.ClipView,shortVideoPlayingFullScreenTimespent:h.f.ClipViewFullScreen,shortVideoSectionTimespent:h.f.ClipSection};class v{getCounter(e){return this.myTracker.ensureActivityCounter({activityId:m[e],timespentType:"screen",strict:!1})}start(e){this.getCounter(e).startTimespent()}end(e){this.getCounter(e).stopTimespent()}constructor(e){this.myTracker=e,(0,n.l_)(this)}}v=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===l.N?Object:l.N])],v);class b extends p{constructor(e){super(e,[_.SHORT_VIDEO_PLAYING])}}b=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===v?Object:v])],b);class g extends p{constructor(e){super(e,[_.SHORT_VIDEO_SECTION])}}g=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===v?Object:v])],g);class S extends p{constructor(e){super(e,[_.SHORT_VIDEO_PLAYING_FULL_SCREEN,_.SHORT_VIDEO_PLAYING])}}S=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===v?Object:v])],S);class k{constructor(e,t,i){this.playing=e,this.section=t,this.fullScreen=i,(0,n.l_)(this)}}k=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===b?Object:b,void 0===g?Object:g,void 0===S?Object:S])],k);var y=i(164869),A=i(916533),C=i(349785);class f{apiTrackEvents(e){return this.statsApi.trackEvents({events:JSON.stringify(e)})}videoErrorEvents(e){e.forEach((e=>{this.statLog.send({name:"video_player_error",value:e})}))}constructor(e,t,i){this.statsApi=e,this.authService=t,this.statLog=i,this.trackEvents=e=>{if(!this.authService.isAuthorized)return;const t=e.filter((({eventType:e})=>[r.Gv.PLAY,r.Gv.VIDEO].includes(e)));t.length&&this.apiTrackEvents(t);const i=e.filter((({eventType:e})=>[r.Gv.VIDEO_ERROR].includes(e)));i.length&&this.videoErrorEvents(i)},(0,n.l_)(this)}}f=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===y._?Object:y._,void 0===A.u?Object:A.u,void 0===C.R?Object:C.R])],f);class E{getPlayerStatsHandlersStore(e,t){let i=this.playerStatsHandlersStoreMap.get(e);if(!i){const{video:s,autoplay:o,statsRef:n,playerType:r,feedTrackCode:a}=t;i=new c(s,o,n,r,this.track,this.dau,this.timespent,a),this.playerStatsHandlersStoreMap.set(e,i)}return i}resetPlayerStatsHandlersStore(e){this.playerStatsHandlersStoreMap.delete(e)}constructor(e,t,i){this.dau=e,this.timespent=t,this.track=i,this.playerStatsHandlersStoreMap=new Map,(0,n.l_)(this)}}E=(0,s.Cg)([o.z8.container(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===u?Object:u,void 0===k?Object:k,void 0===f?Object:f])],E)},103509:(e,t,i)=>{i.d(t,{Gv:()=>s,Xb:()=>n,x:()=>o});var s=function(e){return e.VIDEO="videoEvent",e.PLAY="playEvent",e.VIDEO_ERROR="video_error",e}({}),o=function(e){return e.TOP="clips_top",e.SUBSCRIPTIONS="clips_subscription",e.OWNER="clips_owner",e.FEED="feed",e.VIDEO="video",e.UNKNOWN="unknown",e}({}),n=function(e){return e.Q_144P="144p",e.Q_240P="240p",e.Q_360P="360p",e.Q_480P="480p",e.Q_720P="720p",e.Q_1080P="1080p",e.Q_1440P="1440p",e.Q_2160P="2160p",e.Q_4320P="4320p",e}({})},915273:(e,t,i)=>{i.d(t,{f:()=>c});var s=i(327813),o=i(978178),n=i(668650),r=i(725308),a=i(848549);class d{get isSubscribed(){return this._isSubscribed}setIsSubscribed(e){this._isSubscribed=e}async toggleSubscription(e,t){return this.isSubscribed?this.unsubscribe(e,t):this.subscribe(e,t)}toggleOptimisticSubscribe(e){this.setIsSubscribed(e)}async subscribe(e,t){try{this.toggleOptimisticSubscribe(!0);const i=await this.groupsSubscribeService.join({groupId:r.z.convertOwnerIdToGroupId(this.owner.id),...e&&{trackCode:e},...t&&{source:t}});(0,s.h5)((()=>{this.setIsSubscribed(Boolean(i))}))}catch(e){(0,a.z)(e)||this.setIsSubscribed(!1)}}async unsubscribe(e,t){try{this.toggleOptimisticSubscribe(!1);const i=await this.groupsSubscribeService.leave({groupId:r.z.convertOwnerIdToGroupId(this.owner.id),...e&&{trackCode:e},...t&&{source:t}});(0,s.h5)((()=>{this.setIsSubscribed(!Boolean(i))}))}catch(e){(0,a.z)(e)||this.setIsSubscribed(!0)}}constructor(e,t){this.owner=e,this.groupsSubscribeService=t,this._isSubscribed=this.groupsSubscribeService.getIsMember(this.owner.id)??Boolean(this.owner.data.is_member),(0,s.l_)(this)}}class c{get data(){return this._data}get id(){return this._data.id}get name(){return this._data.name}get isAdmin(){return 1===this._data.is_admin}get isSubscribed(){return Boolean(this.subscription?.isSubscribed)}get isNft(){return Boolean(this._data.is_nft_photo)}get subscribersCount(){return this._data.members_count??0}get isEditorOrAdmin(){return!!this.isAdmin&&this.adminLevel>o.y.MODERATOR}toApi(){return{...(0,s.HO)(this._data),is_member:(0,n.I)(this.isSubscribed)}}get adminLevel(){return this._data.admin_level??0}constructor(e,t){this._data=e,this.videoGroupsSubscribeService=t,this.subscription=void 0,this.videoGroupsSubscribeService?.clearOneFromCache(e.id),this.videoGroupsSubscribeService&&(this.subscription=new d(this,this.videoGroupsSubscribeService)),(0,s.l_)(this)}}},393244:(e,t,i)=>{i.d(t,{G:()=>a});var s=i(327813),o=i(725308),n=i(915273),r=i(887816);class a{static isVideoGroup(e){return e instanceof n.f}static isVideoUser(e){return e instanceof r.P}getById(e){if(o.z.isGroupId(e)){const t=o.z.convertOwnerIdToGroupId(e);return this.groupsStore.getById(t)}if(o.z.isUserId(e))return this.usersStore.getById(e)}constructor(e,t){this.groupsStore=e,this.usersStore=t,(0,s.l_)(this)}}},887816:(e,t,i)=>{i.d(t,{P:()=>a});var s=i(327813),o=i(668650),n=i(848549);class r{get isSubscribed(){return this._isSubscribed}setIsSubscribed(e){this._isSubscribed=e}async toggleSubscription(e){return this.isSubscribed?this.unsubscribe(e):this.subscribe(e)}toggleOptimisticSubscribe(e){this.setIsSubscribed(e)}async subscribe(e){try{this.toggleOptimisticSubscribe(!0);const t=await this.userSubscribeService.subscribe({userId:this.owner.data.id,...e?{trackCode:e}:{}});(0,s.h5)((()=>{this.toggleOptimisticSubscribe(Boolean(t))}))}catch(e){(0,n.z)(e)||this.toggleOptimisticSubscribe(!1)}}async unsubscribe(e){try{this.toggleOptimisticSubscribe(!1);const{success:t}=await this.userSubscribeService.unsubscribe({userId:this.owner.data.id,...e?{trackCode:e}:{}});(0,s.h5)((()=>{this.toggleOptimisticSubscribe(Boolean(t))}))}catch(e){(0,n.z)(e)||this.toggleOptimisticSubscribe(!0)}}constructor(e,t){this.owner=e,this.userSubscribeService=t,this._isSubscribed=this.userSubscribeService.getIsSubscribed(this.owner.data.id)??Boolean(this.owner.data.is_subscribed),(0,s.l_)(this)}}class a{get data(){return this._data}get name(){return`${this._data.first_name} ${this._data.last_name}`}get isSubscribed(){return Boolean(this.subscription?.isSubscribed)}get isNft(){return Boolean(this._data.is_nft)}get subscribersCount(){return this._data.followers_count??0}toApi(){return{...(0,s.HO)(this._data),is_subscribed:(0,o.I)(this.isSubscribed)}}constructor(e,t){this._data=e,this.videoUserSubscribeService=t,this.subscription=void 0,this.videoUserSubscribeService?.clearOneFromCache(e.id),this.videoUserSubscribeService&&(this.subscription=new r(this,this.videoUserSubscribeService)),(0,s.l_)(this)}}},668650:(e,t,i)=>{i.d(t,{I:()=>s});const s=e=>{if(void 0!==e)return e?1:0}},848549:(e,t,i)=>{i.d(t,{z:()=>n});var s=i(376572),o=i(696136);const n=e=>(e=>!!e&&"object"==typeof e&&"type"in e&&"network_error"===e.type)(e)&&(e=>(0,s.T)(e)&&(0,o.E)(e.error))(e)},696136:(e,t,i)=>{i.d(t,{E:()=>s});const s=e=>e instanceof DOMException&&(20===e.code||"AbortError"===e.name)},873187:(e,t,i)=>{i.d(t,{Z:()=>u});var s=i(331635),o=i(221020),n=i(327813),r=i(65299),a=i(42107),d=i(916533),c=i(97929),h=i(273193),l=i(695554);class u{constructor(e,t,i,s){this.authService=e,this.miniAppLaunchService=t,this.snackbar=i,this.langs=s,this.openInLayer=(e,t)=>new Promise((async(i,s)=>{try{const{waitConnect:s}=this.miniAppLaunchService.openInLayer({appId:51707812,actorId:this.authService.userId,location:this.ordDataToString(e,t?.service)},t),o=await s;t?.onLoaded?.(),o?.lifecycle.onDestroy.add((()=>t?.onHide?.())),o?.onCustomMessage?.((s=>{const{isAd:o=!1,predId:n="",erId:r=""}=s.payload,a={is_ad:o,ord_pred_id:n,erid:r};t?.isSnackbar&&this.showSnackbar(a,e),i(a)}))}catch(e){s(e)}})),this.showSnackbar=(e,t)=>{e.is_ad?this.snackbar.show({type:"ok",text:this.langs.getLang("global_ads_wall_post_ord_mark_as_ads_added"),duration:3e3}):!e.is_ad&&t?.is_ad&&this.snackbar.show({text:this.langs.getLang("global_ads_wall_post_ord_mark_as_ads_removed"),duration:3e3,before:{content:(0,o.Y)(r.W,{})}})},this.ordDataToString=(e,t)=>{const i=t?{...e,service:t}:e;if(i)return Object.entries(i).reduce(((e,[t,i])=>[e,e?"&":"",encodeURIComponent(t),"=",encodeURIComponent(String(i))].join("")),"")},(0,n.l_)(this)}}u=(0,s.Cg)([a.z8.global(),(0,s.Sn)("design:type",Function),(0,s.Sn)("design:paramtypes",[void 0===d.u?Object:d.u,void 0===l.z?Object:l.z,void 0===c.q?Object:c.q,void 0===h.Y?Object:h.Y])],u)},164869:(e,t,i)=>{i.d(t,{_:()=>r});var s=i(331635),o=i(42107),n=i(820282);class r extends n.S{get namespace(){return"stats"}constructor(...e){super(...e),this.trackEvents=this.makeMethod("trackEvents"),this.getBusinessCommunitySubscriptionPublicAnalytics=this.makeMethod("getBusinessCommunitySubscriptionPublicAnalytics")}}r=(0,s.Cg)([o.z8.global()],r)},617989:(e,t,i)=>{i.d(t,{C:()=>r});var s=i(331635),o=i(42107),n=i(820282);class r extends n.S{get namespace(){return"video"}constructor(...e){super(...e),this.get=this.makeMethod("get"),this.getVideoForEdit=this.makeMethod("getVideoForEdit"),this.getByIds=this.makeMethod("getByIds"),this.getOldWebAds=this.makeMethod("getOldWebAds",!0),this.getCatalogBlockItems=this.makeMethod("getCatalogBlockItems"),this.search=this.makeMethod("search"),this.edit=this.makeMethod("edit"),this.save=this.makeMethod("save"),this.delete=this.makeMethod("delete"),this.add=this.makeMethod("add"),this.getMusicMix=this.makeMethod("getMusicMix"),this.getVideoDiscover=this.makeMethod("getVideoDiscover"),this.getRecommendedLiveVideos=this.makeMethod("getRecommendedLiveVideos"),this.getVideoMusicDiscover=this.makeMethod("getVideoMusicDiscover"),this.getAlbums=this.makeMethod("getAlbums"),this.getAlbumById=this.makeMethod("getAlbumById"),this.getFromAlbum=this.makeMethod("getFromAlbum"),this.getAlbumsByVideo=this.makeMethod("getAlbumsByVideo"),this.addToAlbum=this.makeMethod("addToAlbum"),this.addVideosToPlaylist=this.makeMethod("addVideosToPlaylist"),this.getRelatedAudios=this.makeMethod("getRelatedAudios"),this.deleteVideosFromPlaylist=this.makeMethod("deleteVideosFromPlaylist"),this.addRelatedAudioToFavoritePlaylist=this.makeMethod("addRelatedAudioToFavoritePlaylist"),this.removeRelatedAudioFromFavoritePlaylist=this.makeMethod("removeRelatedAudioFromFavoritePlaylist"),this.addAlbum=this.makeMethod("addAlbum"),this.editAlbum=this.makeMethod("editAlbum"),this.deleteAlbum=this.makeMethod("deleteAlbum"),this.removeFromAlbum=this.makeMethod("removeFromAlbum"),this.reorderVideos=this.makeMethod("reorderVideos"),this.getGroupsForUploading=this.makeMethod("getGroupsForUploading"),this.encodeProgress=this.makeMethod("encodeProgress"),this.getPrivacyDictionary=this.makeMethod("getPrivacyDictionary"),this.reportComment=this.makeMethod("reportComment"),this.getPlaylistUpdateInfo=this.makeMethod("getPlaylistUpdateInfo"),this.getPlaylistThumbUploadUrl=this.makeMethod("getPlaylistThumbUploadUrl"),this.savePlaylistThumb=this.makeMethod("savePlaylistThumb"),this.savePlaylistAdditionalThumb=this.makeMethod("savePlaylistAdditionalThumb"),this.getGroupSettings=this.makeMethod("getGroupSettings"),this.publish=this.makeMethod("publish"),this.reorderAlbums=this.makeMethod("reorderAlbums"),this.restore=this.makeMethod("restore"),this.stopStreaming=this.makeMethod("stopStreaming"),this.getLiveStats=this.makeMethod("getLiveStats"),this.getComments=this.makeMethod("getComments"),this.feedVideosForYouBlockItems=this.makeMethod("feedVideosForYouBlockItems"),this.getComment=this.makeMethod("getComment"),this.agreeDisclaimer=this.makeMethod("agreeDisclaimer"),this.saveGroupSettings=this.makeMethod("saveGroupSettings"),this.pinComment=this.makeMethod("pinComment"),this.unpinComment=this.makeMethod("unpinComment"),this.deleteComment=this.makeMethod("deleteComment"),this.restoreComment=this.makeMethod("restoreComment"),this.editComment=this.makeMethod("editComment"),this.createComment=this.makeMethod("createComment"),this.deleteThread=this.makeMethod("deleteThread"),this.restoreThread=this.makeMethod("restoreThread"),this.getStatsTokenWithPrefetch=this.makeMethod("getStatsToken",!0),this.getStatsToken=this.makeMethod("getStatsToken"),this.getPlayerConfigWithPrefetch=this.makeMethod("getPlayerConfig",!0),this.getPlayerConfig=this.makeMethod("getPlayerConfig"),this.saveUploadedThumb=this.makeMethod("saveUploadedThumb"),this.subscribeChooseRelevantAuthors=this.makeMethod("subscribeChooseRelevantAuthors"),this.subscribeGetRelevantAuthors=this.makeMethod("subscribeGetRelevantAuthors"),this.getThumbUploadUrl=this.makeMethod("getThumbUploadUrl"),this.viewSegments=this.makeMethod("viewSegments"),this.subscribeToAlbum=this.makeMethod("subscribeToAlbum"),this.unsubscribeFromAlbum=this.makeMethod("unsubscribeFromAlbum"),this.moderAction=this.makeMethod("moderAction"),this.updateMovieInfo=this.makeMethod("updateMovieInfo"),this.getMovieInfo=this.makeMethod("getMovieInfo"),this.getMovieInfoDropdownData=this.makeMethod("getMovieInfoDropdownData"),this.getModerationLog=this.makeMethod("getModerationLog"),this.getCountriesForGeoBlockSection=this.makeMethod("getCountriesForGeoBlockSection"),this.geoBlockSection=this.makeMethod("geoBlockSection"),this.unblockSection=this.makeMethod("unblockSection"),this.getGeoBlockSectionInfo=this.makeMethod("getGeoBlockSectionInfo"),this.removeViewingHistoryRecords=this.makeMethod("removeViewingHistoryRecords"),this.clearViewingHistoryRecords=this.makeMethod("clearViewingHistoryRecords"),this.getExternalVideoHash=this.makeMethod("getExternalVideoHash"),this.liveSubscribe=this.makeMethod("liveSubscribe"),this.liveUnsubscribe=this.makeMethod("liveUnsubscribe"),this.liveHeartbeat=this.makeMethod("liveHeartbeat"),this.liveStopHeartbeat=this.makeMethod("liveStopHeartbeat"),this.getLiveStatus=this.makeMethod("getLiveStatus"),this.longPolling=this.makeMethod("getLongPollServer"),this.bulkEdit=this.makeMethod("bulkEdit"),this.bulkOperationRedo=this.makeMethod("bulkEditRedo"),this.bulkEditCancel=this.makeMethod("bulkEditCancel"),this.bulkEditGetTasks=this.makeMethod("bulkEditGetTasks"),this.notInterested=this.makeMethod("notInterested"),this.notRecommendOwner=this.makeMethod("notRecommendOwner"),this.checkLink=this.makeMethod("checkActionLink"),this.getHashes=this.makeMethod("getHashes"),this.getUserInfo=this.makeMethod("getUserInfo"),this.getSnackBarInfo=this.makeMethod("getSnackBarInfo"),this.trackSnackBarEvent=this.makeMethod("trackSnackBarEvent"),this.getForPlay=this.makeMethod("getForPlay"),this.getEmbed=this.makeMethod("getEmbed")}}r=(0,s.Cg)([o.z8.global()],r)},399902:(e,t,i)=>{i.d(t,{A:()=>n,G:()=>o});var s=i(684574);function o(e,t,i=!0){if(!t)return e;const[o,n]=e.split("?"),r={},a=[];return n&&n.split("&").map((e=>{const[i,s]=e.split("=");i in t||(t[i]=s)})),Object.keys(t).forEach((e=>{const i=t[e];var o;("string"==typeof(o=i)&&o||(0,s.E)(i))&&(r[e]=i)})),Object.keys(r).forEach((e=>{const t=i?encodeURIComponent(r[e]):r[e];a.push(`${e}=${t}`)})),0===a.length?o:`${o}?${a.join("&")}`}const n=e=>{try{return new URL(e),!0}catch{}return!1}},645964:(e,t,i)=>{i.d(t,{Cg:()=>a,Jp:()=>d,L:()=>n,Li:()=>o,dh:()=>r});var s=i(318976);const o=e=>!!e&&"first_name"in e,n=e=>!!e&&"name"in e;function r(e,t=!1,i="/"){let s=i;return e&&(n(e)?s+=e.screen_name||`club${e.id}`:s+=e.screen_name||e.domain||`id${e.id}`),t?window.location.origin+s:s}function a(e){let t="";return e?(e.first_name&&(t+=e.first_name.trim()),e.last_name&&(t+=` ${e.last_name.trim()}`),e.maiden_name&&e.sex===s.F.FEMALE&&(t+=` (${e.maiden_name.trim()})`),t):t}function d(e){let t="";return e.first_name&&(t+=e.first_name.trim()),e.last_name&&(t+=` ${e.last_name.trim().slice(0,1)}.`),t}},325159:(e,t,i)=>{i.d(t,{R:()=>g});var s=i(221020),o=i(634164),n=i(516427),r=i(815287),a=i(638945);const d=(0,r.createContext)({isSingleChild:!1,size:"m"}),c=d.Provider,h={s:void 0,m:"vkitContentBadgeIconSlot__rootSizeM--A2pMy",l:"vkitContentBadgeIconSlot__rootSizeL--Uqx0T"},l={s:void 0,m:"vkitContentBadgeIconSlot__rootSingleIconSizeM--lpRMf",l:"vkitContentBadgeIconSlot__rootSingleIconSizeL--h93Np"},u="vkitContentBadge__root--UCuCT",p="vkitContentBadge__content--5R9vk",_="vkitContentBadge__rootCapsule--Xq6i4",m={primary:"vkitContentBadge__rootModePrimary--zK5w6",secondary:"vkitContentBadge__rootModeSecondary--DXcvy",outline:"vkitContentBadge__rootModeOutline--cJxN4"},v={s:"vkitContentBadge__rootSizeS--WzGpd",m:"vkitContentBadge__rootSizeM--3ipwO",l:"vkitContentBadge__rootSizeL--0QG9W"},b={accent:"vkitContentBadge__rootAppearanceAccent--GAL9F","accent-red":"vkitContentBadge__rootAppearanceAccentRed--SHY0U","accent-orange-fire":"vkitContentBadge__rootAppearanceAccentOrangeFire--bHX4C","accent-orange":"vkitContentBadge__rootAppearanceAccentOrange--LkysC","accent-orange-peach":"vkitContentBadge__rootAppearanceAccentOrangePeach--Ran1U","accent-green":"vkitContentBadge__rootAppearanceAccentGreen--g6SW8","accent-secondary":"vkitContentBadge__rootAppearanceAccentSecondary--0B5we","accent-tint":"vkitContentBadge__rootAppearanceAccentTint--JQE4N","accent-blue":"vkitContentBadge__rootAppearanceAccentBlue--tUiMm","accent-purple":"vkitContentBadge__rootAppearanceAccentPurple--vnryz","accent-violet":"vkitContentBadge__rootAppearanceAccentViolet--jYoNa","accent-raspberry-pink":"vkitContentBadge__rootAppearanceAccentRaspberryPink--Tyrx0","accent-pink":"vkitContentBadge__rootAppearanceAccentPink--kAJy1","accent-gray":"vkitContentBadge__rootAppearanceAccentGray--gRe8E",neutral:"vkitContentBadge__rootAppearanceNeutral--ycyRb",overlay:"vkitContentBadge__rootAppearanceOverlay--9Ux07"},g=Object.assign((({children:e,capsule:t,className:i,size:d="m",mode:h="primary",appearance:l="accent",...g})=>{const S="l"===d?a.tW:a.HL;return(0,s.Y)(n.SB4,{className:(0,o.$)(u,m[h],v[d],b[l],"s"!==d&&t&&_,i),...g,children:(0,s.Y)(S,{weight:"2",className:p,children:(0,s.Y)(c,{value:{isSingleChild:1===r.Children.count(e),size:d},children:e})})})}),{IconSlot:({getRootRef:e,children:t})=>{const{size:i,isSingleChild:o}=(0,r.useContext)(d);return"s"===i?null:(0,s.Y)("div",{ref:e,className:o?l[i]:h[i],children:t})}})},10929:(e,t,i)=>{i.d(t,{T:()=>a});var s=i(221020),o=i(634164),n=i(516427);const r={default:void 0,plain:void 0,overlay:"vkitTextarea__rootOverlay--k5hDj"},a=({mode:e="default",className:t,...i})=>(0,s.Y)(n.TMX,{className:(0,o.$)(r[e],t),mode:"overlay"===e?void 0:e,...i})},741509:(e,t,i)=>{i.d(t,{r:()=>h});var s=i(221020),o=i(634164);const n="vkitEqualizer__equalizer--hegXJ",r="vkitEqualizer__row--Cbhyy",a="vkitEqualizer__equalizerActive--azxaa",d="vkitEqualizer__equalizerPause--0dRaN",c={stretched:"vkitEqualizer__equalizerStretched--fcQ7P",s:void 0},h=({playing:e,className:t,size:i="s","data-testid":h="equalizer"})=>(0,s.FD)("div",{className:(0,o.$)(n,a,!e&&d,c[i],t),"data-testid":h,children:[(0,s.Y)("i",{className:r}),(0,s.Y)("i",{className:r}),(0,s.Y)("i",{className:r}),(0,s.Y)("i",{className:r})]})}}]),"undefined"!=typeof window&&window.stManager?.done?.("dist/core_spa/chunks/72251.6da7c96b.js")}catch(e){throw"undefined"!=typeof window&&window.stManager?.fail?.("dist/core_spa/chunks/72251.6da7c96b.js",e),e}